<style> code { white-space: pre-wrap; display: block; background-color: #eee; }.executed { background-color: #afa; }.reverted { background-color: #ffa; }.unexecuted { background-color: #faa; }.neutral { background-color: #eee; }</style><b>/code/contracts/hub/ControllerHub.sol</b>
<code>
   1 |     | <span class='unexecuted'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>pragma solidity ^0.8.24;</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>import {Initializable} from &quot;@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol&quot;;</span>
   5 |     | <span class='neutral'>import {UUPSUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol&quot;;</span>
   6 |     | <span class='neutral'>import {AccessControlUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/access/AccessControlUpgradeable.sol&quot;;</span>
   7 |     | <span class='neutral'>import {PausableUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol&quot;;</span>
   8 |     | <span class='neutral'>import {ReentrancyGuardUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol&quot;;</span>
   9 |     | <span class='neutral'>import {SafeCast} from &quot;@openzeppelin/contracts/utils/math/SafeCast.sol&quot;;</span>
  10 |     | <span class='neutral'>import {Math} from &quot;@openzeppelin/contracts/utils/math/Math.sol&quot;;</span>
  11 |     | <span class='neutral'>import {IPriceOracleRouter} from &quot;../interfaces/IPriceOracleRouter.sol&quot;;</span>
  12 |     | <span class='neutral'>import {ISpokeYieldVault} from &quot;../interfaces/ISpokeYieldVault.sol&quot;;</span>
  13 |     | <span class='neutral'>import {IERC20} from &quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;;</span>
  14 |     | <span class='neutral'></span>
  15 |     | <span class='neutral'>/// @title ControllerHub</span>
  16 |     | <span class='neutral'>/// @notice Lending/borrowing controller hub with RAY fixed-point math and kinked IRM.</span>
  17 | *   | <span class='executed'>contract ControllerHub is</span>
  18 |     | <span class='neutral'>    Initializable,</span>
  19 |     | <span class='neutral'>    UUPSUpgradeable,</span>
  20 |     | <span class='neutral'>    AccessControlUpgradeable,</span>
  21 |     | <span class='neutral'>    PausableUpgradeable,</span>
  22 |     | <span class='neutral'>    ReentrancyGuardUpgradeable</span>
  23 |     | <span class='neutral'>{</span>
  24 |     | <span class='neutral'>    using SafeCast for uint256;</span>
  25 |     | <span class='neutral'></span>
  26 |     | <span class='neutral'>    // Roles</span>
  27 | *   | <span class='executed'>    bytes32 public constant GOVERNOR_ROLE = keccak256(&quot;GOVERNOR_ROLE&quot;);</span>
  28 |     | <span class='neutral'></span>
  29 |     | <span class='neutral'>    // Constants</span>
  30 |     | <span class='unexecuted'>    uint256 public constant RAY = 1e27;</span>
  31 |     | <span class='unexecuted'>    uint256 public constant WAD = 1e18;</span>
  32 | *   | <span class='executed'>    uint256 public constant BPS = 10_000;</span>
  33 |     | <span class='neutral'></span>
  34 |     | <span class='neutral'>    struct MarketParams {</span>
  35 |     | <span class='neutral'>        uint16 ltvBps;</span>
  36 |     | <span class='neutral'>        uint16 liqThresholdBps;</span>
  37 |     | <span class='neutral'>        uint16 reserveFactorBps;</span>
  38 |     | <span class='neutral'>        uint128 borrowCap;</span>
  39 |     | <span class='neutral'>        uint16 kinkBps; // utilization kink in bps</span>
  40 |     | <span class='neutral'>        uint128 slope1Ray; // per-second rate in ray below kink</span>
  41 |     | <span class='neutral'>        uint128 slope2Ray; // per-second rate in ray above kink</span>
  42 |     | <span class='neutral'>        uint128 baseRateRay; // per-second base rate</span>
  43 |     | <span class='neutral'>        address lst; // collateral LST token associated for this market</span>
  44 |     | <span class='neutral'>        address vault; // spoke vault to seize shares on</span>
  45 |     | <span class='neutral'>    }</span>
  46 |     | <span class='neutral'></span>
  47 |     | <span class='neutral'>    struct MarketState {</span>
  48 |     | <span class='neutral'>        uint256 supplyIndexRay;</span>
  49 |     | <span class='neutral'>        uint256 debtIndexRay;</span>
  50 |     | <span class='neutral'>        uint40 lastAccrual;</span>
  51 |     | <span class='neutral'>        uint216 totalBorrows; // in asset units</span>
  52 |     | <span class='neutral'>        uint216 totalReserves; // in asset units</span>
  53 |     | <span class='neutral'>    }</span>
  54 |     | <span class='neutral'></span>
  55 |     | <span class='neutral'>    // Per market and user storage</span>
  56 |     | <span class='unexecuted'>    mapping(address =&gt; MarketParams) public marketParams; // asset =&gt; params</span>
  57 |     | <span class='unexecuted'>    mapping(address =&gt; MarketState) public marketState; // asset =&gt; state</span>
  58 |     | <span class='unexecuted'>    mapping(address =&gt; mapping(address =&gt; bool)) public isEntered; // user =&gt; lst =&gt; entered as collateral</span>
  59 |     | <span class='unexecuted'>    mapping(address =&gt; mapping(address =&gt; uint256)) public debtPrincipal; // user =&gt; asset =&gt; principal amount</span>
  60 |     | <span class='neutral'>    mapping(address =&gt; mapping(address =&gt; uint256)) public debtIndexSnapshot; // user =&gt; asset =&gt; debt index at last update</span>
  61 |     | <span class='neutral'>    // Market enumeration for production multi-market accounting</span>
  62 |     | <span class='neutral'>    address[] private _markets;</span>
  63 |     | <span class='unexecuted'>    mapping(address =&gt; bool) public isMarket;</span>
  64 |     | <span class='neutral'></span>
  65 |     | <span class='neutral'>    // External dependencies</span>
  66 |     | <span class='unexecuted'>    IPriceOracleRouter public oracle;</span>
  67 |     | <span class='neutral'></span>
  68 |     | <span class='neutral'>    // Events</span>
  69 |     | <span class='neutral'>    event MarketListed(</span>
  70 |     | <span class='neutral'>        address indexed asset,</span>
  71 |     | <span class='neutral'>        uint16 ltvBps,</span>
  72 |     | <span class='neutral'>        uint16 liqThresholdBps,</span>
  73 |     | <span class='neutral'>        uint16 reserveFactorBps,</span>
  74 |     | <span class='neutral'>        uint16 kinkBps,</span>
  75 |     | <span class='neutral'>        uint64 baseRateRayPerSec,</span>
  76 |     | <span class='neutral'>        uint64 slope1RayPerSec,</span>
  77 |     | <span class='neutral'>        uint64 slope2RayPerSec,</span>
  78 |     | <span class='neutral'>        uint256 borrowCap</span>
  79 |     | <span class='neutral'>    );</span>
  80 |     | <span class='neutral'>    event MarketParamsUpdated(</span>
  81 |     | <span class='neutral'>        address indexed asset,</span>
  82 |     | <span class='neutral'>        uint16 ltvBps,</span>
  83 |     | <span class='neutral'>        uint16 liqThresholdBps,</span>
  84 |     | <span class='neutral'>        uint16 reserveFactorBps,</span>
  85 |     | <span class='neutral'>        uint16 kinkBps,</span>
  86 |     | <span class='neutral'>        uint64 baseRateRayPerSec,</span>
  87 |     | <span class='neutral'>        uint64 slope1RayPerSec,</span>
  88 |     | <span class='neutral'>        uint64 slope2RayPerSec,</span>
  89 |     | <span class='neutral'>        uint256 borrowCap</span>
  90 |     | <span class='neutral'>    );</span>
  91 |     | <span class='neutral'>    event Accrued(</span>
  92 |     | <span class='neutral'>        address indexed asset,</span>
  93 |     | <span class='neutral'>        uint256 supplyIndexRay,</span>
  94 |     | <span class='neutral'>        uint256 debtIndexRay,</span>
  95 |     | <span class='neutral'>        uint256 totalBorrows,</span>
  96 |     | <span class='neutral'>        uint256 totalReserves,</span>
  97 |     | <span class='neutral'>        uint256 timestamp</span>
  98 |     | <span class='neutral'>    );</span>
  99 |     | <span class='neutral'>    event EnterMarket(address indexed user, address indexed lst);</span>
 100 |     | <span class='neutral'>    event ExitMarket(address indexed user, address indexed lst);</span>
 101 |     | <span class='neutral'>    // KPI/events for off-chain observability and tests</span>
 102 |     | <span class='neutral'>    event BorrowRequested(</span>
 103 |     | <span class='neutral'>        address indexed user, address indexed asset, uint256 amount, uint256 dstChainId, bytes32 actionId, uint256 ts</span>
 104 |     | <span class='neutral'>    );</span>
 105 |     | <span class='neutral'>    event BorrowDecision(</span>
 106 |     | <span class='neutral'>        address indexed user, address indexed asset, uint256 amount, uint8 routesUsed, bytes32 actionId, uint256 ts</span>
 107 |     | <span class='neutral'>    );</span>
 108 |     | <span class='neutral'>    event IRMRateUpdated(address indexed asset, uint256 newBorrowRateRayPerSec, uint256 utilizationRay, uint256 ts);</span>
 109 |     | <span class='neutral'>    event BorrowPaused(address indexed asset, uint256 ts);</span>
 110 |     | <span class='neutral'>    event Borrow(</span>
 111 |     | <span class='neutral'>        address indexed user,</span>
 112 |     | <span class='neutral'>        address indexed asset,</span>
 113 |     | <span class='neutral'>        uint256 amount,</span>
 114 |     | <span class='neutral'>        uint256 debtIndexRay,</span>
 115 |     | <span class='neutral'>        uint256 hfBps,</span>
 116 |     | <span class='neutral'>        uint256 dstChainId,</span>
 117 |     | <span class='neutral'>        bytes32 actionId</span>
 118 |     | <span class='neutral'>    );</span>
 119 |     | <span class='neutral'>    event Repay(</span>
 120 |     | <span class='neutral'>        address indexed user,</span>
 121 |     | <span class='neutral'>        address indexed asset,</span>
 122 |     | <span class='neutral'>        uint256 amount,</span>
 123 |     | <span class='neutral'>        uint256 debtIndexRay,</span>
 124 |     | <span class='neutral'>        uint256 srcChainId,</span>
 125 |     | <span class='neutral'>        bytes32 actionId</span>
 126 |     | <span class='neutral'>    );</span>
 127 |     | <span class='neutral'>    event Liquidate(</span>
 128 |     | <span class='neutral'>        address indexed liquidator,</span>
 129 |     | <span class='neutral'>        address indexed user,</span>
 130 |     | <span class='neutral'>        address indexed repayAsset,</span>
 131 |     | <span class='neutral'>        uint256 repayAmount,</span>
 132 |     | <span class='neutral'>        address seizeLst,</span>
 133 |     | <span class='neutral'>        uint256 seizeShares,</span>
 134 |     | <span class='neutral'>        uint256 discountBps,</span>
 135 |     | <span class='neutral'>        bytes32 actionId</span>
 136 |     | <span class='neutral'>    );</span>
 137 |     | <span class='neutral'>    event BorrowCapSet(address indexed asset, uint256 cap);</span>
 138 |     | <span class='neutral'>    event PauseSet(bool deposits, bool borrows, bool bridge, bool liquidations);</span>
 139 |     | <span class='neutral'>    event GovernorProposed(address indexed currentGovernor, address indexed pendingGovernor);</span>
 140 |     | <span class='neutral'>    event GovernorAccepted(address indexed previousGovernor, address indexed newGovernor);</span>
 141 |     | <span class='neutral'></span>
 142 |     | <span class='neutral'>    // Errors</span>
 143 |     | <span class='neutral'>    error MarketNotListed();</span>
 144 |     | <span class='neutral'>    error InvalidParams();</span>
 145 |     | <span class='neutral'>    error ExceedsBorrowCap();</span>
 146 |     | <span class='neutral'>    error InsufficientCollateral();</span>
 147 |     | <span class='neutral'>    error NotEnteredMarket();</span>
 148 |     | <span class='neutral'></span>
 149 |     | <span class='neutral'>    struct Liq {</span>
 150 |     | <span class='neutral'>        uint256 priceLst;</span>
 151 |     | <span class='neutral'>        uint256 priceAsset;</span>
 152 |     | <span class='neutral'>        uint256 ar;</span>
 153 |     | <span class='neutral'>        uint256 shares;</span>
 154 |     | <span class='neutral'>    }</span>
 155 |     | <span class='neutral'>    // Policy constants</span>
 156 |     | <span class='neutral'></span>
 157 | *   | <span class='executed'>    uint256 public constant CLOSE_FACTOR_BPS = 5000; // 50%</span>
 158 |     | <span class='unexecuted'>    uint256 public constant LIQ_BONUS_BPS = 1000; // 10%</span>
 159 |     | <span class='neutral'></span>
 160 |     | <span class='neutral'>    // Pause flags</span>
 161 |     | <span class='unexecuted'>    bool public borrowsPaused;</span>
 162 |     | <span class='unexecuted'>    bool public liquidationsPaused;</span>
 163 |     | <span class='unexecuted'>    address public governor;</span>
 164 |     | <span class='unexecuted'>    address public pendingGovernor;</span>
 165 |     | <span class='neutral'></span>
 166 |     | <span class='neutral'>    /// @notice Set borrow or liquidation pause flags.</span>
 167 |     | <span class='neutral'>    function setPause(bool _borrows, bool _liquidations) external onlyRole(GOVERNOR_ROLE) {</span>
 168 | *   | <span class='executed'>        borrowsPaused = _borrows;</span>
 169 |     | <span class='neutral'>        liquidationsPaused = _liquidations;</span>
 170 | *   | <span class='executed'>        emit PauseSet(false, _borrows, false, _liquidations);</span>
 171 | *   | <span class='executed'>        if (_borrows) {</span>
 172 |     | <span class='neutral'>            // Global pause (asset-less); emit with zero address for compatibility</span>
 173 | *   | <span class='executed'>            emit BorrowPaused(address(0), block.timestamp);</span>
 174 |     | <span class='neutral'>        }</span>
 175 |     | <span class='neutral'>    }</span>
 176 |     | <span class='neutral'></span>
 177 |     | <span class='neutral'>    // ---------------- internal helpers ----------------</span>
 178 | *   | <span class='executed'>    function _price1e18(address asset) internal view returns (uint256 price1e18) {</span>
 179 | *   | <span class='executed'>        (uint256 price, uint8 dec,) = oracle.getPrice(asset);</span>
 180 | *   | <span class='executed'>        if (dec == 18) return price;</span>
 181 | *   | <span class='executed'>        if (dec &lt; 18) return price * (10 ** (18 - dec));</span>
 182 |     | <span class='unexecuted'>        return price / (10 ** (dec - 18));</span>
 183 |     | <span class='neutral'>    }</span>
 184 |     | <span class='neutral'></span>
 185 | *   | <span class='executed'>    function _actionId(string memory msgType, address user, address asset, uint256 amount, uint256 nonce)</span>
 186 |     | <span class='neutral'>        internal</span>
 187 |     | <span class='neutral'>        view</span>
 188 |     | <span class='neutral'>        returns (bytes32)</span>
 189 |     | <span class='neutral'>    {</span>
 190 | *   | <span class='executed'>        return keccak256(</span>
 191 | *   | <span class='executed'>            abi.encode(</span>
 192 |     | <span class='neutral'>                msgType,</span>
 193 | *   | <span class='executed'>                uint256(1),</span>
 194 | *   | <span class='executed'>                block.chainid,</span>
 195 | *   | <span class='executed'>                address(this),</span>
 196 |     | <span class='neutral'>                block.chainid,</span>
 197 |     | <span class='neutral'>                address(this),</span>
 198 |     | <span class='neutral'>                user,</span>
 199 |     | <span class='neutral'>                asset,</span>
 200 |     | <span class='neutral'>                amount,</span>
 201 |     | <span class='neutral'>                nonce</span>
 202 |     | <span class='neutral'>            )</span>
 203 |     | <span class='neutral'>        );</span>
 204 |     | <span class='neutral'>    }</span>
 205 |     | <span class='neutral'></span>
 206 |     | <span class='neutral'>    /// @notice Decrease user debt by a repay amount in asset units; rounds in principal space and converts back to assets.</span>
 207 |     | <span class='neutral'>    function _decreaseDebt(address user, address asset, uint256 idxRay, uint256 repayAmountAsset)</span>
 208 |     | <span class='neutral'>        internal</span>
 209 |     | <span class='neutral'>        returns (uint256 actualRepaidAsset)</span>
 210 |     | <span class='neutral'>    {</span>
 211 |     | <span class='neutral'>        MarketState storage s = marketState[asset];</span>
 212 |     | <span class='unexecuted'>        uint256 rp = (repayAmountAsset * RAY) / idxRay; // repay principal units</span>
 213 |     | <span class='neutral'>        uint256 princ = debtPrincipal[user][asset];</span>
 214 |     | <span class='unexecuted'>        if (rp &gt; princ) rp = princ;</span>
 215 |     | <span class='unexecuted'>        debtPrincipal[user][asset] = princ - rp;</span>
 216 |     | <span class='neutral'>        debtIndexSnapshot[user][asset] = idxRay;</span>
 217 |     | <span class='neutral'>        // convert capped rp back to asset units as actual repaid</span>
 218 |     | <span class='unexecuted'>        actualRepaidAsset = Math.mulDiv(rp, idxRay, RAY);</span>
 219 |     | <span class='unexecuted'>        uint256 tb = s.totalBorrows;</span>
 220 |     | <span class='unexecuted'>        if (actualRepaidAsset &gt; tb) actualRepaidAsset = tb;</span>
 221 | *   | <span class='executed'>        s.totalBorrows = SafeCast.toUint216(tb - actualRepaidAsset);</span>
 222 |     | <span class='neutral'>    }</span>
 223 |     | <span class='neutral'></span>
 224 |     | <span class='neutral'>    function _increaseDebt(address user, address asset, uint256 amount) internal returns (uint256 newPrincipal) {</span>
 225 |     | <span class='neutral'>        MarketState storage s = marketState[asset];</span>
 226 | *   | <span class='executed'>        uint256 idx = s.debtIndexRay;</span>
 227 | *   | <span class='executed'>        uint256 addPrincipal = (amount * RAY) / idx;</span>
 228 | *   | <span class='executed'>        newPrincipal = debtPrincipal[user][asset] + addPrincipal;</span>
 229 |     | <span class='neutral'>        debtPrincipal[user][asset] = newPrincipal;</span>
 230 |     | <span class='neutral'>        debtIndexSnapshot[user][asset] = idx;</span>
 231 |     | <span class='neutral'>    }</span>
 232 |     | <span class='neutral'></span>
 233 | *   | <span class='executed'>    function _isBorrowAllowed(address user, address asset, uint256 amount) internal view returns (bool) {</span>
 234 | *   | <span class='executed'>        MarketParams storage p = marketParams[asset];</span>
 235 | *   | <span class='executed'>        if (!isEntered[user][p.lst]) return false;</span>
 236 | *   | <span class='executed'>        uint256 lstBal = IERC20(p.lst).balanceOf(user);</span>
 237 | *   | <span class='executed'>        uint256 priceLst1e18 = _price1e18(p.lst);</span>
 238 | *   | <span class='executed'>        uint256 priceAsset1e18 = _price1e18(asset);</span>
 239 | *   | <span class='executed'>        uint256 collValueWad = Math.mulDiv(lstBal, priceLst1e18, 1e18);</span>
 240 | *   | <span class='executed'>        uint256 curDebt = currentDebt(user, asset);</span>
 241 | *   | <span class='executed'>        uint256 curDebtValueWad = Math.mulDiv(curDebt, priceAsset1e18, 1e18);</span>
 242 | *   | <span class='executed'>        uint256 addDebtValueWad = Math.mulDiv(amount, priceAsset1e18, 1e18);</span>
 243 | *   | <span class='executed'>        uint256 maxDebtWad = (collValueWad * uint256(p.ltvBps)) / BPS;</span>
 244 | *   | <span class='executed'>        return curDebtValueWad + addDebtValueWad &lt;= maxDebtWad;</span>
 245 |     | <span class='neutral'>    }</span>
 246 |     | <span class='neutral'></span>
 247 |     | <span class='neutral'>    function initialize(address initialGovernor, address oracle_) external initializer {</span>
 248 |     | <span class='neutral'>        __UUPSUpgradeable_init();</span>
 249 |     | <span class='neutral'>        __AccessControl_init();</span>
 250 |     | <span class='neutral'>        __Pausable_init();</span>
 251 |     | <span class='neutral'>        __ReentrancyGuard_init();</span>
 252 | *   | <span class='executed'>        _grantRole(DEFAULT_ADMIN_ROLE, initialGovernor);</span>
 253 | *   | <span class='executed'>        _grantRole(GOVERNOR_ROLE, initialGovernor);</span>
 254 | *   | <span class='executed'>        oracle = IPriceOracleRouter(oracle_);</span>
 255 | *   | <span class='executed'>        governor = initialGovernor;</span>
 256 |     | <span class='neutral'>    }</span>
 257 |     | <span class='neutral'></span>
 258 |     | <span class='neutral'>    function _authorizeUpgrade(address) internal override onlyRole(GOVERNOR_ROLE) {}</span>
 259 |     | <span class='neutral'></span>
 260 |     | <span class='neutral'>    // --- Two-step governor ---</span>
 261 |     | <span class='neutral'>    function proposeGovernor(address newGov) external onlyRole(GOVERNOR_ROLE) {</span>
 262 |     | <span class='unexecuted'>        if (newGov == address(0)) revert InvalidParams();</span>
 263 |     | <span class='unexecuted'>        pendingGovernor = newGov;</span>
 264 |     | <span class='unexecuted'>        emit GovernorProposed(governor, newGov);</span>
 265 |     | <span class='neutral'>    }</span>
 266 |     | <span class='neutral'></span>
 267 |     | <span class='neutral'>    function acceptGovernor() external {</span>
 268 |     | <span class='unexecuted'>        require(msg.sender == pendingGovernor, &quot;NOT_PENDING&quot;);</span>
 269 |     | <span class='unexecuted'>        address prev = governor;</span>
 270 |     | <span class='unexecuted'>        _grantRole(DEFAULT_ADMIN_ROLE, msg.sender);</span>
 271 |     | <span class='unexecuted'>        _grantRole(GOVERNOR_ROLE, msg.sender);</span>
 272 |     | <span class='unexecuted'>        _revokeRole(GOVERNOR_ROLE, prev);</span>
 273 |     | <span class='unexecuted'>        _revokeRole(DEFAULT_ADMIN_ROLE, prev);</span>
 274 |     | <span class='neutral'>        governor = msg.sender;</span>
 275 |     | <span class='neutral'>        pendingGovernor = address(0);</span>
 276 |     | <span class='unexecuted'>        emit GovernorAccepted(prev, msg.sender);</span>
 277 |     | <span class='neutral'>    }</span>
 278 |     | <span class='neutral'></span>
 279 |     | <span class='neutral'>    // Admin: list market</span>
 280 |     | <span class='neutral'>    function listMarket(address asset, bytes calldata params) external onlyRole(GOVERNOR_ROLE) {</span>
 281 | *   | <span class='executed'>        MarketParams memory p = abi.decode(params, (MarketParams));</span>
 282 |     | <span class='neutral'>        // Policy bounds: LTV &lt; LT; kink within [1000, 9500]; close factor/bonus constants already bounded; slope/base rays must be reasonable.</span>
 283 | *   | <span class='executed'>        if (asset == address(0) || p.lst == address(0)) revert InvalidParams();</span>
 284 | *   | <span class='executed'>        if (p.liqThresholdBps &lt;= p.ltvBps) revert InvalidParams();</span>
 285 | *   | <span class='executed'>        if (p.kinkBps &lt; 1000 || p.kinkBps &gt; 9500) revert InvalidParams();</span>
 286 |     | <span class='neutral'>        if (CLOSE_FACTOR_BPS &gt; 5000) revert InvalidParams();</span>
 287 |     | <span class='neutral'>        if (LIQ_BONUS_BPS &gt; 1000) revert InvalidParams();</span>
 288 | *   | <span class='executed'>        if (p.kinkBps &lt; 1000 || p.kinkBps &gt; 9500) revert InvalidParams();</span>
 289 |     | <span class='neutral'>        // Reserve factor ≤ 50%</span>
 290 | *   | <span class='executed'>        if (p.reserveFactorBps &gt; 5000) revert InvalidParams();</span>
 291 |     | <span class='neutral'>        // Nonzero indices params</span>
 292 | *   | <span class='executed'>        if (p.slope2Ray &lt; p.slope1Ray) revert InvalidParams();</span>
 293 |     | <span class='neutral'>        marketParams[asset] = p;</span>
 294 | *   | <span class='executed'>        if (!isMarket[asset]) {</span>
 295 |     | <span class='neutral'>            isMarket[asset] = true;</span>
 296 | *   | <span class='executed'>            _markets.push(asset);</span>
 297 |     | <span class='neutral'>        }</span>
 298 | *   | <span class='executed'>        marketState[asset] = MarketState({</span>
 299 |     | <span class='neutral'>            supplyIndexRay: RAY,</span>
 300 |     | <span class='neutral'>            debtIndexRay: RAY,</span>
 301 | *   | <span class='executed'>            lastAccrual: uint40(block.timestamp),</span>
 302 |     | <span class='neutral'>            totalBorrows: 0,</span>
 303 |     | <span class='neutral'>            totalReserves: 0</span>
 304 |     | <span class='neutral'>        });</span>
 305 | *   | <span class='executed'>        emit MarketListed(</span>
 306 |     | <span class='neutral'>            asset,</span>
 307 |     | <span class='neutral'>            p.ltvBps,</span>
 308 |     | <span class='neutral'>            p.liqThresholdBps,</span>
 309 |     | <span class='neutral'>            p.reserveFactorBps,</span>
 310 |     | <span class='neutral'>            p.kinkBps,</span>
 311 |     | <span class='neutral'>            uint64(p.baseRateRay),</span>
 312 |     | <span class='neutral'>            uint64(p.slope1Ray),</span>
 313 |     | <span class='neutral'>            uint64(p.slope2Ray),</span>
 314 |     | <span class='neutral'>            p.borrowCap</span>
 315 |     | <span class='neutral'>        );</span>
 316 |     | <span class='neutral'>    }</span>
 317 |     | <span class='neutral'></span>
 318 |     | <span class='neutral'>    // Admin: update params</span>
 319 |     | <span class='neutral'>    function setParams(address asset, bytes calldata params) external onlyRole(GOVERNOR_ROLE) {</span>
 320 |     | <span class='unexecuted'>        MarketParams memory p = abi.decode(params, (MarketParams));</span>
 321 |     | <span class='unexecuted'>        if (p.lst == address(0)) revert InvalidParams();</span>
 322 |     | <span class='unexecuted'>        if (p.liqThresholdBps &lt;= p.ltvBps) revert InvalidParams();</span>
 323 |     | <span class='unexecuted'>        if (p.kinkBps &lt; 1000 || p.kinkBps &gt; 9500) revert InvalidParams();</span>
 324 |     | <span class='neutral'>        if (CLOSE_FACTOR_BPS &gt; 5000) revert InvalidParams();</span>
 325 |     | <span class='neutral'>        if (LIQ_BONUS_BPS &gt; 1000) revert InvalidParams();</span>
 326 |     | <span class='unexecuted'>        if (p.kinkBps &lt; 1000 || p.kinkBps &gt; 9500) revert InvalidParams();</span>
 327 |     | <span class='unexecuted'>        if (p.reserveFactorBps &gt; 5000) revert InvalidParams();</span>
 328 |     | <span class='unexecuted'>        if (p.slope2Ray &lt; p.slope1Ray) revert InvalidParams();</span>
 329 |     | <span class='neutral'>        marketParams[asset] = p;</span>
 330 |     | <span class='unexecuted'>        emit MarketParamsUpdated(</span>
 331 |     | <span class='neutral'>            asset,</span>
 332 |     | <span class='neutral'>            p.ltvBps,</span>
 333 |     | <span class='neutral'>            p.liqThresholdBps,</span>
 334 |     | <span class='neutral'>            p.reserveFactorBps,</span>
 335 |     | <span class='neutral'>            p.kinkBps,</span>
 336 |     | <span class='neutral'>            uint64(p.baseRateRay),</span>
 337 |     | <span class='neutral'>            uint64(p.slope1Ray),</span>
 338 |     | <span class='neutral'>            uint64(p.slope2Ray),</span>
 339 |     | <span class='neutral'>            p.borrowCap</span>
 340 |     | <span class='neutral'>        );</span>
 341 |     | <span class='neutral'>    }</span>
 342 |     | <span class='neutral'></span>
 343 |     | <span class='neutral'>    // Collateral: enable LST as collateral</span>
 344 |     | <span class='neutral'>    function enterMarket(address lst) external {</span>
 345 | *   | <span class='executed'>        isEntered[msg.sender][lst] = true;</span>
 346 | *   | <span class='executed'>        emit EnterMarket(msg.sender, lst);</span>
 347 |     | <span class='neutral'>    }</span>
 348 |     | <span class='neutral'></span>
 349 |     | <span class='neutral'>    function exitMarket(address lst) external {</span>
 350 |     | <span class='neutral'>        // Block exit when unhealthy</span>
 351 |     | <span class='unexecuted'>        uint256 hf = healthFactor(msg.sender);</span>
 352 |     | <span class='unexecuted'>        require(hf &gt;= 1e18, &quot;UNHEALTHY&quot;);</span>
 353 |     | <span class='unexecuted'>        isEntered[msg.sender][lst] = false;</span>
 354 |     | <span class='unexecuted'>        emit ExitMarket(msg.sender, lst);</span>
 355 |     | <span class='neutral'>    }</span>
 356 |     | <span class='neutral'></span>
 357 |     | <span class='neutral'>    // Accrual for a specific market</span>
 358 | *   | <span class='executed'>    function accrue(address asset) public {</span>
 359 | *   | <span class='executed'>        MarketState storage s = marketState[asset];</span>
 360 |     | <span class='neutral'>        MarketParams storage p = marketParams[asset];</span>
 361 | *   | <span class='executed'>        if (s.lastAccrual == 0) revert MarketNotListed();</span>
 362 |     | <span class='neutral'>        uint256 last = s.lastAccrual;</span>
 363 | *   | <span class='executed'>        if (block.timestamp == last) return;</span>
 364 | *   | <span class='executed'>        uint256 dt = block.timestamp - last;</span>
 365 |     | <span class='neutral'></span>
 366 |     | <span class='neutral'>        // Utilization estimation: U = totalBorrows / (totalBorrows + 1) to avoid div by zero (no on-chain cash accounting here)</span>
 367 |     | <span class='neutral'>        uint256 borrows = uint256(s.totalBorrows);</span>
 368 | *   | <span class='executed'>        uint256 utilizationRay = borrows == 0 ? 0 : (borrows * RAY) / (borrows + 1);</span>
 369 |     | <span class='neutral'></span>
 370 |     | <span class='neutral'>        // Borrow rate per second (ray)</span>
 371 |     | <span class='neutral'>        uint256 rateRay;</span>
 372 | *   | <span class='executed'>        if (utilizationRay &lt;= (uint256(p.kinkBps) * RAY) / BPS) {</span>
 373 |     | <span class='neutral'>            rateRay =</span>
 374 | *   | <span class='executed'>                uint256(p.baseRateRay) + (uint256(p.slope1Ray) * utilizationRay) / ((uint256(p.kinkBps) * RAY) / BPS);</span>
 375 |     | <span class='neutral'>        } else {</span>
 376 | *   | <span class='executed'>            uint256 over = utilizationRay - ((uint256(p.kinkBps) * RAY) / BPS);</span>
 377 |     | <span class='neutral'>            uint256 denom = RAY - ((uint256(p.kinkBps) * RAY) / BPS);</span>
 378 | *   | <span class='executed'>            rateRay = uint256(p.baseRateRay) + uint256(p.slope1Ray) + (uint256(p.slope2Ray) * over) / denom;</span>
 379 |     | <span class='neutral'>        }</span>
 380 |     | <span class='neutral'></span>
 381 |     | <span class='neutral'>        // Linearized index growth: idx = idx * (1 + rate*dt)</span>
 382 | *   | <span class='executed'>        uint256 deltaRay = rateRay * dt;</span>
 383 | *   | <span class='executed'>        s.debtIndexRay = (s.debtIndexRay * (RAY + deltaRay)) / RAY;</span>
 384 |     | <span class='neutral'>        // Supply index approximate with utilization and reserve factor</span>
 385 |     | <span class='neutral'>        uint256 rf = uint256(p.reserveFactorBps);</span>
 386 | *   | <span class='executed'>        uint256 supplyRateRay = (rateRay * utilizationRay * (BPS - rf)) / (RAY * BPS);</span>
 387 | *   | <span class='executed'>        uint256 supplyDeltaRay = supplyRateRay * dt;</span>
 388 | *   | <span class='executed'>        s.supplyIndexRay = (s.supplyIndexRay * (RAY + supplyDeltaRay)) / RAY;</span>
 389 |     | <span class='neutral'></span>
 390 |     | <span class='neutral'>        s.lastAccrual = uint40(block.timestamp);</span>
 391 | *   | <span class='executed'>        emit IRMRateUpdated(asset, rateRay, utilizationRay, block.timestamp);</span>
 392 | *   | <span class='executed'>        emit Accrued(asset, s.supplyIndexRay, s.debtIndexRay, s.totalBorrows, s.totalReserves, block.timestamp);</span>
 393 |     | <span class='neutral'>    }</span>
 394 |     | <span class='neutral'></span>
 395 |     | <span class='neutral'>    // Compute current user debt in asset units</span>
 396 | *   | <span class='executed'>    function currentDebt(address user, address asset) public view returns (uint256) {</span>
 397 | *   | <span class='executed'>        MarketState storage s = marketState[asset];</span>
 398 | *   | <span class='executed'>        if (s.lastAccrual == 0) return 0;</span>
 399 | *   | <span class='executed'>        uint256 principal = debtPrincipal[user][asset];</span>
 400 | *   | <span class='executed'>        if (principal == 0) return 0;</span>
 401 | *   | <span class='executed'>        uint256 snapshot = debtIndexSnapshot[user][asset];</span>
 402 | *   | <span class='executed'>        if (snapshot == 0) snapshot = RAY;</span>
 403 | *   | <span class='executed'>        return (principal * s.debtIndexRay) / snapshot;</span>
 404 |     | <span class='neutral'>    }</span>
 405 |     | <span class='neutral'></span>
 406 |     | <span class='neutral'>    /// @notice Compute account health factor across all listed markets.</span>
 407 |     | <span class='neutral'>    /// HF = (Σ_i price(lst_i) * balance(lst_i) * LT_i / 1e4) / (Σ_j price(asset_j) * debt_j)</span>
 408 |     | <span class='neutral'>    /// Returns 1e18 when no debt.</span>
 409 | *   | <span class='executed'>    function healthFactor(address user) public view returns (uint256 hfWad) {</span>
 410 | *   | <span class='executed'>        (uint256 coll, uint256 debt,) = accountLiquidity(user);</span>
 411 | *   | <span class='executed'>        if (debt == 0) return 1e18;</span>
 412 |     | <span class='unexecuted'>        return Math.mulDiv(coll, 1e18, debt);</span>
 413 |     | <span class='neutral'>    }</span>
 414 |     | <span class='neutral'></span>
 415 |     | <span class='neutral'>    /// @notice Returns (collateralValueWad, debtValueWad, shortfallWad) across all markets.</span>
 416 | *   | <span class='executed'>    function accountLiquidity(address user)</span>
 417 |     | <span class='neutral'>        public</span>
 418 |     | <span class='neutral'>        view</span>
 419 | *   | <span class='executed'>        returns (uint256 collateralValueWad, uint256 debtValueWad, uint256 shortfallWad)</span>
 420 |     | <span class='neutral'>    {</span>
 421 | *   | <span class='executed'>        uint256 mlen = _markets.length;</span>
 422 | *   | <span class='executed'>        for (uint256 i = 0; i &lt; mlen; i++) {</span>
 423 | *   | <span class='executed'>            address asset = _markets[i];</span>
 424 |     | <span class='neutral'>            MarketParams storage p = marketParams[asset];</span>
 425 | *   | <span class='executed'>            if (p.lst != address(0) &amp;&amp; isEntered[user][p.lst]) {</span>
 426 | *   | <span class='executed'>                uint256 lstBal = IERC20(p.lst).balanceOf(user);</span>
 427 | *   | <span class='executed'>                uint256 priceLst1e18 = _price1e18(p.lst);</span>
 428 | *   | <span class='executed'>                uint256 collWad = Math.mulDiv(lstBal, priceLst1e18, 1e18);</span>
 429 | *   | <span class='executed'>                collateralValueWad += (collWad * uint256(p.liqThresholdBps)) / BPS;</span>
 430 |     | <span class='neutral'>            }</span>
 431 |     | <span class='neutral'>        }</span>
 432 | *   | <span class='executed'>        for (uint256 i = 0; i &lt; mlen; i++) {</span>
 433 | *   | <span class='executed'>            address asset = _markets[i];</span>
 434 | *   | <span class='executed'>            uint256 d = currentDebt(user, asset);</span>
 435 | *   | <span class='executed'>            if (d != 0) {</span>
 436 | *   | <span class='executed'>                uint256 priceAsset1e18 = _price1e18(asset);</span>
 437 | *   | <span class='executed'>                debtValueWad += Math.mulDiv(d, priceAsset1e18, 1e18);</span>
 438 |     | <span class='neutral'>            }</span>
 439 |     | <span class='neutral'>        }</span>
 440 | *   | <span class='executed'>        if (debtValueWad &gt; collateralValueWad) shortfallWad = debtValueWad - collateralValueWad;</span>
 441 |     | <span class='neutral'>        else shortfallWad = 0;</span>
 442 |     | <span class='neutral'>    }</span>
 443 |     | <span class='neutral'></span>
 444 |     | <span class='neutral'>    // Borrow increases user&#39;s debt and emits instruction to payout cross-chain</span>
 445 |     | <span class='neutral'>    function borrow(address asset, uint256 amount, uint256 dstChainId) external nonReentrant whenNotPaused {</span>
 446 | *   | <span class='executed'>        if (borrowsPaused) revert InsufficientCollateral(); // reuse error; alternatively define Paused</span>
 447 | *   | <span class='executed'>        accrue(asset);</span>
 448 |     | <span class='neutral'>        MarketParams storage p = marketParams[asset];</span>
 449 | *   | <span class='executed'>        if (marketState[asset].lastAccrual == 0) revert MarketNotListed();</span>
 450 |     | <span class='neutral'></span>
 451 |     | <span class='neutral'>        // Collateral check using LTV and oracle prices</span>
 452 | *   | <span class='executed'>        if (!_isBorrowAllowed(msg.sender, asset, amount)) revert InsufficientCollateral();</span>
 453 |     | <span class='neutral'></span>
 454 |     | <span class='neutral'>        // Emit borrow request intent prior to routing/decision</span>
 455 | *   | <span class='executed'>        bytes32 reqAid = _actionId(&quot;BorrowRequested&quot;, msg.sender, asset, amount, block.number);</span>
 456 | *   | <span class='executed'>        emit BorrowRequested(msg.sender, asset, amount, dstChainId, reqAid, block.timestamp);</span>
 457 |     | <span class='neutral'></span>
 458 |     | <span class='neutral'>        // Cap enforcement and state updates</span>
 459 |     | <span class='neutral'>        MarketState storage s = marketState[asset];</span>
 460 | *   | <span class='executed'>        uint256 newTotalBorrows = uint256(s.totalBorrows) + amount;</span>
 461 | *   | <span class='executed'>        if (newTotalBorrows &gt; uint256(p.borrowCap)) revert ExceedsBorrowCap();</span>
 462 | *   | <span class='executed'>        s.totalBorrows = SafeCast.toUint216(newTotalBorrows);</span>
 463 |     | <span class='neutral'></span>
 464 |     | <span class='neutral'>        // Global HF check: ensure user remains healthy (&gt;=1) after proposed borrow</span>
 465 |     | <span class='neutral'>        // Approximate by checking current HF; exact projection requires simulating added debt in value terms.</span>
 466 |     | <span class='neutral'>        // We reuse per-asset LTV gate for precise per-market constraint and rely on HF for global risk.</span>
 467 | *   | <span class='executed'>        require(healthFactor(msg.sender) &gt;= 1e18, &quot;HF_LT_1&quot;);</span>
 468 |     | <span class='neutral'>        _increaseDebt(msg.sender, asset, amount);</span>
 469 |     | <span class='neutral'>        _emitBorrow(msg.sender, asset, amount, dstChainId);</span>
 470 |     | <span class='neutral'>        // Emit a decision with number of routes used (single route in current implementation)</span>
 471 | *   | <span class='executed'>        bytes32 decAid = _actionId(&quot;BorrowDecision&quot;, msg.sender, asset, amount, block.number);</span>
 472 | *   | <span class='executed'>        emit BorrowDecision(msg.sender, asset, amount, 1, decAid, block.timestamp);</span>
 473 |     | <span class='neutral'>        // Cross-chain payout is performed by relayers calling spoke vaults.</span>
 474 |     | <span class='neutral'>    }</span>
 475 |     | <span class='neutral'></span>
 476 |     | <span class='neutral'>    function _emitBorrow(address user, address asset, uint256 amount, uint256 dstChainId) internal {</span>
 477 |     | <span class='neutral'>        MarketParams storage p = marketParams[asset];</span>
 478 | *   | <span class='executed'>        uint256 idx = marketState[asset].debtIndexRay;</span>
 479 | *   | <span class='executed'>        uint256 priceLst1e18 = _price1e18(p.lst);</span>
 480 | *   | <span class='executed'>        uint256 priceAsset1e18 = _price1e18(asset);</span>
 481 | *   | <span class='executed'>        uint256 lstBal = IERC20(p.lst).balanceOf(user);</span>
 482 | *   | <span class='executed'>        uint256 collValueWad = Math.mulDiv(lstBal, priceLst1e18, 1e18);</span>
 483 | *   | <span class='executed'>        uint256 debtValueWad = Math.mulDiv(currentDebt(user, asset), priceAsset1e18, 1e18);</span>
 484 | *   | <span class='executed'>        uint256 hfBps = debtValueWad == 0 ? type(uint256).max : (collValueWad * BPS) / debtValueWad;</span>
 485 | *   | <span class='executed'>        bytes32 aid = _actionId(&quot;Borrow&quot;, user, asset, amount, block.number);</span>
 486 | *   | <span class='executed'>        emit Borrow(user, asset, amount, idx, hfBps, dstChainId, aid);</span>
 487 |     | <span class='neutral'>    }</span>
 488 |     | <span class='neutral'></span>
 489 |     | <span class='neutral'>    /// @notice Returns the list of all listed borrow markets (asset addresses).</span>
 490 |     | <span class='neutral'>    function allMarkets() external view returns (address[] memory) {</span>
 491 |     | <span class='unexecuted'>        return _markets;</span>
 492 |     | <span class='neutral'>    }</span>
 493 |     | <span class='neutral'></span>
 494 |     | <span class='neutral'>    // Repay reduces principal</span>
 495 | *   | <span class='executed'>    function repay(address asset, uint256 amount, uint256 srcChainId) external nonReentrant whenNotPaused {</span>
 496 | *   | <span class='executed'>        accrue(asset);</span>
 497 | *   | <span class='executed'>        MarketState storage s = marketState[asset];</span>
 498 | *   | <span class='executed'>        if (s.lastAccrual == 0) revert MarketNotListed();</span>
 499 | *   | <span class='executed'>        uint256 idx = s.debtIndexRay;</span>
 500 | *   | <span class='executed'>        uint256 principal = debtPrincipal[msg.sender][asset];</span>
 501 | *   | <span class='executed'>        if (principal == 0) return;</span>
 502 | *   | <span class='executed'>        uint256 repayPrincipal = (amount * RAY) / idx;</span>
 503 | *   | <span class='executed'>        if (repayPrincipal &gt; principal) repayPrincipal = principal;</span>
 504 | *   | <span class='executed'>        debtPrincipal[msg.sender][asset] = principal - repayPrincipal;</span>
 505 | *   | <span class='executed'>        debtIndexSnapshot[msg.sender][asset] = idx;</span>
 506 | *   | <span class='executed'>        uint256 newTotalBorrows = uint256(s.totalBorrows) - Math.min(amount, uint256(s.totalBorrows));</span>
 507 | *   | <span class='executed'>        s.totalBorrows = SafeCast.toUint216(newTotalBorrows);</span>
 508 |     | <span class='neutral'>        _emitRepay(msg.sender, asset, amount, srcChainId, idx);</span>
 509 |     | <span class='neutral'>    }</span>
 510 |     | <span class='neutral'></span>
 511 |     | <span class='neutral'>    function _emitRepay(address user, address asset, uint256 amount, uint256 srcChainId, uint256 idx) internal {</span>
 512 | *   | <span class='executed'>        emit Repay(user, asset, amount, idx, srcChainId, _actionId(&quot;Repay&quot;, user, asset, amount, block.number));</span>
 513 |     | <span class='neutral'>    }</span>
 514 |     | <span class='neutral'></span>
 515 |     | <span class='neutral'>    // Liquidation: repay on behalf and seize LST shares</span>
 516 |     | <span class='neutral'>    function liquidate(address user, address repayAsset, uint256 repayAmount, address seizeLst, address to)</span>
 517 |     | <span class='neutral'>        external</span>
 518 |     | <span class='neutral'>        nonReentrant</span>
 519 |     | <span class='neutral'>        whenNotPaused</span>
 520 |     | <span class='neutral'>    {</span>
 521 |     | <span class='unexecuted'>        if (liquidationsPaused) revert NotEnteredMarket();</span>
 522 |     | <span class='unexecuted'>        accrue(repayAsset);</span>
 523 |     | <span class='neutral'>        (uint256 ar, uint256 shares, address vaultAddr) =</span>
 524 |     | <span class='neutral'>            _quoteAndValidateLiquidation(user, repayAsset, repayAmount, seizeLst);</span>
 525 |     | <span class='neutral'>        _finalizeLiquidation(user, repayAsset, ar, seizeLst, vaultAddr, shares, to);</span>
 526 |     | <span class='neutral'>    }</span>
 527 |     | <span class='neutral'></span>
 528 |     | <span class='neutral'>    function _quoteAndValidateLiquidation(address user, address repayAsset, uint256 repayAmount, address seizeLst)</span>
 529 |     | <span class='neutral'>        internal</span>
 530 |     | <span class='neutral'>        view</span>
 531 |     | <span class='neutral'>        returns (uint256 ar, uint256 shares, address vaultAddr)</span>
 532 |     | <span class='neutral'>    {</span>
 533 |     | <span class='neutral'>        MarketParams storage p = marketParams[repayAsset];</span>
 534 |     | <span class='unexecuted'>        if (p.lst != seizeLst) revert InvalidParams();</span>
 535 |     | <span class='unexecuted'>        uint256 d = currentDebt(user, repayAsset);</span>
 536 |     | <span class='unexecuted'>        if (d == 0) revert InsufficientCollateral();</span>
 537 |     | <span class='unexecuted'>        if (!isEntered[user][seizeLst]) revert NotEnteredMarket();</span>
 538 |     | <span class='neutral'></span>
 539 |     | <span class='unexecuted'>        uint256 priceLst = _price1e18(seizeLst);</span>
 540 |     | <span class='unexecuted'>        uint256 priceAsset = _price1e18(repayAsset);</span>
 541 | *   | <span class='executed'>        uint256 collWad = Math.mulDiv(IERC20(seizeLst).balanceOf(user), priceLst, 1e18);</span>
 542 |     | <span class='unexecuted'>        uint256 debtWad = Math.mulDiv(d, priceAsset, 1e18);</span>
 543 |     | <span class='unexecuted'>        uint256 liqLimit = (collWad * uint256(p.liqThresholdBps)) / BPS;</span>
 544 |     | <span class='unexecuted'>        if (debtWad &lt;= liqLimit) revert InsufficientCollateral();</span>
 545 |     | <span class='neutral'></span>
 546 |     | <span class='neutral'>        ar = Math.min(repayAmount, (d * CLOSE_FACTOR_BPS) / BPS);</span>
 547 |     | <span class='unexecuted'>        uint256 repayValueWad = Math.mulDiv(ar, priceAsset, 1e18);</span>
 548 |     | <span class='neutral'>        uint256 seizeValueWad = (repayValueWad * (10_000 + LIQ_BONUS_BPS)) / BPS;</span>
 549 |     | <span class='neutral'>        // Round up to ensure the protocol does not under-seize due to truncation when converting value to shares</span>
 550 |     | <span class='unexecuted'>        uint256 num = Math.mulDiv(seizeValueWad, 1e18, 1); // keep precision</span>
 551 |     | <span class='unexecuted'>        shares = Math.ceilDiv(num, priceLst);</span>
 552 |     | <span class='unexecuted'>        vaultAddr = p.vault;</span>
 553 |     | <span class='neutral'>    }</span>
 554 |     | <span class='neutral'></span>
 555 |     | <span class='neutral'>    function _finalizeLiquidation(</span>
 556 |     | <span class='neutral'>        address user,</span>
 557 |     | <span class='neutral'>        address repayAsset,</span>
 558 |     | <span class='neutral'>        uint256 ar,</span>
 559 |     | <span class='neutral'>        address seizeLst,</span>
 560 |     | <span class='neutral'>        address vaultAddr,</span>
 561 |     | <span class='neutral'>        uint256 shares,</span>
 562 |     | <span class='neutral'>        address to</span>
 563 |     | <span class='neutral'>    ) internal {</span>
 564 |     | <span class='neutral'>        // Seize shares first to prevent DoS when no local cash on spoke</span>
 565 | *   | <span class='executed'>        ISpokeYieldVault(vaultAddr).onSeizeShares(user, shares, to);</span>
 566 |     | <span class='neutral'>        // Attempt to reduce debt immediately; if there is insufficient local cash on spoke to honor bridge payouts,</span>
 567 |     | <span class='neutral'>        // this hub still accounts for debt reduction by the repaid amount provided by the liquidator off-chain.</span>
 568 |     | <span class='neutral'>        // For cross-chain settlement, the spoke vault can be instructed to bridge liquidity asynchronously.</span>
 569 |     | <span class='unexecuted'>        uint256 idxRay = marketState[repayAsset].debtIndexRay;</span>
 570 |     | <span class='unexecuted'>        uint256 actualRepaid = _decreaseDebt(user, repayAsset, idxRay, ar);</span>
 571 |     | <span class='unexecuted'>        _emitLiquidate(msg.sender, user, repayAsset, actualRepaid, seizeLst, shares);</span>
 572 |     | <span class='neutral'>    }</span>
 573 |     | <span class='neutral'></span>
 574 |     | <span class='neutral'>    function _emitLiquidate(</span>
 575 |     | <span class='neutral'>        address liquidator,</span>
 576 |     | <span class='neutral'>        address user,</span>
 577 |     | <span class='neutral'>        address repayAsset,</span>
 578 |     | <span class='neutral'>        uint256 actualRepaid,</span>
 579 |     | <span class='neutral'>        address seizeLst,</span>
 580 |     | <span class='neutral'>        uint256 shares</span>
 581 |     | <span class='neutral'>    ) internal {</span>
 582 |     | <span class='unexecuted'>        bytes32 aid = _actionId(&quot;Liquidate&quot;, user, repayAsset, actualRepaid, block.number);</span>
 583 |     | <span class='unexecuted'>        emit Liquidate(liquidator, user, repayAsset, actualRepaid, seizeLst, shares, LIQ_BONUS_BPS, aid);</span>
 584 |     | <span class='neutral'>    }</span>
 585 |     | <span class='neutral'></span>
 586 |     | <span class='neutral'>    /// @notice Set borrow cap for a market.</span>
 587 |     | <span class='neutral'>    function setBorrowCap(address asset, uint256 cap) external onlyRole(GOVERNOR_ROLE) {</span>
 588 |     | <span class='unexecuted'>        marketParams[asset].borrowCap = SafeCast.toUint128(cap);</span>
 589 |     | <span class='unexecuted'>        emit BorrowCapSet(asset, cap);</span>
 590 |     | <span class='neutral'>    }</span>
 591 |     | <span class='neutral'></span>
 592 |     | <span class='neutral'>    /// @notice Returns account liquidity info: collateral value, debt value, and shortfall (if any), all in 1e18 precision.</span>
 593 |     | <span class='neutral'>    function accountLiquidity(address user, address asset)</span>
 594 |     | <span class='neutral'>        public</span>
 595 |     | <span class='neutral'>        view</span>
 596 |     | <span class='neutral'>        returns (uint256 collateralWad, uint256 debtWad, uint256 shortfallWad)</span>
 597 |     | <span class='neutral'>    {</span>
 598 |     | <span class='neutral'>        MarketParams storage p = marketParams[asset];</span>
 599 |     | <span class='unexecuted'>        uint256 priceLst1e18 = _price1e18(p.lst);</span>
 600 |     | <span class='unexecuted'>        uint256 priceAsset1e18 = _price1e18(asset);</span>
 601 |     | <span class='unexecuted'>        uint256 lstBal = IERC20(p.lst).balanceOf(user);</span>
 602 |     | <span class='unexecuted'>        collateralWad = Math.mulDiv(lstBal, priceLst1e18, 1e18);</span>
 603 |     | <span class='unexecuted'>        debtWad = Math.mulDiv(currentDebt(user, asset), priceAsset1e18, 1e18);</span>
 604 |     | <span class='unexecuted'>        uint256 liqLimit = (collateralWad * uint256(p.liqThresholdBps)) / BPS;</span>
 605 |     | <span class='unexecuted'>        shortfallWad = debtWad &gt; liqLimit ? debtWad - liqLimit : 0;</span>
 606 |     | <span class='neutral'>    }</span>
 607 |     | <span class='neutral'></span>
 608 |     | <span class='neutral'>    /// @notice Returns market state and derived utilization for an asset.</span>
 609 |     | <span class='neutral'>    function marketStateExtended(address asset)</span>
 610 |     | <span class='neutral'>        external</span>
 611 |     | <span class='neutral'>        view</span>
 612 |     | <span class='neutral'>        returns (MarketState memory s, MarketParams memory p, uint256 utilizationRay)</span>
 613 |     | <span class='neutral'>    {</span>
 614 |     | <span class='unexecuted'>        s = marketState[asset];</span>
 615 |     | <span class='neutral'>        p = marketParams[asset];</span>
 616 |     | <span class='neutral'>        uint256 borrows = uint256(s.totalBorrows);</span>
 617 |     | <span class='unexecuted'>        utilizationRay = borrows == 0 ? 0 : (borrows * RAY) / (borrows + 1);</span>
 618 |     | <span class='neutral'>    }</span>
 619 |     | <span class='neutral'></span>
 620 |     | <span class='neutral'>    uint256[50] private __gap;</span>
 621 |     | <span class='neutral'>}</span>
 622 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/contracts/hub/PriceOracleRouter.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>pragma solidity ^0.8.24;</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>import {Initializable} from &quot;@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol&quot;;</span>
   5 |     | <span class='neutral'>import {UUPSUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol&quot;;</span>
   6 |     | <span class='neutral'>import {AccessControlUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/access/AccessControlUpgradeable.sol&quot;;</span>
   7 |     | <span class='neutral'>import {PausableUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol&quot;;</span>
   8 |     | <span class='neutral'></span>
   9 |     | <span class='neutral'>interface IAggregatorV3Like {</span>
  10 |     | <span class='neutral'>    function latestRoundData() external view returns (uint80, int256, uint256, uint256, uint80);</span>
  11 |     | <span class='neutral'>}</span>
  12 |     | <span class='neutral'></span>
  13 |     | <span class='neutral'>interface ISequencerUptimeOracleLike {</span>
  14 |     | <span class='neutral'>    function latestRoundData() external view returns (uint80, int256, uint256, uint256, uint80);</span>
  15 |     | <span class='neutral'>}</span>
  16 |     | <span class='neutral'></span>
  17 |     | <span class='neutral'>/// @title PriceOracleRouter</span>
  18 |     | <span class='neutral'>/// @notice Price router with per-asset feeds, decimals, and heartbeat staleness checks.</span>
  19 | *   | <span class='executed'>contract PriceOracleRouter is Initializable, UUPSUpgradeable, AccessControlUpgradeable, PausableUpgradeable {</span>
  20 | *   | <span class='executed'>    bytes32 public constant GOVERNOR_ROLE = keccak256(&quot;GOVERNOR_ROLE&quot;);</span>
  21 |     | <span class='neutral'></span>
  22 |     | <span class='neutral'>    struct Feed {</span>
  23 |     | <span class='neutral'>        address primary; // chainlink-style aggregator</span>
  24 |     | <span class='neutral'>        address secondary; // optional fallback aggregator</span>
  25 |     | <span class='neutral'>        uint8 decimals; // feed decimals (usually 8)</span>
  26 |     | <span class='neutral'>        uint256 heartbeat; // max age in seconds</span>
  27 |     | <span class='neutral'>        uint256 maxDeviationBps; // acceptable deviation between primary/secondary</span>
  28 |     | <span class='neutral'>        int256 minAnswer; // minimum allowed answer (signed to match CL interface)</span>
  29 |     | <span class='neutral'>        int256 maxAnswer; // maximum allowed answer</span>
  30 |     | <span class='neutral'>    }</span>
  31 |     | <span class='neutral'></span>
  32 |     | <span class='unexecuted'>    mapping(address =&gt; Feed) public feedOf;</span>
  33 |     | <span class='neutral'>    address public sequencerOracle; // optional sequencer uptime feed</span>
  34 |     | <span class='neutral'></span>
  35 |     | <span class='neutral'>    event FeedSet(</span>
  36 |     | <span class='neutral'>        address indexed asset, address indexed primary, address secondary, uint256 heartbeatSec, uint256 maxDeviationBps</span>
  37 |     | <span class='neutral'>    );</span>
  38 |     | <span class='neutral'>    event SequencerOracleSet(address indexed oracle);</span>
  39 |     | <span class='neutral'>    event GovernorProposed(address indexed currentGovernor, address indexed pendingGovernor);</span>
  40 |     | <span class='neutral'>    event GovernorAccepted(address indexed previousGovernor, address indexed newGovernor);</span>
  41 |     | <span class='neutral'></span>
  42 |     | <span class='neutral'>    error StalePrice();</span>
  43 |     | <span class='neutral'>    error ZeroAddress();</span>
  44 |     | <span class='neutral'>    error OutOfBounds();</span>
  45 |     | <span class='neutral'></span>
  46 |     | <span class='unexecuted'>    address public governor;</span>
  47 |     | <span class='neutral'></span>
  48 |     | <span class='neutral'>    function initialize(address initialGovernor) external initializer {</span>
  49 |     | <span class='neutral'>        __UUPSUpgradeable_init();</span>
  50 |     | <span class='neutral'>        __AccessControl_init();</span>
  51 |     | <span class='neutral'>        __Pausable_init();</span>
  52 | *   | <span class='executed'>        _grantRole(DEFAULT_ADMIN_ROLE, initialGovernor);</span>
  53 | *   | <span class='executed'>        _grantRole(GOVERNOR_ROLE, initialGovernor);</span>
  54 | *   | <span class='executed'>        governor = initialGovernor;</span>
  55 |     | <span class='neutral'>    }</span>
  56 |     | <span class='neutral'></span>
  57 |     | <span class='neutral'>    function _authorizeUpgrade(address) internal override onlyRole(GOVERNOR_ROLE) {}</span>
  58 |     | <span class='neutral'></span>
  59 |     | <span class='neutral'>    function setFeed(</span>
  60 |     | <span class='neutral'>        address asset,</span>
  61 |     | <span class='neutral'>        address primary,</span>
  62 |     | <span class='neutral'>        address secondary,</span>
  63 |     | <span class='neutral'>        uint8 decimals,</span>
  64 |     | <span class='neutral'>        uint256 heartbeat,</span>
  65 |     | <span class='neutral'>        uint256 maxDeviationBps</span>
  66 |     | <span class='neutral'>    ) external onlyRole(GOVERNOR_ROLE) {</span>
  67 | *   | <span class='executed'>        if (asset == address(0) || primary == address(0)) revert ZeroAddress();</span>
  68 | *   | <span class='executed'>        feedOf[asset] = Feed({</span>
  69 |     | <span class='neutral'>            primary: primary,</span>
  70 |     | <span class='neutral'>            secondary: secondary,</span>
  71 |     | <span class='neutral'>            decimals: decimals,</span>
  72 |     | <span class='neutral'>            heartbeat: heartbeat,</span>
  73 |     | <span class='neutral'>            maxDeviationBps: maxDeviationBps,</span>
  74 |     | <span class='neutral'>            minAnswer: 0,</span>
  75 | *   | <span class='executed'>            maxAnswer: type(int256).max</span>
  76 |     | <span class='neutral'>        });</span>
  77 | *   | <span class='executed'>        emit FeedSet(asset, primary, secondary, heartbeat, maxDeviationBps);</span>
  78 |     | <span class='neutral'>    }</span>
  79 |     | <span class='neutral'></span>
  80 |     | <span class='neutral'>    function setFeedBounds(address asset, int256 minAnswer, int256 maxAnswer) external onlyRole(GOVERNOR_ROLE) {</span>
  81 |     | <span class='neutral'>        Feed storage f = feedOf[asset];</span>
  82 |     | <span class='unexecuted'>        if (f.primary == address(0)) revert ZeroAddress();</span>
  83 |     | <span class='unexecuted'>        f.minAnswer = minAnswer;</span>
  84 |     | <span class='unexecuted'>        f.maxAnswer = maxAnswer;</span>
  85 |     | <span class='neutral'>    }</span>
  86 |     | <span class='neutral'></span>
  87 |     | <span class='neutral'>    function setSequencerOracle(address oracle_) external onlyRole(GOVERNOR_ROLE) {</span>
  88 |     | <span class='neutral'>        sequencerOracle = oracle_;</span>
  89 |     | <span class='unexecuted'>        emit SequencerOracleSet(oracle_);</span>
  90 |     | <span class='neutral'>    }</span>
  91 |     | <span class='neutral'></span>
  92 |     | <span class='neutral'>    function getPrice(address asset) external view returns (uint256 price, uint8 decimals, uint256 lastUpdate) {</span>
  93 | *   | <span class='executed'>        (price, decimals, lastUpdate) = _checkedPrice(asset);</span>
  94 |     | <span class='neutral'>    }</span>
  95 |     | <span class='neutral'></span>
  96 | *   | <span class='executed'>    function _checkedPrice(address asset) internal view returns (uint256 price, uint8 decimals, uint256 lastUpdate) {</span>
  97 |     | <span class='neutral'>        // Sequencer up check if configured (OP chains)</span>
  98 | *   | <span class='executed'>        if (sequencerOracle != address(0)) {</span>
  99 |     | <span class='unexecuted'>            (, int256 up,, uint256 seqUpdated,) = ISequencerUptimeOracleLike(sequencerOracle).latestRoundData();</span>
 100 |     | <span class='unexecuted'>            if (up == 0) revert StalePrice();</span>
 101 |     | <span class='unexecuted'>            if (block.timestamp - seqUpdated &gt; 1 hours) revert StalePrice();</span>
 102 |     | <span class='neutral'>        }</span>
 103 |     | <span class='neutral'>        Feed memory f = feedOf[asset];</span>
 104 | *   | <span class='executed'>        (, int256 a1,, uint256 u1,) = IAggregatorV3Like(f.primary).latestRoundData();</span>
 105 | *   | <span class='executed'>        bool pFresh = a1 &gt; 0 &amp;&amp; (f.heartbeat == 0 || block.timestamp - u1 &lt;= f.heartbeat);</span>
 106 | *   | <span class='executed'>        bool pBounds = a1 &gt;= f.minAnswer &amp;&amp; a1 &lt;= f.maxAnswer;</span>
 107 |     | <span class='neutral'>        uint256 p1u;</span>
 108 | *   | <span class='executed'>        if (pFresh &amp;&amp; pBounds) {</span>
 109 | *   | <span class='executed'>            p1u = uint256(a1);</span>
 110 |     | <span class='neutral'>        }</span>
 111 | *   | <span class='executed'>        if (f.secondary != address(0)) {</span>
 112 | *   | <span class='executed'>            (, int256 a2,, uint256 u2,) = IAggregatorV3Like(f.secondary).latestRoundData();</span>
 113 |     | <span class='unexecuted'>            bool sFresh = a2 &gt; 0 &amp;&amp; (f.heartbeat == 0 || block.timestamp - u2 &lt;= f.heartbeat);</span>
 114 |     | <span class='unexecuted'>            bool sBounds = a2 &gt;= f.minAnswer &amp;&amp; a2 &lt;= f.maxAnswer;</span>
 115 |     | <span class='unexecuted'>            if (sFresh &amp;&amp; sBounds) {</span>
 116 |     | <span class='unexecuted'>                if (p1u != 0) {</span>
 117 |     | <span class='neutral'>                    // both fresh and in-bounds: enforce deviation both directions</span>
 118 |     | <span class='neutral'>                    uint256 p2u = uint256(a2);</span>
 119 |     | <span class='unexecuted'>                    uint256 dev = p1u &gt; p2u ? ((p1u - p2u) * 10_000) / p2u : ((p2u - p1u) * 10_000) / p1u;</span>
 120 |     | <span class='unexecuted'>                    if (dev &gt; f.maxDeviationBps) revert StalePrice();</span>
 121 |     | <span class='neutral'>                } else {</span>
 122 |     | <span class='neutral'>                    // primary unusable; use secondary</span>
 123 |     | <span class='unexecuted'>                    return (uint256(a2), f.decimals, u2);</span>
 124 |     | <span class='neutral'>                }</span>
 125 |     | <span class='neutral'>            }</span>
 126 |     | <span class='neutral'>        }</span>
 127 | *   | <span class='executed'>        if (p1u == 0) revert StalePrice();</span>
 128 | *   | <span class='executed'>        return (p1u, f.decimals, u1);</span>
 129 |     | <span class='neutral'>    }</span>
 130 |     | <span class='neutral'></span>
 131 |     | <span class='neutral'>    // --- Two-step governor ---</span>
 132 |     | <span class='unexecuted'>    address public pendingGovernor;</span>
 133 |     | <span class='neutral'></span>
 134 |     | <span class='neutral'>    function proposeGovernor(address newGov) external onlyRole(GOVERNOR_ROLE) {</span>
 135 |     | <span class='unexecuted'>        if (newGov == address(0)) revert ZeroAddress();</span>
 136 |     | <span class='unexecuted'>        pendingGovernor = newGov;</span>
 137 |     | <span class='unexecuted'>        emit GovernorProposed(governor, newGov);</span>
 138 |     | <span class='neutral'>    }</span>
 139 |     | <span class='neutral'></span>
 140 |     | <span class='neutral'>    function acceptGovernor() external {</span>
 141 |     | <span class='unexecuted'>        require(msg.sender == pendingGovernor, &quot;NOT_PENDING&quot;);</span>
 142 |     | <span class='unexecuted'>        address prev = governor;</span>
 143 |     | <span class='unexecuted'>        _grantRole(DEFAULT_ADMIN_ROLE, msg.sender);</span>
 144 |     | <span class='unexecuted'>        _grantRole(GOVERNOR_ROLE, msg.sender);</span>
 145 |     | <span class='unexecuted'>        _revokeRole(GOVERNOR_ROLE, prev);</span>
 146 |     | <span class='unexecuted'>        _revokeRole(DEFAULT_ADMIN_ROLE, prev);</span>
 147 |     | <span class='neutral'>        governor = msg.sender;</span>
 148 |     | <span class='neutral'>        pendingGovernor = address(0);</span>
 149 |     | <span class='unexecuted'>        emit GovernorAccepted(prev, msg.sender);</span>
 150 |     | <span class='neutral'>    }</span>
 151 |     | <span class='neutral'></span>
 152 |     | <span class='neutral'>    uint256[50] private __gap;</span>
 153 |     | <span class='neutral'>}</span>
 154 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/contracts/interfaces/IPriceOracleRouter.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>pragma solidity ^0.8.24;</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>/// @title IPriceOracleRouter</span>
  5 |     | <span class='neutral'>/// @notice Price oracle router interface.</span>
  6 |     | <span class='neutral'>interface IPriceOracleRouter {</span>
  7 |     | <span class='neutral'>    /// @notice Returns the latest price for an asset.</span>
  8 |     | <span class='neutral'>    /// @param asset The asset address.</span>
  9 |     | <span class='neutral'>    /// @return price The price value.</span>
 10 |     | <span class='neutral'>    /// @return decimals The decimals of the price feed.</span>
 11 |     | <span class='neutral'>    /// @return lastUpdate The timestamp of the last update.</span>
 12 |     | <span class='neutral'>    function getPrice(address asset) external view returns (uint256 price, uint8 decimals, uint256 lastUpdate);</span>
 13 |     | <span class='neutral'>}</span>
 14 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/contracts/interfaces/ISpokeYieldVault.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>pragma solidity ^0.8.24;</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>import {IERC20} from &quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/// @title ISpokeYieldVault</span>
  7 |     | <span class='neutral'>/// @notice ERC4626-like interface with cross-chain hooks for the Spoke vault.</span>
  8 |     | <span class='neutral'>interface ISpokeYieldVault is IERC20 {</span>
  9 |     | <span class='neutral'>    // --- ERC4626 core ---</span>
 10 |     | <span class='neutral'>    function asset() external view returns (address);</span>
 11 |     | <span class='neutral'>    function totalAssets() external view returns (uint256);</span>
 12 |     | <span class='neutral'>    function convertToShares(uint256 assets) external view returns (uint256);</span>
 13 |     | <span class='neutral'>    function convertToAssets(uint256 shares) external view returns (uint256);</span>
 14 |     | <span class='neutral'>    function maxDeposit(address receiver) external view returns (uint256);</span>
 15 |     | <span class='neutral'>    function previewDeposit(uint256 assets) external view returns (uint256);</span>
 16 |     | <span class='neutral'>    function deposit(uint256 assets, address receiver) external returns (uint256);</span>
 17 |     | <span class='neutral'>    function maxMint(address receiver) external view returns (uint256);</span>
 18 |     | <span class='neutral'>    function previewMint(uint256 shares) external view returns (uint256);</span>
 19 |     | <span class='neutral'>    function mint(uint256 shares, address receiver) external returns (uint256);</span>
 20 |     | <span class='neutral'>    function maxWithdraw(address owner) external view returns (uint256);</span>
 21 |     | <span class='neutral'>    function previewWithdraw(uint256 assets) external view returns (uint256);</span>
 22 |     | <span class='neutral'>    function withdraw(uint256 assets, address receiver, address owner) external returns (uint256);</span>
 23 |     | <span class='neutral'>    function maxRedeem(address owner) external view returns (uint256);</span>
 24 |     | <span class='neutral'>    function previewRedeem(uint256 shares) external view returns (uint256);</span>
 25 |     | <span class='neutral'>    function redeem(uint256 shares, address receiver, address owner) external returns (uint256);</span>
 26 |     | <span class='neutral'></span>
 27 |     | <span class='neutral'>    // --- Cross-chain hooks ---</span>
 28 |     | <span class='neutral'>    function onRemoteCredit(address user, uint256 assets, uint256 shares, uint256 nonce, bytes32 actionId) external;</span>
 29 |     | <span class='neutral'>    function requestRemoteLiquidity(address toUser, uint256 assets) external;</span>
 30 |     | <span class='neutral'>    function onSeizeShares(address user, uint256 shares, address to) external;</span>
 31 |     | <span class='neutral'>}</span>
 32 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/contracts/mocks/MockAggregator.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>pragma solidity ^0.8.24;</span>
  3 |     | <span class='neutral'></span>
  4 | *   | <span class='executed'>contract MockAggregator {</span>
  5 |     | <span class='neutral'>    int256 public answer;</span>
  6 |     | <span class='unexecuted'>    uint256 public updatedAt;</span>
  7 |     | <span class='neutral'></span>
  8 |     | <span class='neutral'>    constructor(int256 _answer, uint256 _updatedAt) {</span>
  9 |     | <span class='neutral'>        answer = _answer;</span>
 10 |     | <span class='neutral'>        updatedAt = _updatedAt;</span>
 11 |     | <span class='neutral'>    }</span>
 12 |     | <span class='neutral'></span>
 13 |     | <span class='neutral'>    function setAnswer(int256 _answer) external {</span>
 14 |     | <span class='neutral'>        answer = _answer;</span>
 15 |     | <span class='neutral'>    }</span>
 16 |     | <span class='neutral'></span>
 17 |     | <span class='neutral'>    function setUpdatedAt(uint256 _updatedAt) external {</span>
 18 |     | <span class='neutral'>        updatedAt = _updatedAt;</span>
 19 |     | <span class='neutral'>    }</span>
 20 |     | <span class='neutral'></span>
 21 |     | <span class='neutral'>    function latestRoundData() external view returns (uint80, int256, uint256, uint256, uint80) {</span>
 22 | *   | <span class='executed'>        return (0, answer, updatedAt, updatedAt, 0);</span>
 23 |     | <span class='neutral'>    }</span>
 24 |     | <span class='neutral'>}</span>
 25 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/access/AccessControlUpgradeable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (access/AccessControl.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IAccessControl} from &quot;@openzeppelin/contracts/access/IAccessControl.sol&quot;;</span>
   7 |     | <span class='neutral'>import {ContextUpgradeable} from &quot;../utils/ContextUpgradeable.sol&quot;;</span>
   8 |     | <span class='neutral'>import {ERC165Upgradeable} from &quot;../utils/introspection/ERC165Upgradeable.sol&quot;;</span>
   9 |     | <span class='neutral'>import {Initializable} from &quot;../proxy/utils/Initializable.sol&quot;;</span>
  10 |     | <span class='neutral'></span>
  11 |     | <span class='neutral'>/**</span>
  12 |     | <span class='neutral'> * @dev Contract module that allows children to implement role-based access</span>
  13 |     | <span class='neutral'> * control mechanisms. This is a lightweight version that doesn&#39;t allow enumerating role</span>
  14 |     | <span class='neutral'> * members except through off-chain means by accessing the contract event logs. Some</span>
  15 |     | <span class='neutral'> * applications may benefit from on-chain enumerability, for those cases see</span>
  16 |     | <span class='neutral'> * {AccessControlEnumerable}.</span>
  17 |     | <span class='neutral'> *</span>
  18 |     | <span class='neutral'> * Roles are referred to by their `bytes32` identifier. These should be exposed</span>
  19 |     | <span class='neutral'> * in the external API and be unique. The best way to achieve this is by</span>
  20 |     | <span class='neutral'> * using `public constant` hash digests:</span>
  21 |     | <span class='neutral'> *</span>
  22 |     | <span class='neutral'> * ```solidity</span>
  23 |     | <span class='neutral'> * bytes32 public constant MY_ROLE = keccak256(&quot;MY_ROLE&quot;);</span>
  24 |     | <span class='neutral'> * ```</span>
  25 |     | <span class='neutral'> *</span>
  26 |     | <span class='neutral'> * Roles can be used to represent a set of permissions. To restrict access to a</span>
  27 |     | <span class='neutral'> * function call, use {hasRole}:</span>
  28 |     | <span class='neutral'> *</span>
  29 |     | <span class='neutral'> * ```solidity</span>
  30 |     | <span class='neutral'> * function foo() public {</span>
  31 |     | <span class='neutral'> *     require(hasRole(MY_ROLE, msg.sender));</span>
  32 |     | <span class='neutral'> *     ...</span>
  33 |     | <span class='neutral'> * }</span>
  34 |     | <span class='neutral'> * ```</span>
  35 |     | <span class='neutral'> *</span>
  36 |     | <span class='neutral'> * Roles can be granted and revoked dynamically via the {grantRole} and</span>
  37 |     | <span class='neutral'> * {revokeRole} functions. Each role has an associated admin role, and only</span>
  38 |     | <span class='neutral'> * accounts that have a role&#39;s admin role can call {grantRole} and {revokeRole}.</span>
  39 |     | <span class='neutral'> *</span>
  40 |     | <span class='neutral'> * By default, the admin role for all roles is `DEFAULT_ADMIN_ROLE`, which means</span>
  41 |     | <span class='neutral'> * that only accounts with this role will be able to grant or revoke other</span>
  42 |     | <span class='neutral'> * roles. More complex role relationships can be created by using</span>
  43 |     | <span class='neutral'> * {_setRoleAdmin}.</span>
  44 |     | <span class='neutral'> *</span>
  45 |     | <span class='neutral'> * WARNING: The `DEFAULT_ADMIN_ROLE` is also its own admin: it has permission to</span>
  46 |     | <span class='neutral'> * grant and revoke this role. Extra precautions should be taken to secure</span>
  47 |     | <span class='neutral'> * accounts that have been granted it. We recommend using {AccessControlDefaultAdminRules}</span>
  48 |     | <span class='neutral'> * to enforce additional security measures for this role.</span>
  49 |     | <span class='neutral'> */</span>
  50 |     | <span class='neutral'>abstract contract AccessControlUpgradeable is Initializable, ContextUpgradeable, IAccessControl, ERC165Upgradeable {</span>
  51 |     | <span class='neutral'>    struct RoleData {</span>
  52 |     | <span class='neutral'>        mapping(address account =&gt; bool) hasRole;</span>
  53 |     | <span class='neutral'>        bytes32 adminRole;</span>
  54 |     | <span class='neutral'>    }</span>
  55 |     | <span class='neutral'></span>
  56 |     | <span class='neutral'>    bytes32 public constant DEFAULT_ADMIN_ROLE = 0x00;</span>
  57 |     | <span class='neutral'></span>
  58 |     | <span class='neutral'></span>
  59 |     | <span class='neutral'>    /// @custom:storage-location erc7201:openzeppelin.storage.AccessControl</span>
  60 |     | <span class='neutral'>    struct AccessControlStorage {</span>
  61 |     | <span class='neutral'>        mapping(bytes32 role =&gt; RoleData) _roles;</span>
  62 |     | <span class='neutral'>    }</span>
  63 |     | <span class='neutral'></span>
  64 |     | <span class='neutral'>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.AccessControl&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</span>
  65 |     | <span class='neutral'>    bytes32 private constant AccessControlStorageLocation = 0x02dd7bc7dec4dceedda775e58dd541e08a116c6c53815c0bd028192f7b626800;</span>
  66 |     | <span class='neutral'></span>
  67 |     | <span class='neutral'>    function _getAccessControlStorage() private pure returns (AccessControlStorage storage $) {</span>
  68 | *   | <span class='executed'>        assembly {</span>
  69 |     | <span class='neutral'>            $.slot := AccessControlStorageLocation</span>
  70 |     | <span class='neutral'>        }</span>
  71 |     | <span class='neutral'>    }</span>
  72 |     | <span class='neutral'></span>
  73 |     | <span class='neutral'>    /**</span>
  74 |     | <span class='neutral'>     * @dev Modifier that checks that an account has a specific role. Reverts</span>
  75 |     | <span class='neutral'>     * with an {AccessControlUnauthorizedAccount} error including the required role.</span>
  76 |     | <span class='neutral'>     */</span>
  77 |     | <span class='neutral'>    modifier onlyRole(bytes32 role) {</span>
  78 | *   | <span class='executed'>        _checkRole(role);</span>
  79 |     | <span class='neutral'>        _;</span>
  80 |     | <span class='neutral'>    }</span>
  81 |     | <span class='neutral'></span>
  82 |     | <span class='neutral'>    function __AccessControl_init() internal onlyInitializing {</span>
  83 |     | <span class='neutral'>    }</span>
  84 |     | <span class='neutral'></span>
  85 |     | <span class='neutral'>    function __AccessControl_init_unchained() internal onlyInitializing {</span>
  86 |     | <span class='neutral'>    }</span>
  87 |     | <span class='neutral'>    /**</span>
  88 |     | <span class='neutral'>     * @dev See {IERC165-supportsInterface}.</span>
  89 |     | <span class='neutral'>     */</span>
  90 |     | <span class='neutral'>    function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {</span>
  91 |     | <span class='unexecuted'>        return interfaceId == type(IAccessControl).interfaceId || super.supportsInterface(interfaceId);</span>
  92 |     | <span class='neutral'>    }</span>
  93 |     | <span class='neutral'></span>
  94 |     | <span class='neutral'>    /**</span>
  95 |     | <span class='neutral'>     * @dev Returns `true` if `account` has been granted `role`.</span>
  96 |     | <span class='neutral'>     */</span>
  97 |     | <span class='neutral'>    function hasRole(bytes32 role, address account) public view virtual returns (bool) {</span>
  98 |     | <span class='neutral'>        AccessControlStorage storage $ = _getAccessControlStorage();</span>
  99 |     | <span class='neutral'>        return $._roles[role].hasRole[account];</span>
 100 |     | <span class='neutral'>    }</span>
 101 |     | <span class='neutral'></span>
 102 |     | <span class='neutral'>    /**</span>
 103 |     | <span class='neutral'>     * @dev Reverts with an {AccessControlUnauthorizedAccount} error if `_msgSender()`</span>
 104 |     | <span class='neutral'>     * is missing `role`. Overriding this function changes the behavior of the {onlyRole} modifier.</span>
 105 |     | <span class='neutral'>     */</span>
 106 | *   | <span class='executed'>    function _checkRole(bytes32 role) internal view virtual {</span>
 107 |     | <span class='neutral'>        _checkRole(role, _msgSender());</span>
 108 |     | <span class='neutral'>    }</span>
 109 |     | <span class='neutral'></span>
 110 |     | <span class='neutral'>    /**</span>
 111 |     | <span class='neutral'>     * @dev Reverts with an {AccessControlUnauthorizedAccount} error if `account`</span>
 112 |     | <span class='neutral'>     * is missing `role`.</span>
 113 |     | <span class='neutral'>     */</span>
 114 |     | <span class='neutral'>    function _checkRole(bytes32 role, address account) internal view virtual {</span>
 115 | *   | <span class='executed'>        if (!hasRole(role, account)) {</span>
 116 |     | <span class='unexecuted'>            revert AccessControlUnauthorizedAccount(account, role);</span>
 117 |     | <span class='neutral'>        }</span>
 118 |     | <span class='neutral'>    }</span>
 119 |     | <span class='neutral'></span>
 120 |     | <span class='neutral'>    /**</span>
 121 |     | <span class='neutral'>     * @dev Returns the admin role that controls `role`. See {grantRole} and</span>
 122 |     | <span class='neutral'>     * {revokeRole}.</span>
 123 |     | <span class='neutral'>     *</span>
 124 |     | <span class='neutral'>     * To change a role&#39;s admin, use {_setRoleAdmin}.</span>
 125 |     | <span class='neutral'>     */</span>
 126 |     | <span class='neutral'>    function getRoleAdmin(bytes32 role) public view virtual returns (bytes32) {</span>
 127 |     | <span class='neutral'>        AccessControlStorage storage $ = _getAccessControlStorage();</span>
 128 |     | <span class='unexecuted'>        return $._roles[role].adminRole;</span>
 129 |     | <span class='neutral'>    }</span>
 130 |     | <span class='neutral'></span>
 131 |     | <span class='neutral'>    /**</span>
 132 |     | <span class='neutral'>     * @dev Grants `role` to `account`.</span>
 133 |     | <span class='neutral'>     *</span>
 134 |     | <span class='neutral'>     * If `account` had not been already granted `role`, emits a {RoleGranted}</span>
 135 |     | <span class='neutral'>     * event.</span>
 136 |     | <span class='neutral'>     *</span>
 137 |     | <span class='neutral'>     * Requirements:</span>
 138 |     | <span class='neutral'>     *</span>
 139 |     | <span class='neutral'>     * - the caller must have ``role``&#39;s admin role.</span>
 140 |     | <span class='neutral'>     *</span>
 141 |     | <span class='neutral'>     * May emit a {RoleGranted} event.</span>
 142 |     | <span class='neutral'>     */</span>
 143 |     | <span class='neutral'>    function grantRole(bytes32 role, address account) public virtual onlyRole(getRoleAdmin(role)) {</span>
 144 |     | <span class='unexecuted'>        _grantRole(role, account);</span>
 145 |     | <span class='neutral'>    }</span>
 146 |     | <span class='neutral'></span>
 147 |     | <span class='neutral'>    /**</span>
 148 |     | <span class='neutral'>     * @dev Revokes `role` from `account`.</span>
 149 |     | <span class='neutral'>     *</span>
 150 |     | <span class='neutral'>     * If `account` had been granted `role`, emits a {RoleRevoked} event.</span>
 151 |     | <span class='neutral'>     *</span>
 152 |     | <span class='neutral'>     * Requirements:</span>
 153 |     | <span class='neutral'>     *</span>
 154 |     | <span class='neutral'>     * - the caller must have ``role``&#39;s admin role.</span>
 155 |     | <span class='neutral'>     *</span>
 156 |     | <span class='neutral'>     * May emit a {RoleRevoked} event.</span>
 157 |     | <span class='neutral'>     */</span>
 158 |     | <span class='neutral'>    function revokeRole(bytes32 role, address account) public virtual onlyRole(getRoleAdmin(role)) {</span>
 159 |     | <span class='unexecuted'>        _revokeRole(role, account);</span>
 160 |     | <span class='neutral'>    }</span>
 161 |     | <span class='neutral'></span>
 162 |     | <span class='neutral'>    /**</span>
 163 |     | <span class='neutral'>     * @dev Revokes `role` from the calling account.</span>
 164 |     | <span class='neutral'>     *</span>
 165 |     | <span class='neutral'>     * Roles are often managed via {grantRole} and {revokeRole}: this function&#39;s</span>
 166 |     | <span class='neutral'>     * purpose is to provide a mechanism for accounts to lose their privileges</span>
 167 |     | <span class='neutral'>     * if they are compromised (such as when a trusted device is misplaced).</span>
 168 |     | <span class='neutral'>     *</span>
 169 |     | <span class='neutral'>     * If the calling account had been revoked `role`, emits a {RoleRevoked}</span>
 170 |     | <span class='neutral'>     * event.</span>
 171 |     | <span class='neutral'>     *</span>
 172 |     | <span class='neutral'>     * Requirements:</span>
 173 |     | <span class='neutral'>     *</span>
 174 |     | <span class='neutral'>     * - the caller must be `callerConfirmation`.</span>
 175 |     | <span class='neutral'>     *</span>
 176 |     | <span class='neutral'>     * May emit a {RoleRevoked} event.</span>
 177 |     | <span class='neutral'>     */</span>
 178 |     | <span class='neutral'>    function renounceRole(bytes32 role, address callerConfirmation) public virtual {</span>
 179 |     | <span class='unexecuted'>        if (callerConfirmation != _msgSender()) {</span>
 180 |     | <span class='unexecuted'>            revert AccessControlBadConfirmation();</span>
 181 |     | <span class='neutral'>        }</span>
 182 |     | <span class='neutral'></span>
 183 |     | <span class='unexecuted'>        _revokeRole(role, callerConfirmation);</span>
 184 |     | <span class='neutral'>    }</span>
 185 |     | <span class='neutral'></span>
 186 |     | <span class='neutral'>    /**</span>
 187 |     | <span class='neutral'>     * @dev Sets `adminRole` as ``role``&#39;s admin role.</span>
 188 |     | <span class='neutral'>     *</span>
 189 |     | <span class='neutral'>     * Emits a {RoleAdminChanged} event.</span>
 190 |     | <span class='neutral'>     */</span>
 191 |     | <span class='neutral'>    function _setRoleAdmin(bytes32 role, bytes32 adminRole) internal virtual {</span>
 192 |     | <span class='neutral'>        AccessControlStorage storage $ = _getAccessControlStorage();</span>
 193 |     | <span class='neutral'>        bytes32 previousAdminRole = getRoleAdmin(role);</span>
 194 |     | <span class='neutral'>        $._roles[role].adminRole = adminRole;</span>
 195 |     | <span class='neutral'>        emit RoleAdminChanged(role, previousAdminRole, adminRole);</span>
 196 |     | <span class='neutral'>    }</span>
 197 |     | <span class='neutral'></span>
 198 |     | <span class='neutral'>    /**</span>
 199 |     | <span class='neutral'>     * @dev Attempts to grant `role` to `account` and returns a boolean indicating if `role` was granted.</span>
 200 |     | <span class='neutral'>     *</span>
 201 |     | <span class='neutral'>     * Internal function without access restriction.</span>
 202 |     | <span class='neutral'>     *</span>
 203 |     | <span class='neutral'>     * May emit a {RoleGranted} event.</span>
 204 |     | <span class='neutral'>     */</span>
 205 | *   | <span class='executed'>    function _grantRole(bytes32 role, address account) internal virtual returns (bool) {</span>
 206 |     | <span class='neutral'>        AccessControlStorage storage $ = _getAccessControlStorage();</span>
 207 |     | <span class='unexecuted'>        if (!hasRole(role, account)) {</span>
 208 | *   | <span class='executed'>            $._roles[role].hasRole[account] = true;</span>
 209 | *   | <span class='executed'>            emit RoleGranted(role, account, _msgSender());</span>
 210 | *   | <span class='executed'>            return true;</span>
 211 |     | <span class='neutral'>        } else {</span>
 212 |     | <span class='unexecuted'>            return false;</span>
 213 |     | <span class='neutral'>        }</span>
 214 |     | <span class='neutral'>    }</span>
 215 |     | <span class='neutral'></span>
 216 |     | <span class='neutral'>    /**</span>
 217 |     | <span class='neutral'>     * @dev Attempts to revoke `role` to `account` and returns a boolean indicating if `role` was revoked.</span>
 218 |     | <span class='neutral'>     *</span>
 219 |     | <span class='neutral'>     * Internal function without access restriction.</span>
 220 |     | <span class='neutral'>     *</span>
 221 |     | <span class='neutral'>     * May emit a {RoleRevoked} event.</span>
 222 |     | <span class='neutral'>     */</span>
 223 |     | <span class='unexecuted'>    function _revokeRole(bytes32 role, address account) internal virtual returns (bool) {</span>
 224 |     | <span class='neutral'>        AccessControlStorage storage $ = _getAccessControlStorage();</span>
 225 |     | <span class='unexecuted'>        if (hasRole(role, account)) {</span>
 226 |     | <span class='neutral'>            $._roles[role].hasRole[account] = false;</span>
 227 |     | <span class='unexecuted'>            emit RoleRevoked(role, account, _msgSender());</span>
 228 |     | <span class='unexecuted'>            return true;</span>
 229 |     | <span class='neutral'>        } else {</span>
 230 |     | <span class='neutral'>            return false;</span>
 231 |     | <span class='neutral'>        }</span>
 232 |     | <span class='neutral'>    }</span>
 233 |     | <span class='neutral'>}</span>
 234 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (proxy/utils/Initializable.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>/**</span>
   7 |     | <span class='neutral'> * @dev This is a base contract to aid in writing upgradeable contracts, or any kind of contract that will be deployed</span>
   8 |     | <span class='neutral'> * behind a proxy. Since proxied contracts do not make use of a constructor, it&#39;s common to move constructor logic to an</span>
   9 |     | <span class='neutral'> * external initializer function, usually called `initialize`. It then becomes necessary to protect this initializer</span>
  10 |     | <span class='neutral'> * function so it can only be called once. The {initializer} modifier provided by this contract will have this effect.</span>
  11 |     | <span class='neutral'> *</span>
  12 |     | <span class='neutral'> * The initialization functions use a version number. Once a version number is used, it is consumed and cannot be</span>
  13 |     | <span class='neutral'> * reused. This mechanism prevents re-execution of each &quot;step&quot; but allows the creation of new initialization steps in</span>
  14 |     | <span class='neutral'> * case an upgrade adds a module that needs to be initialized.</span>
  15 |     | <span class='neutral'> *</span>
  16 |     | <span class='neutral'> * For example:</span>
  17 |     | <span class='neutral'> *</span>
  18 |     | <span class='neutral'> * [.hljs-theme-light.nopadding]</span>
  19 |     | <span class='neutral'> * ```solidity</span>
  20 |     | <span class='neutral'> * contract MyToken is ERC20Upgradeable {</span>
  21 |     | <span class='neutral'> *     function initialize() initializer public {</span>
  22 |     | <span class='neutral'> *         __ERC20_init(&quot;MyToken&quot;, &quot;MTK&quot;);</span>
  23 |     | <span class='neutral'> *     }</span>
  24 |     | <span class='neutral'> * }</span>
  25 |     | <span class='neutral'> *</span>
  26 |     | <span class='neutral'> * contract MyTokenV2 is MyToken, ERC20PermitUpgradeable {</span>
  27 |     | <span class='neutral'> *     function initializeV2() reinitializer(2) public {</span>
  28 |     | <span class='neutral'> *         __ERC20Permit_init(&quot;MyToken&quot;);</span>
  29 |     | <span class='neutral'> *     }</span>
  30 |     | <span class='neutral'> * }</span>
  31 |     | <span class='neutral'> * ```</span>
  32 |     | <span class='neutral'> *</span>
  33 |     | <span class='neutral'> * TIP: To avoid leaving the proxy in an uninitialized state, the initializer function should be called as early as</span>
  34 |     | <span class='neutral'> * possible by providing the encoded function call as the `_data` argument to {ERC1967Proxy-constructor}.</span>
  35 |     | <span class='neutral'> *</span>
  36 |     | <span class='neutral'> * CAUTION: When used with inheritance, manual care must be taken to not invoke a parent initializer twice, or to ensure</span>
  37 |     | <span class='neutral'> * that all initializers are idempotent. This is not verified automatically as constructors are by Solidity.</span>
  38 |     | <span class='neutral'> *</span>
  39 |     | <span class='neutral'> * [CAUTION]</span>
  40 |     | <span class='neutral'> * ====</span>
  41 |     | <span class='neutral'> * Avoid leaving a contract uninitialized.</span>
  42 |     | <span class='neutral'> *</span>
  43 |     | <span class='neutral'> * An uninitialized contract can be taken over by an attacker. This applies to both a proxy and its implementation</span>
  44 |     | <span class='neutral'> * contract, which may impact the proxy. To prevent the implementation contract from being used, you should invoke</span>
  45 |     | <span class='neutral'> * the {_disableInitializers} function in the constructor to automatically lock it when it is deployed:</span>
  46 |     | <span class='neutral'> *</span>
  47 |     | <span class='neutral'> * [.hljs-theme-light.nopadding]</span>
  48 |     | <span class='neutral'> * ```</span>
  49 |     | <span class='neutral'> * /// @custom:oz-upgrades-unsafe-allow constructor</span>
  50 |     | <span class='neutral'> * constructor() {</span>
  51 |     | <span class='neutral'> *     _disableInitializers();</span>
  52 |     | <span class='neutral'> * }</span>
  53 |     | <span class='neutral'> * ```</span>
  54 |     | <span class='neutral'> * ====</span>
  55 |     | <span class='neutral'> */</span>
  56 |     | <span class='neutral'>abstract contract Initializable {</span>
  57 |     | <span class='neutral'>    /**</span>
  58 |     | <span class='neutral'>     * @dev Storage of the initializable contract.</span>
  59 |     | <span class='neutral'>     *</span>
  60 |     | <span class='neutral'>     * It&#39;s implemented on a custom ERC-7201 namespace to reduce the risk of storage collisions</span>
  61 |     | <span class='neutral'>     * when using with upgradeable contracts.</span>
  62 |     | <span class='neutral'>     *</span>
  63 |     | <span class='neutral'>     * @custom:storage-location erc7201:openzeppelin.storage.Initializable</span>
  64 |     | <span class='neutral'>     */</span>
  65 |     | <span class='neutral'>    struct InitializableStorage {</span>
  66 |     | <span class='neutral'>        /**</span>
  67 |     | <span class='neutral'>         * @dev Indicates that the contract has been initialized.</span>
  68 |     | <span class='neutral'>         */</span>
  69 |     | <span class='neutral'>        uint64 _initialized;</span>
  70 |     | <span class='neutral'>        /**</span>
  71 |     | <span class='neutral'>         * @dev Indicates that the contract is in the process of being initialized.</span>
  72 |     | <span class='neutral'>         */</span>
  73 |     | <span class='neutral'>        bool _initializing;</span>
  74 |     | <span class='neutral'>    }</span>
  75 |     | <span class='neutral'></span>
  76 |     | <span class='neutral'>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.Initializable&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</span>
  77 |     | <span class='neutral'>    bytes32 private constant INITIALIZABLE_STORAGE = 0xf0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00;</span>
  78 |     | <span class='neutral'></span>
  79 |     | <span class='neutral'>    /**</span>
  80 |     | <span class='neutral'>     * @dev The contract is already initialized.</span>
  81 |     | <span class='neutral'>     */</span>
  82 |     | <span class='neutral'>    error InvalidInitialization();</span>
  83 |     | <span class='neutral'></span>
  84 |     | <span class='neutral'>    /**</span>
  85 |     | <span class='neutral'>     * @dev The contract is not initializing.</span>
  86 |     | <span class='neutral'>     */</span>
  87 |     | <span class='neutral'>    error NotInitializing();</span>
  88 |     | <span class='neutral'></span>
  89 |     | <span class='neutral'>    /**</span>
  90 |     | <span class='neutral'>     * @dev Triggered when the contract has been initialized or reinitialized.</span>
  91 |     | <span class='neutral'>     */</span>
  92 |     | <span class='neutral'>    event Initialized(uint64 version);</span>
  93 |     | <span class='neutral'></span>
  94 |     | <span class='neutral'>    /**</span>
  95 |     | <span class='neutral'>     * @dev A modifier that defines a protected initializer function that can be invoked at most once. In its scope,</span>
  96 |     | <span class='neutral'>     * `onlyInitializing` functions can be used to initialize parent contracts.</span>
  97 |     | <span class='neutral'>     *</span>
  98 |     | <span class='neutral'>     * Similar to `reinitializer(1)`, except that in the context of a constructor an `initializer` may be invoked any</span>
  99 |     | <span class='neutral'>     * number of times. This behavior in the constructor can be useful during testing and is not expected to be used in</span>
 100 |     | <span class='neutral'>     * production.</span>
 101 |     | <span class='neutral'>     *</span>
 102 |     | <span class='neutral'>     * Emits an {Initialized} event.</span>
 103 |     | <span class='neutral'>     */</span>
 104 |     | <span class='neutral'>    modifier initializer() {</span>
 105 |     | <span class='neutral'>        // solhint-disable-next-line var-name-mixedcase</span>
 106 |     | <span class='neutral'>        InitializableStorage storage $ = _getInitializableStorage();</span>
 107 |     | <span class='neutral'></span>
 108 |     | <span class='neutral'>        // Cache values to avoid duplicated sloads</span>
 109 | *   | <span class='executed'>        bool isTopLevelCall = !$._initializing;</span>
 110 |     | <span class='neutral'>        uint64 initialized = $._initialized;</span>
 111 |     | <span class='neutral'></span>
 112 |     | <span class='neutral'>        // Allowed calls:</span>
 113 |     | <span class='neutral'>        // - initialSetup: the contract is not in the initializing state and no previous version was</span>
 114 |     | <span class='neutral'>        //                 initialized</span>
 115 |     | <span class='neutral'>        // - construction: the contract is initialized at version 1 (no reininitialization) and the</span>
 116 |     | <span class='neutral'>        //                 current contract is just being deployed</span>
 117 | *   | <span class='executed'>        bool initialSetup = initialized == 0 &amp;&amp; isTopLevelCall;</span>
 118 | *   | <span class='executed'>        bool construction = initialized == 1 &amp;&amp; address(this).code.length == 0;</span>
 119 |     | <span class='neutral'></span>
 120 | *   | <span class='executed'>        if (!initialSetup &amp;&amp; !construction) {</span>
 121 |     | <span class='unexecuted'>            revert InvalidInitialization();</span>
 122 |     | <span class='neutral'>        }</span>
 123 |     | <span class='neutral'>        $._initialized = 1;</span>
 124 | *   | <span class='executed'>        if (isTopLevelCall) {</span>
 125 |     | <span class='neutral'>            $._initializing = true;</span>
 126 |     | <span class='neutral'>        }</span>
 127 |     | <span class='neutral'>        _;</span>
 128 | *   | <span class='executed'>        if (isTopLevelCall) {</span>
 129 |     | <span class='neutral'>            $._initializing = false;</span>
 130 | *   | <span class='executed'>            emit Initialized(1);</span>
 131 |     | <span class='neutral'>        }</span>
 132 |     | <span class='neutral'>    }</span>
 133 |     | <span class='neutral'></span>
 134 |     | <span class='neutral'>    /**</span>
 135 |     | <span class='neutral'>     * @dev A modifier that defines a protected reinitializer function that can be invoked at most once, and only if the</span>
 136 |     | <span class='neutral'>     * contract hasn&#39;t been initialized to a greater version before. In its scope, `onlyInitializing` functions can be</span>
 137 |     | <span class='neutral'>     * used to initialize parent contracts.</span>
 138 |     | <span class='neutral'>     *</span>
 139 |     | <span class='neutral'>     * A reinitializer may be used after the original initialization step. This is essential to configure modules that</span>
 140 |     | <span class='neutral'>     * are added through upgrades and that require initialization.</span>
 141 |     | <span class='neutral'>     *</span>
 142 |     | <span class='neutral'>     * When `version` is 1, this modifier is similar to `initializer`, except that functions marked with `reinitializer`</span>
 143 |     | <span class='neutral'>     * cannot be nested. If one is invoked in the context of another, execution will revert.</span>
 144 |     | <span class='neutral'>     *</span>
 145 |     | <span class='neutral'>     * Note that versions can jump in increments greater than 1; this implies that if multiple reinitializers coexist in</span>
 146 |     | <span class='neutral'>     * a contract, executing them in the right order is up to the developer or operator.</span>
 147 |     | <span class='neutral'>     *</span>
 148 |     | <span class='neutral'>     * WARNING: Setting the version to 2**64 - 1 will prevent any future reinitialization.</span>
 149 |     | <span class='neutral'>     *</span>
 150 |     | <span class='neutral'>     * Emits an {Initialized} event.</span>
 151 |     | <span class='neutral'>     */</span>
 152 |     | <span class='neutral'>    modifier reinitializer(uint64 version) {</span>
 153 |     | <span class='neutral'>        // solhint-disable-next-line var-name-mixedcase</span>
 154 |     | <span class='neutral'>        InitializableStorage storage $ = _getInitializableStorage();</span>
 155 |     | <span class='neutral'></span>
 156 |     | <span class='neutral'>        if ($._initializing || $._initialized &gt;= version) {</span>
 157 |     | <span class='neutral'>            revert InvalidInitialization();</span>
 158 |     | <span class='neutral'>        }</span>
 159 |     | <span class='neutral'>        $._initialized = version;</span>
 160 |     | <span class='neutral'>        $._initializing = true;</span>
 161 |     | <span class='neutral'>        _;</span>
 162 |     | <span class='neutral'>        $._initializing = false;</span>
 163 |     | <span class='neutral'>        emit Initialized(version);</span>
 164 |     | <span class='neutral'>    }</span>
 165 |     | <span class='neutral'></span>
 166 |     | <span class='neutral'>    /**</span>
 167 |     | <span class='neutral'>     * @dev Modifier to protect an initialization function so that it can only be invoked by functions with the</span>
 168 |     | <span class='neutral'>     * {initializer} and {reinitializer} modifiers, directly or indirectly.</span>
 169 |     | <span class='neutral'>     */</span>
 170 | *   | <span class='executed'>    modifier onlyInitializing() {</span>
 171 |     | <span class='neutral'>        _checkInitializing();</span>
 172 |     | <span class='neutral'>        _;</span>
 173 |     | <span class='neutral'>    }</span>
 174 |     | <span class='neutral'></span>
 175 |     | <span class='neutral'>    /**</span>
 176 |     | <span class='neutral'>     * @dev Reverts if the contract is not in an initializing state. See {onlyInitializing}.</span>
 177 |     | <span class='neutral'>     */</span>
 178 | *   | <span class='executed'>    function _checkInitializing() internal view virtual {</span>
 179 | *   | <span class='executed'>        if (!_isInitializing()) {</span>
 180 |     | <span class='unexecuted'>            revert NotInitializing();</span>
 181 |     | <span class='neutral'>        }</span>
 182 |     | <span class='neutral'>    }</span>
 183 |     | <span class='neutral'></span>
 184 |     | <span class='neutral'>    /**</span>
 185 |     | <span class='neutral'>     * @dev Locks the contract, preventing any future reinitialization. This cannot be part of an initializer call.</span>
 186 |     | <span class='neutral'>     * Calling this in the constructor of a contract will prevent that contract from being initialized or reinitialized</span>
 187 |     | <span class='neutral'>     * to any version. It is recommended to use this to lock implementation contracts that are designed to be called</span>
 188 |     | <span class='neutral'>     * through proxies.</span>
 189 |     | <span class='neutral'>     *</span>
 190 |     | <span class='neutral'>     * Emits an {Initialized} event the first time it is successfully executed.</span>
 191 |     | <span class='neutral'>     */</span>
 192 |     | <span class='neutral'>    function _disableInitializers() internal virtual {</span>
 193 |     | <span class='neutral'>        // solhint-disable-next-line var-name-mixedcase</span>
 194 |     | <span class='neutral'>        InitializableStorage storage $ = _getInitializableStorage();</span>
 195 |     | <span class='neutral'></span>
 196 |     | <span class='neutral'>        if ($._initializing) {</span>
 197 |     | <span class='neutral'>            revert InvalidInitialization();</span>
 198 |     | <span class='neutral'>        }</span>
 199 |     | <span class='neutral'>        if ($._initialized != type(uint64).max) {</span>
 200 |     | <span class='neutral'>            $._initialized = type(uint64).max;</span>
 201 |     | <span class='neutral'>            emit Initialized(type(uint64).max);</span>
 202 |     | <span class='neutral'>        }</span>
 203 |     | <span class='neutral'>    }</span>
 204 |     | <span class='neutral'></span>
 205 |     | <span class='neutral'>    /**</span>
 206 |     | <span class='neutral'>     * @dev Returns the highest version that has been initialized. See {reinitializer}.</span>
 207 |     | <span class='neutral'>     */</span>
 208 |     | <span class='neutral'>    function _getInitializedVersion() internal view returns (uint64) {</span>
 209 |     | <span class='neutral'>        return _getInitializableStorage()._initialized;</span>
 210 |     | <span class='neutral'>    }</span>
 211 |     | <span class='neutral'></span>
 212 |     | <span class='neutral'>    /**</span>
 213 |     | <span class='neutral'>     * @dev Returns `true` if the contract is currently initializing. See {onlyInitializing}.</span>
 214 |     | <span class='neutral'>     */</span>
 215 |     | <span class='neutral'>    function _isInitializing() internal view returns (bool) {</span>
 216 |     | <span class='neutral'>        return _getInitializableStorage()._initializing;</span>
 217 |     | <span class='neutral'>    }</span>
 218 |     | <span class='neutral'></span>
 219 |     | <span class='neutral'>    /**</span>
 220 |     | <span class='neutral'>     * @dev Returns a pointer to the storage namespace.</span>
 221 |     | <span class='neutral'>     */</span>
 222 |     | <span class='neutral'>    // solhint-disable-next-line var-name-mixedcase</span>
 223 |     | <span class='neutral'>    function _getInitializableStorage() private pure returns (InitializableStorage storage $) {</span>
 224 | *   | <span class='executed'>        assembly {</span>
 225 |     | <span class='neutral'>            $.slot := INITIALIZABLE_STORAGE</span>
 226 |     | <span class='neutral'>        }</span>
 227 |     | <span class='neutral'>    }</span>
 228 |     | <span class='neutral'>}</span>
 229 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/UUPSUpgradeable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (proxy/utils/UUPSUpgradeable.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IERC1822Proxiable} from &quot;@openzeppelin/contracts/interfaces/draft-IERC1822.sol&quot;;</span>
   7 |     | <span class='neutral'>import {ERC1967Utils} from &quot;@openzeppelin/contracts/proxy/ERC1967/ERC1967Utils.sol&quot;;</span>
   8 |     | <span class='neutral'>import {Initializable} from &quot;./Initializable.sol&quot;;</span>
   9 |     | <span class='neutral'></span>
  10 |     | <span class='neutral'>/**</span>
  11 |     | <span class='neutral'> * @dev An upgradeability mechanism designed for UUPS proxies. The functions included here can perform an upgrade of an</span>
  12 |     | <span class='neutral'> * {ERC1967Proxy}, when this contract is set as the implementation behind such a proxy.</span>
  13 |     | <span class='neutral'> *</span>
  14 |     | <span class='neutral'> * A security mechanism ensures that an upgrade does not turn off upgradeability accidentally, although this risk is</span>
  15 |     | <span class='neutral'> * reinstated if the upgrade retains upgradeability but removes the security mechanism, e.g. by replacing</span>
  16 |     | <span class='neutral'> * `UUPSUpgradeable` with a custom implementation of upgrades.</span>
  17 |     | <span class='neutral'> *</span>
  18 |     | <span class='neutral'> * The {_authorizeUpgrade} function must be overridden to include access restriction to the upgrade mechanism.</span>
  19 |     | <span class='neutral'> */</span>
  20 |     | <span class='neutral'>abstract contract UUPSUpgradeable is Initializable, IERC1822Proxiable {</span>
  21 |     | <span class='neutral'>    /// @custom:oz-upgrades-unsafe-allow state-variable-immutable</span>
  22 | *   | <span class='executed'>    address private immutable __self = address(this);</span>
  23 |     | <span class='neutral'></span>
  24 |     | <span class='neutral'>    /**</span>
  25 |     | <span class='neutral'>     * @dev The version of the upgrade interface of the contract. If this getter is missing, both `upgradeTo(address)`</span>
  26 |     | <span class='neutral'>     * and `upgradeToAndCall(address,bytes)` are present, and `upgradeTo` must be used if no function should be called,</span>
  27 |     | <span class='neutral'>     * while `upgradeToAndCall` will invoke the `receive` function if the second argument is the empty byte string.</span>
  28 |     | <span class='neutral'>     * If the getter returns `&quot;5.0.0&quot;`, only `upgradeToAndCall(address,bytes)` is present, and the second argument must</span>
  29 |     | <span class='neutral'>     * be the empty byte string if no function should be called, making it impossible to invoke the `receive` function</span>
  30 |     | <span class='neutral'>     * during an upgrade.</span>
  31 |     | <span class='neutral'>     */</span>
  32 |     | <span class='neutral'>    string public constant UPGRADE_INTERFACE_VERSION = &quot;5.0.0&quot;;</span>
  33 |     | <span class='neutral'></span>
  34 |     | <span class='neutral'>    /**</span>
  35 |     | <span class='neutral'>     * @dev The call is from an unauthorized context.</span>
  36 |     | <span class='neutral'>     */</span>
  37 |     | <span class='neutral'>    error UUPSUnauthorizedCallContext();</span>
  38 |     | <span class='neutral'></span>
  39 |     | <span class='neutral'>    /**</span>
  40 |     | <span class='neutral'>     * @dev The storage `slot` is unsupported as a UUID.</span>
  41 |     | <span class='neutral'>     */</span>
  42 |     | <span class='neutral'>    error UUPSUnsupportedProxiableUUID(bytes32 slot);</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>    /**</span>
  45 |     | <span class='neutral'>     * @dev Check that the execution is being performed through a delegatecall call and that the execution context is</span>
  46 |     | <span class='neutral'>     * a proxy contract with an implementation (as defined in ERC1967) pointing to self. This should only be the case</span>
  47 |     | <span class='neutral'>     * for UUPS and transparent proxies that are using the current contract as their implementation. Execution of a</span>
  48 |     | <span class='neutral'>     * function through ERC1167 minimal proxies (clones) would not normally pass this test, but is not guaranteed to</span>
  49 |     | <span class='neutral'>     * fail.</span>
  50 |     | <span class='neutral'>     */</span>
  51 |     | <span class='neutral'>    modifier onlyProxy() {</span>
  52 |     | <span class='neutral'>        _checkProxy();</span>
  53 |     | <span class='neutral'>        _;</span>
  54 |     | <span class='neutral'>    }</span>
  55 |     | <span class='neutral'></span>
  56 |     | <span class='neutral'>    /**</span>
  57 |     | <span class='neutral'>     * @dev Check that the execution is not being performed through a delegate call. This allows a function to be</span>
  58 |     | <span class='neutral'>     * callable on the implementing contract but not through proxies.</span>
  59 |     | <span class='neutral'>     */</span>
  60 |     | <span class='neutral'>    modifier notDelegated() {</span>
  61 |     | <span class='neutral'>        _checkNotDelegated();</span>
  62 |     | <span class='neutral'>        _;</span>
  63 |     | <span class='neutral'>    }</span>
  64 |     | <span class='neutral'></span>
  65 |     | <span class='neutral'>    function __UUPSUpgradeable_init() internal onlyInitializing {</span>
  66 |     | <span class='neutral'>    }</span>
  67 |     | <span class='neutral'></span>
  68 |     | <span class='neutral'>    function __UUPSUpgradeable_init_unchained() internal onlyInitializing {</span>
  69 |     | <span class='neutral'>    }</span>
  70 |     | <span class='neutral'>    /**</span>
  71 |     | <span class='neutral'>     * @dev Implementation of the ERC1822 {proxiableUUID} function. This returns the storage slot used by the</span>
  72 |     | <span class='neutral'>     * implementation. It is used to validate the implementation&#39;s compatibility when performing an upgrade.</span>
  73 |     | <span class='neutral'>     *</span>
  74 |     | <span class='neutral'>     * IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks</span>
  75 |     | <span class='neutral'>     * bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this</span>
  76 |     | <span class='neutral'>     * function revert if invoked through a proxy. This is guaranteed by the `notDelegated` modifier.</span>
  77 |     | <span class='neutral'>     */</span>
  78 |     | <span class='neutral'>    function proxiableUUID() external view virtual notDelegated returns (bytes32) {</span>
  79 |     | <span class='neutral'>        return ERC1967Utils.IMPLEMENTATION_SLOT;</span>
  80 |     | <span class='neutral'>    }</span>
  81 |     | <span class='neutral'></span>
  82 |     | <span class='neutral'>    /**</span>
  83 |     | <span class='neutral'>     * @dev Upgrade the implementation of the proxy to `newImplementation`, and subsequently execute the function call</span>
  84 |     | <span class='neutral'>     * encoded in `data`.</span>
  85 |     | <span class='neutral'>     *</span>
  86 |     | <span class='neutral'>     * Calls {_authorizeUpgrade}.</span>
  87 |     | <span class='neutral'>     *</span>
  88 |     | <span class='neutral'>     * Emits an {Upgraded} event.</span>
  89 |     | <span class='neutral'>     *</span>
  90 |     | <span class='neutral'>     * @custom:oz-upgrades-unsafe-allow-reachable delegatecall</span>
  91 |     | <span class='neutral'>     */</span>
  92 |     | <span class='neutral'>    function upgradeToAndCall(address newImplementation, bytes memory data) public payable virtual onlyProxy {</span>
  93 |     | <span class='neutral'>        _authorizeUpgrade(newImplementation);</span>
  94 |     | <span class='neutral'>        _upgradeToAndCallUUPS(newImplementation, data);</span>
  95 |     | <span class='neutral'>    }</span>
  96 |     | <span class='neutral'></span>
  97 |     | <span class='neutral'>    /**</span>
  98 |     | <span class='neutral'>     * @dev Reverts if the execution is not performed via delegatecall or the execution</span>
  99 |     | <span class='neutral'>     * context is not of a proxy with an ERC1967-compliant implementation pointing to self.</span>
 100 |     | <span class='neutral'>     * See {_onlyProxy}.</span>
 101 |     | <span class='neutral'>     */</span>
 102 |     | <span class='neutral'>    function _checkProxy() internal view virtual {</span>
 103 |     | <span class='unexecuted'>        if (</span>
 104 |     | <span class='unexecuted'>            address(this) == __self || // Must be called through delegatecall</span>
 105 |     | <span class='unexecuted'>            ERC1967Utils.getImplementation() != __self // Must be called through an active proxy</span>
 106 |     | <span class='neutral'>        ) {</span>
 107 |     | <span class='unexecuted'>            revert UUPSUnauthorizedCallContext();</span>
 108 |     | <span class='neutral'>        }</span>
 109 |     | <span class='neutral'>    }</span>
 110 |     | <span class='neutral'></span>
 111 |     | <span class='neutral'>    /**</span>
 112 |     | <span class='neutral'>     * @dev Reverts if the execution is performed via delegatecall.</span>
 113 |     | <span class='neutral'>     * See {notDelegated}.</span>
 114 |     | <span class='neutral'>     */</span>
 115 |     | <span class='neutral'>    function _checkNotDelegated() internal view virtual {</span>
 116 |     | <span class='unexecuted'>        if (address(this) != __self) {</span>
 117 |     | <span class='neutral'>            // Must not be called through delegatecall</span>
 118 |     | <span class='unexecuted'>            revert UUPSUnauthorizedCallContext();</span>
 119 |     | <span class='neutral'>        }</span>
 120 |     | <span class='neutral'>    }</span>
 121 |     | <span class='neutral'></span>
 122 |     | <span class='neutral'>    /**</span>
 123 |     | <span class='neutral'>     * @dev Function that should revert when `msg.sender` is not authorized to upgrade the contract. Called by</span>
 124 |     | <span class='neutral'>     * {upgradeToAndCall}.</span>
 125 |     | <span class='neutral'>     *</span>
 126 |     | <span class='neutral'>     * Normally, this function will use an xref:access.adoc[access control] modifier such as {Ownable-onlyOwner}.</span>
 127 |     | <span class='neutral'>     *</span>
 128 |     | <span class='neutral'>     * ```solidity</span>
 129 |     | <span class='neutral'>     * function _authorizeUpgrade(address) internal onlyOwner {}</span>
 130 |     | <span class='neutral'>     * ```</span>
 131 |     | <span class='neutral'>     */</span>
 132 |     | <span class='neutral'>    function _authorizeUpgrade(address newImplementation) internal virtual;</span>
 133 |     | <span class='neutral'></span>
 134 |     | <span class='neutral'>    /**</span>
 135 |     | <span class='neutral'>     * @dev Performs an implementation upgrade with a security check for UUPS proxies, and additional setup call.</span>
 136 |     | <span class='neutral'>     *</span>
 137 |     | <span class='neutral'>     * As a security check, {proxiableUUID} is invoked in the new implementation, and the return value</span>
 138 |     | <span class='neutral'>     * is expected to be the implementation slot in ERC1967.</span>
 139 |     | <span class='neutral'>     *</span>
 140 |     | <span class='neutral'>     * Emits an {IERC1967-Upgraded} event.</span>
 141 |     | <span class='neutral'>     */</span>
 142 |     | <span class='neutral'>    function _upgradeToAndCallUUPS(address newImplementation, bytes memory data) private {</span>
 143 |     | <span class='unexecuted'>        try IERC1822Proxiable(newImplementation).proxiableUUID() returns (bytes32 slot) {</span>
 144 |     | <span class='unexecuted'>            if (slot != ERC1967Utils.IMPLEMENTATION_SLOT) {</span>
 145 |     | <span class='unexecuted'>                revert UUPSUnsupportedProxiableUUID(slot);</span>
 146 |     | <span class='neutral'>            }</span>
 147 |     | <span class='neutral'>            ERC1967Utils.upgradeToAndCall(newImplementation, data);</span>
 148 |     | <span class='neutral'>        } catch {</span>
 149 |     | <span class='neutral'>            // The implementation is not UUPS</span>
 150 |     | <span class='unexecuted'>            revert ERC1967Utils.ERC1967InvalidImplementation(newImplementation);</span>
 151 |     | <span class='neutral'>        }</span>
 152 |     | <span class='neutral'>    }</span>
 153 |     | <span class='neutral'>}</span>
 154 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/utils/ContextUpgradeable.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.1) (utils/Context.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'>import {Initializable} from &quot;../proxy/utils/Initializable.sol&quot;;</span>
  6 |     | <span class='neutral'></span>
  7 |     | <span class='neutral'>/**</span>
  8 |     | <span class='neutral'> * @dev Provides information about the current execution context, including the</span>
  9 |     | <span class='neutral'> * sender of the transaction and its data. While these are generally available</span>
 10 |     | <span class='neutral'> * via msg.sender and msg.data, they should not be accessed in such a direct</span>
 11 |     | <span class='neutral'> * manner, since when dealing with meta-transactions the account sending and</span>
 12 |     | <span class='neutral'> * paying for execution may not be the actual sender (as far as an application</span>
 13 |     | <span class='neutral'> * is concerned).</span>
 14 |     | <span class='neutral'> *</span>
 15 |     | <span class='neutral'> * This contract is only required for intermediate, library-like contracts.</span>
 16 |     | <span class='neutral'> */</span>
 17 |     | <span class='neutral'>abstract contract ContextUpgradeable is Initializable {</span>
 18 |     | <span class='neutral'>    function __Context_init() internal onlyInitializing {</span>
 19 |     | <span class='neutral'>    }</span>
 20 |     | <span class='neutral'></span>
 21 |     | <span class='neutral'>    function __Context_init_unchained() internal onlyInitializing {</span>
 22 |     | <span class='neutral'>    }</span>
 23 |     | <span class='neutral'>    function _msgSender() internal view virtual returns (address) {</span>
 24 | *   | <span class='executed'>        return msg.sender;</span>
 25 |     | <span class='neutral'>    }</span>
 26 |     | <span class='neutral'></span>
 27 |     | <span class='neutral'>    function _msgData() internal view virtual returns (bytes calldata) {</span>
 28 |     | <span class='neutral'>        return msg.data;</span>
 29 |     | <span class='neutral'>    }</span>
 30 |     | <span class='neutral'></span>
 31 |     | <span class='neutral'>    function _contextSuffixLength() internal view virtual returns (uint256) {</span>
 32 |     | <span class='neutral'>        return 0;</span>
 33 |     | <span class='neutral'>    }</span>
 34 |     | <span class='neutral'>}</span>
 35 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/utils/PausableUpgradeable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/Pausable.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {ContextUpgradeable} from &quot;../utils/ContextUpgradeable.sol&quot;;</span>
   7 |     | <span class='neutral'>import {Initializable} from &quot;../proxy/utils/Initializable.sol&quot;;</span>
   8 |     | <span class='neutral'></span>
   9 |     | <span class='neutral'>/**</span>
  10 |     | <span class='neutral'> * @dev Contract module which allows children to implement an emergency stop</span>
  11 |     | <span class='neutral'> * mechanism that can be triggered by an authorized account.</span>
  12 |     | <span class='neutral'> *</span>
  13 |     | <span class='neutral'> * This module is used through inheritance. It will make available the</span>
  14 |     | <span class='neutral'> * modifiers `whenNotPaused` and `whenPaused`, which can be applied to</span>
  15 |     | <span class='neutral'> * the functions of your contract. Note that they will not be pausable by</span>
  16 |     | <span class='neutral'> * simply including this module, only once the modifiers are put in place.</span>
  17 |     | <span class='neutral'> */</span>
  18 |     | <span class='neutral'>abstract contract PausableUpgradeable is Initializable, ContextUpgradeable {</span>
  19 |     | <span class='neutral'>    /// @custom:storage-location erc7201:openzeppelin.storage.Pausable</span>
  20 |     | <span class='neutral'>    struct PausableStorage {</span>
  21 |     | <span class='neutral'>        bool _paused;</span>
  22 |     | <span class='neutral'>    }</span>
  23 |     | <span class='neutral'></span>
  24 |     | <span class='neutral'>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.Pausable&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</span>
  25 |     | <span class='neutral'>    bytes32 private constant PausableStorageLocation = 0xcd5ed15c6e187e77e9aee88184c21f4f2182ab5827cb3b7e07fbedcd63f03300;</span>
  26 |     | <span class='neutral'></span>
  27 |     | <span class='neutral'>    function _getPausableStorage() private pure returns (PausableStorage storage $) {</span>
  28 | *   | <span class='executed'>        assembly {</span>
  29 |     | <span class='neutral'>            $.slot := PausableStorageLocation</span>
  30 |     | <span class='neutral'>        }</span>
  31 |     | <span class='neutral'>    }</span>
  32 |     | <span class='neutral'></span>
  33 |     | <span class='neutral'>    /**</span>
  34 |     | <span class='neutral'>     * @dev Emitted when the pause is triggered by `account`.</span>
  35 |     | <span class='neutral'>     */</span>
  36 |     | <span class='neutral'>    event Paused(address account);</span>
  37 |     | <span class='neutral'></span>
  38 |     | <span class='neutral'>    /**</span>
  39 |     | <span class='neutral'>     * @dev Emitted when the pause is lifted by `account`.</span>
  40 |     | <span class='neutral'>     */</span>
  41 |     | <span class='neutral'>    event Unpaused(address account);</span>
  42 |     | <span class='neutral'></span>
  43 |     | <span class='neutral'>    /**</span>
  44 |     | <span class='neutral'>     * @dev The operation failed because the contract is paused.</span>
  45 |     | <span class='neutral'>     */</span>
  46 |     | <span class='neutral'>    error EnforcedPause();</span>
  47 |     | <span class='neutral'></span>
  48 |     | <span class='neutral'>    /**</span>
  49 |     | <span class='neutral'>     * @dev The operation failed because the contract is not paused.</span>
  50 |     | <span class='neutral'>     */</span>
  51 |     | <span class='neutral'>    error ExpectedPause();</span>
  52 |     | <span class='neutral'></span>
  53 |     | <span class='neutral'>    /**</span>
  54 |     | <span class='neutral'>     * @dev Initializes the contract in unpaused state.</span>
  55 |     | <span class='neutral'>     */</span>
  56 |     | <span class='neutral'>    function __Pausable_init() internal onlyInitializing {</span>
  57 |     | <span class='neutral'>        __Pausable_init_unchained();</span>
  58 |     | <span class='neutral'>    }</span>
  59 |     | <span class='neutral'></span>
  60 |     | <span class='neutral'>    function __Pausable_init_unchained() internal onlyInitializing {</span>
  61 |     | <span class='neutral'>        PausableStorage storage $ = _getPausableStorage();</span>
  62 |     | <span class='neutral'>        $._paused = false;</span>
  63 |     | <span class='neutral'>    }</span>
  64 |     | <span class='neutral'></span>
  65 |     | <span class='neutral'>    /**</span>
  66 |     | <span class='neutral'>     * @dev Modifier to make a function callable only when the contract is not paused.</span>
  67 |     | <span class='neutral'>     *</span>
  68 |     | <span class='neutral'>     * Requirements:</span>
  69 |     | <span class='neutral'>     *</span>
  70 |     | <span class='neutral'>     * - The contract must not be paused.</span>
  71 |     | <span class='neutral'>     */</span>
  72 | *   | <span class='executed'>    modifier whenNotPaused() {</span>
  73 |     | <span class='neutral'>        _requireNotPaused();</span>
  74 | *   | <span class='executed'>        _;</span>
  75 |     | <span class='neutral'>    }</span>
  76 |     | <span class='neutral'></span>
  77 |     | <span class='neutral'>    /**</span>
  78 |     | <span class='neutral'>     * @dev Modifier to make a function callable only when the contract is paused.</span>
  79 |     | <span class='neutral'>     *</span>
  80 |     | <span class='neutral'>     * Requirements:</span>
  81 |     | <span class='neutral'>     *</span>
  82 |     | <span class='neutral'>     * - The contract must be paused.</span>
  83 |     | <span class='neutral'>     */</span>
  84 |     | <span class='neutral'>    modifier whenPaused() {</span>
  85 |     | <span class='neutral'>        _requirePaused();</span>
  86 |     | <span class='neutral'>        _;</span>
  87 |     | <span class='neutral'>    }</span>
  88 |     | <span class='neutral'></span>
  89 |     | <span class='neutral'>    /**</span>
  90 |     | <span class='neutral'>     * @dev Returns true if the contract is paused, and false otherwise.</span>
  91 |     | <span class='neutral'>     */</span>
  92 |     | <span class='neutral'>    function paused() public view virtual returns (bool) {</span>
  93 |     | <span class='neutral'>        PausableStorage storage $ = _getPausableStorage();</span>
  94 |     | <span class='neutral'>        return $._paused;</span>
  95 |     | <span class='neutral'>    }</span>
  96 |     | <span class='neutral'></span>
  97 |     | <span class='neutral'>    /**</span>
  98 |     | <span class='neutral'>     * @dev Throws if the contract is paused.</span>
  99 |     | <span class='neutral'>     */</span>
 100 | *   | <span class='executed'>    function _requireNotPaused() internal view virtual {</span>
 101 | *   | <span class='executed'>        if (paused()) {</span>
 102 |     | <span class='unexecuted'>            revert EnforcedPause();</span>
 103 |     | <span class='neutral'>        }</span>
 104 |     | <span class='neutral'>    }</span>
 105 |     | <span class='neutral'></span>
 106 |     | <span class='neutral'>    /**</span>
 107 |     | <span class='neutral'>     * @dev Throws if the contract is not paused.</span>
 108 |     | <span class='neutral'>     */</span>
 109 |     | <span class='neutral'>    function _requirePaused() internal view virtual {</span>
 110 |     | <span class='neutral'>        if (!paused()) {</span>
 111 |     | <span class='neutral'>            revert ExpectedPause();</span>
 112 |     | <span class='neutral'>        }</span>
 113 |     | <span class='neutral'>    }</span>
 114 |     | <span class='neutral'></span>
 115 |     | <span class='neutral'>    /**</span>
 116 |     | <span class='neutral'>     * @dev Triggers stopped state.</span>
 117 |     | <span class='neutral'>     *</span>
 118 |     | <span class='neutral'>     * Requirements:</span>
 119 |     | <span class='neutral'>     *</span>
 120 |     | <span class='neutral'>     * - The contract must not be paused.</span>
 121 |     | <span class='neutral'>     */</span>
 122 |     | <span class='neutral'>    function _pause() internal virtual whenNotPaused {</span>
 123 |     | <span class='neutral'>        PausableStorage storage $ = _getPausableStorage();</span>
 124 |     | <span class='neutral'>        $._paused = true;</span>
 125 |     | <span class='neutral'>        emit Paused(_msgSender());</span>
 126 |     | <span class='neutral'>    }</span>
 127 |     | <span class='neutral'></span>
 128 |     | <span class='neutral'>    /**</span>
 129 |     | <span class='neutral'>     * @dev Returns to normal state.</span>
 130 |     | <span class='neutral'>     *</span>
 131 |     | <span class='neutral'>     * Requirements:</span>
 132 |     | <span class='neutral'>     *</span>
 133 |     | <span class='neutral'>     * - The contract must be paused.</span>
 134 |     | <span class='neutral'>     */</span>
 135 |     | <span class='neutral'>    function _unpause() internal virtual whenPaused {</span>
 136 |     | <span class='neutral'>        PausableStorage storage $ = _getPausableStorage();</span>
 137 |     | <span class='neutral'>        $._paused = false;</span>
 138 |     | <span class='neutral'>        emit Unpaused(_msgSender());</span>
 139 |     | <span class='neutral'>    }</span>
 140 |     | <span class='neutral'>}</span>
 141 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/utils/ReentrancyGuardUpgradeable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/ReentrancyGuard.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'>import {Initializable} from &quot;../proxy/utils/Initializable.sol&quot;;</span>
   6 |     | <span class='neutral'></span>
   7 |     | <span class='neutral'>/**</span>
   8 |     | <span class='neutral'> * @dev Contract module that helps prevent reentrant calls to a function.</span>
   9 |     | <span class='neutral'> *</span>
  10 |     | <span class='neutral'> * Inheriting from `ReentrancyGuard` will make the {nonReentrant} modifier</span>
  11 |     | <span class='neutral'> * available, which can be applied to functions to make sure there are no nested</span>
  12 |     | <span class='neutral'> * (reentrant) calls to them.</span>
  13 |     | <span class='neutral'> *</span>
  14 |     | <span class='neutral'> * Note that because there is a single `nonReentrant` guard, functions marked as</span>
  15 |     | <span class='neutral'> * `nonReentrant` may not call one another. This can be worked around by making</span>
  16 |     | <span class='neutral'> * those functions `private`, and then adding `external` `nonReentrant` entry</span>
  17 |     | <span class='neutral'> * points to them.</span>
  18 |     | <span class='neutral'> *</span>
  19 |     | <span class='neutral'> * TIP: If you would like to learn more about reentrancy and alternative ways</span>
  20 |     | <span class='neutral'> * to protect against it, check out our blog post</span>
  21 |     | <span class='neutral'> * https://blog.openzeppelin.com/reentrancy-after-istanbul/[Reentrancy After Istanbul].</span>
  22 |     | <span class='neutral'> */</span>
  23 |     | <span class='neutral'>abstract contract ReentrancyGuardUpgradeable is Initializable {</span>
  24 |     | <span class='neutral'>    // Booleans are more expensive than uint256 or any type that takes up a full</span>
  25 |     | <span class='neutral'>    // word because each write operation emits an extra SLOAD to first read the</span>
  26 |     | <span class='neutral'>    // slot&#39;s contents, replace the bits taken up by the boolean, and then write</span>
  27 |     | <span class='neutral'>    // back. This is the compiler&#39;s defense against contract upgrades and</span>
  28 |     | <span class='neutral'>    // pointer aliasing, and it cannot be disabled.</span>
  29 |     | <span class='neutral'></span>
  30 |     | <span class='neutral'>    // The values being non-zero value makes deployment a bit more expensive,</span>
  31 |     | <span class='neutral'>    // but in exchange the refund on every call to nonReentrant will be lower in</span>
  32 |     | <span class='neutral'>    // amount. Since refunds are capped to a percentage of the total</span>
  33 |     | <span class='neutral'>    // transaction&#39;s gas, it is best to keep them low in cases like this one, to</span>
  34 |     | <span class='neutral'>    // increase the likelihood of the full refund coming into effect.</span>
  35 | *   | <span class='executed'>    uint256 private constant NOT_ENTERED = 1;</span>
  36 | *   | <span class='executed'>    uint256 private constant ENTERED = 2;</span>
  37 |     | <span class='neutral'></span>
  38 |     | <span class='neutral'>    /// @custom:storage-location erc7201:openzeppelin.storage.ReentrancyGuard</span>
  39 |     | <span class='neutral'>    struct ReentrancyGuardStorage {</span>
  40 |     | <span class='neutral'>        uint256 _status;</span>
  41 |     | <span class='neutral'>    }</span>
  42 |     | <span class='neutral'></span>
  43 |     | <span class='neutral'>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.ReentrancyGuard&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</span>
  44 |     | <span class='neutral'>    bytes32 private constant ReentrancyGuardStorageLocation = 0x9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f00;</span>
  45 |     | <span class='neutral'></span>
  46 |     | <span class='neutral'>    function _getReentrancyGuardStorage() private pure returns (ReentrancyGuardStorage storage $) {</span>
  47 |     | <span class='neutral'>        assembly {</span>
  48 |     | <span class='neutral'>            $.slot := ReentrancyGuardStorageLocation</span>
  49 |     | <span class='neutral'>        }</span>
  50 |     | <span class='neutral'>    }</span>
  51 |     | <span class='neutral'></span>
  52 |     | <span class='neutral'>    /**</span>
  53 |     | <span class='neutral'>     * @dev Unauthorized reentrant call.</span>
  54 |     | <span class='neutral'>     */</span>
  55 |     | <span class='neutral'>    error ReentrancyGuardReentrantCall();</span>
  56 |     | <span class='neutral'></span>
  57 |     | <span class='neutral'>    function __ReentrancyGuard_init() internal onlyInitializing {</span>
  58 |     | <span class='neutral'>        __ReentrancyGuard_init_unchained();</span>
  59 |     | <span class='neutral'>    }</span>
  60 |     | <span class='neutral'></span>
  61 |     | <span class='neutral'>    function __ReentrancyGuard_init_unchained() internal onlyInitializing {</span>
  62 |     | <span class='neutral'>        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();</span>
  63 |     | <span class='neutral'>        $._status = NOT_ENTERED;</span>
  64 |     | <span class='neutral'>    }</span>
  65 |     | <span class='neutral'></span>
  66 |     | <span class='neutral'>    /**</span>
  67 |     | <span class='neutral'>     * @dev Prevents a contract from calling itself, directly or indirectly.</span>
  68 |     | <span class='neutral'>     * Calling a `nonReentrant` function from another `nonReentrant`</span>
  69 |     | <span class='neutral'>     * function is not supported. It is possible to prevent this from happening</span>
  70 |     | <span class='neutral'>     * by making the `nonReentrant` function external, and making it call a</span>
  71 |     | <span class='neutral'>     * `private` function that does the actual work.</span>
  72 |     | <span class='neutral'>     */</span>
  73 | *   | <span class='executed'>    modifier nonReentrant() {</span>
  74 |     | <span class='neutral'>        _nonReentrantBefore();</span>
  75 |     | <span class='neutral'>        _;</span>
  76 |     | <span class='neutral'>        _nonReentrantAfter();</span>
  77 |     | <span class='neutral'>    }</span>
  78 |     | <span class='neutral'></span>
  79 | *   | <span class='executed'>    function _nonReentrantBefore() private {</span>
  80 |     | <span class='neutral'>        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();</span>
  81 |     | <span class='neutral'>        // On the first call to nonReentrant, _status will be NOT_ENTERED</span>
  82 | *   | <span class='executed'>        if ($._status == ENTERED) {</span>
  83 |     | <span class='unexecuted'>            revert ReentrancyGuardReentrantCall();</span>
  84 |     | <span class='neutral'>        }</span>
  85 |     | <span class='neutral'></span>
  86 |     | <span class='neutral'>        // Any calls to nonReentrant after this point will fail</span>
  87 |     | <span class='neutral'>        $._status = ENTERED;</span>
  88 |     | <span class='neutral'>    }</span>
  89 |     | <span class='neutral'></span>
  90 |     | <span class='neutral'>    function _nonReentrantAfter() private {</span>
  91 |     | <span class='neutral'>        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();</span>
  92 |     | <span class='neutral'>        // By storing the original value once again, a refund is triggered (see</span>
  93 |     | <span class='neutral'>        // https://eips.ethereum.org/EIPS/eip-2200)</span>
  94 |     | <span class='neutral'>        $._status = NOT_ENTERED;</span>
  95 |     | <span class='neutral'>    }</span>
  96 |     | <span class='neutral'></span>
  97 |     | <span class='neutral'>    /**</span>
  98 |     | <span class='neutral'>     * @dev Returns true if the reentrancy guard is currently set to &quot;entered&quot;, which indicates there is a</span>
  99 |     | <span class='neutral'>     * `nonReentrant` function in the call stack.</span>
 100 |     | <span class='neutral'>     */</span>
 101 |     | <span class='neutral'>    function _reentrancyGuardEntered() internal view returns (bool) {</span>
 102 |     | <span class='neutral'>        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();</span>
 103 |     | <span class='neutral'>        return $._status == ENTERED;</span>
 104 |     | <span class='neutral'>    }</span>
 105 |     | <span class='neutral'>}</span>
 106 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/utils/introspection/ERC165Upgradeable.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/introspection/ERC165.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>import {IERC165} from &quot;@openzeppelin/contracts/utils/introspection/IERC165.sol&quot;;</span>
  7 |     | <span class='neutral'>import {Initializable} from &quot;../../proxy/utils/Initializable.sol&quot;;</span>
  8 |     | <span class='neutral'></span>
  9 |     | <span class='neutral'>/**</span>
 10 |     | <span class='neutral'> * @dev Implementation of the {IERC165} interface.</span>
 11 |     | <span class='neutral'> *</span>
 12 |     | <span class='neutral'> * Contracts that want to implement ERC165 should inherit from this contract and override {supportsInterface} to check</span>
 13 |     | <span class='neutral'> * for the additional interface id that will be supported. For example:</span>
 14 |     | <span class='neutral'> *</span>
 15 |     | <span class='neutral'> * ```solidity</span>
 16 |     | <span class='neutral'> * function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {</span>
 17 |     | <span class='neutral'> *     return interfaceId == type(MyInterface).interfaceId || super.supportsInterface(interfaceId);</span>
 18 |     | <span class='neutral'> * }</span>
 19 |     | <span class='neutral'> * ```</span>
 20 |     | <span class='neutral'> */</span>
 21 |     | <span class='neutral'>abstract contract ERC165Upgradeable is Initializable, IERC165 {</span>
 22 |     | <span class='neutral'>    function __ERC165_init() internal onlyInitializing {</span>
 23 |     | <span class='neutral'>    }</span>
 24 |     | <span class='neutral'></span>
 25 |     | <span class='neutral'>    function __ERC165_init_unchained() internal onlyInitializing {</span>
 26 |     | <span class='neutral'>    }</span>
 27 |     | <span class='neutral'>    /**</span>
 28 |     | <span class='neutral'>     * @dev See {IERC165-supportsInterface}.</span>
 29 |     | <span class='neutral'>     */</span>
 30 |     | <span class='neutral'>    function supportsInterface(bytes4 interfaceId) public view virtual returns (bool) {</span>
 31 |     | <span class='unexecuted'>        return interfaceId == type(IERC165).interfaceId;</span>
 32 |     | <span class='neutral'>    }</span>
 33 |     | <span class='neutral'>}</span>
 34 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/access/IAccessControl.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (access/IAccessControl.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>/**</span>
   7 |     | <span class='neutral'> * @dev External interface of AccessControl declared to support ERC165 detection.</span>
   8 |     | <span class='neutral'> */</span>
   9 |     | <span class='neutral'>interface IAccessControl {</span>
  10 |     | <span class='neutral'>    /**</span>
  11 |     | <span class='neutral'>     * @dev The `account` is missing a role.</span>
  12 |     | <span class='neutral'>     */</span>
  13 |     | <span class='neutral'>    error AccessControlUnauthorizedAccount(address account, bytes32 neededRole);</span>
  14 |     | <span class='neutral'></span>
  15 |     | <span class='neutral'>    /**</span>
  16 |     | <span class='neutral'>     * @dev The caller of a function is not the expected one.</span>
  17 |     | <span class='neutral'>     *</span>
  18 |     | <span class='neutral'>     * NOTE: Don&#39;t confuse with {AccessControlUnauthorizedAccount}.</span>
  19 |     | <span class='neutral'>     */</span>
  20 |     | <span class='neutral'>    error AccessControlBadConfirmation();</span>
  21 |     | <span class='neutral'></span>
  22 |     | <span class='neutral'>    /**</span>
  23 |     | <span class='neutral'>     * @dev Emitted when `newAdminRole` is set as ``role``&#39;s admin role, replacing `previousAdminRole`</span>
  24 |     | <span class='neutral'>     *</span>
  25 |     | <span class='neutral'>     * `DEFAULT_ADMIN_ROLE` is the starting admin for all roles, despite</span>
  26 |     | <span class='neutral'>     * {RoleAdminChanged} not being emitted signaling this.</span>
  27 |     | <span class='neutral'>     */</span>
  28 |     | <span class='neutral'>    event RoleAdminChanged(bytes32 indexed role, bytes32 indexed previousAdminRole, bytes32 indexed newAdminRole);</span>
  29 |     | <span class='neutral'></span>
  30 |     | <span class='neutral'>    /**</span>
  31 |     | <span class='neutral'>     * @dev Emitted when `account` is granted `role`.</span>
  32 |     | <span class='neutral'>     *</span>
  33 |     | <span class='neutral'>     * `sender` is the account that originated the contract call, an admin role</span>
  34 |     | <span class='neutral'>     * bearer except when using {AccessControl-_setupRole}.</span>
  35 |     | <span class='neutral'>     */</span>
  36 |     | <span class='neutral'>    event RoleGranted(bytes32 indexed role, address indexed account, address indexed sender);</span>
  37 |     | <span class='neutral'></span>
  38 |     | <span class='neutral'>    /**</span>
  39 |     | <span class='neutral'>     * @dev Emitted when `account` is revoked `role`.</span>
  40 |     | <span class='neutral'>     *</span>
  41 |     | <span class='neutral'>     * `sender` is the account that originated the contract call:</span>
  42 |     | <span class='neutral'>     *   - if using `revokeRole`, it is the admin role bearer</span>
  43 |     | <span class='neutral'>     *   - if using `renounceRole`, it is the role bearer (i.e. `account`)</span>
  44 |     | <span class='neutral'>     */</span>
  45 |     | <span class='neutral'>    event RoleRevoked(bytes32 indexed role, address indexed account, address indexed sender);</span>
  46 |     | <span class='neutral'></span>
  47 |     | <span class='neutral'>    /**</span>
  48 |     | <span class='neutral'>     * @dev Returns `true` if `account` has been granted `role`.</span>
  49 |     | <span class='neutral'>     */</span>
  50 |     | <span class='neutral'>    function hasRole(bytes32 role, address account) external view returns (bool);</span>
  51 |     | <span class='neutral'></span>
  52 |     | <span class='neutral'>    /**</span>
  53 |     | <span class='neutral'>     * @dev Returns the admin role that controls `role`. See {grantRole} and</span>
  54 |     | <span class='neutral'>     * {revokeRole}.</span>
  55 |     | <span class='neutral'>     *</span>
  56 |     | <span class='neutral'>     * To change a role&#39;s admin, use {AccessControl-_setRoleAdmin}.</span>
  57 |     | <span class='neutral'>     */</span>
  58 |     | <span class='neutral'>    function getRoleAdmin(bytes32 role) external view returns (bytes32);</span>
  59 |     | <span class='neutral'></span>
  60 |     | <span class='neutral'>    /**</span>
  61 |     | <span class='neutral'>     * @dev Grants `role` to `account`.</span>
  62 |     | <span class='neutral'>     *</span>
  63 |     | <span class='neutral'>     * If `account` had not been already granted `role`, emits a {RoleGranted}</span>
  64 |     | <span class='neutral'>     * event.</span>
  65 |     | <span class='neutral'>     *</span>
  66 |     | <span class='neutral'>     * Requirements:</span>
  67 |     | <span class='neutral'>     *</span>
  68 |     | <span class='neutral'>     * - the caller must have ``role``&#39;s admin role.</span>
  69 |     | <span class='neutral'>     */</span>
  70 |     | <span class='neutral'>    function grantRole(bytes32 role, address account) external;</span>
  71 |     | <span class='neutral'></span>
  72 |     | <span class='neutral'>    /**</span>
  73 |     | <span class='neutral'>     * @dev Revokes `role` from `account`.</span>
  74 |     | <span class='neutral'>     *</span>
  75 |     | <span class='neutral'>     * If `account` had been granted `role`, emits a {RoleRevoked} event.</span>
  76 |     | <span class='neutral'>     *</span>
  77 |     | <span class='neutral'>     * Requirements:</span>
  78 |     | <span class='neutral'>     *</span>
  79 |     | <span class='neutral'>     * - the caller must have ``role``&#39;s admin role.</span>
  80 |     | <span class='neutral'>     */</span>
  81 |     | <span class='neutral'>    function revokeRole(bytes32 role, address account) external;</span>
  82 |     | <span class='neutral'></span>
  83 |     | <span class='neutral'>    /**</span>
  84 |     | <span class='neutral'>     * @dev Revokes `role` from the calling account.</span>
  85 |     | <span class='neutral'>     *</span>
  86 |     | <span class='neutral'>     * Roles are often managed via {grantRole} and {revokeRole}: this function&#39;s</span>
  87 |     | <span class='neutral'>     * purpose is to provide a mechanism for accounts to lose their privileges</span>
  88 |     | <span class='neutral'>     * if they are compromised (such as when a trusted device is misplaced).</span>
  89 |     | <span class='neutral'>     *</span>
  90 |     | <span class='neutral'>     * If the calling account had been granted `role`, emits a {RoleRevoked}</span>
  91 |     | <span class='neutral'>     * event.</span>
  92 |     | <span class='neutral'>     *</span>
  93 |     | <span class='neutral'>     * Requirements:</span>
  94 |     | <span class='neutral'>     *</span>
  95 |     | <span class='neutral'>     * - the caller must be `callerConfirmation`.</span>
  96 |     | <span class='neutral'>     */</span>
  97 |     | <span class='neutral'>    function renounceRole(bytes32 role, address callerConfirmation) external;</span>
  98 |     | <span class='neutral'>}</span>
  99 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/interfaces/draft-IERC1822.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (interfaces/draft-IERC1822.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev ERC1822: Universal Upgradeable Proxy Standard (UUPS) documents a method for upgradeability through a simplified</span>
  8 |     | <span class='neutral'> * proxy whose upgrades are fully controlled by the current implementation.</span>
  9 |     | <span class='neutral'> */</span>
 10 |     | <span class='neutral'>interface IERC1822Proxiable {</span>
 11 |     | <span class='neutral'>    /**</span>
 12 |     | <span class='neutral'>     * @dev Returns the storage slot that the proxiable contract assumes is being used to store the implementation</span>
 13 |     | <span class='neutral'>     * address.</span>
 14 |     | <span class='neutral'>     *</span>
 15 |     | <span class='neutral'>     * IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks</span>
 16 |     | <span class='neutral'>     * bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this</span>
 17 |     | <span class='neutral'>     * function revert if invoked through a proxy.</span>
 18 |     | <span class='neutral'>     */</span>
 19 |     | <span class='neutral'>    function proxiableUUID() external view returns (bytes32);</span>
 20 |     | <span class='neutral'>}</span>
 21 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/proxy/ERC1967/ERC1967Utils.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (proxy/ERC1967/ERC1967Utils.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IBeacon} from &quot;../beacon/IBeacon.sol&quot;;</span>
   7 |     | <span class='neutral'>import {Address} from &quot;../../utils/Address.sol&quot;;</span>
   8 |     | <span class='neutral'>import {StorageSlot} from &quot;../../utils/StorageSlot.sol&quot;;</span>
   9 |     | <span class='neutral'></span>
  10 |     | <span class='neutral'>/**</span>
  11 |     | <span class='neutral'> * @dev This abstract contract provides getters and event emitting update functions for</span>
  12 |     | <span class='neutral'> * https://eips.ethereum.org/EIPS/eip-1967[EIP1967] slots.</span>
  13 |     | <span class='neutral'> */</span>
  14 |     | <span class='unexecuted'>library ERC1967Utils {</span>
  15 |     | <span class='neutral'>    // We re-declare ERC-1967 events here because they can&#39;t be used directly from IERC1967.</span>
  16 |     | <span class='neutral'>    // This will be fixed in Solidity 0.8.21. At that point we should remove these events.</span>
  17 |     | <span class='neutral'>    /**</span>
  18 |     | <span class='neutral'>     * @dev Emitted when the implementation is upgraded.</span>
  19 |     | <span class='neutral'>     */</span>
  20 |     | <span class='neutral'>    event Upgraded(address indexed implementation);</span>
  21 |     | <span class='neutral'></span>
  22 |     | <span class='neutral'>    /**</span>
  23 |     | <span class='neutral'>     * @dev Emitted when the admin account has changed.</span>
  24 |     | <span class='neutral'>     */</span>
  25 |     | <span class='neutral'>    event AdminChanged(address previousAdmin, address newAdmin);</span>
  26 |     | <span class='neutral'></span>
  27 |     | <span class='neutral'>    /**</span>
  28 |     | <span class='neutral'>     * @dev Emitted when the beacon is changed.</span>
  29 |     | <span class='neutral'>     */</span>
  30 |     | <span class='neutral'>    event BeaconUpgraded(address indexed beacon);</span>
  31 |     | <span class='neutral'></span>
  32 |     | <span class='neutral'>    /**</span>
  33 |     | <span class='neutral'>     * @dev Storage slot with the address of the current implementation.</span>
  34 |     | <span class='neutral'>     * This is the keccak-256 hash of &quot;eip1967.proxy.implementation&quot; subtracted by 1.</span>
  35 |     | <span class='neutral'>     */</span>
  36 |     | <span class='neutral'>    // solhint-disable-next-line private-vars-leading-underscore</span>
  37 |     | <span class='unexecuted'>    bytes32 internal constant IMPLEMENTATION_SLOT = 0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc;</span>
  38 |     | <span class='neutral'></span>
  39 |     | <span class='neutral'>    /**</span>
  40 |     | <span class='neutral'>     * @dev The `implementation` of the proxy is invalid.</span>
  41 |     | <span class='neutral'>     */</span>
  42 |     | <span class='neutral'>    error ERC1967InvalidImplementation(address implementation);</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>    /**</span>
  45 |     | <span class='neutral'>     * @dev The `admin` of the proxy is invalid.</span>
  46 |     | <span class='neutral'>     */</span>
  47 |     | <span class='neutral'>    error ERC1967InvalidAdmin(address admin);</span>
  48 |     | <span class='neutral'></span>
  49 |     | <span class='neutral'>    /**</span>
  50 |     | <span class='neutral'>     * @dev The `beacon` of the proxy is invalid.</span>
  51 |     | <span class='neutral'>     */</span>
  52 |     | <span class='neutral'>    error ERC1967InvalidBeacon(address beacon);</span>
  53 |     | <span class='neutral'></span>
  54 |     | <span class='neutral'>    /**</span>
  55 |     | <span class='neutral'>     * @dev An upgrade function sees `msg.value &gt; 0` that may be lost.</span>
  56 |     | <span class='neutral'>     */</span>
  57 |     | <span class='neutral'>    error ERC1967NonPayable();</span>
  58 |     | <span class='neutral'></span>
  59 |     | <span class='neutral'>    /**</span>
  60 |     | <span class='neutral'>     * @dev Returns the current implementation address.</span>
  61 |     | <span class='neutral'>     */</span>
  62 |     | <span class='neutral'>    function getImplementation() internal view returns (address) {</span>
  63 |     | <span class='neutral'>        return StorageSlot.getAddressSlot(IMPLEMENTATION_SLOT).value;</span>
  64 |     | <span class='neutral'>    }</span>
  65 |     | <span class='neutral'></span>
  66 |     | <span class='neutral'>    /**</span>
  67 |     | <span class='neutral'>     * @dev Stores a new address in the EIP1967 implementation slot.</span>
  68 |     | <span class='neutral'>     */</span>
  69 |     | <span class='neutral'>    function _setImplementation(address newImplementation) private {</span>
  70 |     | <span class='unexecuted'>        if (newImplementation.code.length == 0) {</span>
  71 |     | <span class='unexecuted'>            revert ERC1967InvalidImplementation(newImplementation);</span>
  72 |     | <span class='neutral'>        }</span>
  73 |     | <span class='neutral'>        StorageSlot.getAddressSlot(IMPLEMENTATION_SLOT).value = newImplementation;</span>
  74 |     | <span class='neutral'>    }</span>
  75 |     | <span class='neutral'></span>
  76 |     | <span class='neutral'>    /**</span>
  77 |     | <span class='neutral'>     * @dev Performs implementation upgrade with additional setup call if data is nonempty.</span>
  78 |     | <span class='neutral'>     * This function is payable only if the setup call is performed, otherwise `msg.value` is rejected</span>
  79 |     | <span class='neutral'>     * to avoid stuck value in the contract.</span>
  80 |     | <span class='neutral'>     *</span>
  81 |     | <span class='neutral'>     * Emits an {IERC1967-Upgraded} event.</span>
  82 |     | <span class='neutral'>     */</span>
  83 |     | <span class='neutral'>    function upgradeToAndCall(address newImplementation, bytes memory data) internal {</span>
  84 |     | <span class='neutral'>        _setImplementation(newImplementation);</span>
  85 |     | <span class='unexecuted'>        emit Upgraded(newImplementation);</span>
  86 |     | <span class='neutral'></span>
  87 |     | <span class='unexecuted'>        if (data.length &gt; 0) {</span>
  88 |     | <span class='neutral'>            Address.functionDelegateCall(newImplementation, data);</span>
  89 |     | <span class='neutral'>        } else {</span>
  90 |     | <span class='neutral'>            _checkNonPayable();</span>
  91 |     | <span class='neutral'>        }</span>
  92 |     | <span class='neutral'>    }</span>
  93 |     | <span class='neutral'></span>
  94 |     | <span class='neutral'>    /**</span>
  95 |     | <span class='neutral'>     * @dev Storage slot with the admin of the contract.</span>
  96 |     | <span class='neutral'>     * This is the keccak-256 hash of &quot;eip1967.proxy.admin&quot; subtracted by 1.</span>
  97 |     | <span class='neutral'>     */</span>
  98 |     | <span class='neutral'>    // solhint-disable-next-line private-vars-leading-underscore</span>
  99 |     | <span class='neutral'>    bytes32 internal constant ADMIN_SLOT = 0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103;</span>
 100 |     | <span class='neutral'></span>
 101 |     | <span class='neutral'>    /**</span>
 102 |     | <span class='neutral'>     * @dev Returns the current admin.</span>
 103 |     | <span class='neutral'>     *</span>
 104 |     | <span class='neutral'>     * TIP: To get this value clients can read directly from the storage slot shown below (specified by EIP1967) using</span>
 105 |     | <span class='neutral'>     * the https://eth.wiki/json-rpc/API#eth_getstorageat[`eth_getStorageAt`] RPC call.</span>
 106 |     | <span class='neutral'>     * `0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103`</span>
 107 |     | <span class='neutral'>     */</span>
 108 |     | <span class='neutral'>    function getAdmin() internal view returns (address) {</span>
 109 |     | <span class='neutral'>        return StorageSlot.getAddressSlot(ADMIN_SLOT).value;</span>
 110 |     | <span class='neutral'>    }</span>
 111 |     | <span class='neutral'></span>
 112 |     | <span class='neutral'>    /**</span>
 113 |     | <span class='neutral'>     * @dev Stores a new address in the EIP1967 admin slot.</span>
 114 |     | <span class='neutral'>     */</span>
 115 |     | <span class='neutral'>    function _setAdmin(address newAdmin) private {</span>
 116 |     | <span class='neutral'>        if (newAdmin == address(0)) {</span>
 117 |     | <span class='neutral'>            revert ERC1967InvalidAdmin(address(0));</span>
 118 |     | <span class='neutral'>        }</span>
 119 |     | <span class='neutral'>        StorageSlot.getAddressSlot(ADMIN_SLOT).value = newAdmin;</span>
 120 |     | <span class='neutral'>    }</span>
 121 |     | <span class='neutral'></span>
 122 |     | <span class='neutral'>    /**</span>
 123 |     | <span class='neutral'>     * @dev Changes the admin of the proxy.</span>
 124 |     | <span class='neutral'>     *</span>
 125 |     | <span class='neutral'>     * Emits an {IERC1967-AdminChanged} event.</span>
 126 |     | <span class='neutral'>     */</span>
 127 |     | <span class='neutral'>    function changeAdmin(address newAdmin) internal {</span>
 128 |     | <span class='neutral'>        emit AdminChanged(getAdmin(), newAdmin);</span>
 129 |     | <span class='neutral'>        _setAdmin(newAdmin);</span>
 130 |     | <span class='neutral'>    }</span>
 131 |     | <span class='neutral'></span>
 132 |     | <span class='neutral'>    /**</span>
 133 |     | <span class='neutral'>     * @dev The storage slot of the UpgradeableBeacon contract which defines the implementation for this proxy.</span>
 134 |     | <span class='neutral'>     * This is the keccak-256 hash of &quot;eip1967.proxy.beacon&quot; subtracted by 1.</span>
 135 |     | <span class='neutral'>     */</span>
 136 |     | <span class='neutral'>    // solhint-disable-next-line private-vars-leading-underscore</span>
 137 |     | <span class='neutral'>    bytes32 internal constant BEACON_SLOT = 0xa3f0ad74e5423aebfd80d3ef4346578335a9a72aeaee59ff6cb3582b35133d50;</span>
 138 |     | <span class='neutral'></span>
 139 |     | <span class='neutral'>    /**</span>
 140 |     | <span class='neutral'>     * @dev Returns the current beacon.</span>
 141 |     | <span class='neutral'>     */</span>
 142 |     | <span class='neutral'>    function getBeacon() internal view returns (address) {</span>
 143 |     | <span class='neutral'>        return StorageSlot.getAddressSlot(BEACON_SLOT).value;</span>
 144 |     | <span class='neutral'>    }</span>
 145 |     | <span class='neutral'></span>
 146 |     | <span class='neutral'>    /**</span>
 147 |     | <span class='neutral'>     * @dev Stores a new beacon in the EIP1967 beacon slot.</span>
 148 |     | <span class='neutral'>     */</span>
 149 |     | <span class='neutral'>    function _setBeacon(address newBeacon) private {</span>
 150 |     | <span class='neutral'>        if (newBeacon.code.length == 0) {</span>
 151 |     | <span class='neutral'>            revert ERC1967InvalidBeacon(newBeacon);</span>
 152 |     | <span class='neutral'>        }</span>
 153 |     | <span class='neutral'></span>
 154 |     | <span class='neutral'>        StorageSlot.getAddressSlot(BEACON_SLOT).value = newBeacon;</span>
 155 |     | <span class='neutral'></span>
 156 |     | <span class='neutral'>        address beaconImplementation = IBeacon(newBeacon).implementation();</span>
 157 |     | <span class='neutral'>        if (beaconImplementation.code.length == 0) {</span>
 158 |     | <span class='neutral'>            revert ERC1967InvalidImplementation(beaconImplementation);</span>
 159 |     | <span class='neutral'>        }</span>
 160 |     | <span class='neutral'>    }</span>
 161 |     | <span class='neutral'></span>
 162 |     | <span class='neutral'>    /**</span>
 163 |     | <span class='neutral'>     * @dev Change the beacon and trigger a setup call if data is nonempty.</span>
 164 |     | <span class='neutral'>     * This function is payable only if the setup call is performed, otherwise `msg.value` is rejected</span>
 165 |     | <span class='neutral'>     * to avoid stuck value in the contract.</span>
 166 |     | <span class='neutral'>     *</span>
 167 |     | <span class='neutral'>     * Emits an {IERC1967-BeaconUpgraded} event.</span>
 168 |     | <span class='neutral'>     *</span>
 169 |     | <span class='neutral'>     * CAUTION: Invoking this function has no effect on an instance of {BeaconProxy} since v5, since</span>
 170 |     | <span class='neutral'>     * it uses an immutable beacon without looking at the value of the ERC-1967 beacon slot for</span>
 171 |     | <span class='neutral'>     * efficiency.</span>
 172 |     | <span class='neutral'>     */</span>
 173 |     | <span class='neutral'>    function upgradeBeaconToAndCall(address newBeacon, bytes memory data) internal {</span>
 174 |     | <span class='neutral'>        _setBeacon(newBeacon);</span>
 175 |     | <span class='neutral'>        emit BeaconUpgraded(newBeacon);</span>
 176 |     | <span class='neutral'></span>
 177 |     | <span class='neutral'>        if (data.length &gt; 0) {</span>
 178 |     | <span class='neutral'>            Address.functionDelegateCall(IBeacon(newBeacon).implementation(), data);</span>
 179 |     | <span class='neutral'>        } else {</span>
 180 |     | <span class='neutral'>            _checkNonPayable();</span>
 181 |     | <span class='neutral'>        }</span>
 182 |     | <span class='neutral'>    }</span>
 183 |     | <span class='neutral'></span>
 184 |     | <span class='neutral'>    /**</span>
 185 |     | <span class='neutral'>     * @dev Reverts if `msg.value` is not zero. It can be used to avoid `msg.value` stuck in the contract</span>
 186 |     | <span class='neutral'>     * if an upgrade doesn&#39;t perform an initialization call.</span>
 187 |     | <span class='neutral'>     */</span>
 188 |     | <span class='neutral'>    function _checkNonPayable() private {</span>
 189 |     | <span class='unexecuted'>        if (msg.value &gt; 0) {</span>
 190 |     | <span class='unexecuted'>            revert ERC1967NonPayable();</span>
 191 |     | <span class='neutral'>        }</span>
 192 |     | <span class='neutral'>    }</span>
 193 |     | <span class='neutral'>}</span>
 194 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/proxy/beacon/IBeacon.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (proxy/beacon/IBeacon.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev This is the interface that {BeaconProxy} expects of its beacon.</span>
  8 |     | <span class='neutral'> */</span>
  9 |     | <span class='neutral'>interface IBeacon {</span>
 10 |     | <span class='neutral'>    /**</span>
 11 |     | <span class='neutral'>     * @dev Must return an address that can be used as a delegate call target.</span>
 12 |     | <span class='neutral'>     *</span>
 13 |     | <span class='neutral'>     * {UpgradeableBeacon} will check that this address is a contract.</span>
 14 |     | <span class='neutral'>     */</span>
 15 |     | <span class='neutral'>    function implementation() external view returns (address);</span>
 16 |     | <span class='neutral'>}</span>
 17 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/IERC20.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev Interface of the ERC20 standard as defined in the EIP.</span>
  8 |     | <span class='neutral'> */</span>
  9 |     | <span class='neutral'>interface IERC20 {</span>
 10 |     | <span class='neutral'>    /**</span>
 11 |     | <span class='neutral'>     * @dev Emitted when `value` tokens are moved from one account (`from`) to</span>
 12 |     | <span class='neutral'>     * another (`to`).</span>
 13 |     | <span class='neutral'>     *</span>
 14 |     | <span class='neutral'>     * Note that `value` may be zero.</span>
 15 |     | <span class='neutral'>     */</span>
 16 |     | <span class='neutral'>    event Transfer(address indexed from, address indexed to, uint256 value);</span>
 17 |     | <span class='neutral'></span>
 18 |     | <span class='neutral'>    /**</span>
 19 |     | <span class='neutral'>     * @dev Emitted when the allowance of a `spender` for an `owner` is set by</span>
 20 |     | <span class='neutral'>     * a call to {approve}. `value` is the new allowance.</span>
 21 |     | <span class='neutral'>     */</span>
 22 |     | <span class='neutral'>    event Approval(address indexed owner, address indexed spender, uint256 value);</span>
 23 |     | <span class='neutral'></span>
 24 |     | <span class='neutral'>    /**</span>
 25 |     | <span class='neutral'>     * @dev Returns the value of tokens in existence.</span>
 26 |     | <span class='neutral'>     */</span>
 27 |     | <span class='neutral'>    function totalSupply() external view returns (uint256);</span>
 28 |     | <span class='neutral'></span>
 29 |     | <span class='neutral'>    /**</span>
 30 |     | <span class='neutral'>     * @dev Returns the value of tokens owned by `account`.</span>
 31 |     | <span class='neutral'>     */</span>
 32 |     | <span class='neutral'>    function balanceOf(address account) external view returns (uint256);</span>
 33 |     | <span class='neutral'></span>
 34 |     | <span class='neutral'>    /**</span>
 35 |     | <span class='neutral'>     * @dev Moves a `value` amount of tokens from the caller&#39;s account to `to`.</span>
 36 |     | <span class='neutral'>     *</span>
 37 |     | <span class='neutral'>     * Returns a boolean value indicating whether the operation succeeded.</span>
 38 |     | <span class='neutral'>     *</span>
 39 |     | <span class='neutral'>     * Emits a {Transfer} event.</span>
 40 |     | <span class='neutral'>     */</span>
 41 |     | <span class='neutral'>    function transfer(address to, uint256 value) external returns (bool);</span>
 42 |     | <span class='neutral'></span>
 43 |     | <span class='neutral'>    /**</span>
 44 |     | <span class='neutral'>     * @dev Returns the remaining number of tokens that `spender` will be</span>
 45 |     | <span class='neutral'>     * allowed to spend on behalf of `owner` through {transferFrom}. This is</span>
 46 |     | <span class='neutral'>     * zero by default.</span>
 47 |     | <span class='neutral'>     *</span>
 48 |     | <span class='neutral'>     * This value changes when {approve} or {transferFrom} are called.</span>
 49 |     | <span class='neutral'>     */</span>
 50 |     | <span class='neutral'>    function allowance(address owner, address spender) external view returns (uint256);</span>
 51 |     | <span class='neutral'></span>
 52 |     | <span class='neutral'>    /**</span>
 53 |     | <span class='neutral'>     * @dev Sets a `value` amount of tokens as the allowance of `spender` over the</span>
 54 |     | <span class='neutral'>     * caller&#39;s tokens.</span>
 55 |     | <span class='neutral'>     *</span>
 56 |     | <span class='neutral'>     * Returns a boolean value indicating whether the operation succeeded.</span>
 57 |     | <span class='neutral'>     *</span>
 58 |     | <span class='neutral'>     * IMPORTANT: Beware that changing an allowance with this method brings the risk</span>
 59 |     | <span class='neutral'>     * that someone may use both the old and the new allowance by unfortunate</span>
 60 |     | <span class='neutral'>     * transaction ordering. One possible solution to mitigate this race</span>
 61 |     | <span class='neutral'>     * condition is to first reduce the spender&#39;s allowance to 0 and set the</span>
 62 |     | <span class='neutral'>     * desired value afterwards:</span>
 63 |     | <span class='neutral'>     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729</span>
 64 |     | <span class='neutral'>     *</span>
 65 |     | <span class='neutral'>     * Emits an {Approval} event.</span>
 66 |     | <span class='neutral'>     */</span>
 67 |     | <span class='neutral'>    function approve(address spender, uint256 value) external returns (bool);</span>
 68 |     | <span class='neutral'></span>
 69 |     | <span class='neutral'>    /**</span>
 70 |     | <span class='neutral'>     * @dev Moves a `value` amount of tokens from `from` to `to` using the</span>
 71 |     | <span class='neutral'>     * allowance mechanism. `value` is then deducted from the caller&#39;s</span>
 72 |     | <span class='neutral'>     * allowance.</span>
 73 |     | <span class='neutral'>     *</span>
 74 |     | <span class='neutral'>     * Returns a boolean value indicating whether the operation succeeded.</span>
 75 |     | <span class='neutral'>     *</span>
 76 |     | <span class='neutral'>     * Emits a {Transfer} event.</span>
 77 |     | <span class='neutral'>     */</span>
 78 |     | <span class='neutral'>    function transferFrom(address from, address to, uint256 value) external returns (bool);</span>
 79 |     | <span class='neutral'>}</span>
 80 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/Address.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/Address.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>/**</span>
   7 |     | <span class='neutral'> * @dev Collection of functions related to the address type</span>
   8 |     | <span class='neutral'> */</span>
   9 |     | <span class='unexecuted'>library Address {</span>
  10 |     | <span class='neutral'>    /**</span>
  11 |     | <span class='neutral'>     * @dev The ETH balance of the account is not enough to perform the operation.</span>
  12 |     | <span class='neutral'>     */</span>
  13 |     | <span class='neutral'>    error AddressInsufficientBalance(address account);</span>
  14 |     | <span class='neutral'></span>
  15 |     | <span class='neutral'>    /**</span>
  16 |     | <span class='neutral'>     * @dev There&#39;s no code at `target` (it is not a contract).</span>
  17 |     | <span class='neutral'>     */</span>
  18 |     | <span class='neutral'>    error AddressEmptyCode(address target);</span>
  19 |     | <span class='neutral'></span>
  20 |     | <span class='neutral'>    /**</span>
  21 |     | <span class='neutral'>     * @dev A call to an address target failed. The target may have reverted.</span>
  22 |     | <span class='neutral'>     */</span>
  23 |     | <span class='neutral'>    error FailedInnerCall();</span>
  24 |     | <span class='neutral'></span>
  25 |     | <span class='neutral'>    /**</span>
  26 |     | <span class='neutral'>     * @dev Replacement for Solidity&#39;s `transfer`: sends `amount` wei to</span>
  27 |     | <span class='neutral'>     * `recipient`, forwarding all available gas and reverting on errors.</span>
  28 |     | <span class='neutral'>     *</span>
  29 |     | <span class='neutral'>     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost</span>
  30 |     | <span class='neutral'>     * of certain opcodes, possibly making contracts go over the 2300 gas limit</span>
  31 |     | <span class='neutral'>     * imposed by `transfer`, making them unable to receive funds via</span>
  32 |     | <span class='neutral'>     * `transfer`. {sendValue} removes this limitation.</span>
  33 |     | <span class='neutral'>     *</span>
  34 |     | <span class='neutral'>     * https://consensys.net/diligence/blog/2019/09/stop-using-soliditys-transfer-now/[Learn more].</span>
  35 |     | <span class='neutral'>     *</span>
  36 |     | <span class='neutral'>     * IMPORTANT: because control is transferred to `recipient`, care must be</span>
  37 |     | <span class='neutral'>     * taken to not create reentrancy vulnerabilities. Consider using</span>
  38 |     | <span class='neutral'>     * {ReentrancyGuard} or the</span>
  39 |     | <span class='neutral'>     * https://solidity.readthedocs.io/en/v0.8.20/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].</span>
  40 |     | <span class='neutral'>     */</span>
  41 |     | <span class='neutral'>    function sendValue(address payable recipient, uint256 amount) internal {</span>
  42 |     | <span class='neutral'>        if (address(this).balance &lt; amount) {</span>
  43 |     | <span class='neutral'>            revert AddressInsufficientBalance(address(this));</span>
  44 |     | <span class='neutral'>        }</span>
  45 |     | <span class='neutral'></span>
  46 |     | <span class='neutral'>        (bool success, ) = recipient.call{value: amount}(&quot;&quot;);</span>
  47 |     | <span class='neutral'>        if (!success) {</span>
  48 |     | <span class='neutral'>            revert FailedInnerCall();</span>
  49 |     | <span class='neutral'>        }</span>
  50 |     | <span class='neutral'>    }</span>
  51 |     | <span class='neutral'></span>
  52 |     | <span class='neutral'>    /**</span>
  53 |     | <span class='neutral'>     * @dev Performs a Solidity function call using a low level `call`. A</span>
  54 |     | <span class='neutral'>     * plain `call` is an unsafe replacement for a function call: use this</span>
  55 |     | <span class='neutral'>     * function instead.</span>
  56 |     | <span class='neutral'>     *</span>
  57 |     | <span class='neutral'>     * If `target` reverts with a revert reason or custom error, it is bubbled</span>
  58 |     | <span class='neutral'>     * up by this function (like regular Solidity function calls). However, if</span>
  59 |     | <span class='neutral'>     * the call reverted with no returned reason, this function reverts with a</span>
  60 |     | <span class='neutral'>     * {FailedInnerCall} error.</span>
  61 |     | <span class='neutral'>     *</span>
  62 |     | <span class='neutral'>     * Returns the raw returned data. To convert to the expected return value,</span>
  63 |     | <span class='neutral'>     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].</span>
  64 |     | <span class='neutral'>     *</span>
  65 |     | <span class='neutral'>     * Requirements:</span>
  66 |     | <span class='neutral'>     *</span>
  67 |     | <span class='neutral'>     * - `target` must be a contract.</span>
  68 |     | <span class='neutral'>     * - calling `target` with `data` must not revert.</span>
  69 |     | <span class='neutral'>     */</span>
  70 |     | <span class='neutral'>    function functionCall(address target, bytes memory data) internal returns (bytes memory) {</span>
  71 |     | <span class='neutral'>        return functionCallWithValue(target, data, 0);</span>
  72 |     | <span class='neutral'>    }</span>
  73 |     | <span class='neutral'></span>
  74 |     | <span class='neutral'>    /**</span>
  75 |     | <span class='neutral'>     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],</span>
  76 |     | <span class='neutral'>     * but also transferring `value` wei to `target`.</span>
  77 |     | <span class='neutral'>     *</span>
  78 |     | <span class='neutral'>     * Requirements:</span>
  79 |     | <span class='neutral'>     *</span>
  80 |     | <span class='neutral'>     * - the calling contract must have an ETH balance of at least `value`.</span>
  81 |     | <span class='neutral'>     * - the called Solidity function must be `payable`.</span>
  82 |     | <span class='neutral'>     */</span>
  83 |     | <span class='neutral'>    function functionCallWithValue(address target, bytes memory data, uint256 value) internal returns (bytes memory) {</span>
  84 |     | <span class='neutral'>        if (address(this).balance &lt; value) {</span>
  85 |     | <span class='neutral'>            revert AddressInsufficientBalance(address(this));</span>
  86 |     | <span class='neutral'>        }</span>
  87 |     | <span class='neutral'>        (bool success, bytes memory returndata) = target.call{value: value}(data);</span>
  88 |     | <span class='neutral'>        return verifyCallResultFromTarget(target, success, returndata);</span>
  89 |     | <span class='neutral'>    }</span>
  90 |     | <span class='neutral'></span>
  91 |     | <span class='neutral'>    /**</span>
  92 |     | <span class='neutral'>     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],</span>
  93 |     | <span class='neutral'>     * but performing a static call.</span>
  94 |     | <span class='neutral'>     */</span>
  95 |     | <span class='neutral'>    function functionStaticCall(address target, bytes memory data) internal view returns (bytes memory) {</span>
  96 |     | <span class='neutral'>        (bool success, bytes memory returndata) = target.staticcall(data);</span>
  97 |     | <span class='neutral'>        return verifyCallResultFromTarget(target, success, returndata);</span>
  98 |     | <span class='neutral'>    }</span>
  99 |     | <span class='neutral'></span>
 100 |     | <span class='neutral'>    /**</span>
 101 |     | <span class='neutral'>     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],</span>
 102 |     | <span class='neutral'>     * but performing a delegate call.</span>
 103 |     | <span class='neutral'>     */</span>
 104 |     | <span class='neutral'>    function functionDelegateCall(address target, bytes memory data) internal returns (bytes memory) {</span>
 105 |     | <span class='unexecuted'>        (bool success, bytes memory returndata) = target.delegatecall(data);</span>
 106 |     | <span class='unexecuted'>        return verifyCallResultFromTarget(target, success, returndata);</span>
 107 |     | <span class='neutral'>    }</span>
 108 |     | <span class='neutral'></span>
 109 |     | <span class='neutral'>    /**</span>
 110 |     | <span class='neutral'>     * @dev Tool to verify that a low level call to smart-contract was successful, and reverts if the target</span>
 111 |     | <span class='neutral'>     * was not a contract or bubbling up the revert reason (falling back to {FailedInnerCall}) in case of an</span>
 112 |     | <span class='neutral'>     * unsuccessful call.</span>
 113 |     | <span class='neutral'>     */</span>
 114 |     | <span class='unexecuted'>    function verifyCallResultFromTarget(</span>
 115 |     | <span class='neutral'>        address target,</span>
 116 |     | <span class='neutral'>        bool success,</span>
 117 |     | <span class='neutral'>        bytes memory returndata</span>
 118 |     | <span class='neutral'>    ) internal view returns (bytes memory) {</span>
 119 |     | <span class='unexecuted'>        if (!success) {</span>
 120 |     | <span class='neutral'>            _revert(returndata);</span>
 121 |     | <span class='neutral'>        } else {</span>
 122 |     | <span class='neutral'>            // only check if target is a contract if the call was successful and the return data is empty</span>
 123 |     | <span class='neutral'>            // otherwise we already know that it was a contract</span>
 124 |     | <span class='unexecuted'>            if (returndata.length == 0 &amp;&amp; target.code.length == 0) {</span>
 125 |     | <span class='unexecuted'>                revert AddressEmptyCode(target);</span>
 126 |     | <span class='neutral'>            }</span>
 127 |     | <span class='unexecuted'>            return returndata;</span>
 128 |     | <span class='neutral'>        }</span>
 129 |     | <span class='neutral'>    }</span>
 130 |     | <span class='neutral'></span>
 131 |     | <span class='neutral'>    /**</span>
 132 |     | <span class='neutral'>     * @dev Tool to verify that a low level call was successful, and reverts if it wasn&#39;t, either by bubbling the</span>
 133 |     | <span class='neutral'>     * revert reason or with a default {FailedInnerCall} error.</span>
 134 |     | <span class='neutral'>     */</span>
 135 |     | <span class='neutral'>    function verifyCallResult(bool success, bytes memory returndata) internal pure returns (bytes memory) {</span>
 136 |     | <span class='neutral'>        if (!success) {</span>
 137 |     | <span class='neutral'>            _revert(returndata);</span>
 138 |     | <span class='neutral'>        } else {</span>
 139 |     | <span class='neutral'>            return returndata;</span>
 140 |     | <span class='neutral'>        }</span>
 141 |     | <span class='neutral'>    }</span>
 142 |     | <span class='neutral'></span>
 143 |     | <span class='neutral'>    /**</span>
 144 |     | <span class='neutral'>     * @dev Reverts with returndata if present. Otherwise reverts with {FailedInnerCall}.</span>
 145 |     | <span class='neutral'>     */</span>
 146 |     | <span class='neutral'>    function _revert(bytes memory returndata) private pure {</span>
 147 |     | <span class='neutral'>        // Look for revert reason and bubble it up if present</span>
 148 |     | <span class='unexecuted'>        if (returndata.length &gt; 0) {</span>
 149 |     | <span class='neutral'>            // The easiest way to bubble the revert reason is using memory via assembly</span>
 150 |     | <span class='neutral'>            /// @solidity memory-safe-assembly</span>
 151 |     | <span class='unexecuted'>            assembly {</span>
 152 |     | <span class='neutral'>                let returndata_size := mload(returndata)</span>
 153 |     | <span class='neutral'>                revert(add(32, returndata), returndata_size)</span>
 154 |     | <span class='neutral'>            }</span>
 155 |     | <span class='neutral'>        } else {</span>
 156 |     | <span class='unexecuted'>            revert FailedInnerCall();</span>
 157 |     | <span class='neutral'>        }</span>
 158 |     | <span class='neutral'>    }</span>
 159 |     | <span class='neutral'>}</span>
 160 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/StorageSlot.sol)</span>
   3 |     | <span class='neutral'>// This file was procedurally generated from scripts/generate/templates/StorageSlot.js.</span>
   4 |     | <span class='neutral'></span>
   5 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   6 |     | <span class='neutral'></span>
   7 |     | <span class='neutral'>/**</span>
   8 |     | <span class='neutral'> * @dev Library for reading and writing primitive types to specific storage slots.</span>
   9 |     | <span class='neutral'> *</span>
  10 |     | <span class='neutral'> * Storage slots are often used to avoid storage conflict when dealing with upgradeable contracts.</span>
  11 |     | <span class='neutral'> * This library helps with reading and writing to such slots without the need for inline assembly.</span>
  12 |     | <span class='neutral'> *</span>
  13 |     | <span class='neutral'> * The functions in this library return Slot structs that contain a `value` member that can be used to read or write.</span>
  14 |     | <span class='neutral'> *</span>
  15 |     | <span class='neutral'> * Example usage to set ERC1967 implementation slot:</span>
  16 |     | <span class='neutral'> * ```solidity</span>
  17 |     | <span class='neutral'> * contract ERC1967 {</span>
  18 |     | <span class='neutral'> *     bytes32 internal constant _IMPLEMENTATION_SLOT = 0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc;</span>
  19 |     | <span class='neutral'> *</span>
  20 |     | <span class='neutral'> *     function _getImplementation() internal view returns (address) {</span>
  21 |     | <span class='neutral'> *         return StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value;</span>
  22 |     | <span class='neutral'> *     }</span>
  23 |     | <span class='neutral'> *</span>
  24 |     | <span class='neutral'> *     function _setImplementation(address newImplementation) internal {</span>
  25 |     | <span class='neutral'> *         require(newImplementation.code.length &gt; 0);</span>
  26 |     | <span class='neutral'> *         StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value = newImplementation;</span>
  27 |     | <span class='neutral'> *     }</span>
  28 |     | <span class='neutral'> * }</span>
  29 |     | <span class='neutral'> * ```</span>
  30 |     | <span class='neutral'> */</span>
  31 |     | <span class='unexecuted'>library StorageSlot {</span>
  32 |     | <span class='neutral'>    struct AddressSlot {</span>
  33 |     | <span class='neutral'>        address value;</span>
  34 |     | <span class='neutral'>    }</span>
  35 |     | <span class='neutral'></span>
  36 |     | <span class='neutral'>    struct BooleanSlot {</span>
  37 |     | <span class='neutral'>        bool value;</span>
  38 |     | <span class='neutral'>    }</span>
  39 |     | <span class='neutral'></span>
  40 |     | <span class='neutral'>    struct Bytes32Slot {</span>
  41 |     | <span class='neutral'>        bytes32 value;</span>
  42 |     | <span class='neutral'>    }</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>    struct Uint256Slot {</span>
  45 |     | <span class='neutral'>        uint256 value;</span>
  46 |     | <span class='neutral'>    }</span>
  47 |     | <span class='neutral'></span>
  48 |     | <span class='neutral'>    struct StringSlot {</span>
  49 |     | <span class='neutral'>        string value;</span>
  50 |     | <span class='neutral'>    }</span>
  51 |     | <span class='neutral'></span>
  52 |     | <span class='neutral'>    struct BytesSlot {</span>
  53 |     | <span class='neutral'>        bytes value;</span>
  54 |     | <span class='neutral'>    }</span>
  55 |     | <span class='neutral'></span>
  56 |     | <span class='neutral'>    /**</span>
  57 |     | <span class='neutral'>     * @dev Returns an `AddressSlot` with member `value` located at `slot`.</span>
  58 |     | <span class='neutral'>     */</span>
  59 |     | <span class='neutral'>    function getAddressSlot(bytes32 slot) internal pure returns (AddressSlot storage r) {</span>
  60 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
  61 |     | <span class='neutral'>        assembly {</span>
  62 |     | <span class='neutral'>            r.slot := slot</span>
  63 |     | <span class='neutral'>        }</span>
  64 |     | <span class='neutral'>    }</span>
  65 |     | <span class='neutral'></span>
  66 |     | <span class='neutral'>    /**</span>
  67 |     | <span class='neutral'>     * @dev Returns an `BooleanSlot` with member `value` located at `slot`.</span>
  68 |     | <span class='neutral'>     */</span>
  69 |     | <span class='neutral'>    function getBooleanSlot(bytes32 slot) internal pure returns (BooleanSlot storage r) {</span>
  70 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
  71 |     | <span class='neutral'>        assembly {</span>
  72 |     | <span class='neutral'>            r.slot := slot</span>
  73 |     | <span class='neutral'>        }</span>
  74 |     | <span class='neutral'>    }</span>
  75 |     | <span class='neutral'></span>
  76 |     | <span class='neutral'>    /**</span>
  77 |     | <span class='neutral'>     * @dev Returns an `Bytes32Slot` with member `value` located at `slot`.</span>
  78 |     | <span class='neutral'>     */</span>
  79 |     | <span class='neutral'>    function getBytes32Slot(bytes32 slot) internal pure returns (Bytes32Slot storage r) {</span>
  80 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
  81 |     | <span class='neutral'>        assembly {</span>
  82 |     | <span class='neutral'>            r.slot := slot</span>
  83 |     | <span class='neutral'>        }</span>
  84 |     | <span class='neutral'>    }</span>
  85 |     | <span class='neutral'></span>
  86 |     | <span class='neutral'>    /**</span>
  87 |     | <span class='neutral'>     * @dev Returns an `Uint256Slot` with member `value` located at `slot`.</span>
  88 |     | <span class='neutral'>     */</span>
  89 |     | <span class='neutral'>    function getUint256Slot(bytes32 slot) internal pure returns (Uint256Slot storage r) {</span>
  90 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
  91 |     | <span class='neutral'>        assembly {</span>
  92 |     | <span class='neutral'>            r.slot := slot</span>
  93 |     | <span class='neutral'>        }</span>
  94 |     | <span class='neutral'>    }</span>
  95 |     | <span class='neutral'></span>
  96 |     | <span class='neutral'>    /**</span>
  97 |     | <span class='neutral'>     * @dev Returns an `StringSlot` with member `value` located at `slot`.</span>
  98 |     | <span class='neutral'>     */</span>
  99 |     | <span class='neutral'>    function getStringSlot(bytes32 slot) internal pure returns (StringSlot storage r) {</span>
 100 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
 101 |     | <span class='neutral'>        assembly {</span>
 102 |     | <span class='neutral'>            r.slot := slot</span>
 103 |     | <span class='neutral'>        }</span>
 104 |     | <span class='neutral'>    }</span>
 105 |     | <span class='neutral'></span>
 106 |     | <span class='neutral'>    /**</span>
 107 |     | <span class='neutral'>     * @dev Returns an `StringSlot` representation of the string storage pointer `store`.</span>
 108 |     | <span class='neutral'>     */</span>
 109 |     | <span class='neutral'>    function getStringSlot(string storage store) internal pure returns (StringSlot storage r) {</span>
 110 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
 111 |     | <span class='neutral'>        assembly {</span>
 112 |     | <span class='neutral'>            r.slot := store.slot</span>
 113 |     | <span class='neutral'>        }</span>
 114 |     | <span class='neutral'>    }</span>
 115 |     | <span class='neutral'></span>
 116 |     | <span class='neutral'>    /**</span>
 117 |     | <span class='neutral'>     * @dev Returns an `BytesSlot` with member `value` located at `slot`.</span>
 118 |     | <span class='neutral'>     */</span>
 119 |     | <span class='neutral'>    function getBytesSlot(bytes32 slot) internal pure returns (BytesSlot storage r) {</span>
 120 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
 121 |     | <span class='neutral'>        assembly {</span>
 122 |     | <span class='neutral'>            r.slot := slot</span>
 123 |     | <span class='neutral'>        }</span>
 124 |     | <span class='neutral'>    }</span>
 125 |     | <span class='neutral'></span>
 126 |     | <span class='neutral'>    /**</span>
 127 |     | <span class='neutral'>     * @dev Returns an `BytesSlot` representation of the bytes storage pointer `store`.</span>
 128 |     | <span class='neutral'>     */</span>
 129 |     | <span class='neutral'>    function getBytesSlot(bytes storage store) internal pure returns (BytesSlot storage r) {</span>
 130 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
 131 |     | <span class='neutral'>        assembly {</span>
 132 |     | <span class='neutral'>            r.slot := store.slot</span>
 133 |     | <span class='neutral'>        }</span>
 134 |     | <span class='neutral'>    }</span>
 135 |     | <span class='neutral'>}</span>
 136 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/introspection/IERC165.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev Interface of the ERC165 standard, as defined in the</span>
  8 |     | <span class='neutral'> * https://eips.ethereum.org/EIPS/eip-165[EIP].</span>
  9 |     | <span class='neutral'> *</span>
 10 |     | <span class='neutral'> * Implementers can declare support of contract interfaces, which can then be</span>
 11 |     | <span class='neutral'> * queried by others ({ERC165Checker}).</span>
 12 |     | <span class='neutral'> *</span>
 13 |     | <span class='neutral'> * For an implementation, see {ERC165}.</span>
 14 |     | <span class='neutral'> */</span>
 15 |     | <span class='neutral'>interface IERC165 {</span>
 16 |     | <span class='neutral'>    /**</span>
 17 |     | <span class='neutral'>     * @dev Returns true if this contract implements the interface defined by</span>
 18 |     | <span class='neutral'>     * `interfaceId`. See the corresponding</span>
 19 |     | <span class='neutral'>     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]</span>
 20 |     | <span class='neutral'>     * to learn more about how these ids are created.</span>
 21 |     | <span class='neutral'>     *</span>
 22 |     | <span class='neutral'>     * This function call must use less than 30 000 gas.</span>
 23 |     | <span class='neutral'>     */</span>
 24 |     | <span class='neutral'>    function supportsInterface(bytes4 interfaceId) external view returns (bool);</span>
 25 |     | <span class='neutral'>}</span>
 26 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/math/Math.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/math/Math.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>/**</span>
   7 |     | <span class='neutral'> * @dev Standard math utilities missing in the Solidity language.</span>
   8 |     | <span class='neutral'> */</span>
   9 |     | <span class='unexecuted'>library Math {</span>
  10 |     | <span class='neutral'>    /**</span>
  11 |     | <span class='neutral'>     * @dev Muldiv operation overflow.</span>
  12 |     | <span class='neutral'>     */</span>
  13 |     | <span class='neutral'>    error MathOverflowedMulDiv();</span>
  14 |     | <span class='neutral'></span>
  15 |     | <span class='neutral'>    enum Rounding {</span>
  16 |     | <span class='neutral'>        Floor, // Toward negative infinity</span>
  17 |     | <span class='neutral'>        Ceil, // Toward positive infinity</span>
  18 |     | <span class='neutral'>        Trunc, // Toward zero</span>
  19 |     | <span class='neutral'>        Expand // Away from zero</span>
  20 |     | <span class='neutral'>    }</span>
  21 |     | <span class='neutral'></span>
  22 |     | <span class='neutral'>    /**</span>
  23 |     | <span class='neutral'>     * @dev Returns the addition of two unsigned integers, with an overflow flag.</span>
  24 |     | <span class='neutral'>     */</span>
  25 |     | <span class='neutral'>    function tryAdd(uint256 a, uint256 b) internal pure returns (bool, uint256) {</span>
  26 |     | <span class='neutral'>        unchecked {</span>
  27 |     | <span class='neutral'>            uint256 c = a + b;</span>
  28 |     | <span class='neutral'>            if (c &lt; a) return (false, 0);</span>
  29 |     | <span class='neutral'>            return (true, c);</span>
  30 |     | <span class='neutral'>        }</span>
  31 |     | <span class='neutral'>    }</span>
  32 |     | <span class='neutral'></span>
  33 |     | <span class='neutral'>    /**</span>
  34 |     | <span class='neutral'>     * @dev Returns the subtraction of two unsigned integers, with an overflow flag.</span>
  35 |     | <span class='neutral'>     */</span>
  36 |     | <span class='neutral'>    function trySub(uint256 a, uint256 b) internal pure returns (bool, uint256) {</span>
  37 |     | <span class='neutral'>        unchecked {</span>
  38 |     | <span class='neutral'>            if (b &gt; a) return (false, 0);</span>
  39 |     | <span class='neutral'>            return (true, a - b);</span>
  40 |     | <span class='neutral'>        }</span>
  41 |     | <span class='neutral'>    }</span>
  42 |     | <span class='neutral'></span>
  43 |     | <span class='neutral'>    /**</span>
  44 |     | <span class='neutral'>     * @dev Returns the multiplication of two unsigned integers, with an overflow flag.</span>
  45 |     | <span class='neutral'>     */</span>
  46 |     | <span class='neutral'>    function tryMul(uint256 a, uint256 b) internal pure returns (bool, uint256) {</span>
  47 |     | <span class='neutral'>        unchecked {</span>
  48 |     | <span class='neutral'>            // Gas optimization: this is cheaper than requiring &#39;a&#39; not being zero, but the</span>
  49 |     | <span class='neutral'>            // benefit is lost if &#39;b&#39; is also tested.</span>
  50 |     | <span class='neutral'>            // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522</span>
  51 |     | <span class='neutral'>            if (a == 0) return (true, 0);</span>
  52 |     | <span class='neutral'>            uint256 c = a * b;</span>
  53 |     | <span class='neutral'>            if (c / a != b) return (false, 0);</span>
  54 |     | <span class='neutral'>            return (true, c);</span>
  55 |     | <span class='neutral'>        }</span>
  56 |     | <span class='neutral'>    }</span>
  57 |     | <span class='neutral'></span>
  58 |     | <span class='neutral'>    /**</span>
  59 |     | <span class='neutral'>     * @dev Returns the division of two unsigned integers, with a division by zero flag.</span>
  60 |     | <span class='neutral'>     */</span>
  61 |     | <span class='neutral'>    function tryDiv(uint256 a, uint256 b) internal pure returns (bool, uint256) {</span>
  62 |     | <span class='neutral'>        unchecked {</span>
  63 |     | <span class='neutral'>            if (b == 0) return (false, 0);</span>
  64 |     | <span class='neutral'>            return (true, a / b);</span>
  65 |     | <span class='neutral'>        }</span>
  66 |     | <span class='neutral'>    }</span>
  67 |     | <span class='neutral'></span>
  68 |     | <span class='neutral'>    /**</span>
  69 |     | <span class='neutral'>     * @dev Returns the remainder of dividing two unsigned integers, with a division by zero flag.</span>
  70 |     | <span class='neutral'>     */</span>
  71 |     | <span class='neutral'>    function tryMod(uint256 a, uint256 b) internal pure returns (bool, uint256) {</span>
  72 |     | <span class='neutral'>        unchecked {</span>
  73 |     | <span class='neutral'>            if (b == 0) return (false, 0);</span>
  74 |     | <span class='neutral'>            return (true, a % b);</span>
  75 |     | <span class='neutral'>        }</span>
  76 |     | <span class='neutral'>    }</span>
  77 |     | <span class='neutral'></span>
  78 |     | <span class='neutral'>    /**</span>
  79 |     | <span class='neutral'>     * @dev Returns the largest of two numbers.</span>
  80 |     | <span class='neutral'>     */</span>
  81 |     | <span class='neutral'>    function max(uint256 a, uint256 b) internal pure returns (uint256) {</span>
  82 |     | <span class='neutral'>        return a &gt; b ? a : b;</span>
  83 |     | <span class='neutral'>    }</span>
  84 |     | <span class='neutral'></span>
  85 |     | <span class='neutral'>    /**</span>
  86 |     | <span class='neutral'>     * @dev Returns the smallest of two numbers.</span>
  87 |     | <span class='neutral'>     */</span>
  88 |     | <span class='neutral'>    function min(uint256 a, uint256 b) internal pure returns (uint256) {</span>
  89 | *   | <span class='executed'>        return a &lt; b ? a : b;</span>
  90 |     | <span class='neutral'>    }</span>
  91 |     | <span class='neutral'></span>
  92 |     | <span class='neutral'>    /**</span>
  93 |     | <span class='neutral'>     * @dev Returns the average of two numbers. The result is rounded towards</span>
  94 |     | <span class='neutral'>     * zero.</span>
  95 |     | <span class='neutral'>     */</span>
  96 |     | <span class='neutral'>    function average(uint256 a, uint256 b) internal pure returns (uint256) {</span>
  97 |     | <span class='neutral'>        // (a + b) / 2 can overflow.</span>
  98 |     | <span class='neutral'>        return (a &amp; b) + (a ^ b) / 2;</span>
  99 |     | <span class='neutral'>    }</span>
 100 |     | <span class='neutral'></span>
 101 |     | <span class='neutral'>    /**</span>
 102 |     | <span class='neutral'>     * @dev Returns the ceiling of the division of two numbers.</span>
 103 |     | <span class='neutral'>     *</span>
 104 |     | <span class='neutral'>     * This differs from standard division with `/` in that it rounds towards infinity instead</span>
 105 |     | <span class='neutral'>     * of rounding towards zero.</span>
 106 |     | <span class='neutral'>     */</span>
 107 |     | <span class='unexecuted'>    function ceilDiv(uint256 a, uint256 b) internal pure returns (uint256) {</span>
 108 |     | <span class='unexecuted'>        if (b == 0) {</span>
 109 |     | <span class='neutral'>            // Guarantee the same behavior as in a regular Solidity division.</span>
 110 |     | <span class='unexecuted'>            return a / b;</span>
 111 |     | <span class='neutral'>        }</span>
 112 |     | <span class='neutral'></span>
 113 |     | <span class='neutral'>        // (a + b - 1) / b can overflow on addition, so we distribute.</span>
 114 |     | <span class='unexecuted'>        return a == 0 ? 0 : (a - 1) / b + 1;</span>
 115 |     | <span class='neutral'>    }</span>
 116 |     | <span class='neutral'></span>
 117 |     | <span class='neutral'>    /**</span>
 118 |     | <span class='neutral'>     * @notice Calculates floor(x * y / denominator) with full precision. Throws if result overflows a uint256 or</span>
 119 |     | <span class='neutral'>     * denominator == 0.</span>
 120 |     | <span class='neutral'>     * @dev Original credit to Remco Bloemen under MIT license (https://xn--2-umb.com/21/muldiv) with further edits by</span>
 121 |     | <span class='neutral'>     * Uniswap Labs also under MIT license.</span>
 122 |     | <span class='neutral'>     */</span>
 123 | *   | <span class='executed'>    function mulDiv(uint256 x, uint256 y, uint256 denominator) internal pure returns (uint256 result) {</span>
 124 |     | <span class='neutral'>        unchecked {</span>
 125 |     | <span class='neutral'>            // 512-bit multiply [prod1 prod0] = x * y. Compute the product mod 2^256 and mod 2^256 - 1, then use</span>
 126 |     | <span class='neutral'>            // use the Chinese Remainder Theorem to reconstruct the 512 bit result. The result is stored in two 256</span>
 127 |     | <span class='neutral'>            // variables such that product = prod1 * 2^256 + prod0.</span>
 128 |     | <span class='neutral'>            uint256 prod0 = x * y; // Least significant 256 bits of the product</span>
 129 |     | <span class='neutral'>            uint256 prod1; // Most significant 256 bits of the product</span>
 130 | *   | <span class='executed'>            assembly {</span>
 131 |     | <span class='neutral'>                let mm := mulmod(x, y, not(0))</span>
 132 |     | <span class='neutral'>                prod1 := sub(sub(mm, prod0), lt(mm, prod0))</span>
 133 |     | <span class='neutral'>            }</span>
 134 |     | <span class='neutral'></span>
 135 |     | <span class='neutral'>            // Handle non-overflow cases, 256 by 256 division.</span>
 136 | *   | <span class='executed'>            if (prod1 == 0) {</span>
 137 |     | <span class='neutral'>                // Solidity will revert if denominator == 0, unlike the div opcode on its own.</span>
 138 |     | <span class='neutral'>                // The surrounding unchecked block does not change this fact.</span>
 139 |     | <span class='neutral'>                // See https://docs.soliditylang.org/en/latest/control-structures.html#checked-or-unchecked-arithmetic.</span>
 140 | *   | <span class='executed'>                return prod0 / denominator;</span>
 141 |     | <span class='neutral'>            }</span>
 142 |     | <span class='neutral'></span>
 143 |     | <span class='neutral'>            // Make sure the result is less than 2^256. Also prevents denominator == 0.</span>
 144 |     | <span class='unexecuted'>            if (denominator &lt;= prod1) {</span>
 145 |     | <span class='unexecuted'>                revert MathOverflowedMulDiv();</span>
 146 |     | <span class='neutral'>            }</span>
 147 |     | <span class='neutral'></span>
 148 |     | <span class='neutral'>            ///////////////////////////////////////////////</span>
 149 |     | <span class='neutral'>            // 512 by 256 division.</span>
 150 |     | <span class='neutral'>            ///////////////////////////////////////////////</span>
 151 |     | <span class='neutral'></span>
 152 |     | <span class='neutral'>            // Make division exact by subtracting the remainder from [prod1 prod0].</span>
 153 |     | <span class='neutral'>            uint256 remainder;</span>
 154 |     | <span class='unexecuted'>            assembly {</span>
 155 |     | <span class='neutral'>                // Compute remainder using mulmod.</span>
 156 |     | <span class='neutral'>                remainder := mulmod(x, y, denominator)</span>
 157 |     | <span class='neutral'></span>
 158 |     | <span class='neutral'>                // Subtract 256 bit number from 512 bit number.</span>
 159 |     | <span class='neutral'>                prod1 := sub(prod1, gt(remainder, prod0))</span>
 160 |     | <span class='neutral'>                prod0 := sub(prod0, remainder)</span>
 161 |     | <span class='neutral'>            }</span>
 162 |     | <span class='neutral'></span>
 163 |     | <span class='neutral'>            // Factor powers of two out of denominator and compute largest power of two divisor of denominator.</span>
 164 |     | <span class='neutral'>            // Always &gt;= 1. See https://cs.stackexchange.com/q/138556/92363.</span>
 165 |     | <span class='neutral'></span>
 166 |     | <span class='unexecuted'>            uint256 twos = denominator &amp; (0 - denominator);</span>
 167 |     | <span class='unexecuted'>            assembly {</span>
 168 |     | <span class='neutral'>                // Divide denominator by twos.</span>
 169 |     | <span class='neutral'>                denominator := div(denominator, twos)</span>
 170 |     | <span class='neutral'></span>
 171 |     | <span class='neutral'>                // Divide [prod1 prod0] by twos.</span>
 172 |     | <span class='neutral'>                prod0 := div(prod0, twos)</span>
 173 |     | <span class='neutral'></span>
 174 |     | <span class='neutral'>                // Flip twos such that it is 2^256 / twos. If twos is zero, then it becomes one.</span>
 175 |     | <span class='neutral'>                twos := add(div(sub(0, twos), twos), 1)</span>
 176 |     | <span class='neutral'>            }</span>
 177 |     | <span class='neutral'></span>
 178 |     | <span class='neutral'>            // Shift in bits from prod1 into prod0.</span>
 179 |     | <span class='unexecuted'>            prod0 |= prod1 * twos;</span>
 180 |     | <span class='neutral'></span>
 181 |     | <span class='neutral'>            // Invert denominator mod 2^256. Now that denominator is an odd number, it has an inverse modulo 2^256 such</span>
 182 |     | <span class='neutral'>            // that denominator * inv = 1 mod 2^256. Compute the inverse by starting with a seed that is correct for</span>
 183 |     | <span class='neutral'>            // four bits. That is, denominator * inv = 1 mod 2^4.</span>
 184 |     | <span class='unexecuted'>            uint256 inverse = (3 * denominator) ^ 2;</span>
 185 |     | <span class='neutral'></span>
 186 |     | <span class='neutral'>            // Use the Newton-Raphson iteration to improve the precision. Thanks to Hensel&#39;s lifting lemma, this also</span>
 187 |     | <span class='neutral'>            // works in modular arithmetic, doubling the correct bits in each step.</span>
 188 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^8</span>
 189 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^16</span>
 190 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^32</span>
 191 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^64</span>
 192 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^128</span>
 193 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^256</span>
 194 |     | <span class='neutral'></span>
 195 |     | <span class='neutral'>            // Because the division is now exact we can divide by multiplying with the modular inverse of denominator.</span>
 196 |     | <span class='neutral'>            // This will give us the correct result modulo 2^256. Since the preconditions guarantee that the outcome is</span>
 197 |     | <span class='neutral'>            // less than 2^256, this is the final result. We don&#39;t need to compute the high bits of the result and prod1</span>
 198 |     | <span class='neutral'>            // is no longer required.</span>
 199 |     | <span class='neutral'>            result = prod0 * inverse;</span>
 200 |     | <span class='neutral'>            return result;</span>
 201 |     | <span class='neutral'>        }</span>
 202 |     | <span class='neutral'>    }</span>
 203 |     | <span class='neutral'></span>
 204 |     | <span class='neutral'>    /**</span>
 205 |     | <span class='neutral'>     * @notice Calculates x * y / denominator with full precision, following the selected rounding direction.</span>
 206 |     | <span class='neutral'>     */</span>
 207 |     | <span class='neutral'>    function mulDiv(uint256 x, uint256 y, uint256 denominator, Rounding rounding) internal pure returns (uint256) {</span>
 208 |     | <span class='neutral'>        uint256 result = mulDiv(x, y, denominator);</span>
 209 |     | <span class='neutral'>        if (unsignedRoundsUp(rounding) &amp;&amp; mulmod(x, y, denominator) &gt; 0) {</span>
 210 |     | <span class='neutral'>            result += 1;</span>
 211 |     | <span class='neutral'>        }</span>
 212 |     | <span class='neutral'>        return result;</span>
 213 |     | <span class='neutral'>    }</span>
 214 |     | <span class='neutral'></span>
 215 |     | <span class='neutral'>    /**</span>
 216 |     | <span class='neutral'>     * @dev Returns the square root of a number. If the number is not a perfect square, the value is rounded</span>
 217 |     | <span class='neutral'>     * towards zero.</span>
 218 |     | <span class='neutral'>     *</span>
 219 |     | <span class='neutral'>     * Inspired by Henry S. Warren, Jr.&#39;s &quot;Hacker&#39;s Delight&quot; (Chapter 11).</span>
 220 |     | <span class='neutral'>     */</span>
 221 |     | <span class='neutral'>    function sqrt(uint256 a) internal pure returns (uint256) {</span>
 222 |     | <span class='neutral'>        if (a == 0) {</span>
 223 |     | <span class='neutral'>            return 0;</span>
 224 |     | <span class='neutral'>        }</span>
 225 |     | <span class='neutral'></span>
 226 |     | <span class='neutral'>        // For our first guess, we get the biggest power of 2 which is smaller than the square root of the target.</span>
 227 |     | <span class='neutral'>        //</span>
 228 |     | <span class='neutral'>        // We know that the &quot;msb&quot; (most significant bit) of our target number `a` is a power of 2 such that we have</span>
 229 |     | <span class='neutral'>        // `msb(a) &lt;= a &lt; 2*msb(a)`. This value can be written `msb(a)=2**k` with `k=log2(a)`.</span>
 230 |     | <span class='neutral'>        //</span>
 231 |     | <span class='neutral'>        // This can be rewritten `2**log2(a) &lt;= a &lt; 2**(log2(a) + 1)`</span>
 232 |     | <span class='neutral'>        // → `sqrt(2**k) &lt;= sqrt(a) &lt; sqrt(2**(k+1))`</span>
 233 |     | <span class='neutral'>        // → `2**(k/2) &lt;= sqrt(a) &lt; 2**((k+1)/2) &lt;= 2**(k/2 + 1)`</span>
 234 |     | <span class='neutral'>        //</span>
 235 |     | <span class='neutral'>        // Consequently, `2**(log2(a) / 2)` is a good first approximation of `sqrt(a)` with at least 1 correct bit.</span>
 236 |     | <span class='neutral'>        uint256 result = 1 &lt;&lt; (log2(a) &gt;&gt; 1);</span>
 237 |     | <span class='neutral'></span>
 238 |     | <span class='neutral'>        // At this point `result` is an estimation with one bit of precision. We know the true value is a uint128,</span>
 239 |     | <span class='neutral'>        // since it is the square root of a uint256. Newton&#39;s method converges quadratically (precision doubles at</span>
 240 |     | <span class='neutral'>        // every iteration). We thus need at most 7 iteration to turn our partial result with one bit of precision</span>
 241 |     | <span class='neutral'>        // into the expected uint128 result.</span>
 242 |     | <span class='neutral'>        unchecked {</span>
 243 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 244 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 245 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 246 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 247 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 248 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 249 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 250 |     | <span class='neutral'>            return min(result, a / result);</span>
 251 |     | <span class='neutral'>        }</span>
 252 |     | <span class='neutral'>    }</span>
 253 |     | <span class='neutral'></span>
 254 |     | <span class='neutral'>    /**</span>
 255 |     | <span class='neutral'>     * @notice Calculates sqrt(a), following the selected rounding direction.</span>
 256 |     | <span class='neutral'>     */</span>
 257 |     | <span class='neutral'>    function sqrt(uint256 a, Rounding rounding) internal pure returns (uint256) {</span>
 258 |     | <span class='neutral'>        unchecked {</span>
 259 |     | <span class='neutral'>            uint256 result = sqrt(a);</span>
 260 |     | <span class='neutral'>            return result + (unsignedRoundsUp(rounding) &amp;&amp; result * result &lt; a ? 1 : 0);</span>
 261 |     | <span class='neutral'>        }</span>
 262 |     | <span class='neutral'>    }</span>
 263 |     | <span class='neutral'></span>
 264 |     | <span class='neutral'>    /**</span>
 265 |     | <span class='neutral'>     * @dev Return the log in base 2 of a positive value rounded towards zero.</span>
 266 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 267 |     | <span class='neutral'>     */</span>
 268 |     | <span class='neutral'>    function log2(uint256 value) internal pure returns (uint256) {</span>
 269 |     | <span class='neutral'>        uint256 result = 0;</span>
 270 |     | <span class='neutral'>        unchecked {</span>
 271 |     | <span class='neutral'>            if (value &gt;&gt; 128 &gt; 0) {</span>
 272 |     | <span class='neutral'>                value &gt;&gt;= 128;</span>
 273 |     | <span class='neutral'>                result += 128;</span>
 274 |     | <span class='neutral'>            }</span>
 275 |     | <span class='neutral'>            if (value &gt;&gt; 64 &gt; 0) {</span>
 276 |     | <span class='neutral'>                value &gt;&gt;= 64;</span>
 277 |     | <span class='neutral'>                result += 64;</span>
 278 |     | <span class='neutral'>            }</span>
 279 |     | <span class='neutral'>            if (value &gt;&gt; 32 &gt; 0) {</span>
 280 |     | <span class='neutral'>                value &gt;&gt;= 32;</span>
 281 |     | <span class='neutral'>                result += 32;</span>
 282 |     | <span class='neutral'>            }</span>
 283 |     | <span class='neutral'>            if (value &gt;&gt; 16 &gt; 0) {</span>
 284 |     | <span class='neutral'>                value &gt;&gt;= 16;</span>
 285 |     | <span class='neutral'>                result += 16;</span>
 286 |     | <span class='neutral'>            }</span>
 287 |     | <span class='neutral'>            if (value &gt;&gt; 8 &gt; 0) {</span>
 288 |     | <span class='neutral'>                value &gt;&gt;= 8;</span>
 289 |     | <span class='neutral'>                result += 8;</span>
 290 |     | <span class='neutral'>            }</span>
 291 |     | <span class='neutral'>            if (value &gt;&gt; 4 &gt; 0) {</span>
 292 |     | <span class='neutral'>                value &gt;&gt;= 4;</span>
 293 |     | <span class='neutral'>                result += 4;</span>
 294 |     | <span class='neutral'>            }</span>
 295 |     | <span class='neutral'>            if (value &gt;&gt; 2 &gt; 0) {</span>
 296 |     | <span class='neutral'>                value &gt;&gt;= 2;</span>
 297 |     | <span class='neutral'>                result += 2;</span>
 298 |     | <span class='neutral'>            }</span>
 299 |     | <span class='neutral'>            if (value &gt;&gt; 1 &gt; 0) {</span>
 300 |     | <span class='neutral'>                result += 1;</span>
 301 |     | <span class='neutral'>            }</span>
 302 |     | <span class='neutral'>        }</span>
 303 |     | <span class='neutral'>        return result;</span>
 304 |     | <span class='neutral'>    }</span>
 305 |     | <span class='neutral'></span>
 306 |     | <span class='neutral'>    /**</span>
 307 |     | <span class='neutral'>     * @dev Return the log in base 2, following the selected rounding direction, of a positive value.</span>
 308 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 309 |     | <span class='neutral'>     */</span>
 310 |     | <span class='neutral'>    function log2(uint256 value, Rounding rounding) internal pure returns (uint256) {</span>
 311 |     | <span class='neutral'>        unchecked {</span>
 312 |     | <span class='neutral'>            uint256 result = log2(value);</span>
 313 |     | <span class='neutral'>            return result + (unsignedRoundsUp(rounding) &amp;&amp; 1 &lt;&lt; result &lt; value ? 1 : 0);</span>
 314 |     | <span class='neutral'>        }</span>
 315 |     | <span class='neutral'>    }</span>
 316 |     | <span class='neutral'></span>
 317 |     | <span class='neutral'>    /**</span>
 318 |     | <span class='neutral'>     * @dev Return the log in base 10 of a positive value rounded towards zero.</span>
 319 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 320 |     | <span class='neutral'>     */</span>
 321 |     | <span class='neutral'>    function log10(uint256 value) internal pure returns (uint256) {</span>
 322 |     | <span class='neutral'>        uint256 result = 0;</span>
 323 |     | <span class='neutral'>        unchecked {</span>
 324 |     | <span class='neutral'>            if (value &gt;= 10 ** 64) {</span>
 325 |     | <span class='neutral'>                value /= 10 ** 64;</span>
 326 |     | <span class='neutral'>                result += 64;</span>
 327 |     | <span class='neutral'>            }</span>
 328 |     | <span class='neutral'>            if (value &gt;= 10 ** 32) {</span>
 329 |     | <span class='neutral'>                value /= 10 ** 32;</span>
 330 |     | <span class='neutral'>                result += 32;</span>
 331 |     | <span class='neutral'>            }</span>
 332 |     | <span class='neutral'>            if (value &gt;= 10 ** 16) {</span>
 333 |     | <span class='neutral'>                value /= 10 ** 16;</span>
 334 |     | <span class='neutral'>                result += 16;</span>
 335 |     | <span class='neutral'>            }</span>
 336 |     | <span class='neutral'>            if (value &gt;= 10 ** 8) {</span>
 337 |     | <span class='neutral'>                value /= 10 ** 8;</span>
 338 |     | <span class='neutral'>                result += 8;</span>
 339 |     | <span class='neutral'>            }</span>
 340 |     | <span class='neutral'>            if (value &gt;= 10 ** 4) {</span>
 341 |     | <span class='neutral'>                value /= 10 ** 4;</span>
 342 |     | <span class='neutral'>                result += 4;</span>
 343 |     | <span class='neutral'>            }</span>
 344 |     | <span class='neutral'>            if (value &gt;= 10 ** 2) {</span>
 345 |     | <span class='neutral'>                value /= 10 ** 2;</span>
 346 |     | <span class='neutral'>                result += 2;</span>
 347 |     | <span class='neutral'>            }</span>
 348 |     | <span class='neutral'>            if (value &gt;= 10 ** 1) {</span>
 349 |     | <span class='neutral'>                result += 1;</span>
 350 |     | <span class='neutral'>            }</span>
 351 |     | <span class='neutral'>        }</span>
 352 |     | <span class='neutral'>        return result;</span>
 353 |     | <span class='neutral'>    }</span>
 354 |     | <span class='neutral'></span>
 355 |     | <span class='neutral'>    /**</span>
 356 |     | <span class='neutral'>     * @dev Return the log in base 10, following the selected rounding direction, of a positive value.</span>
 357 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 358 |     | <span class='neutral'>     */</span>
 359 |     | <span class='neutral'>    function log10(uint256 value, Rounding rounding) internal pure returns (uint256) {</span>
 360 |     | <span class='neutral'>        unchecked {</span>
 361 |     | <span class='neutral'>            uint256 result = log10(value);</span>
 362 |     | <span class='neutral'>            return result + (unsignedRoundsUp(rounding) &amp;&amp; 10 ** result &lt; value ? 1 : 0);</span>
 363 |     | <span class='neutral'>        }</span>
 364 |     | <span class='neutral'>    }</span>
 365 |     | <span class='neutral'></span>
 366 |     | <span class='neutral'>    /**</span>
 367 |     | <span class='neutral'>     * @dev Return the log in base 256 of a positive value rounded towards zero.</span>
 368 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 369 |     | <span class='neutral'>     *</span>
 370 |     | <span class='neutral'>     * Adding one to the result gives the number of pairs of hex symbols needed to represent `value` as a hex string.</span>
 371 |     | <span class='neutral'>     */</span>
 372 |     | <span class='neutral'>    function log256(uint256 value) internal pure returns (uint256) {</span>
 373 |     | <span class='neutral'>        uint256 result = 0;</span>
 374 |     | <span class='neutral'>        unchecked {</span>
 375 |     | <span class='neutral'>            if (value &gt;&gt; 128 &gt; 0) {</span>
 376 |     | <span class='neutral'>                value &gt;&gt;= 128;</span>
 377 |     | <span class='neutral'>                result += 16;</span>
 378 |     | <span class='neutral'>            }</span>
 379 |     | <span class='neutral'>            if (value &gt;&gt; 64 &gt; 0) {</span>
 380 |     | <span class='neutral'>                value &gt;&gt;= 64;</span>
 381 |     | <span class='neutral'>                result += 8;</span>
 382 |     | <span class='neutral'>            }</span>
 383 |     | <span class='neutral'>            if (value &gt;&gt; 32 &gt; 0) {</span>
 384 |     | <span class='neutral'>                value &gt;&gt;= 32;</span>
 385 |     | <span class='neutral'>                result += 4;</span>
 386 |     | <span class='neutral'>            }</span>
 387 |     | <span class='neutral'>            if (value &gt;&gt; 16 &gt; 0) {</span>
 388 |     | <span class='neutral'>                value &gt;&gt;= 16;</span>
 389 |     | <span class='neutral'>                result += 2;</span>
 390 |     | <span class='neutral'>            }</span>
 391 |     | <span class='neutral'>            if (value &gt;&gt; 8 &gt; 0) {</span>
 392 |     | <span class='neutral'>                result += 1;</span>
 393 |     | <span class='neutral'>            }</span>
 394 |     | <span class='neutral'>        }</span>
 395 |     | <span class='neutral'>        return result;</span>
 396 |     | <span class='neutral'>    }</span>
 397 |     | <span class='neutral'></span>
 398 |     | <span class='neutral'>    /**</span>
 399 |     | <span class='neutral'>     * @dev Return the log in base 256, following the selected rounding direction, of a positive value.</span>
 400 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 401 |     | <span class='neutral'>     */</span>
 402 |     | <span class='neutral'>    function log256(uint256 value, Rounding rounding) internal pure returns (uint256) {</span>
 403 |     | <span class='neutral'>        unchecked {</span>
 404 |     | <span class='neutral'>            uint256 result = log256(value);</span>
 405 |     | <span class='neutral'>            return result + (unsignedRoundsUp(rounding) &amp;&amp; 1 &lt;&lt; (result &lt;&lt; 3) &lt; value ? 1 : 0);</span>
 406 |     | <span class='neutral'>        }</span>
 407 |     | <span class='neutral'>    }</span>
 408 |     | <span class='neutral'></span>
 409 |     | <span class='neutral'>    /**</span>
 410 |     | <span class='neutral'>     * @dev Returns whether a provided rounding mode is considered rounding up for unsigned integers.</span>
 411 |     | <span class='neutral'>     */</span>
 412 |     | <span class='neutral'>    function unsignedRoundsUp(Rounding rounding) internal pure returns (bool) {</span>
 413 |     | <span class='neutral'>        return uint8(rounding) % 2 == 1;</span>
 414 |     | <span class='neutral'>    }</span>
 415 |     | <span class='neutral'>}</span>
 416 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/math/SafeCast.sol</b>
<code>
    1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
    2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/math/SafeCast.sol)</span>
    3 |     | <span class='neutral'>// This file was procedurally generated from scripts/generate/templates/SafeCast.js.</span>
    4 |     | <span class='neutral'></span>
    5 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
    6 |     | <span class='neutral'></span>
    7 |     | <span class='neutral'>/**</span>
    8 |     | <span class='neutral'> * @dev Wrappers over Solidity&#39;s uintXX/intXX casting operators with added overflow</span>
    9 |     | <span class='neutral'> * checks.</span>
   10 |     | <span class='neutral'> *</span>
   11 |     | <span class='neutral'> * Downcasting from uint256/int256 in Solidity does not revert on overflow. This can</span>
   12 |     | <span class='neutral'> * easily result in undesired exploitation or bugs, since developers usually</span>
   13 |     | <span class='neutral'> * assume that overflows raise errors. `SafeCast` restores this intuition by</span>
   14 |     | <span class='neutral'> * reverting the transaction when such an operation overflows.</span>
   15 |     | <span class='neutral'> *</span>
   16 |     | <span class='neutral'> * Using this library instead of the unchecked operations eliminates an entire</span>
   17 |     | <span class='neutral'> * class of bugs, so it&#39;s recommended to use it always.</span>
   18 |     | <span class='neutral'> */</span>
   19 |     | <span class='unexecuted'>library SafeCast {</span>
   20 |     | <span class='neutral'>    /**</span>
   21 |     | <span class='neutral'>     * @dev Value doesn&#39;t fit in an uint of `bits` size.</span>
   22 |     | <span class='neutral'>     */</span>
   23 |     | <span class='neutral'>    error SafeCastOverflowedUintDowncast(uint8 bits, uint256 value);</span>
   24 |     | <span class='neutral'></span>
   25 |     | <span class='neutral'>    /**</span>
   26 |     | <span class='neutral'>     * @dev An int value doesn&#39;t fit in an uint of `bits` size.</span>
   27 |     | <span class='neutral'>     */</span>
   28 |     | <span class='neutral'>    error SafeCastOverflowedIntToUint(int256 value);</span>
   29 |     | <span class='neutral'></span>
   30 |     | <span class='neutral'>    /**</span>
   31 |     | <span class='neutral'>     * @dev Value doesn&#39;t fit in an int of `bits` size.</span>
   32 |     | <span class='neutral'>     */</span>
   33 |     | <span class='neutral'>    error SafeCastOverflowedIntDowncast(uint8 bits, int256 value);</span>
   34 |     | <span class='neutral'></span>
   35 |     | <span class='neutral'>    /**</span>
   36 |     | <span class='neutral'>     * @dev An uint value doesn&#39;t fit in an int of `bits` size.</span>
   37 |     | <span class='neutral'>     */</span>
   38 |     | <span class='neutral'>    error SafeCastOverflowedUintToInt(uint256 value);</span>
   39 |     | <span class='neutral'></span>
   40 |     | <span class='neutral'>    /**</span>
   41 |     | <span class='neutral'>     * @dev Returns the downcasted uint248 from uint256, reverting on</span>
   42 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint248).</span>
   43 |     | <span class='neutral'>     *</span>
   44 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint248` operator.</span>
   45 |     | <span class='neutral'>     *</span>
   46 |     | <span class='neutral'>     * Requirements:</span>
   47 |     | <span class='neutral'>     *</span>
   48 |     | <span class='neutral'>     * - input must fit into 248 bits</span>
   49 |     | <span class='neutral'>     */</span>
   50 |     | <span class='neutral'>    function toUint248(uint256 value) internal pure returns (uint248) {</span>
   51 |     | <span class='neutral'>        if (value &gt; type(uint248).max) {</span>
   52 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(248, value);</span>
   53 |     | <span class='neutral'>        }</span>
   54 |     | <span class='neutral'>        return uint248(value);</span>
   55 |     | <span class='neutral'>    }</span>
   56 |     | <span class='neutral'></span>
   57 |     | <span class='neutral'>    /**</span>
   58 |     | <span class='neutral'>     * @dev Returns the downcasted uint240 from uint256, reverting on</span>
   59 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint240).</span>
   60 |     | <span class='neutral'>     *</span>
   61 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint240` operator.</span>
   62 |     | <span class='neutral'>     *</span>
   63 |     | <span class='neutral'>     * Requirements:</span>
   64 |     | <span class='neutral'>     *</span>
   65 |     | <span class='neutral'>     * - input must fit into 240 bits</span>
   66 |     | <span class='neutral'>     */</span>
   67 |     | <span class='neutral'>    function toUint240(uint256 value) internal pure returns (uint240) {</span>
   68 |     | <span class='neutral'>        if (value &gt; type(uint240).max) {</span>
   69 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(240, value);</span>
   70 |     | <span class='neutral'>        }</span>
   71 |     | <span class='neutral'>        return uint240(value);</span>
   72 |     | <span class='neutral'>    }</span>
   73 |     | <span class='neutral'></span>
   74 |     | <span class='neutral'>    /**</span>
   75 |     | <span class='neutral'>     * @dev Returns the downcasted uint232 from uint256, reverting on</span>
   76 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint232).</span>
   77 |     | <span class='neutral'>     *</span>
   78 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint232` operator.</span>
   79 |     | <span class='neutral'>     *</span>
   80 |     | <span class='neutral'>     * Requirements:</span>
   81 |     | <span class='neutral'>     *</span>
   82 |     | <span class='neutral'>     * - input must fit into 232 bits</span>
   83 |     | <span class='neutral'>     */</span>
   84 |     | <span class='neutral'>    function toUint232(uint256 value) internal pure returns (uint232) {</span>
   85 |     | <span class='neutral'>        if (value &gt; type(uint232).max) {</span>
   86 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(232, value);</span>
   87 |     | <span class='neutral'>        }</span>
   88 |     | <span class='neutral'>        return uint232(value);</span>
   89 |     | <span class='neutral'>    }</span>
   90 |     | <span class='neutral'></span>
   91 |     | <span class='neutral'>    /**</span>
   92 |     | <span class='neutral'>     * @dev Returns the downcasted uint224 from uint256, reverting on</span>
   93 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint224).</span>
   94 |     | <span class='neutral'>     *</span>
   95 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint224` operator.</span>
   96 |     | <span class='neutral'>     *</span>
   97 |     | <span class='neutral'>     * Requirements:</span>
   98 |     | <span class='neutral'>     *</span>
   99 |     | <span class='neutral'>     * - input must fit into 224 bits</span>
  100 |     | <span class='neutral'>     */</span>
  101 |     | <span class='neutral'>    function toUint224(uint256 value) internal pure returns (uint224) {</span>
  102 |     | <span class='neutral'>        if (value &gt; type(uint224).max) {</span>
  103 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(224, value);</span>
  104 |     | <span class='neutral'>        }</span>
  105 |     | <span class='neutral'>        return uint224(value);</span>
  106 |     | <span class='neutral'>    }</span>
  107 |     | <span class='neutral'></span>
  108 |     | <span class='neutral'>    /**</span>
  109 |     | <span class='neutral'>     * @dev Returns the downcasted uint216 from uint256, reverting on</span>
  110 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint216).</span>
  111 |     | <span class='neutral'>     *</span>
  112 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint216` operator.</span>
  113 |     | <span class='neutral'>     *</span>
  114 |     | <span class='neutral'>     * Requirements:</span>
  115 |     | <span class='neutral'>     *</span>
  116 |     | <span class='neutral'>     * - input must fit into 216 bits</span>
  117 |     | <span class='neutral'>     */</span>
  118 | *   | <span class='executed'>    function toUint216(uint256 value) internal pure returns (uint216) {</span>
  119 | *   | <span class='executed'>        if (value &gt; type(uint216).max) {</span>
  120 |     | <span class='unexecuted'>            revert SafeCastOverflowedUintDowncast(216, value);</span>
  121 |     | <span class='neutral'>        }</span>
  122 |     | <span class='neutral'>        return uint216(value);</span>
  123 |     | <span class='neutral'>    }</span>
  124 |     | <span class='neutral'></span>
  125 |     | <span class='neutral'>    /**</span>
  126 |     | <span class='neutral'>     * @dev Returns the downcasted uint208 from uint256, reverting on</span>
  127 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint208).</span>
  128 |     | <span class='neutral'>     *</span>
  129 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint208` operator.</span>
  130 |     | <span class='neutral'>     *</span>
  131 |     | <span class='neutral'>     * Requirements:</span>
  132 |     | <span class='neutral'>     *</span>
  133 |     | <span class='neutral'>     * - input must fit into 208 bits</span>
  134 |     | <span class='neutral'>     */</span>
  135 |     | <span class='neutral'>    function toUint208(uint256 value) internal pure returns (uint208) {</span>
  136 |     | <span class='neutral'>        if (value &gt; type(uint208).max) {</span>
  137 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(208, value);</span>
  138 |     | <span class='neutral'>        }</span>
  139 |     | <span class='neutral'>        return uint208(value);</span>
  140 |     | <span class='neutral'>    }</span>
  141 |     | <span class='neutral'></span>
  142 |     | <span class='neutral'>    /**</span>
  143 |     | <span class='neutral'>     * @dev Returns the downcasted uint200 from uint256, reverting on</span>
  144 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint200).</span>
  145 |     | <span class='neutral'>     *</span>
  146 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint200` operator.</span>
  147 |     | <span class='neutral'>     *</span>
  148 |     | <span class='neutral'>     * Requirements:</span>
  149 |     | <span class='neutral'>     *</span>
  150 |     | <span class='neutral'>     * - input must fit into 200 bits</span>
  151 |     | <span class='neutral'>     */</span>
  152 |     | <span class='neutral'>    function toUint200(uint256 value) internal pure returns (uint200) {</span>
  153 |     | <span class='neutral'>        if (value &gt; type(uint200).max) {</span>
  154 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(200, value);</span>
  155 |     | <span class='neutral'>        }</span>
  156 |     | <span class='neutral'>        return uint200(value);</span>
  157 |     | <span class='neutral'>    }</span>
  158 |     | <span class='neutral'></span>
  159 |     | <span class='neutral'>    /**</span>
  160 |     | <span class='neutral'>     * @dev Returns the downcasted uint192 from uint256, reverting on</span>
  161 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint192).</span>
  162 |     | <span class='neutral'>     *</span>
  163 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint192` operator.</span>
  164 |     | <span class='neutral'>     *</span>
  165 |     | <span class='neutral'>     * Requirements:</span>
  166 |     | <span class='neutral'>     *</span>
  167 |     | <span class='neutral'>     * - input must fit into 192 bits</span>
  168 |     | <span class='neutral'>     */</span>
  169 |     | <span class='neutral'>    function toUint192(uint256 value) internal pure returns (uint192) {</span>
  170 |     | <span class='neutral'>        if (value &gt; type(uint192).max) {</span>
  171 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(192, value);</span>
  172 |     | <span class='neutral'>        }</span>
  173 |     | <span class='neutral'>        return uint192(value);</span>
  174 |     | <span class='neutral'>    }</span>
  175 |     | <span class='neutral'></span>
  176 |     | <span class='neutral'>    /**</span>
  177 |     | <span class='neutral'>     * @dev Returns the downcasted uint184 from uint256, reverting on</span>
  178 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint184).</span>
  179 |     | <span class='neutral'>     *</span>
  180 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint184` operator.</span>
  181 |     | <span class='neutral'>     *</span>
  182 |     | <span class='neutral'>     * Requirements:</span>
  183 |     | <span class='neutral'>     *</span>
  184 |     | <span class='neutral'>     * - input must fit into 184 bits</span>
  185 |     | <span class='neutral'>     */</span>
  186 |     | <span class='neutral'>    function toUint184(uint256 value) internal pure returns (uint184) {</span>
  187 |     | <span class='neutral'>        if (value &gt; type(uint184).max) {</span>
  188 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(184, value);</span>
  189 |     | <span class='neutral'>        }</span>
  190 |     | <span class='neutral'>        return uint184(value);</span>
  191 |     | <span class='neutral'>    }</span>
  192 |     | <span class='neutral'></span>
  193 |     | <span class='neutral'>    /**</span>
  194 |     | <span class='neutral'>     * @dev Returns the downcasted uint176 from uint256, reverting on</span>
  195 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint176).</span>
  196 |     | <span class='neutral'>     *</span>
  197 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint176` operator.</span>
  198 |     | <span class='neutral'>     *</span>
  199 |     | <span class='neutral'>     * Requirements:</span>
  200 |     | <span class='neutral'>     *</span>
  201 |     | <span class='neutral'>     * - input must fit into 176 bits</span>
  202 |     | <span class='neutral'>     */</span>
  203 |     | <span class='neutral'>    function toUint176(uint256 value) internal pure returns (uint176) {</span>
  204 |     | <span class='neutral'>        if (value &gt; type(uint176).max) {</span>
  205 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(176, value);</span>
  206 |     | <span class='neutral'>        }</span>
  207 |     | <span class='neutral'>        return uint176(value);</span>
  208 |     | <span class='neutral'>    }</span>
  209 |     | <span class='neutral'></span>
  210 |     | <span class='neutral'>    /**</span>
  211 |     | <span class='neutral'>     * @dev Returns the downcasted uint168 from uint256, reverting on</span>
  212 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint168).</span>
  213 |     | <span class='neutral'>     *</span>
  214 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint168` operator.</span>
  215 |     | <span class='neutral'>     *</span>
  216 |     | <span class='neutral'>     * Requirements:</span>
  217 |     | <span class='neutral'>     *</span>
  218 |     | <span class='neutral'>     * - input must fit into 168 bits</span>
  219 |     | <span class='neutral'>     */</span>
  220 |     | <span class='neutral'>    function toUint168(uint256 value) internal pure returns (uint168) {</span>
  221 |     | <span class='neutral'>        if (value &gt; type(uint168).max) {</span>
  222 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(168, value);</span>
  223 |     | <span class='neutral'>        }</span>
  224 |     | <span class='neutral'>        return uint168(value);</span>
  225 |     | <span class='neutral'>    }</span>
  226 |     | <span class='neutral'></span>
  227 |     | <span class='neutral'>    /**</span>
  228 |     | <span class='neutral'>     * @dev Returns the downcasted uint160 from uint256, reverting on</span>
  229 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint160).</span>
  230 |     | <span class='neutral'>     *</span>
  231 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint160` operator.</span>
  232 |     | <span class='neutral'>     *</span>
  233 |     | <span class='neutral'>     * Requirements:</span>
  234 |     | <span class='neutral'>     *</span>
  235 |     | <span class='neutral'>     * - input must fit into 160 bits</span>
  236 |     | <span class='neutral'>     */</span>
  237 |     | <span class='neutral'>    function toUint160(uint256 value) internal pure returns (uint160) {</span>
  238 |     | <span class='neutral'>        if (value &gt; type(uint160).max) {</span>
  239 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(160, value);</span>
  240 |     | <span class='neutral'>        }</span>
  241 |     | <span class='neutral'>        return uint160(value);</span>
  242 |     | <span class='neutral'>    }</span>
  243 |     | <span class='neutral'></span>
  244 |     | <span class='neutral'>    /**</span>
  245 |     | <span class='neutral'>     * @dev Returns the downcasted uint152 from uint256, reverting on</span>
  246 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint152).</span>
  247 |     | <span class='neutral'>     *</span>
  248 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint152` operator.</span>
  249 |     | <span class='neutral'>     *</span>
  250 |     | <span class='neutral'>     * Requirements:</span>
  251 |     | <span class='neutral'>     *</span>
  252 |     | <span class='neutral'>     * - input must fit into 152 bits</span>
  253 |     | <span class='neutral'>     */</span>
  254 |     | <span class='neutral'>    function toUint152(uint256 value) internal pure returns (uint152) {</span>
  255 |     | <span class='neutral'>        if (value &gt; type(uint152).max) {</span>
  256 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(152, value);</span>
  257 |     | <span class='neutral'>        }</span>
  258 |     | <span class='neutral'>        return uint152(value);</span>
  259 |     | <span class='neutral'>    }</span>
  260 |     | <span class='neutral'></span>
  261 |     | <span class='neutral'>    /**</span>
  262 |     | <span class='neutral'>     * @dev Returns the downcasted uint144 from uint256, reverting on</span>
  263 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint144).</span>
  264 |     | <span class='neutral'>     *</span>
  265 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint144` operator.</span>
  266 |     | <span class='neutral'>     *</span>
  267 |     | <span class='neutral'>     * Requirements:</span>
  268 |     | <span class='neutral'>     *</span>
  269 |     | <span class='neutral'>     * - input must fit into 144 bits</span>
  270 |     | <span class='neutral'>     */</span>
  271 |     | <span class='neutral'>    function toUint144(uint256 value) internal pure returns (uint144) {</span>
  272 |     | <span class='neutral'>        if (value &gt; type(uint144).max) {</span>
  273 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(144, value);</span>
  274 |     | <span class='neutral'>        }</span>
  275 |     | <span class='neutral'>        return uint144(value);</span>
  276 |     | <span class='neutral'>    }</span>
  277 |     | <span class='neutral'></span>
  278 |     | <span class='neutral'>    /**</span>
  279 |     | <span class='neutral'>     * @dev Returns the downcasted uint136 from uint256, reverting on</span>
  280 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint136).</span>
  281 |     | <span class='neutral'>     *</span>
  282 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint136` operator.</span>
  283 |     | <span class='neutral'>     *</span>
  284 |     | <span class='neutral'>     * Requirements:</span>
  285 |     | <span class='neutral'>     *</span>
  286 |     | <span class='neutral'>     * - input must fit into 136 bits</span>
  287 |     | <span class='neutral'>     */</span>
  288 |     | <span class='neutral'>    function toUint136(uint256 value) internal pure returns (uint136) {</span>
  289 |     | <span class='neutral'>        if (value &gt; type(uint136).max) {</span>
  290 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(136, value);</span>
  291 |     | <span class='neutral'>        }</span>
  292 |     | <span class='neutral'>        return uint136(value);</span>
  293 |     | <span class='neutral'>    }</span>
  294 |     | <span class='neutral'></span>
  295 |     | <span class='neutral'>    /**</span>
  296 |     | <span class='neutral'>     * @dev Returns the downcasted uint128 from uint256, reverting on</span>
  297 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint128).</span>
  298 |     | <span class='neutral'>     *</span>
  299 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint128` operator.</span>
  300 |     | <span class='neutral'>     *</span>
  301 |     | <span class='neutral'>     * Requirements:</span>
  302 |     | <span class='neutral'>     *</span>
  303 |     | <span class='neutral'>     * - input must fit into 128 bits</span>
  304 |     | <span class='neutral'>     */</span>
  305 |     | <span class='neutral'>    function toUint128(uint256 value) internal pure returns (uint128) {</span>
  306 |     | <span class='unexecuted'>        if (value &gt; type(uint128).max) {</span>
  307 |     | <span class='unexecuted'>            revert SafeCastOverflowedUintDowncast(128, value);</span>
  308 |     | <span class='neutral'>        }</span>
  309 |     | <span class='neutral'>        return uint128(value);</span>
  310 |     | <span class='neutral'>    }</span>
  311 |     | <span class='neutral'></span>
  312 |     | <span class='neutral'>    /**</span>
  313 |     | <span class='neutral'>     * @dev Returns the downcasted uint120 from uint256, reverting on</span>
  314 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint120).</span>
  315 |     | <span class='neutral'>     *</span>
  316 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint120` operator.</span>
  317 |     | <span class='neutral'>     *</span>
  318 |     | <span class='neutral'>     * Requirements:</span>
  319 |     | <span class='neutral'>     *</span>
  320 |     | <span class='neutral'>     * - input must fit into 120 bits</span>
  321 |     | <span class='neutral'>     */</span>
  322 |     | <span class='neutral'>    function toUint120(uint256 value) internal pure returns (uint120) {</span>
  323 |     | <span class='neutral'>        if (value &gt; type(uint120).max) {</span>
  324 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(120, value);</span>
  325 |     | <span class='neutral'>        }</span>
  326 |     | <span class='neutral'>        return uint120(value);</span>
  327 |     | <span class='neutral'>    }</span>
  328 |     | <span class='neutral'></span>
  329 |     | <span class='neutral'>    /**</span>
  330 |     | <span class='neutral'>     * @dev Returns the downcasted uint112 from uint256, reverting on</span>
  331 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint112).</span>
  332 |     | <span class='neutral'>     *</span>
  333 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint112` operator.</span>
  334 |     | <span class='neutral'>     *</span>
  335 |     | <span class='neutral'>     * Requirements:</span>
  336 |     | <span class='neutral'>     *</span>
  337 |     | <span class='neutral'>     * - input must fit into 112 bits</span>
  338 |     | <span class='neutral'>     */</span>
  339 |     | <span class='neutral'>    function toUint112(uint256 value) internal pure returns (uint112) {</span>
  340 |     | <span class='neutral'>        if (value &gt; type(uint112).max) {</span>
  341 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(112, value);</span>
  342 |     | <span class='neutral'>        }</span>
  343 |     | <span class='neutral'>        return uint112(value);</span>
  344 |     | <span class='neutral'>    }</span>
  345 |     | <span class='neutral'></span>
  346 |     | <span class='neutral'>    /**</span>
  347 |     | <span class='neutral'>     * @dev Returns the downcasted uint104 from uint256, reverting on</span>
  348 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint104).</span>
  349 |     | <span class='neutral'>     *</span>
  350 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint104` operator.</span>
  351 |     | <span class='neutral'>     *</span>
  352 |     | <span class='neutral'>     * Requirements:</span>
  353 |     | <span class='neutral'>     *</span>
  354 |     | <span class='neutral'>     * - input must fit into 104 bits</span>
  355 |     | <span class='neutral'>     */</span>
  356 |     | <span class='neutral'>    function toUint104(uint256 value) internal pure returns (uint104) {</span>
  357 |     | <span class='neutral'>        if (value &gt; type(uint104).max) {</span>
  358 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(104, value);</span>
  359 |     | <span class='neutral'>        }</span>
  360 |     | <span class='neutral'>        return uint104(value);</span>
  361 |     | <span class='neutral'>    }</span>
  362 |     | <span class='neutral'></span>
  363 |     | <span class='neutral'>    /**</span>
  364 |     | <span class='neutral'>     * @dev Returns the downcasted uint96 from uint256, reverting on</span>
  365 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint96).</span>
  366 |     | <span class='neutral'>     *</span>
  367 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint96` operator.</span>
  368 |     | <span class='neutral'>     *</span>
  369 |     | <span class='neutral'>     * Requirements:</span>
  370 |     | <span class='neutral'>     *</span>
  371 |     | <span class='neutral'>     * - input must fit into 96 bits</span>
  372 |     | <span class='neutral'>     */</span>
  373 |     | <span class='neutral'>    function toUint96(uint256 value) internal pure returns (uint96) {</span>
  374 |     | <span class='neutral'>        if (value &gt; type(uint96).max) {</span>
  375 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(96, value);</span>
  376 |     | <span class='neutral'>        }</span>
  377 |     | <span class='neutral'>        return uint96(value);</span>
  378 |     | <span class='neutral'>    }</span>
  379 |     | <span class='neutral'></span>
  380 |     | <span class='neutral'>    /**</span>
  381 |     | <span class='neutral'>     * @dev Returns the downcasted uint88 from uint256, reverting on</span>
  382 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint88).</span>
  383 |     | <span class='neutral'>     *</span>
  384 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint88` operator.</span>
  385 |     | <span class='neutral'>     *</span>
  386 |     | <span class='neutral'>     * Requirements:</span>
  387 |     | <span class='neutral'>     *</span>
  388 |     | <span class='neutral'>     * - input must fit into 88 bits</span>
  389 |     | <span class='neutral'>     */</span>
  390 |     | <span class='neutral'>    function toUint88(uint256 value) internal pure returns (uint88) {</span>
  391 |     | <span class='neutral'>        if (value &gt; type(uint88).max) {</span>
  392 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(88, value);</span>
  393 |     | <span class='neutral'>        }</span>
  394 |     | <span class='neutral'>        return uint88(value);</span>
  395 |     | <span class='neutral'>    }</span>
  396 |     | <span class='neutral'></span>
  397 |     | <span class='neutral'>    /**</span>
  398 |     | <span class='neutral'>     * @dev Returns the downcasted uint80 from uint256, reverting on</span>
  399 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint80).</span>
  400 |     | <span class='neutral'>     *</span>
  401 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint80` operator.</span>
  402 |     | <span class='neutral'>     *</span>
  403 |     | <span class='neutral'>     * Requirements:</span>
  404 |     | <span class='neutral'>     *</span>
  405 |     | <span class='neutral'>     * - input must fit into 80 bits</span>
  406 |     | <span class='neutral'>     */</span>
  407 |     | <span class='neutral'>    function toUint80(uint256 value) internal pure returns (uint80) {</span>
  408 |     | <span class='neutral'>        if (value &gt; type(uint80).max) {</span>
  409 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(80, value);</span>
  410 |     | <span class='neutral'>        }</span>
  411 |     | <span class='neutral'>        return uint80(value);</span>
  412 |     | <span class='neutral'>    }</span>
  413 |     | <span class='neutral'></span>
  414 |     | <span class='neutral'>    /**</span>
  415 |     | <span class='neutral'>     * @dev Returns the downcasted uint72 from uint256, reverting on</span>
  416 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint72).</span>
  417 |     | <span class='neutral'>     *</span>
  418 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint72` operator.</span>
  419 |     | <span class='neutral'>     *</span>
  420 |     | <span class='neutral'>     * Requirements:</span>
  421 |     | <span class='neutral'>     *</span>
  422 |     | <span class='neutral'>     * - input must fit into 72 bits</span>
  423 |     | <span class='neutral'>     */</span>
  424 |     | <span class='neutral'>    function toUint72(uint256 value) internal pure returns (uint72) {</span>
  425 |     | <span class='neutral'>        if (value &gt; type(uint72).max) {</span>
  426 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(72, value);</span>
  427 |     | <span class='neutral'>        }</span>
  428 |     | <span class='neutral'>        return uint72(value);</span>
  429 |     | <span class='neutral'>    }</span>
  430 |     | <span class='neutral'></span>
  431 |     | <span class='neutral'>    /**</span>
  432 |     | <span class='neutral'>     * @dev Returns the downcasted uint64 from uint256, reverting on</span>
  433 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint64).</span>
  434 |     | <span class='neutral'>     *</span>
  435 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint64` operator.</span>
  436 |     | <span class='neutral'>     *</span>
  437 |     | <span class='neutral'>     * Requirements:</span>
  438 |     | <span class='neutral'>     *</span>
  439 |     | <span class='neutral'>     * - input must fit into 64 bits</span>
  440 |     | <span class='neutral'>     */</span>
  441 |     | <span class='neutral'>    function toUint64(uint256 value) internal pure returns (uint64) {</span>
  442 |     | <span class='neutral'>        if (value &gt; type(uint64).max) {</span>
  443 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(64, value);</span>
  444 |     | <span class='neutral'>        }</span>
  445 |     | <span class='neutral'>        return uint64(value);</span>
  446 |     | <span class='neutral'>    }</span>
  447 |     | <span class='neutral'></span>
  448 |     | <span class='neutral'>    /**</span>
  449 |     | <span class='neutral'>     * @dev Returns the downcasted uint56 from uint256, reverting on</span>
  450 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint56).</span>
  451 |     | <span class='neutral'>     *</span>
  452 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint56` operator.</span>
  453 |     | <span class='neutral'>     *</span>
  454 |     | <span class='neutral'>     * Requirements:</span>
  455 |     | <span class='neutral'>     *</span>
  456 |     | <span class='neutral'>     * - input must fit into 56 bits</span>
  457 |     | <span class='neutral'>     */</span>
  458 |     | <span class='neutral'>    function toUint56(uint256 value) internal pure returns (uint56) {</span>
  459 |     | <span class='neutral'>        if (value &gt; type(uint56).max) {</span>
  460 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(56, value);</span>
  461 |     | <span class='neutral'>        }</span>
  462 |     | <span class='neutral'>        return uint56(value);</span>
  463 |     | <span class='neutral'>    }</span>
  464 |     | <span class='neutral'></span>
  465 |     | <span class='neutral'>    /**</span>
  466 |     | <span class='neutral'>     * @dev Returns the downcasted uint48 from uint256, reverting on</span>
  467 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint48).</span>
  468 |     | <span class='neutral'>     *</span>
  469 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint48` operator.</span>
  470 |     | <span class='neutral'>     *</span>
  471 |     | <span class='neutral'>     * Requirements:</span>
  472 |     | <span class='neutral'>     *</span>
  473 |     | <span class='neutral'>     * - input must fit into 48 bits</span>
  474 |     | <span class='neutral'>     */</span>
  475 |     | <span class='neutral'>    function toUint48(uint256 value) internal pure returns (uint48) {</span>
  476 |     | <span class='neutral'>        if (value &gt; type(uint48).max) {</span>
  477 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(48, value);</span>
  478 |     | <span class='neutral'>        }</span>
  479 |     | <span class='neutral'>        return uint48(value);</span>
  480 |     | <span class='neutral'>    }</span>
  481 |     | <span class='neutral'></span>
  482 |     | <span class='neutral'>    /**</span>
  483 |     | <span class='neutral'>     * @dev Returns the downcasted uint40 from uint256, reverting on</span>
  484 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint40).</span>
  485 |     | <span class='neutral'>     *</span>
  486 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint40` operator.</span>
  487 |     | <span class='neutral'>     *</span>
  488 |     | <span class='neutral'>     * Requirements:</span>
  489 |     | <span class='neutral'>     *</span>
  490 |     | <span class='neutral'>     * - input must fit into 40 bits</span>
  491 |     | <span class='neutral'>     */</span>
  492 |     | <span class='neutral'>    function toUint40(uint256 value) internal pure returns (uint40) {</span>
  493 |     | <span class='neutral'>        if (value &gt; type(uint40).max) {</span>
  494 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(40, value);</span>
  495 |     | <span class='neutral'>        }</span>
  496 |     | <span class='neutral'>        return uint40(value);</span>
  497 |     | <span class='neutral'>    }</span>
  498 |     | <span class='neutral'></span>
  499 |     | <span class='neutral'>    /**</span>
  500 |     | <span class='neutral'>     * @dev Returns the downcasted uint32 from uint256, reverting on</span>
  501 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint32).</span>
  502 |     | <span class='neutral'>     *</span>
  503 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint32` operator.</span>
  504 |     | <span class='neutral'>     *</span>
  505 |     | <span class='neutral'>     * Requirements:</span>
  506 |     | <span class='neutral'>     *</span>
  507 |     | <span class='neutral'>     * - input must fit into 32 bits</span>
  508 |     | <span class='neutral'>     */</span>
  509 |     | <span class='neutral'>    function toUint32(uint256 value) internal pure returns (uint32) {</span>
  510 |     | <span class='neutral'>        if (value &gt; type(uint32).max) {</span>
  511 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(32, value);</span>
  512 |     | <span class='neutral'>        }</span>
  513 |     | <span class='neutral'>        return uint32(value);</span>
  514 |     | <span class='neutral'>    }</span>
  515 |     | <span class='neutral'></span>
  516 |     | <span class='neutral'>    /**</span>
  517 |     | <span class='neutral'>     * @dev Returns the downcasted uint24 from uint256, reverting on</span>
  518 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint24).</span>
  519 |     | <span class='neutral'>     *</span>
  520 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint24` operator.</span>
  521 |     | <span class='neutral'>     *</span>
  522 |     | <span class='neutral'>     * Requirements:</span>
  523 |     | <span class='neutral'>     *</span>
  524 |     | <span class='neutral'>     * - input must fit into 24 bits</span>
  525 |     | <span class='neutral'>     */</span>
  526 |     | <span class='neutral'>    function toUint24(uint256 value) internal pure returns (uint24) {</span>
  527 |     | <span class='neutral'>        if (value &gt; type(uint24).max) {</span>
  528 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(24, value);</span>
  529 |     | <span class='neutral'>        }</span>
  530 |     | <span class='neutral'>        return uint24(value);</span>
  531 |     | <span class='neutral'>    }</span>
  532 |     | <span class='neutral'></span>
  533 |     | <span class='neutral'>    /**</span>
  534 |     | <span class='neutral'>     * @dev Returns the downcasted uint16 from uint256, reverting on</span>
  535 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint16).</span>
  536 |     | <span class='neutral'>     *</span>
  537 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint16` operator.</span>
  538 |     | <span class='neutral'>     *</span>
  539 |     | <span class='neutral'>     * Requirements:</span>
  540 |     | <span class='neutral'>     *</span>
  541 |     | <span class='neutral'>     * - input must fit into 16 bits</span>
  542 |     | <span class='neutral'>     */</span>
  543 |     | <span class='neutral'>    function toUint16(uint256 value) internal pure returns (uint16) {</span>
  544 |     | <span class='neutral'>        if (value &gt; type(uint16).max) {</span>
  545 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(16, value);</span>
  546 |     | <span class='neutral'>        }</span>
  547 |     | <span class='neutral'>        return uint16(value);</span>
  548 |     | <span class='neutral'>    }</span>
  549 |     | <span class='neutral'></span>
  550 |     | <span class='neutral'>    /**</span>
  551 |     | <span class='neutral'>     * @dev Returns the downcasted uint8 from uint256, reverting on</span>
  552 |     | <span class='neutral'>     * overflow (when the input is greater than largest uint8).</span>
  553 |     | <span class='neutral'>     *</span>
  554 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `uint8` operator.</span>
  555 |     | <span class='neutral'>     *</span>
  556 |     | <span class='neutral'>     * Requirements:</span>
  557 |     | <span class='neutral'>     *</span>
  558 |     | <span class='neutral'>     * - input must fit into 8 bits</span>
  559 |     | <span class='neutral'>     */</span>
  560 |     | <span class='neutral'>    function toUint8(uint256 value) internal pure returns (uint8) {</span>
  561 |     | <span class='neutral'>        if (value &gt; type(uint8).max) {</span>
  562 |     | <span class='neutral'>            revert SafeCastOverflowedUintDowncast(8, value);</span>
  563 |     | <span class='neutral'>        }</span>
  564 |     | <span class='neutral'>        return uint8(value);</span>
  565 |     | <span class='neutral'>    }</span>
  566 |     | <span class='neutral'></span>
  567 |     | <span class='neutral'>    /**</span>
  568 |     | <span class='neutral'>     * @dev Converts a signed int256 into an unsigned uint256.</span>
  569 |     | <span class='neutral'>     *</span>
  570 |     | <span class='neutral'>     * Requirements:</span>
  571 |     | <span class='neutral'>     *</span>
  572 |     | <span class='neutral'>     * - input must be greater than or equal to 0.</span>
  573 |     | <span class='neutral'>     */</span>
  574 |     | <span class='neutral'>    function toUint256(int256 value) internal pure returns (uint256) {</span>
  575 |     | <span class='neutral'>        if (value &lt; 0) {</span>
  576 |     | <span class='neutral'>            revert SafeCastOverflowedIntToUint(value);</span>
  577 |     | <span class='neutral'>        }</span>
  578 |     | <span class='neutral'>        return uint256(value);</span>
  579 |     | <span class='neutral'>    }</span>
  580 |     | <span class='neutral'></span>
  581 |     | <span class='neutral'>    /**</span>
  582 |     | <span class='neutral'>     * @dev Returns the downcasted int248 from int256, reverting on</span>
  583 |     | <span class='neutral'>     * overflow (when the input is less than smallest int248 or</span>
  584 |     | <span class='neutral'>     * greater than largest int248).</span>
  585 |     | <span class='neutral'>     *</span>
  586 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int248` operator.</span>
  587 |     | <span class='neutral'>     *</span>
  588 |     | <span class='neutral'>     * Requirements:</span>
  589 |     | <span class='neutral'>     *</span>
  590 |     | <span class='neutral'>     * - input must fit into 248 bits</span>
  591 |     | <span class='neutral'>     */</span>
  592 |     | <span class='neutral'>    function toInt248(int256 value) internal pure returns (int248 downcasted) {</span>
  593 |     | <span class='neutral'>        downcasted = int248(value);</span>
  594 |     | <span class='neutral'>        if (downcasted != value) {</span>
  595 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(248, value);</span>
  596 |     | <span class='neutral'>        }</span>
  597 |     | <span class='neutral'>    }</span>
  598 |     | <span class='neutral'></span>
  599 |     | <span class='neutral'>    /**</span>
  600 |     | <span class='neutral'>     * @dev Returns the downcasted int240 from int256, reverting on</span>
  601 |     | <span class='neutral'>     * overflow (when the input is less than smallest int240 or</span>
  602 |     | <span class='neutral'>     * greater than largest int240).</span>
  603 |     | <span class='neutral'>     *</span>
  604 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int240` operator.</span>
  605 |     | <span class='neutral'>     *</span>
  606 |     | <span class='neutral'>     * Requirements:</span>
  607 |     | <span class='neutral'>     *</span>
  608 |     | <span class='neutral'>     * - input must fit into 240 bits</span>
  609 |     | <span class='neutral'>     */</span>
  610 |     | <span class='neutral'>    function toInt240(int256 value) internal pure returns (int240 downcasted) {</span>
  611 |     | <span class='neutral'>        downcasted = int240(value);</span>
  612 |     | <span class='neutral'>        if (downcasted != value) {</span>
  613 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(240, value);</span>
  614 |     | <span class='neutral'>        }</span>
  615 |     | <span class='neutral'>    }</span>
  616 |     | <span class='neutral'></span>
  617 |     | <span class='neutral'>    /**</span>
  618 |     | <span class='neutral'>     * @dev Returns the downcasted int232 from int256, reverting on</span>
  619 |     | <span class='neutral'>     * overflow (when the input is less than smallest int232 or</span>
  620 |     | <span class='neutral'>     * greater than largest int232).</span>
  621 |     | <span class='neutral'>     *</span>
  622 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int232` operator.</span>
  623 |     | <span class='neutral'>     *</span>
  624 |     | <span class='neutral'>     * Requirements:</span>
  625 |     | <span class='neutral'>     *</span>
  626 |     | <span class='neutral'>     * - input must fit into 232 bits</span>
  627 |     | <span class='neutral'>     */</span>
  628 |     | <span class='neutral'>    function toInt232(int256 value) internal pure returns (int232 downcasted) {</span>
  629 |     | <span class='neutral'>        downcasted = int232(value);</span>
  630 |     | <span class='neutral'>        if (downcasted != value) {</span>
  631 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(232, value);</span>
  632 |     | <span class='neutral'>        }</span>
  633 |     | <span class='neutral'>    }</span>
  634 |     | <span class='neutral'></span>
  635 |     | <span class='neutral'>    /**</span>
  636 |     | <span class='neutral'>     * @dev Returns the downcasted int224 from int256, reverting on</span>
  637 |     | <span class='neutral'>     * overflow (when the input is less than smallest int224 or</span>
  638 |     | <span class='neutral'>     * greater than largest int224).</span>
  639 |     | <span class='neutral'>     *</span>
  640 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int224` operator.</span>
  641 |     | <span class='neutral'>     *</span>
  642 |     | <span class='neutral'>     * Requirements:</span>
  643 |     | <span class='neutral'>     *</span>
  644 |     | <span class='neutral'>     * - input must fit into 224 bits</span>
  645 |     | <span class='neutral'>     */</span>
  646 |     | <span class='neutral'>    function toInt224(int256 value) internal pure returns (int224 downcasted) {</span>
  647 |     | <span class='neutral'>        downcasted = int224(value);</span>
  648 |     | <span class='neutral'>        if (downcasted != value) {</span>
  649 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(224, value);</span>
  650 |     | <span class='neutral'>        }</span>
  651 |     | <span class='neutral'>    }</span>
  652 |     | <span class='neutral'></span>
  653 |     | <span class='neutral'>    /**</span>
  654 |     | <span class='neutral'>     * @dev Returns the downcasted int216 from int256, reverting on</span>
  655 |     | <span class='neutral'>     * overflow (when the input is less than smallest int216 or</span>
  656 |     | <span class='neutral'>     * greater than largest int216).</span>
  657 |     | <span class='neutral'>     *</span>
  658 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int216` operator.</span>
  659 |     | <span class='neutral'>     *</span>
  660 |     | <span class='neutral'>     * Requirements:</span>
  661 |     | <span class='neutral'>     *</span>
  662 |     | <span class='neutral'>     * - input must fit into 216 bits</span>
  663 |     | <span class='neutral'>     */</span>
  664 |     | <span class='neutral'>    function toInt216(int256 value) internal pure returns (int216 downcasted) {</span>
  665 |     | <span class='neutral'>        downcasted = int216(value);</span>
  666 |     | <span class='neutral'>        if (downcasted != value) {</span>
  667 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(216, value);</span>
  668 |     | <span class='neutral'>        }</span>
  669 |     | <span class='neutral'>    }</span>
  670 |     | <span class='neutral'></span>
  671 |     | <span class='neutral'>    /**</span>
  672 |     | <span class='neutral'>     * @dev Returns the downcasted int208 from int256, reverting on</span>
  673 |     | <span class='neutral'>     * overflow (when the input is less than smallest int208 or</span>
  674 |     | <span class='neutral'>     * greater than largest int208).</span>
  675 |     | <span class='neutral'>     *</span>
  676 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int208` operator.</span>
  677 |     | <span class='neutral'>     *</span>
  678 |     | <span class='neutral'>     * Requirements:</span>
  679 |     | <span class='neutral'>     *</span>
  680 |     | <span class='neutral'>     * - input must fit into 208 bits</span>
  681 |     | <span class='neutral'>     */</span>
  682 |     | <span class='neutral'>    function toInt208(int256 value) internal pure returns (int208 downcasted) {</span>
  683 |     | <span class='neutral'>        downcasted = int208(value);</span>
  684 |     | <span class='neutral'>        if (downcasted != value) {</span>
  685 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(208, value);</span>
  686 |     | <span class='neutral'>        }</span>
  687 |     | <span class='neutral'>    }</span>
  688 |     | <span class='neutral'></span>
  689 |     | <span class='neutral'>    /**</span>
  690 |     | <span class='neutral'>     * @dev Returns the downcasted int200 from int256, reverting on</span>
  691 |     | <span class='neutral'>     * overflow (when the input is less than smallest int200 or</span>
  692 |     | <span class='neutral'>     * greater than largest int200).</span>
  693 |     | <span class='neutral'>     *</span>
  694 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int200` operator.</span>
  695 |     | <span class='neutral'>     *</span>
  696 |     | <span class='neutral'>     * Requirements:</span>
  697 |     | <span class='neutral'>     *</span>
  698 |     | <span class='neutral'>     * - input must fit into 200 bits</span>
  699 |     | <span class='neutral'>     */</span>
  700 |     | <span class='neutral'>    function toInt200(int256 value) internal pure returns (int200 downcasted) {</span>
  701 |     | <span class='neutral'>        downcasted = int200(value);</span>
  702 |     | <span class='neutral'>        if (downcasted != value) {</span>
  703 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(200, value);</span>
  704 |     | <span class='neutral'>        }</span>
  705 |     | <span class='neutral'>    }</span>
  706 |     | <span class='neutral'></span>
  707 |     | <span class='neutral'>    /**</span>
  708 |     | <span class='neutral'>     * @dev Returns the downcasted int192 from int256, reverting on</span>
  709 |     | <span class='neutral'>     * overflow (when the input is less than smallest int192 or</span>
  710 |     | <span class='neutral'>     * greater than largest int192).</span>
  711 |     | <span class='neutral'>     *</span>
  712 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int192` operator.</span>
  713 |     | <span class='neutral'>     *</span>
  714 |     | <span class='neutral'>     * Requirements:</span>
  715 |     | <span class='neutral'>     *</span>
  716 |     | <span class='neutral'>     * - input must fit into 192 bits</span>
  717 |     | <span class='neutral'>     */</span>
  718 |     | <span class='neutral'>    function toInt192(int256 value) internal pure returns (int192 downcasted) {</span>
  719 |     | <span class='neutral'>        downcasted = int192(value);</span>
  720 |     | <span class='neutral'>        if (downcasted != value) {</span>
  721 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(192, value);</span>
  722 |     | <span class='neutral'>        }</span>
  723 |     | <span class='neutral'>    }</span>
  724 |     | <span class='neutral'></span>
  725 |     | <span class='neutral'>    /**</span>
  726 |     | <span class='neutral'>     * @dev Returns the downcasted int184 from int256, reverting on</span>
  727 |     | <span class='neutral'>     * overflow (when the input is less than smallest int184 or</span>
  728 |     | <span class='neutral'>     * greater than largest int184).</span>
  729 |     | <span class='neutral'>     *</span>
  730 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int184` operator.</span>
  731 |     | <span class='neutral'>     *</span>
  732 |     | <span class='neutral'>     * Requirements:</span>
  733 |     | <span class='neutral'>     *</span>
  734 |     | <span class='neutral'>     * - input must fit into 184 bits</span>
  735 |     | <span class='neutral'>     */</span>
  736 |     | <span class='neutral'>    function toInt184(int256 value) internal pure returns (int184 downcasted) {</span>
  737 |     | <span class='neutral'>        downcasted = int184(value);</span>
  738 |     | <span class='neutral'>        if (downcasted != value) {</span>
  739 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(184, value);</span>
  740 |     | <span class='neutral'>        }</span>
  741 |     | <span class='neutral'>    }</span>
  742 |     | <span class='neutral'></span>
  743 |     | <span class='neutral'>    /**</span>
  744 |     | <span class='neutral'>     * @dev Returns the downcasted int176 from int256, reverting on</span>
  745 |     | <span class='neutral'>     * overflow (when the input is less than smallest int176 or</span>
  746 |     | <span class='neutral'>     * greater than largest int176).</span>
  747 |     | <span class='neutral'>     *</span>
  748 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int176` operator.</span>
  749 |     | <span class='neutral'>     *</span>
  750 |     | <span class='neutral'>     * Requirements:</span>
  751 |     | <span class='neutral'>     *</span>
  752 |     | <span class='neutral'>     * - input must fit into 176 bits</span>
  753 |     | <span class='neutral'>     */</span>
  754 |     | <span class='neutral'>    function toInt176(int256 value) internal pure returns (int176 downcasted) {</span>
  755 |     | <span class='neutral'>        downcasted = int176(value);</span>
  756 |     | <span class='neutral'>        if (downcasted != value) {</span>
  757 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(176, value);</span>
  758 |     | <span class='neutral'>        }</span>
  759 |     | <span class='neutral'>    }</span>
  760 |     | <span class='neutral'></span>
  761 |     | <span class='neutral'>    /**</span>
  762 |     | <span class='neutral'>     * @dev Returns the downcasted int168 from int256, reverting on</span>
  763 |     | <span class='neutral'>     * overflow (when the input is less than smallest int168 or</span>
  764 |     | <span class='neutral'>     * greater than largest int168).</span>
  765 |     | <span class='neutral'>     *</span>
  766 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int168` operator.</span>
  767 |     | <span class='neutral'>     *</span>
  768 |     | <span class='neutral'>     * Requirements:</span>
  769 |     | <span class='neutral'>     *</span>
  770 |     | <span class='neutral'>     * - input must fit into 168 bits</span>
  771 |     | <span class='neutral'>     */</span>
  772 |     | <span class='neutral'>    function toInt168(int256 value) internal pure returns (int168 downcasted) {</span>
  773 |     | <span class='neutral'>        downcasted = int168(value);</span>
  774 |     | <span class='neutral'>        if (downcasted != value) {</span>
  775 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(168, value);</span>
  776 |     | <span class='neutral'>        }</span>
  777 |     | <span class='neutral'>    }</span>
  778 |     | <span class='neutral'></span>
  779 |     | <span class='neutral'>    /**</span>
  780 |     | <span class='neutral'>     * @dev Returns the downcasted int160 from int256, reverting on</span>
  781 |     | <span class='neutral'>     * overflow (when the input is less than smallest int160 or</span>
  782 |     | <span class='neutral'>     * greater than largest int160).</span>
  783 |     | <span class='neutral'>     *</span>
  784 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int160` operator.</span>
  785 |     | <span class='neutral'>     *</span>
  786 |     | <span class='neutral'>     * Requirements:</span>
  787 |     | <span class='neutral'>     *</span>
  788 |     | <span class='neutral'>     * - input must fit into 160 bits</span>
  789 |     | <span class='neutral'>     */</span>
  790 |     | <span class='neutral'>    function toInt160(int256 value) internal pure returns (int160 downcasted) {</span>
  791 |     | <span class='neutral'>        downcasted = int160(value);</span>
  792 |     | <span class='neutral'>        if (downcasted != value) {</span>
  793 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(160, value);</span>
  794 |     | <span class='neutral'>        }</span>
  795 |     | <span class='neutral'>    }</span>
  796 |     | <span class='neutral'></span>
  797 |     | <span class='neutral'>    /**</span>
  798 |     | <span class='neutral'>     * @dev Returns the downcasted int152 from int256, reverting on</span>
  799 |     | <span class='neutral'>     * overflow (when the input is less than smallest int152 or</span>
  800 |     | <span class='neutral'>     * greater than largest int152).</span>
  801 |     | <span class='neutral'>     *</span>
  802 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int152` operator.</span>
  803 |     | <span class='neutral'>     *</span>
  804 |     | <span class='neutral'>     * Requirements:</span>
  805 |     | <span class='neutral'>     *</span>
  806 |     | <span class='neutral'>     * - input must fit into 152 bits</span>
  807 |     | <span class='neutral'>     */</span>
  808 |     | <span class='neutral'>    function toInt152(int256 value) internal pure returns (int152 downcasted) {</span>
  809 |     | <span class='neutral'>        downcasted = int152(value);</span>
  810 |     | <span class='neutral'>        if (downcasted != value) {</span>
  811 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(152, value);</span>
  812 |     | <span class='neutral'>        }</span>
  813 |     | <span class='neutral'>    }</span>
  814 |     | <span class='neutral'></span>
  815 |     | <span class='neutral'>    /**</span>
  816 |     | <span class='neutral'>     * @dev Returns the downcasted int144 from int256, reverting on</span>
  817 |     | <span class='neutral'>     * overflow (when the input is less than smallest int144 or</span>
  818 |     | <span class='neutral'>     * greater than largest int144).</span>
  819 |     | <span class='neutral'>     *</span>
  820 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int144` operator.</span>
  821 |     | <span class='neutral'>     *</span>
  822 |     | <span class='neutral'>     * Requirements:</span>
  823 |     | <span class='neutral'>     *</span>
  824 |     | <span class='neutral'>     * - input must fit into 144 bits</span>
  825 |     | <span class='neutral'>     */</span>
  826 |     | <span class='neutral'>    function toInt144(int256 value) internal pure returns (int144 downcasted) {</span>
  827 |     | <span class='neutral'>        downcasted = int144(value);</span>
  828 |     | <span class='neutral'>        if (downcasted != value) {</span>
  829 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(144, value);</span>
  830 |     | <span class='neutral'>        }</span>
  831 |     | <span class='neutral'>    }</span>
  832 |     | <span class='neutral'></span>
  833 |     | <span class='neutral'>    /**</span>
  834 |     | <span class='neutral'>     * @dev Returns the downcasted int136 from int256, reverting on</span>
  835 |     | <span class='neutral'>     * overflow (when the input is less than smallest int136 or</span>
  836 |     | <span class='neutral'>     * greater than largest int136).</span>
  837 |     | <span class='neutral'>     *</span>
  838 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int136` operator.</span>
  839 |     | <span class='neutral'>     *</span>
  840 |     | <span class='neutral'>     * Requirements:</span>
  841 |     | <span class='neutral'>     *</span>
  842 |     | <span class='neutral'>     * - input must fit into 136 bits</span>
  843 |     | <span class='neutral'>     */</span>
  844 |     | <span class='neutral'>    function toInt136(int256 value) internal pure returns (int136 downcasted) {</span>
  845 |     | <span class='neutral'>        downcasted = int136(value);</span>
  846 |     | <span class='neutral'>        if (downcasted != value) {</span>
  847 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(136, value);</span>
  848 |     | <span class='neutral'>        }</span>
  849 |     | <span class='neutral'>    }</span>
  850 |     | <span class='neutral'></span>
  851 |     | <span class='neutral'>    /**</span>
  852 |     | <span class='neutral'>     * @dev Returns the downcasted int128 from int256, reverting on</span>
  853 |     | <span class='neutral'>     * overflow (when the input is less than smallest int128 or</span>
  854 |     | <span class='neutral'>     * greater than largest int128).</span>
  855 |     | <span class='neutral'>     *</span>
  856 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int128` operator.</span>
  857 |     | <span class='neutral'>     *</span>
  858 |     | <span class='neutral'>     * Requirements:</span>
  859 |     | <span class='neutral'>     *</span>
  860 |     | <span class='neutral'>     * - input must fit into 128 bits</span>
  861 |     | <span class='neutral'>     */</span>
  862 |     | <span class='neutral'>    function toInt128(int256 value) internal pure returns (int128 downcasted) {</span>
  863 |     | <span class='neutral'>        downcasted = int128(value);</span>
  864 |     | <span class='neutral'>        if (downcasted != value) {</span>
  865 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(128, value);</span>
  866 |     | <span class='neutral'>        }</span>
  867 |     | <span class='neutral'>    }</span>
  868 |     | <span class='neutral'></span>
  869 |     | <span class='neutral'>    /**</span>
  870 |     | <span class='neutral'>     * @dev Returns the downcasted int120 from int256, reverting on</span>
  871 |     | <span class='neutral'>     * overflow (when the input is less than smallest int120 or</span>
  872 |     | <span class='neutral'>     * greater than largest int120).</span>
  873 |     | <span class='neutral'>     *</span>
  874 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int120` operator.</span>
  875 |     | <span class='neutral'>     *</span>
  876 |     | <span class='neutral'>     * Requirements:</span>
  877 |     | <span class='neutral'>     *</span>
  878 |     | <span class='neutral'>     * - input must fit into 120 bits</span>
  879 |     | <span class='neutral'>     */</span>
  880 |     | <span class='neutral'>    function toInt120(int256 value) internal pure returns (int120 downcasted) {</span>
  881 |     | <span class='neutral'>        downcasted = int120(value);</span>
  882 |     | <span class='neutral'>        if (downcasted != value) {</span>
  883 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(120, value);</span>
  884 |     | <span class='neutral'>        }</span>
  885 |     | <span class='neutral'>    }</span>
  886 |     | <span class='neutral'></span>
  887 |     | <span class='neutral'>    /**</span>
  888 |     | <span class='neutral'>     * @dev Returns the downcasted int112 from int256, reverting on</span>
  889 |     | <span class='neutral'>     * overflow (when the input is less than smallest int112 or</span>
  890 |     | <span class='neutral'>     * greater than largest int112).</span>
  891 |     | <span class='neutral'>     *</span>
  892 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int112` operator.</span>
  893 |     | <span class='neutral'>     *</span>
  894 |     | <span class='neutral'>     * Requirements:</span>
  895 |     | <span class='neutral'>     *</span>
  896 |     | <span class='neutral'>     * - input must fit into 112 bits</span>
  897 |     | <span class='neutral'>     */</span>
  898 |     | <span class='neutral'>    function toInt112(int256 value) internal pure returns (int112 downcasted) {</span>
  899 |     | <span class='neutral'>        downcasted = int112(value);</span>
  900 |     | <span class='neutral'>        if (downcasted != value) {</span>
  901 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(112, value);</span>
  902 |     | <span class='neutral'>        }</span>
  903 |     | <span class='neutral'>    }</span>
  904 |     | <span class='neutral'></span>
  905 |     | <span class='neutral'>    /**</span>
  906 |     | <span class='neutral'>     * @dev Returns the downcasted int104 from int256, reverting on</span>
  907 |     | <span class='neutral'>     * overflow (when the input is less than smallest int104 or</span>
  908 |     | <span class='neutral'>     * greater than largest int104).</span>
  909 |     | <span class='neutral'>     *</span>
  910 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int104` operator.</span>
  911 |     | <span class='neutral'>     *</span>
  912 |     | <span class='neutral'>     * Requirements:</span>
  913 |     | <span class='neutral'>     *</span>
  914 |     | <span class='neutral'>     * - input must fit into 104 bits</span>
  915 |     | <span class='neutral'>     */</span>
  916 |     | <span class='neutral'>    function toInt104(int256 value) internal pure returns (int104 downcasted) {</span>
  917 |     | <span class='neutral'>        downcasted = int104(value);</span>
  918 |     | <span class='neutral'>        if (downcasted != value) {</span>
  919 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(104, value);</span>
  920 |     | <span class='neutral'>        }</span>
  921 |     | <span class='neutral'>    }</span>
  922 |     | <span class='neutral'></span>
  923 |     | <span class='neutral'>    /**</span>
  924 |     | <span class='neutral'>     * @dev Returns the downcasted int96 from int256, reverting on</span>
  925 |     | <span class='neutral'>     * overflow (when the input is less than smallest int96 or</span>
  926 |     | <span class='neutral'>     * greater than largest int96).</span>
  927 |     | <span class='neutral'>     *</span>
  928 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int96` operator.</span>
  929 |     | <span class='neutral'>     *</span>
  930 |     | <span class='neutral'>     * Requirements:</span>
  931 |     | <span class='neutral'>     *</span>
  932 |     | <span class='neutral'>     * - input must fit into 96 bits</span>
  933 |     | <span class='neutral'>     */</span>
  934 |     | <span class='neutral'>    function toInt96(int256 value) internal pure returns (int96 downcasted) {</span>
  935 |     | <span class='neutral'>        downcasted = int96(value);</span>
  936 |     | <span class='neutral'>        if (downcasted != value) {</span>
  937 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(96, value);</span>
  938 |     | <span class='neutral'>        }</span>
  939 |     | <span class='neutral'>    }</span>
  940 |     | <span class='neutral'></span>
  941 |     | <span class='neutral'>    /**</span>
  942 |     | <span class='neutral'>     * @dev Returns the downcasted int88 from int256, reverting on</span>
  943 |     | <span class='neutral'>     * overflow (when the input is less than smallest int88 or</span>
  944 |     | <span class='neutral'>     * greater than largest int88).</span>
  945 |     | <span class='neutral'>     *</span>
  946 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int88` operator.</span>
  947 |     | <span class='neutral'>     *</span>
  948 |     | <span class='neutral'>     * Requirements:</span>
  949 |     | <span class='neutral'>     *</span>
  950 |     | <span class='neutral'>     * - input must fit into 88 bits</span>
  951 |     | <span class='neutral'>     */</span>
  952 |     | <span class='neutral'>    function toInt88(int256 value) internal pure returns (int88 downcasted) {</span>
  953 |     | <span class='neutral'>        downcasted = int88(value);</span>
  954 |     | <span class='neutral'>        if (downcasted != value) {</span>
  955 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(88, value);</span>
  956 |     | <span class='neutral'>        }</span>
  957 |     | <span class='neutral'>    }</span>
  958 |     | <span class='neutral'></span>
  959 |     | <span class='neutral'>    /**</span>
  960 |     | <span class='neutral'>     * @dev Returns the downcasted int80 from int256, reverting on</span>
  961 |     | <span class='neutral'>     * overflow (when the input is less than smallest int80 or</span>
  962 |     | <span class='neutral'>     * greater than largest int80).</span>
  963 |     | <span class='neutral'>     *</span>
  964 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int80` operator.</span>
  965 |     | <span class='neutral'>     *</span>
  966 |     | <span class='neutral'>     * Requirements:</span>
  967 |     | <span class='neutral'>     *</span>
  968 |     | <span class='neutral'>     * - input must fit into 80 bits</span>
  969 |     | <span class='neutral'>     */</span>
  970 |     | <span class='neutral'>    function toInt80(int256 value) internal pure returns (int80 downcasted) {</span>
  971 |     | <span class='neutral'>        downcasted = int80(value);</span>
  972 |     | <span class='neutral'>        if (downcasted != value) {</span>
  973 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(80, value);</span>
  974 |     | <span class='neutral'>        }</span>
  975 |     | <span class='neutral'>    }</span>
  976 |     | <span class='neutral'></span>
  977 |     | <span class='neutral'>    /**</span>
  978 |     | <span class='neutral'>     * @dev Returns the downcasted int72 from int256, reverting on</span>
  979 |     | <span class='neutral'>     * overflow (when the input is less than smallest int72 or</span>
  980 |     | <span class='neutral'>     * greater than largest int72).</span>
  981 |     | <span class='neutral'>     *</span>
  982 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int72` operator.</span>
  983 |     | <span class='neutral'>     *</span>
  984 |     | <span class='neutral'>     * Requirements:</span>
  985 |     | <span class='neutral'>     *</span>
  986 |     | <span class='neutral'>     * - input must fit into 72 bits</span>
  987 |     | <span class='neutral'>     */</span>
  988 |     | <span class='neutral'>    function toInt72(int256 value) internal pure returns (int72 downcasted) {</span>
  989 |     | <span class='neutral'>        downcasted = int72(value);</span>
  990 |     | <span class='neutral'>        if (downcasted != value) {</span>
  991 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(72, value);</span>
  992 |     | <span class='neutral'>        }</span>
  993 |     | <span class='neutral'>    }</span>
  994 |     | <span class='neutral'></span>
  995 |     | <span class='neutral'>    /**</span>
  996 |     | <span class='neutral'>     * @dev Returns the downcasted int64 from int256, reverting on</span>
  997 |     | <span class='neutral'>     * overflow (when the input is less than smallest int64 or</span>
  998 |     | <span class='neutral'>     * greater than largest int64).</span>
  999 |     | <span class='neutral'>     *</span>
 1000 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int64` operator.</span>
 1001 |     | <span class='neutral'>     *</span>
 1002 |     | <span class='neutral'>     * Requirements:</span>
 1003 |     | <span class='neutral'>     *</span>
 1004 |     | <span class='neutral'>     * - input must fit into 64 bits</span>
 1005 |     | <span class='neutral'>     */</span>
 1006 |     | <span class='neutral'>    function toInt64(int256 value) internal pure returns (int64 downcasted) {</span>
 1007 |     | <span class='neutral'>        downcasted = int64(value);</span>
 1008 |     | <span class='neutral'>        if (downcasted != value) {</span>
 1009 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(64, value);</span>
 1010 |     | <span class='neutral'>        }</span>
 1011 |     | <span class='neutral'>    }</span>
 1012 |     | <span class='neutral'></span>
 1013 |     | <span class='neutral'>    /**</span>
 1014 |     | <span class='neutral'>     * @dev Returns the downcasted int56 from int256, reverting on</span>
 1015 |     | <span class='neutral'>     * overflow (when the input is less than smallest int56 or</span>
 1016 |     | <span class='neutral'>     * greater than largest int56).</span>
 1017 |     | <span class='neutral'>     *</span>
 1018 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int56` operator.</span>
 1019 |     | <span class='neutral'>     *</span>
 1020 |     | <span class='neutral'>     * Requirements:</span>
 1021 |     | <span class='neutral'>     *</span>
 1022 |     | <span class='neutral'>     * - input must fit into 56 bits</span>
 1023 |     | <span class='neutral'>     */</span>
 1024 |     | <span class='neutral'>    function toInt56(int256 value) internal pure returns (int56 downcasted) {</span>
 1025 |     | <span class='neutral'>        downcasted = int56(value);</span>
 1026 |     | <span class='neutral'>        if (downcasted != value) {</span>
 1027 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(56, value);</span>
 1028 |     | <span class='neutral'>        }</span>
 1029 |     | <span class='neutral'>    }</span>
 1030 |     | <span class='neutral'></span>
 1031 |     | <span class='neutral'>    /**</span>
 1032 |     | <span class='neutral'>     * @dev Returns the downcasted int48 from int256, reverting on</span>
 1033 |     | <span class='neutral'>     * overflow (when the input is less than smallest int48 or</span>
 1034 |     | <span class='neutral'>     * greater than largest int48).</span>
 1035 |     | <span class='neutral'>     *</span>
 1036 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int48` operator.</span>
 1037 |     | <span class='neutral'>     *</span>
 1038 |     | <span class='neutral'>     * Requirements:</span>
 1039 |     | <span class='neutral'>     *</span>
 1040 |     | <span class='neutral'>     * - input must fit into 48 bits</span>
 1041 |     | <span class='neutral'>     */</span>
 1042 |     | <span class='neutral'>    function toInt48(int256 value) internal pure returns (int48 downcasted) {</span>
 1043 |     | <span class='neutral'>        downcasted = int48(value);</span>
 1044 |     | <span class='neutral'>        if (downcasted != value) {</span>
 1045 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(48, value);</span>
 1046 |     | <span class='neutral'>        }</span>
 1047 |     | <span class='neutral'>    }</span>
 1048 |     | <span class='neutral'></span>
 1049 |     | <span class='neutral'>    /**</span>
 1050 |     | <span class='neutral'>     * @dev Returns the downcasted int40 from int256, reverting on</span>
 1051 |     | <span class='neutral'>     * overflow (when the input is less than smallest int40 or</span>
 1052 |     | <span class='neutral'>     * greater than largest int40).</span>
 1053 |     | <span class='neutral'>     *</span>
 1054 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int40` operator.</span>
 1055 |     | <span class='neutral'>     *</span>
 1056 |     | <span class='neutral'>     * Requirements:</span>
 1057 |     | <span class='neutral'>     *</span>
 1058 |     | <span class='neutral'>     * - input must fit into 40 bits</span>
 1059 |     | <span class='neutral'>     */</span>
 1060 |     | <span class='neutral'>    function toInt40(int256 value) internal pure returns (int40 downcasted) {</span>
 1061 |     | <span class='neutral'>        downcasted = int40(value);</span>
 1062 |     | <span class='neutral'>        if (downcasted != value) {</span>
 1063 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(40, value);</span>
 1064 |     | <span class='neutral'>        }</span>
 1065 |     | <span class='neutral'>    }</span>
 1066 |     | <span class='neutral'></span>
 1067 |     | <span class='neutral'>    /**</span>
 1068 |     | <span class='neutral'>     * @dev Returns the downcasted int32 from int256, reverting on</span>
 1069 |     | <span class='neutral'>     * overflow (when the input is less than smallest int32 or</span>
 1070 |     | <span class='neutral'>     * greater than largest int32).</span>
 1071 |     | <span class='neutral'>     *</span>
 1072 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int32` operator.</span>
 1073 |     | <span class='neutral'>     *</span>
 1074 |     | <span class='neutral'>     * Requirements:</span>
 1075 |     | <span class='neutral'>     *</span>
 1076 |     | <span class='neutral'>     * - input must fit into 32 bits</span>
 1077 |     | <span class='neutral'>     */</span>
 1078 |     | <span class='neutral'>    function toInt32(int256 value) internal pure returns (int32 downcasted) {</span>
 1079 |     | <span class='neutral'>        downcasted = int32(value);</span>
 1080 |     | <span class='neutral'>        if (downcasted != value) {</span>
 1081 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(32, value);</span>
 1082 |     | <span class='neutral'>        }</span>
 1083 |     | <span class='neutral'>    }</span>
 1084 |     | <span class='neutral'></span>
 1085 |     | <span class='neutral'>    /**</span>
 1086 |     | <span class='neutral'>     * @dev Returns the downcasted int24 from int256, reverting on</span>
 1087 |     | <span class='neutral'>     * overflow (when the input is less than smallest int24 or</span>
 1088 |     | <span class='neutral'>     * greater than largest int24).</span>
 1089 |     | <span class='neutral'>     *</span>
 1090 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int24` operator.</span>
 1091 |     | <span class='neutral'>     *</span>
 1092 |     | <span class='neutral'>     * Requirements:</span>
 1093 |     | <span class='neutral'>     *</span>
 1094 |     | <span class='neutral'>     * - input must fit into 24 bits</span>
 1095 |     | <span class='neutral'>     */</span>
 1096 |     | <span class='neutral'>    function toInt24(int256 value) internal pure returns (int24 downcasted) {</span>
 1097 |     | <span class='neutral'>        downcasted = int24(value);</span>
 1098 |     | <span class='neutral'>        if (downcasted != value) {</span>
 1099 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(24, value);</span>
 1100 |     | <span class='neutral'>        }</span>
 1101 |     | <span class='neutral'>    }</span>
 1102 |     | <span class='neutral'></span>
 1103 |     | <span class='neutral'>    /**</span>
 1104 |     | <span class='neutral'>     * @dev Returns the downcasted int16 from int256, reverting on</span>
 1105 |     | <span class='neutral'>     * overflow (when the input is less than smallest int16 or</span>
 1106 |     | <span class='neutral'>     * greater than largest int16).</span>
 1107 |     | <span class='neutral'>     *</span>
 1108 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int16` operator.</span>
 1109 |     | <span class='neutral'>     *</span>
 1110 |     | <span class='neutral'>     * Requirements:</span>
 1111 |     | <span class='neutral'>     *</span>
 1112 |     | <span class='neutral'>     * - input must fit into 16 bits</span>
 1113 |     | <span class='neutral'>     */</span>
 1114 |     | <span class='neutral'>    function toInt16(int256 value) internal pure returns (int16 downcasted) {</span>
 1115 |     | <span class='neutral'>        downcasted = int16(value);</span>
 1116 |     | <span class='neutral'>        if (downcasted != value) {</span>
 1117 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(16, value);</span>
 1118 |     | <span class='neutral'>        }</span>
 1119 |     | <span class='neutral'>    }</span>
 1120 |     | <span class='neutral'></span>
 1121 |     | <span class='neutral'>    /**</span>
 1122 |     | <span class='neutral'>     * @dev Returns the downcasted int8 from int256, reverting on</span>
 1123 |     | <span class='neutral'>     * overflow (when the input is less than smallest int8 or</span>
 1124 |     | <span class='neutral'>     * greater than largest int8).</span>
 1125 |     | <span class='neutral'>     *</span>
 1126 |     | <span class='neutral'>     * Counterpart to Solidity&#39;s `int8` operator.</span>
 1127 |     | <span class='neutral'>     *</span>
 1128 |     | <span class='neutral'>     * Requirements:</span>
 1129 |     | <span class='neutral'>     *</span>
 1130 |     | <span class='neutral'>     * - input must fit into 8 bits</span>
 1131 |     | <span class='neutral'>     */</span>
 1132 |     | <span class='neutral'>    function toInt8(int256 value) internal pure returns (int8 downcasted) {</span>
 1133 |     | <span class='neutral'>        downcasted = int8(value);</span>
 1134 |     | <span class='neutral'>        if (downcasted != value) {</span>
 1135 |     | <span class='neutral'>            revert SafeCastOverflowedIntDowncast(8, value);</span>
 1136 |     | <span class='neutral'>        }</span>
 1137 |     | <span class='neutral'>    }</span>
 1138 |     | <span class='neutral'></span>
 1139 |     | <span class='neutral'>    /**</span>
 1140 |     | <span class='neutral'>     * @dev Converts an unsigned uint256 into a signed int256.</span>
 1141 |     | <span class='neutral'>     *</span>
 1142 |     | <span class='neutral'>     * Requirements:</span>
 1143 |     | <span class='neutral'>     *</span>
 1144 |     | <span class='neutral'>     * - input must be less than or equal to maxInt256.</span>
 1145 |     | <span class='neutral'>     */</span>
 1146 |     | <span class='neutral'>    function toInt256(uint256 value) internal pure returns (int256) {</span>
 1147 |     | <span class='neutral'>        // Note: Unsafe cast below is okay because `type(int256).max` is guaranteed to be positive</span>
 1148 |     | <span class='neutral'>        if (value &gt; uint256(type(int256).max)) {</span>
 1149 |     | <span class='neutral'>            revert SafeCastOverflowedUintToInt(value);</span>
 1150 |     | <span class='neutral'>        }</span>
 1151 |     | <span class='neutral'>        return int256(value);</span>
 1152 |     | <span class='neutral'>    }</span>
 1153 |     | <span class='neutral'>}</span>
 1154 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/test/echidna/Echidna_ControllerHubProps.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>pragma solidity ^0.8.24;</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>import {ControllerHub} from &quot;contracts/hub/ControllerHub.sol&quot;;</span>
  5 |     | <span class='neutral'>import {PriceOracleRouter} from &quot;contracts/hub/PriceOracleRouter.sol&quot;;</span>
  6 |     | <span class='neutral'>import {MockAggregator} from &quot;contracts/mocks/MockAggregator.sol&quot;;</span>
  7 |     | <span class='neutral'></span>
  8 |     | <span class='neutral'>// Minimal ERC20 stub compatible with ControllerHub expectations</span>
  9 | *   | <span class='executed'>contract ERC20Mini {</span>
 10 |     | <span class='neutral'>    mapping(address =&gt; uint256) public balanceOf;</span>
 11 |     | <span class='unexecuted'>    function decimals() external pure returns (uint8) { return 18; }</span>
 12 |     | <span class='neutral'>    function mint(address to, uint256 a) external { balanceOf[to] += a; }</span>
 13 |     | <span class='neutral'>}</span>
 14 |     | <span class='neutral'></span>
 15 |     | <span class='neutral'>// Echidna property harness for ControllerHub</span>
 16 |     | <span class='neutral'>// - Uses simple wrappers so Echidna can fuzz borrow/repay and pause toggles</span>
 17 |     | <span class='neutral'>// - Ensures total borrows never exceed the configured borrowCap</span>
 18 |     | <span class='neutral'>// - Ensures pause flag prevents borrow growth</span>
 19 | *r  | <span class='executed'>contract Echidna_ControllerHubProps {</span>
 20 |     | <span class='neutral'>    ControllerHub public hub;</span>
 21 |     | <span class='neutral'>    PriceOracleRouter public router;</span>
 22 |     | <span class='unexecuted'>    ERC20Mini public asset;</span>
 23 | *   | <span class='executed'>    ERC20Mini public lst;</span>
 24 |     | <span class='neutral'>    MockAggregator public aggAsset;</span>
 25 | *   | <span class='executed'>    MockAggregator public aggLst;</span>
 26 |     | <span class='neutral'></span>
 27 |     | <span class='neutral'>    constructor() {</span>
 28 |     | <span class='neutral'>        // governor is this harness contract so Echidna can call governor-only methods through wrappers</span>
 29 | *   | <span class='executed'>        router = new PriceOracleRouter();</span>
 30 | *   | <span class='executed'>        router.initialize(address(this));</span>
 31 | *   | <span class='executed'>        hub = new ControllerHub();</span>
 32 | *   | <span class='executed'>        hub.initialize(address(this), address(router));</span>
 33 |     | <span class='neutral'></span>
 34 |     | <span class='neutral'>        // set up assets and price feeds</span>
 35 | *   | <span class='executed'>        asset = new ERC20Mini();</span>
 36 | *   | <span class='executed'>        lst = new ERC20Mini();</span>
 37 | *   | <span class='executed'>        aggAsset = new MockAggregator(1e8, block.timestamp);</span>
 38 | *   | <span class='executed'>        aggLst = new MockAggregator(1e8, block.timestamp);</span>
 39 | *   | <span class='executed'>        router.setFeed(address(asset), address(aggAsset), address(0), 8, 1 days, 0);</span>
 40 | *   | <span class='executed'>        router.setFeed(address(lst), address(aggLst), address(0), 8, 1 days, 0);</span>
 41 |     | <span class='neutral'></span>
 42 |     | <span class='neutral'>        // list a market with sane parameters</span>
 43 | *   | <span class='executed'>        ControllerHub.MarketParams memory p = ControllerHub.MarketParams({</span>
 44 | *   | <span class='executed'>            ltvBps: 5000,</span>
 45 | *   | <span class='executed'>            liqThresholdBps: 6000,</span>
 46 | *   | <span class='executed'>            reserveFactorBps: 1000,</span>
 47 | *   | <span class='executed'>            borrowCap: 1_000_000 ether,</span>
 48 | *   | <span class='executed'>            kinkBps: 8000,</span>
 49 | *   | <span class='executed'>            slope1Ray: 1e16,</span>
 50 | *   | <span class='executed'>            slope2Ray: 2e16,</span>
 51 |     | <span class='neutral'>            baseRateRay: 0,</span>
 52 |     | <span class='neutral'>            lst: address(lst),</span>
 53 |     | <span class='neutral'>            vault: address(this)</span>
 54 |     | <span class='neutral'>        });</span>
 55 | *   | <span class='executed'>        hub.listMarket(address(asset), abi.encode(p));</span>
 56 |     | <span class='neutral'></span>
 57 |     | <span class='neutral'>        // enter market with some collateral</span>
 58 | *   | <span class='executed'>        lst.mint(address(this), 1_000_000 ether);</span>
 59 | *   | <span class='executed'>        hub.enterMarket(address(lst));</span>
 60 |     | <span class='neutral'>    }</span>
 61 |     | <span class='neutral'></span>
 62 |     | <span class='neutral'>    // Fuzz entrypoints (Echidna will generate sequences of these calls)</span>
 63 |     | <span class='neutral'>    function borrow(uint256 amt) public {</span>
 64 | *   | <span class='executed'>        uint256 a = amt % (10_000 ether);</span>
 65 |     | <span class='neutral'>        // swallow reverts to allow Echidna to explore invalid inputs too</span>
 66 | *   | <span class='executed'>        try hub.borrow(address(asset), a, 0) { } catch { }</span>
 67 |     | <span class='neutral'>    }</span>
 68 |     | <span class='neutral'></span>
 69 |     | <span class='neutral'>    function repay(uint256 amt) public {</span>
 70 | *   | <span class='executed'>        uint256 a = amt % (10_000 ether);</span>
 71 | *   | <span class='executed'>        try hub.repay(address(asset), a, 0) { } catch { }</span>
 72 |     | <span class='neutral'>    }</span>
 73 |     | <span class='neutral'></span>
 74 |     | <span class='neutral'>    function setPause(bool pauseBorrow, bool pauseLiq) public {</span>
 75 |     | <span class='neutral'>        // governor-only; ok since governor is this harness contract</span>
 76 | *   | <span class='executed'>        hub.setPause(pauseBorrow, pauseLiq);</span>
 77 |     | <span class='neutral'>    }</span>
 78 |     | <span class='neutral'></span>
 79 |     | <span class='neutral'>    // Properties</span>
 80 |     | <span class='neutral'>    function echidna_total_borrows_never_exceed_cap() public returns (bool) {</span>
 81 |     | <span class='unexecuted'>        (ControllerHub.MarketState memory s, ControllerHub.MarketParams memory p, ) = hub.marketStateExtended(address(asset));</span>
 82 |     | <span class='unexecuted'>        return s.totalBorrows &lt;= p.borrowCap;</span>
 83 |     | <span class='neutral'>    }</span>
 84 |     | <span class='neutral'></span>
 85 |     | <span class='neutral'>    function echidna_pause_blocks_borrow_growth() public returns (bool) {</span>
 86 |     | <span class='neutral'>        // snapshot borrows, enable borrow pause, try to borrow, ensure not increased</span>
 87 |     | <span class='unexecuted'>        (ControllerHub.MarketState memory sBefore, , ) = hub.marketStateExtended(address(asset));</span>
 88 |     | <span class='unexecuted'>        hub.setPause(true, false);</span>
 89 |     | <span class='neutral'>        // attempt to increase borrows</span>
 90 |     | <span class='unexecuted'>        try hub.borrow(address(asset), 1 ether, 0) { } catch { }</span>
 91 |     | <span class='unexecuted'>        (ControllerHub.MarketState memory sAfter, , ) = hub.marketStateExtended(address(asset));</span>
 92 |     | <span class='neutral'>        // best-effort: unpause to not poison further sequences</span>
 93 |     | <span class='unexecuted'>        hub.setPause(false, false);</span>
 94 |     | <span class='unexecuted'>        return sAfter.totalBorrows &lt;= sBefore.totalBorrows;</span>
 95 |     | <span class='neutral'>    }</span>
 96 |     | <span class='neutral'>}</span>
 97 |     | <span class='neutral'></span>

</code>
<br />

