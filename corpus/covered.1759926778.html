<style> code { white-space: pre-wrap; display: block; background-color: #eee; }.executed { background-color: #afa; }.reverted { background-color: #ffa; }.unexecuted { background-color: #faa; }.neutral { background-color: #eee; }</style><b>/code/contracts/spoke/SpokeYieldVault.sol</b>
<code>
   1 |     | <span class='unexecuted'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>pragma solidity ^0.8.24;</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>import {Initializable} from &quot;@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol&quot;;</span>
   5 |     | <span class='neutral'>import {UUPSUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol&quot;;</span>
   6 |     | <span class='neutral'>import {AccessControlUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/access/AccessControlUpgradeable.sol&quot;;</span>
   7 |     | <span class='neutral'>import {PausableUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol&quot;;</span>
   8 |     | <span class='neutral'>import {ReentrancyGuardUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol&quot;;</span>
   9 |     | <span class='neutral'>import {ERC4626Upgradeable} from &quot;@openzeppelin/contracts-upgradeable/token/ERC20/extensions/ERC4626Upgradeable.sol&quot;;</span>
  10 |     | <span class='neutral'>import {Math} from &quot;@openzeppelin/contracts/utils/math/Math.sol&quot;;</span>
  11 |     | <span class='neutral'>import {IERC20} from &quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;;</span>
  12 |     | <span class='neutral'>import {SafeERC20} from &quot;@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol&quot;;</span>
  13 |     | <span class='neutral'>import {SuperchainERC20} from &quot;../tokens/SuperchainERC20.sol&quot;;</span>
  14 |     | <span class='neutral'>import {AdapterRegistry} from &quot;../strategy/AdapterRegistry.sol&quot;;</span>
  15 |     | <span class='neutral'></span>
  16 |     | <span class='neutral'>/// @dev Minimal interface to query adapter TVL for cap enforcement.</span>
  17 |     | <span class='neutral'>interface IAdapterLike {</span>
  18 |     | <span class='neutral'>    function totalAssets() external view returns (uint256);</span>
  19 |     | <span class='neutral'>}</span>
  20 |     | <span class='neutral'></span>
  21 |     | <span class='neutral'>/// @title SpokeYieldVault</span>
  22 |     | <span class='neutral'>/// @notice ERC4626 vault on spokes; mints/burns LST shares token; integrates adapters.</span>
  23 | *   | <span class='executed'>contract SpokeYieldVault is</span>
  24 |     | <span class='neutral'>    Initializable,</span>
  25 |     | <span class='neutral'>    UUPSUpgradeable,</span>
  26 |     | <span class='neutral'>    AccessControlUpgradeable,</span>
  27 |     | <span class='neutral'>    PausableUpgradeable,</span>
  28 |     | <span class='neutral'>    ReentrancyGuardUpgradeable,</span>
  29 |     | <span class='neutral'>    ERC4626Upgradeable</span>
  30 |     | <span class='neutral'>{</span>
  31 |     | <span class='neutral'>    using SafeERC20 for IERC20;</span>
  32 |     | <span class='neutral'></span>
  33 |     | <span class='neutral'>    // Roles</span>
  34 | *   | <span class='executed'>    bytes32 public constant GOVERNOR_ROLE = keccak256(&quot;GOVERNOR_ROLE&quot;);</span>
  35 | *   | <span class='executed'>    bytes32 public constant REBALANCER_ROLE = keccak256(&quot;REBALANCER_ROLE&quot;);</span>
  36 | *   | <span class='executed'>    bytes32 public constant HUB_ROLE = keccak256(&quot;HUB_ROLE&quot;);</span>
  37 |     | <span class='unexecuted'>    bytes32 public constant CONTROLLER_ROLE = keccak256(&quot;CONTROLLER_ROLE&quot;);</span>
  38 |     | <span class='neutral'></span>
  39 |     | <span class='neutral'>    // Feature flags</span>
  40 |     | <span class='neutral'>    bool public depositsEnabled;</span>
  41 |     | <span class='neutral'>    bool public borrowsEnabled;</span>
  42 |     | <span class='neutral'>    bool public bridgeEnabled;</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>    // Storage</span>
  45 |     | <span class='neutral'>    address public hub;</span>
  46 |     | <span class='neutral'>    SuperchainERC20 public lst;</span>
  47 |     | <span class='unexecuted'>    AdapterRegistry public adapterRegistry;</span>
  48 |     | <span class='neutral'></span>
  49 |     | <span class='neutral'>    // Fees / buffers (example: performance fee in bps)</span>
  50 |     | <span class='unexecuted'>    uint16 public performanceFeeBps; // 0-10000</span>
  51 |     | <span class='unexecuted'>    address public feeRecipient;</span>
  52 |     | <span class='unexecuted'>    uint16 public withdrawalBufferBps; // 0-10000 portion of TVL to serve locally</span>
  53 |     | <span class='neutral'></span>
  54 |     | <span class='neutral'>    // Events</span>
  55 |     | <span class='neutral'>    event AdapterAllocated(address indexed adapter, address indexed asset, uint256 assets);</span>
  56 |     | <span class='neutral'>    event AdapterDeallocated(address indexed adapter, address indexed asset, uint256 assets);</span>
  57 |     | <span class='neutral'>    event Harvest(address indexed adapter, address indexed asset, uint256 yieldAmount);</span>
  58 |     | <span class='neutral'>    event LstMinted(address indexed user, uint256 shares, address indexed lst);</span>
  59 |     | <span class='neutral'>    event LstBurned(address indexed user, uint256 shares, address indexed lst);</span>
  60 |     | <span class='neutral'>    event RemoteCreditHandled(</span>
  61 |     | <span class='neutral'>        address indexed user, address indexed asset, uint256 assets, uint256 shares, uint256 nonce, bytes32 actionId</span>
  62 |     | <span class='neutral'>    );</span>
  63 |     | <span class='neutral'>    event RemoteLiquidityServed(address indexed toUser, address indexed asset, uint256 assets, bytes32 actionId);</span>
  64 |     | <span class='neutral'>    event BorrowPayout(address indexed to, address indexed asset, uint256 amount, bytes32 actionId, uint256 ts);</span>
  65 |     | <span class='neutral'>    event SharesSeized(address indexed user, address indexed to, uint256 shares, bytes32 actionId);</span>
  66 |     | <span class='neutral'>    event FlagsUpdated(bool depositsEnabled, bool borrowsEnabled, bool bridgeEnabled);</span>
  67 |     | <span class='neutral'>    event StateChanged(uint8 previous, uint8 current);</span>
  68 |     | <span class='neutral'>    // Withdraw queue events (for harness/integration testing)</span>
  69 |     | <span class='neutral'>    event WithdrawQueued(address indexed user, uint256 indexed claimId, uint256 shares, uint256 ts);</span>
  70 |     | <span class='neutral'>    event WithdrawFulfilled(</span>
  71 |     | <span class='neutral'>        address indexed user, uint256 indexed claimId, uint256 assets, bytes32 actionId, uint256 ts</span>
  72 |     | <span class='neutral'>    );</span>
  73 |     | <span class='neutral'></span>
  74 |     | <span class='neutral'>    // Errors</span>
  75 |     | <span class='neutral'>    error DepositsDisabled();</span>
  76 |     | <span class='neutral'>    error BorrowsDisabled();</span>
  77 |     | <span class='neutral'>    error BridgeDisabled();</span>
  78 |     | <span class='neutral'>    error NotAllowedAdapter();</span>
  79 |     | <span class='neutral'>    error CapExceeded();</span>
  80 |     | <span class='neutral'>    error NonceUsed(bytes32);</span>
  81 |     | <span class='neutral'>    error InsufficientBuffer();</span>
  82 |     | <span class='neutral'>    error DuplicateClaim();</span>
  83 |     | <span class='neutral'>    error InvalidArray();</span>
  84 |     | <span class='neutral'>    error BadState();</span>
  85 |     | <span class='neutral'></span>
  86 |     | <span class='neutral'>    // Nonce replay protection for inbound messages</span>
  87 |     | <span class='neutral'>    mapping(bytes32 =&gt; bool) private _usedNonce;</span>
  88 |     | <span class='neutral'></span>
  89 |     | <span class='neutral'>    // --- Lightweight withdraw queue (testing harness support) ---</span>
  90 |     | <span class='neutral'>    struct Claim {</span>
  91 |     | <span class='neutral'>        address user;</span>
  92 |     | <span class='neutral'>        uint128 shares;</span>
  93 |     | <span class='neutral'>        uint128 filledAssets;</span>
  94 |     | <span class='neutral'>        bool active;</span>
  95 |     | <span class='neutral'>        uint64 ts;</span>
  96 |     | <span class='neutral'>    }</span>
  97 |     | <span class='neutral'></span>
  98 |     | <span class='unexecuted'>    mapping(uint256 =&gt; Claim) public claims; // claimId =&gt; Claim</span>
  99 |     | <span class='neutral'>    // Unique claim nonces to avoid same-block collisions when hashing IDs</span>
 100 |     | <span class='neutral'>    uint256 private _claimNonce;</span>
 101 |     | <span class='neutral'>    // Per-epoch outflow cap</span>
 102 |     | <span class='unexecuted'>    uint16 public epochOutflowCapBps; // cap in bps applied to TVL per epoch</span>
 103 |     | <span class='unexecuted'>    uint64 public epochLengthSec; // epoch duration in seconds</span>
 104 |     | <span class='unexecuted'>    mapping(uint64 =&gt; uint256) public epochOutflow; // epoch =&gt; assets outflowed</span>
 105 |     | <span class='neutral'>    // Aggregate mapping: epoch =&gt; user =&gt; actionId =&gt; claimId</span>
 106 |     | <span class='neutral'>    mapping(uint64 =&gt; mapping(address =&gt; mapping(bytes32 =&gt; uint256))) private _epochClaimOf;</span>
 107 |     | <span class='neutral'>    // Fulfillment idempotency using actionIds</span>
 108 |     | <span class='neutral'>    mapping(bytes32 =&gt; bool) private _fulfilledAction;</span>
 109 |     | <span class='neutral'></span>
 110 |     | <span class='neutral'>    // ERC4626 virtual shares/assets to protect first depositor and matured yield hijack</span>
 111 | *   | <span class='executed'>    uint256 private constant VIRTUAL_ASSETS = 1e6;</span>
 112 |     | <span class='neutral'>    uint256 private constant VIRTUAL_SHARES = 1e6;</span>
 113 |     | <span class='neutral'></span>
 114 |     | <span class='neutral'>    // --- Rebalance state machine ---</span>
 115 |     | <span class='neutral'>    enum VaultState {</span>
 116 |     | <span class='neutral'>        Idle,</span>
 117 |     | <span class='neutral'>        Allocating,</span>
 118 |     | <span class='neutral'>        Deallocating,</span>
 119 |     | <span class='neutral'>        Harvesting</span>
 120 |     | <span class='neutral'>    }</span>
 121 |     | <span class='neutral'></span>
 122 |     | <span class='unexecuted'>    VaultState public state;</span>
 123 |     | <span class='unexecuted'>    uint64 public stateSince; // timestamp when current state was entered</span>
 124 |     | <span class='unexecuted'>    uint64 public maxStateDuration; // optional cap on time spent out of Idle</span>
 125 |     | <span class='neutral'></span>
 126 |     | <span class='neutral'>    // --- Two-step governor ---</span>
 127 |     | <span class='unexecuted'>    address public governor;</span>
 128 |     | <span class='unexecuted'>    address public pendingGovernor;</span>
 129 |     | <span class='neutral'></span>
 130 |     | <span class='neutral'>    function initialize(</span>
 131 |     | <span class='neutral'>        IERC20 asset_,</span>
 132 |     | <span class='neutral'>        string memory name_,</span>
 133 |     | <span class='neutral'>        string memory symbol_,</span>
 134 |     | <span class='neutral'>        address hub_,</span>
 135 |     | <span class='neutral'>        address initialGovernor,</span>
 136 |     | <span class='neutral'>        address rebalancer,</span>
 137 |     | <span class='neutral'>        address adapterRegistry_,</span>
 138 |     | <span class='neutral'>        address feeRecipient_,</span>
 139 |     | <span class='neutral'>        uint16 performanceFeeBps_,</span>
 140 |     | <span class='neutral'>        address lst_</span>
 141 |     | <span class='neutral'>    ) external initializer {</span>
 142 |     | <span class='neutral'>        __UUPSUpgradeable_init();</span>
 143 |     | <span class='neutral'>        __AccessControl_init();</span>
 144 |     | <span class='neutral'>        __Pausable_init();</span>
 145 |     | <span class='neutral'>        __ReentrancyGuard_init();</span>
 146 |     | <span class='neutral'>        __ERC20_init(name_, symbol_);</span>
 147 |     | <span class='neutral'>        __ERC4626_init(asset_);</span>
 148 |     | <span class='neutral'>        hub = hub_;</span>
 149 | *   | <span class='executed'>        adapterRegistry = AdapterRegistry(adapterRegistry_);</span>
 150 |     | <span class='neutral'>        feeRecipient = feeRecipient_;</span>
 151 |     | <span class='neutral'>        performanceFeeBps = performanceFeeBps_;</span>
 152 |     | <span class='neutral'>        lst = SuperchainERC20(lst_);</span>
 153 | *   | <span class='executed'>        _grantRole(DEFAULT_ADMIN_ROLE, initialGovernor);</span>
 154 | *   | <span class='executed'>        _grantRole(GOVERNOR_ROLE, initialGovernor);</span>
 155 | *   | <span class='executed'>        _grantRole(REBALANCER_ROLE, rebalancer);</span>
 156 |     | <span class='neutral'>        depositsEnabled = true;</span>
 157 |     | <span class='neutral'>        bridgeEnabled = true;</span>
 158 | *   | <span class='executed'>        _grantRole(HUB_ROLE, hub_);</span>
 159 | *   | <span class='executed'>        state = VaultState.Idle;</span>
 160 | *   | <span class='executed'>        stateSince = uint64(block.timestamp);</span>
 161 | *   | <span class='executed'>        governor = initialGovernor;</span>
 162 |     | <span class='neutral'>    }</span>
 163 |     | <span class='neutral'></span>
 164 |     | <span class='neutral'>    function _authorizeUpgrade(address) internal override onlyRole(GOVERNOR_ROLE) {}</span>
 165 |     | <span class='neutral'></span>
 166 |     | <span class='neutral'>    // --- Flags ---</span>
 167 |     | <span class='neutral'>    function setFlags(bool _deposits, bool _borrows, bool _bridge) external onlyRole(GOVERNOR_ROLE) {</span>
 168 |     | <span class='neutral'>        depositsEnabled = _deposits;</span>
 169 |     | <span class='neutral'>        borrowsEnabled = _borrows;</span>
 170 |     | <span class='neutral'>        bridgeEnabled = _bridge;</span>
 171 | *   | <span class='executed'>        emit FlagsUpdated(_deposits, _borrows, _bridge);</span>
 172 |     | <span class='neutral'>    }</span>
 173 |     | <span class='neutral'></span>
 174 |     | <span class='neutral'>    // --- State machine configs ---</span>
 175 |     | <span class='neutral'>    function setMaxStateDuration(uint64 seconds_) external onlyRole(GOVERNOR_ROLE) {</span>
 176 |     | <span class='unexecuted'>        maxStateDuration = seconds_;</span>
 177 |     | <span class='neutral'>    }</span>
 178 |     | <span class='neutral'></span>
 179 |     | <span class='neutral'>    /// @notice Emergency reset to Idle if a prior transition appears stuck (off-chain or adapter issue).</span>
 180 |     | <span class='neutral'>    function forceIdle() external onlyRole(GOVERNOR_ROLE) {</span>
 181 |     | <span class='unexecuted'>        uint8 prev = uint8(state);</span>
 182 |     | <span class='neutral'>        state = VaultState.Idle;</span>
 183 |     | <span class='unexecuted'>        stateSince = uint64(block.timestamp);</span>
 184 |     | <span class='unexecuted'>        emit StateChanged(prev, uint8(state));</span>
 185 |     | <span class='neutral'>    }</span>
 186 |     | <span class='neutral'></span>
 187 |     | <span class='neutral'>    // --- Governor transfer ---</span>
 188 |     | <span class='neutral'>    function proposeGovernor(address newGov) external onlyRole(GOVERNOR_ROLE) {</span>
 189 |     | <span class='unexecuted'>        require(newGov != address(0), &quot;ZERO_GOV&quot;);</span>
 190 |     | <span class='unexecuted'>        pendingGovernor = newGov;</span>
 191 |     | <span class='neutral'>    }</span>
 192 |     | <span class='neutral'></span>
 193 |     | <span class='neutral'>    function acceptGovernor() external {</span>
 194 |     | <span class='unexecuted'>        require(msg.sender == pendingGovernor, &quot;NOT_PENDING&quot;);</span>
 195 |     | <span class='unexecuted'>        address prev = governor;</span>
 196 |     | <span class='unexecuted'>        _grantRole(DEFAULT_ADMIN_ROLE, msg.sender);</span>
 197 |     | <span class='unexecuted'>        _grantRole(GOVERNOR_ROLE, msg.sender);</span>
 198 |     | <span class='unexecuted'>        _revokeRole(GOVERNOR_ROLE, prev);</span>
 199 |     | <span class='unexecuted'>        _revokeRole(DEFAULT_ADMIN_ROLE, prev);</span>
 200 |     | <span class='neutral'>        governor = msg.sender;</span>
 201 |     | <span class='neutral'>        pendingGovernor = address(0);</span>
 202 |     | <span class='neutral'>    }</span>
 203 |     | <span class='neutral'></span>
 204 |     | <span class='neutral'>    /// @notice Sets the local withdrawal buffer in basis points.</span>
 205 |     | <span class='neutral'>    function setWithdrawalBufferBps(uint16 bps) external onlyRole(GOVERNOR_ROLE) {</span>
 206 | *   | <span class='executed'>        require(bps &lt;= 10_000, &quot;BPS&quot;);</span>
 207 | *   | <span class='executed'>        withdrawalBufferBps = bps;</span>
 208 |     | <span class='neutral'>    }</span>
 209 |     | <span class='neutral'></span>
 210 |     | <span class='neutral'>    /// @notice Configure the per-epoch outflow cap and epoch length.</span>
 211 |     | <span class='neutral'>    function setEpochOutflowConfig(uint16 capBps, uint64 lengthSec) external onlyRole(GOVERNOR_ROLE) {</span>
 212 | *   | <span class='executed'>        require(capBps &lt;= 10_000, &quot;BPS&quot;);</span>
 213 | *   | <span class='executed'>        require(lengthSec &gt; 0, &quot;LEN&quot;);</span>
 214 | *   | <span class='executed'>        epochOutflowCapBps = capBps;</span>
 215 |     | <span class='neutral'>        epochLengthSec = lengthSec;</span>
 216 |     | <span class='neutral'>    }</span>
 217 |     | <span class='neutral'></span>
 218 |     | <span class='neutral'>    // --- Internal: sync before share math ---</span>
 219 |     | <span class='neutral'>    /// @dev Intentionally empty hook to keep share math deterministic pre-mint.</span>
 220 |     | <span class='neutral'>    /// In more complex vaults, this may read adapter TVLs or accrue yield before mint/burn.</span>
 221 |     | <span class='neutral'>    function _preMintSync() internal view {</span>
 222 |     | <span class='neutral'>        // no-op in this implementation (read-only); left for pattern consistency.</span>
 223 |     | <span class='neutral'>    }</span>
 224 |     | <span class='neutral'></span>
 225 |     | <span class='neutral'>    // --- ERC4626 virtual conversions ---</span>
 226 | *   | <span class='executed'>    function _convertToShares(uint256 assets, Math.Rounding rounding) internal view override returns (uint256) {</span>
 227 | *   | <span class='executed'>        uint256 tAssets = super.totalAssets() + VIRTUAL_ASSETS;</span>
 228 |     | <span class='neutral'>        uint256 tSupply = totalSupply() + VIRTUAL_SHARES;</span>
 229 | *   | <span class='executed'>        if (assets == 0) return 0;</span>
 230 |     | <span class='unexecuted'>        return Math.mulDiv(assets, tSupply, tAssets, rounding);</span>
 231 |     | <span class='neutral'>    }</span>
 232 |     | <span class='neutral'></span>
 233 | *   | <span class='executed'>    function _convertToAssets(uint256 shares, Math.Rounding rounding) internal view override returns (uint256) {</span>
 234 | *   | <span class='executed'>        uint256 tAssets = super.totalAssets() + VIRTUAL_ASSETS;</span>
 235 |     | <span class='neutral'>        uint256 tSupply = totalSupply() + VIRTUAL_SHARES;</span>
 236 | *   | <span class='executed'>        if (shares == 0) return 0;</span>
 237 |     | <span class='unexecuted'>        return Math.mulDiv(shares, tAssets, tSupply, rounding);</span>
 238 |     | <span class='neutral'>    }</span>
 239 |     | <span class='neutral'></span>
 240 |     | <span class='neutral'>    // --- ERC4626 overrides ---</span>
 241 |     | <span class='neutral'>    /// @inheritdoc ERC4626Upgradeable</span>
 242 |     | <span class='neutral'>    function deposit(uint256 assets, address receiver)</span>
 243 |     | <span class='neutral'>        public</span>
 244 |     | <span class='neutral'>        override</span>
 245 |     | <span class='neutral'>        whenNotPaused</span>
 246 |     | <span class='neutral'>        nonReentrant</span>
 247 |     | <span class='neutral'>        returns (uint256 shares)</span>
 248 |     | <span class='neutral'>    {</span>
 249 | *   | <span class='executed'>        if (!depositsEnabled) revert DepositsDisabled();</span>
 250 |     | <span class='neutral'>        _preMintSync();</span>
 251 |     | <span class='neutral'>        shares = super.deposit(assets, receiver);</span>
 252 |     | <span class='neutral'>        // Mint LST mirror to receiver equal to shares</span>
 253 | *   | <span class='executed'>        lst.mint(receiver, shares);</span>
 254 | *   | <span class='executed'>        emit LstMinted(receiver, shares, address(lst));</span>
 255 |     | <span class='neutral'>    }</span>
 256 |     | <span class='neutral'></span>
 257 |     | <span class='neutral'>    /// @inheritdoc ERC4626Upgradeable</span>
 258 |     | <span class='neutral'>    function redeem(uint256 shares, address receiver, address owner)</span>
 259 |     | <span class='neutral'>        public</span>
 260 |     | <span class='neutral'>        override</span>
 261 |     | <span class='neutral'>        whenNotPaused</span>
 262 |     | <span class='neutral'>        nonReentrant</span>
 263 |     | <span class='neutral'>        returns (uint256 assets)</span>
 264 |     | <span class='neutral'>    {</span>
 265 |     | <span class='neutral'>        // Burn LST first, then shares</span>
 266 | *   | <span class='executed'>        lst.burn(owner, shares);</span>
 267 | *   | <span class='executed'>        emit LstBurned(owner, shares, address(lst));</span>
 268 |     | <span class='neutral'>        _preMintSync();</span>
 269 |     | <span class='neutral'>        assets = super.redeem(shares, receiver, owner);</span>
 270 |     | <span class='neutral'>    }</span>
 271 |     | <span class='neutral'></span>
 272 |     | <span class='neutral'>    // --- Strategy operations ---</span>
 273 |     | <span class='neutral'>    function allocateToAdapter(address adapter, uint256 assets, bytes calldata data)</span>
 274 |     | <span class='neutral'>        external</span>
 275 |     | <span class='neutral'>        onlyRole(REBALANCER_ROLE)</span>
 276 |     | <span class='neutral'>        whenNotPaused</span>
 277 |     | <span class='neutral'>        nonReentrant</span>
 278 |     | <span class='neutral'>    {</span>
 279 |     | <span class='unexecuted'>        if (state != VaultState.Idle) revert BadState();</span>
 280 |     | <span class='unexecuted'>        state = VaultState.Allocating;</span>
 281 |     | <span class='unexecuted'>        stateSince = uint64(block.timestamp);</span>
 282 |     | <span class='unexecuted'>        emit StateChanged(uint8(VaultState.Idle), uint8(state));</span>
 283 |     | <span class='unexecuted'>        if (!adapterRegistry.isAllowed(adapter)) revert NotAllowedAdapter();</span>
 284 |     | <span class='unexecuted'>        uint256 cap = adapterRegistry.capOf(adapter);</span>
 285 |     | <span class='neutral'>        // Enforce cap against current adapter allocation</span>
 286 |     | <span class='unexecuted'>        uint256 current = IAdapterLike(adapter).totalAssets();</span>
 287 |     | <span class='unexecuted'>        if (current + assets &gt; cap) revert CapExceeded();</span>
 288 |     | <span class='neutral'>        // Move assets to adapter before invoking deposit to prevent reentrancy games on allowance</span>
 289 |     | <span class='unexecuted'>        IERC20(asset()).safeTransfer(adapter, assets);</span>
 290 |     | <span class='unexecuted'>        (bool ok,) = adapter.call(abi.encodeWithSignature(&quot;deposit(uint256,bytes)&quot;, assets, data));</span>
 291 |     | <span class='neutral'>        require(ok, &quot;ADAPTER_DEPOSIT_FAIL&quot;);</span>
 292 |     | <span class='unexecuted'>        emit AdapterAllocated(adapter, asset(), assets);</span>
 293 |     | <span class='neutral'>        state = VaultState.Idle;</span>
 294 |     | <span class='neutral'>        stateSince = uint64(block.timestamp);</span>
 295 |     | <span class='unexecuted'>        emit StateChanged(uint8(VaultState.Allocating), uint8(state));</span>
 296 |     | <span class='neutral'>    }</span>
 297 |     | <span class='neutral'></span>
 298 |     | <span class='neutral'>    function deallocateFromAdapter(address adapter, uint256 assets, bytes calldata data)</span>
 299 |     | <span class='neutral'>        external</span>
 300 |     | <span class='neutral'>        onlyRole(REBALANCER_ROLE)</span>
 301 |     | <span class='neutral'>        whenNotPaused</span>
 302 |     | <span class='neutral'>        nonReentrant</span>
 303 |     | <span class='neutral'>    {</span>
 304 |     | <span class='unexecuted'>        if (state != VaultState.Idle) revert BadState();</span>
 305 |     | <span class='unexecuted'>        state = VaultState.Deallocating;</span>
 306 |     | <span class='unexecuted'>        stateSince = uint64(block.timestamp);</span>
 307 |     | <span class='unexecuted'>        emit StateChanged(uint8(VaultState.Idle), uint8(state));</span>
 308 | *   | <span class='executed'>        (bool ok,) = adapter.call(abi.encodeWithSignature(&quot;withdraw(uint256,bytes)&quot;, assets, data));</span>
 309 |     | <span class='neutral'>        require(ok, &quot;ADAPTER_WITHDRAW_FAIL&quot;);</span>
 310 |     | <span class='unexecuted'>        emit AdapterDeallocated(adapter, asset(), assets);</span>
 311 |     | <span class='neutral'>        state = VaultState.Idle;</span>
 312 |     | <span class='neutral'>        stateSince = uint64(block.timestamp);</span>
 313 |     | <span class='unexecuted'>        emit StateChanged(uint8(VaultState.Deallocating), uint8(state));</span>
 314 |     | <span class='neutral'>    }</span>
 315 |     | <span class='neutral'></span>
 316 |     | <span class='neutral'>    function harvestAdapter(address adapter, bytes calldata data)</span>
 317 |     | <span class='neutral'>        external</span>
 318 |     | <span class='neutral'>        onlyRole(REBALANCER_ROLE)</span>
 319 |     | <span class='neutral'>        whenNotPaused</span>
 320 |     | <span class='neutral'>        nonReentrant</span>
 321 |     | <span class='neutral'>    {</span>
 322 |     | <span class='unexecuted'>        if (state != VaultState.Idle) revert BadState();</span>
 323 |     | <span class='unexecuted'>        state = VaultState.Harvesting;</span>
 324 |     | <span class='unexecuted'>        stateSince = uint64(block.timestamp);</span>
 325 |     | <span class='unexecuted'>        emit StateChanged(uint8(VaultState.Idle), uint8(state));</span>
 326 |     | <span class='unexecuted'>        (bool ok,) = adapter.call(abi.encodeWithSignature(&quot;harvest(bytes)&quot;, data));</span>
 327 |     | <span class='neutral'>        require(ok, &quot;ADAPTER_HARVEST_FAIL&quot;);</span>
 328 |     | <span class='unexecuted'>        emit Harvest(adapter, asset(), 0);</span>
 329 |     | <span class='neutral'>        state = VaultState.Idle;</span>
 330 |     | <span class='neutral'>        stateSince = uint64(block.timestamp);</span>
 331 |     | <span class='unexecuted'>        emit StateChanged(uint8(VaultState.Harvesting), uint8(state));</span>
 332 |     | <span class='neutral'>    }</span>
 333 |     | <span class='neutral'></span>
 334 |     | <span class='neutral'>    // --- Withdraw queue (harness) ---</span>
 335 |     | <span class='neutral'>    /// @notice Enqueue a withdraw request in shares units. Emits WithdrawQueued.</span>
 336 |     | <span class='neutral'>    function enqueueWithdraw(uint256 shares) external whenNotPaused returns (uint256 claimId) {</span>
 337 |     | <span class='unexecuted'>        require(shares &gt; 0, &quot;ZERO_SHARES&quot;);</span>
 338 |     | <span class='neutral'>        // Compute unique claim id to avoid same-block collisions</span>
 339 |     | <span class='unexecuted'>        uint256 nonce = ++_claimNonce;</span>
 340 |     | <span class='neutral'>        claimId = uint256(</span>
 341 |     | <span class='unexecuted'>            keccak256(</span>
 342 |     | <span class='unexecuted'>                abi.encodePacked(block.chainid, address(this), msg.sender, shares, nonce, bytes32(0), block.timestamp)</span>
 343 |     | <span class='neutral'>            )</span>
 344 |     | <span class='neutral'>        );</span>
 345 |     | <span class='unexecuted'>        claims[claimId] = Claim({</span>
 346 |     | <span class='neutral'>            user: msg.sender,</span>
 347 |     | <span class='neutral'>            shares: uint128(shares),</span>
 348 |     | <span class='neutral'>            filledAssets: 0,</span>
 349 |     | <span class='neutral'>            active: true,</span>
 350 |     | <span class='neutral'>            ts: uint64(block.timestamp)</span>
 351 |     | <span class='neutral'>        });</span>
 352 |     | <span class='unexecuted'>        emit WithdrawQueued(msg.sender, claimId, shares, block.timestamp);</span>
 353 |     | <span class='neutral'>    }</span>
 354 |     | <span class='neutral'></span>
 355 |     | <span class='neutral'>    /// @notice Enqueue or aggregate a withdraw request keyed by (user, actionId, epoch).</span>
 356 |     | <span class='neutral'>    function enqueueWithdraw(uint256 shares, bytes32 actionId) external whenNotPaused returns (uint256 claimId) {</span>
 357 |     | <span class='unexecuted'>        require(shares &gt; 0, &quot;ZERO_SHARES&quot;);</span>
 358 |     | <span class='unexecuted'>        uint64 epoch = epochLengthSec == 0 ? 0 : uint64(block.timestamp / epochLengthSec);</span>
 359 |     | <span class='unexecuted'>        uint256 existing = _epochClaimOf[epoch][msg.sender][actionId];</span>
 360 |     | <span class='unexecuted'>        if (existing != 0 &amp;&amp; claims[existing].active) {</span>
 361 |     | <span class='neutral'>            // aggregate into existing claim</span>
 362 |     | <span class='unexecuted'>            Claim storage c = claims[existing];</span>
 363 |     | <span class='unexecuted'>            c.shares = uint128(uint256(c.shares) + shares);</span>
 364 |     | <span class='neutral'>            claimId = existing;</span>
 365 |     | <span class='neutral'>        } else {</span>
 366 |     | <span class='unexecuted'>            uint256 nonce = ++_claimNonce;</span>
 367 |     | <span class='neutral'>            claimId = uint256(</span>
 368 |     | <span class='unexecuted'>                keccak256(</span>
 369 |     | <span class='unexecuted'>                    abi.encodePacked(block.chainid, address(this), msg.sender, shares, nonce, actionId, block.timestamp)</span>
 370 |     | <span class='neutral'>                )</span>
 371 |     | <span class='neutral'>            );</span>
 372 |     | <span class='unexecuted'>            claims[claimId] = Claim({</span>
 373 |     | <span class='neutral'>                user: msg.sender,</span>
 374 |     | <span class='neutral'>                shares: uint128(shares),</span>
 375 |     | <span class='neutral'>                filledAssets: 0,</span>
 376 |     | <span class='neutral'>                active: true,</span>
 377 |     | <span class='neutral'>                ts: uint64(block.timestamp)</span>
 378 |     | <span class='neutral'>            });</span>
 379 |     | <span class='neutral'>            _epochClaimOf[epoch][msg.sender][actionId] = claimId;</span>
 380 |     | <span class='unexecuted'>            emit WithdrawQueued(msg.sender, claimId, shares, block.timestamp);</span>
 381 |     | <span class='neutral'>        }</span>
 382 |     | <span class='neutral'>    }</span>
 383 |     | <span class='neutral'></span>
 384 |     | <span class='neutral'>    /// @notice Fulfill a portion of a queued withdraw in asset units. Only HUB may call in tests/harness.</span>
 385 |     | <span class='neutral'>    function fulfillWithdraw(uint256 claimId, uint256 assets, bytes32 actionId)</span>
 386 |     | <span class='neutral'>        external</span>
 387 |     | <span class='neutral'>        onlyRole(HUB_ROLE)</span>
 388 |     | <span class='neutral'>        whenNotPaused</span>
 389 |     | <span class='neutral'>    {</span>
 390 |     | <span class='unexecuted'>        _fulfillWithdrawCore(claimId, assets, actionId);</span>
 391 |     | <span class='neutral'>    }</span>
 392 |     | <span class='neutral'></span>
 393 |     | <span class='unexecuted'>    function _fulfillWithdrawCore(uint256 claimId, uint256 assets, bytes32 actionId) internal {</span>
 394 |     | <span class='unexecuted'>        Claim storage c = claims[claimId];</span>
 395 |     | <span class='unexecuted'>        require(c.active, &quot;INACTIVE&quot;);</span>
 396 |     | <span class='neutral'>        // Idempotency on (actionId, claimId)</span>
 397 |     | <span class='unexecuted'>        bytes32 key = keccak256(abi.encodePacked(actionId, claimId));</span>
 398 |     | <span class='unexecuted'>        if (_fulfilledAction[key]) revert NonceUsed(key);</span>
 399 |     | <span class='neutral'>        // Enforce epoch outflow cap</span>
 400 |     | <span class='unexecuted'>        if (epochLengthSec != 0 &amp;&amp; epochOutflowCapBps != 0) {</span>
 401 |     | <span class='unexecuted'>            uint64 epoch = uint64(block.timestamp / epochLengthSec);</span>
 402 |     | <span class='unexecuted'>            uint256 tvl = totalAssets();</span>
 403 |     | <span class='unexecuted'>            uint256 cap = (tvl * uint256(epochOutflowCapBps)) / 10_000;</span>
 404 |     | <span class='unexecuted'>            uint256 sofar = epochOutflow[epoch];</span>
 405 |     | <span class='unexecuted'>            if (sofar + assets &gt; cap) revert CapExceeded();</span>
 406 |     | <span class='unexecuted'>            epochOutflow[epoch] = sofar + assets;</span>
 407 |     | <span class='neutral'>        }</span>
 408 |     | <span class='neutral'>        // transfer assets to user up to local balance</span>
 409 |     | <span class='unexecuted'>        IERC20(asset()).safeTransfer(c.user, assets);</span>
 410 |     | <span class='neutral'>        unchecked {</span>
 411 |     | <span class='unexecuted'>            c.filledAssets += uint128(assets);</span>
 412 |     | <span class='neutral'>        }</span>
 413 |     | <span class='neutral'>        // if fully satisfied in assets terms, mark inactive</span>
 414 |     | <span class='neutral'>        uint256 targetAssets = convertToAssets(c.shares);</span>
 415 |     | <span class='unexecuted'>        if (c.filledAssets &gt;= targetAssets) {</span>
 416 |     | <span class='neutral'>            c.active = false;</span>
 417 |     | <span class='neutral'>        }</span>
 418 |     | <span class='neutral'>        _fulfilledAction[key] = true;</span>
 419 |     | <span class='unexecuted'>        emit WithdrawFulfilled(c.user, claimId, assets, actionId, block.timestamp);</span>
 420 |     | <span class='neutral'>    }</span>
 421 |     | <span class='neutral'></span>
 422 |     | <span class='neutral'>    /// @notice Batch fulfill multiple withdraw claims; rejects duplicate claimIds within the call.</span>
 423 |     | <span class='neutral'>    function fulfillWithdrawBatch(uint256[] calldata claimIds, uint256[] calldata assets, bytes32 actionId)</span>
 424 |     | <span class='neutral'>        external</span>
 425 |     | <span class='neutral'>        onlyRole(HUB_ROLE)</span>
 426 |     | <span class='neutral'>        whenNotPaused</span>
 427 |     | <span class='neutral'>    {</span>
 428 |     | <span class='unexecuted'>        if (claimIds.length != assets.length) revert InvalidArray();</span>
 429 |     | <span class='neutral'>        // dedupe check using memory bitmap (simple quadratic due to small sizes in tests)</span>
 430 |     | <span class='unexecuted'>        for (uint256 i = 0; i &lt; claimIds.length; i++) {</span>
 431 |     | <span class='unexecuted'>            for (uint256 j = i + 1; j &lt; claimIds.length; j++) {</span>
 432 |     | <span class='unexecuted'>                if (claimIds[i] == claimIds[j]) revert DuplicateClaim();</span>
 433 |     | <span class='neutral'>            }</span>
 434 |     | <span class='neutral'>        }</span>
 435 |     | <span class='unexecuted'>        for (uint256 i = 0; i &lt; claimIds.length; i++) {</span>
 436 |     | <span class='unexecuted'>            _fulfillWithdrawCore(claimIds[i], assets[i], actionId);</span>
 437 |     | <span class='neutral'>        }</span>
 438 |     | <span class='neutral'>    }</span>
 439 |     | <span class='neutral'></span>
 440 |     | <span class='neutral'>    // --- Hub handlers ---</span>
 441 |     | <span class='neutral'>    function onRemoteCredit(address user, uint256 assets, uint256 shares, uint256 nonce, bytes32 actionId)</span>
 442 |     | <span class='neutral'>        external</span>
 443 |     | <span class='neutral'>        onlyRole(HUB_ROLE)</span>
 444 |     | <span class='neutral'>        whenNotPaused</span>
 445 |     | <span class='neutral'>    {</span>
 446 |     | <span class='unexecuted'>        if (!bridgeEnabled) revert BridgeDisabled();</span>
 447 |     | <span class='neutral'>        // Idempotency guard per (vault, nonce)</span>
 448 |     | <span class='unexecuted'>        bytes32 n = keccak256(abi.encodePacked(address(this), nonce));</span>
 449 |     | <span class='unexecuted'>        if (_usedNonce[n]) revert NonceUsed(n);</span>
 450 |     | <span class='neutral'>        _usedNonce[n] = true;</span>
 451 |     | <span class='neutral'>        // Credit shares and mirror LST</span>
 452 |     | <span class='neutral'>        _preMintSync();</span>
 453 |     | <span class='unexecuted'>        _deposit(user, user, assets, shares);</span>
 454 |     | <span class='unexecuted'>        lst.mint(user, shares);</span>
 455 |     | <span class='unexecuted'>        emit RemoteCreditHandled(user, asset(), assets, shares, nonce, actionId);</span>
 456 |     | <span class='neutral'>    }</span>
 457 |     | <span class='neutral'></span>
 458 |     | <span class='neutral'>    function requestRemoteLiquidity(address toUser, uint256 assets) external onlyRole(HUB_ROLE) whenNotPaused {</span>
 459 |     | <span class='neutral'>        // Serve from local buffer regardless of bridge flag; if bridge is disabled and insufficient buffer, fail fast</span>
 460 |     | <span class='unexecuted'>        uint256 bal = IERC20(asset()).balanceOf(address(this));</span>
 461 |     | <span class='unexecuted'>        uint256 tvl = totalAssets();</span>
 462 |     | <span class='unexecuted'>        uint256 maxLocal = (tvl * withdrawalBufferBps) / 10_000;</span>
 463 |     | <span class='neutral'>        bool served = false;</span>
 464 |     | <span class='unexecuted'>        if (assets &lt;= bal &amp;&amp; assets &lt;= maxLocal) {</span>
 465 |     | <span class='neutral'>            // Enforce epoch outflow cap on fast path as well</span>
 466 |     | <span class='unexecuted'>            if (epochLengthSec != 0 &amp;&amp; epochOutflowCapBps != 0) {</span>
 467 |     | <span class='unexecuted'>                uint64 epoch = uint64(block.timestamp / epochLengthSec);</span>
 468 |     | <span class='unexecuted'>                uint256 cap = (tvl * uint256(epochOutflowCapBps)) / 10_000;</span>
 469 |     | <span class='unexecuted'>                uint256 sofar = epochOutflow[epoch];</span>
 470 |     | <span class='unexecuted'>                if (sofar + assets &gt; cap) revert CapExceeded();</span>
 471 |     | <span class='unexecuted'>                epochOutflow[epoch] = sofar + assets;</span>
 472 |     | <span class='neutral'>            }</span>
 473 |     | <span class='unexecuted'>            IERC20(asset()).safeTransfer(toUser, assets);</span>
 474 |     | <span class='neutral'>            served = true;</span>
 475 |     | <span class='unexecuted'>            bytes32 actionId = keccak256(</span>
 476 |     | <span class='unexecuted'>                abi.encode(</span>
 477 |     | <span class='neutral'>                    &quot;RemoteLiquidity&quot;,</span>
 478 |     | <span class='neutral'>                    uint256(1),</span>
 479 |     | <span class='unexecuted'>                    block.chainid,</span>
 480 |     | <span class='unexecuted'>                    msg.sender,</span>
 481 |     | <span class='neutral'>                    block.chainid,</span>
 482 |     | <span class='neutral'>                    address(this),</span>
 483 |     | <span class='neutral'>                    toUser,</span>
 484 |     | <span class='neutral'>                    asset(),</span>
 485 |     | <span class='neutral'>                    assets,</span>
 486 |     | <span class='unexecuted'>                    uint256(block.number)</span>
 487 |     | <span class='neutral'>                )</span>
 488 |     | <span class='neutral'>            );</span>
 489 |     | <span class='unexecuted'>            emit RemoteLiquidityServed(toUser, asset(), assets, actionId);</span>
 490 |     | <span class='neutral'>        } else {</span>
 491 |     | <span class='neutral'>            // Not enough local buffer; if bridge disabled, revert; otherwise, a cross-chain transfer would occur off-chain so no event here</span>
 492 |     | <span class='unexecuted'>            if (!bridgeEnabled) revert InsufficientBuffer();</span>
 493 |     | <span class='neutral'>        }</span>
 494 |     | <span class='neutral'>    }</span>
 495 |     | <span class='neutral'></span>
 496 |     | <span class='neutral'>    // --- Borrow/Liquidation hooks ---</span>
 497 |     | <span class='neutral'>    function payOutBorrow(address to, address asset_, uint256 amount)</span>
 498 |     | <span class='neutral'>        external</span>
 499 |     | <span class='neutral'>        onlyRole(CONTROLLER_ROLE)</span>
 500 |     | <span class='neutral'>        whenNotPaused</span>
 501 |     | <span class='neutral'>    {</span>
 502 |     | <span class='unexecuted'>        IERC20(asset_).safeTransfer(to, amount);</span>
 503 |     | <span class='unexecuted'>        bytes32 actionId = keccak256(</span>
 504 |     | <span class='unexecuted'>            abi.encode(</span>
 505 |     | <span class='neutral'>                &quot;BorrowPayout&quot;,</span>
 506 |     | <span class='unexecuted'>                uint256(1),</span>
 507 |     | <span class='unexecuted'>                block.chainid,</span>
 508 |     | <span class='unexecuted'>                msg.sender,</span>
 509 |     | <span class='neutral'>                block.chainid,</span>
 510 |     | <span class='unexecuted'>                address(this),</span>
 511 |     | <span class='neutral'>                to,</span>
 512 |     | <span class='neutral'>                asset_,</span>
 513 |     | <span class='neutral'>                amount,</span>
 514 |     | <span class='unexecuted'>                uint256(block.number)</span>
 515 |     | <span class='neutral'>            )</span>
 516 |     | <span class='neutral'>        );</span>
 517 |     | <span class='unexecuted'>        emit BorrowPayout(to, asset_, amount, actionId, block.timestamp);</span>
 518 |     | <span class='neutral'>    }</span>
 519 |     | <span class='neutral'></span>
 520 |     | <span class='neutral'>    function onSeizeShares(address user, uint256 shares, address to) external onlyRole(CONTROLLER_ROLE) {</span>
 521 |     | <span class='neutral'>        // Burn user&#39;s LST mirror shares</span>
 522 |     | <span class='unexecuted'>        lst.burn(user, shares);</span>
 523 |     | <span class='neutral'>        // Transfer ERC4626 shares from user to liquidator destination</span>
 524 |     | <span class='unexecuted'>        _transfer(user, to, shares);</span>
 525 |     | <span class='unexecuted'>        bytes32 actionId = keccak256(</span>
 526 |     | <span class='unexecuted'>            abi.encode(</span>
 527 |     | <span class='neutral'>                &quot;SeizeShares&quot;,</span>
 528 |     | <span class='neutral'>                uint256(1),</span>
 529 |     | <span class='unexecuted'>                block.chainid,</span>
 530 |     | <span class='unexecuted'>                msg.sender,</span>
 531 |     | <span class='neutral'>                block.chainid,</span>
 532 |     | <span class='unexecuted'>                address(this),</span>
 533 |     | <span class='neutral'>                user,</span>
 534 |     | <span class='neutral'>                asset(),</span>
 535 |     | <span class='neutral'>                shares,</span>
 536 |     | <span class='unexecuted'>                uint256(block.number)</span>
 537 |     | <span class='neutral'>            )</span>
 538 |     | <span class='neutral'>        );</span>
 539 |     | <span class='unexecuted'>        emit SharesSeized(user, to, shares, actionId);</span>
 540 |     | <span class='neutral'>    }</span>
 541 |     | <span class='neutral'></span>
 542 |     | <span class='neutral'>    uint256[50] private __gap;</span>
 543 |     | <span class='neutral'>}</span>
 544 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/contracts/strategy/AdapterRegistry.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>pragma solidity ^0.8.24;</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>import {Initializable} from &quot;@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol&quot;;</span>
  5 |     | <span class='neutral'>import {UUPSUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol&quot;;</span>
  6 |     | <span class='neutral'>import {AccessControlUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/access/AccessControlUpgradeable.sol&quot;;</span>
  7 |     | <span class='neutral'>import {PausableUpgradeable} from &quot;@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol&quot;;</span>
  8 |     | <span class='neutral'></span>
  9 |     | <span class='neutral'>/// @title AdapterRegistry</span>
 10 |     | <span class='neutral'>/// @notice Registry for strategy adapters and caps.</span>
 11 | *   | <span class='executed'>contract AdapterRegistry is Initializable, UUPSUpgradeable, AccessControlUpgradeable, PausableUpgradeable {</span>
 12 | *   | <span class='executed'>    bytes32 public constant GOVERNOR_ROLE = keccak256(&quot;GOVERNOR_ROLE&quot;);</span>
 13 |     | <span class='neutral'></span>
 14 |     | <span class='neutral'>    struct AdapterInfo {</span>
 15 |     | <span class='neutral'>        bool allowed;</span>
 16 |     | <span class='neutral'>        uint256 cap;</span>
 17 |     | <span class='neutral'>    }</span>
 18 |     | <span class='neutral'></span>
 19 |     | <span class='neutral'>    mapping(address =&gt; AdapterInfo) private adapters;</span>
 20 |     | <span class='neutral'></span>
 21 |     | <span class='neutral'>    event AdapterUpdated(address indexed adapter, bool allowed, uint256 cap);</span>
 22 |     | <span class='neutral'>    event RegistryPaused(bool paused);</span>
 23 |     | <span class='neutral'></span>
 24 |     | <span class='neutral'>    /// @notice Initializer</span>
 25 |     | <span class='neutral'>    function initialize(address governor) external initializer {</span>
 26 |     | <span class='neutral'>        __UUPSUpgradeable_init();</span>
 27 |     | <span class='neutral'>        __AccessControl_init();</span>
 28 |     | <span class='neutral'>        __Pausable_init();</span>
 29 | *   | <span class='executed'>        _grantRole(DEFAULT_ADMIN_ROLE, governor);</span>
 30 | *   | <span class='executed'>        _grantRole(GOVERNOR_ROLE, governor);</span>
 31 |     | <span class='neutral'>    }</span>
 32 |     | <span class='neutral'></span>
 33 |     | <span class='neutral'>    /// @inheritdoc UUPSUpgradeable</span>
 34 |     | <span class='neutral'>    function _authorizeUpgrade(address) internal override onlyRole(GOVERNOR_ROLE) {}</span>
 35 |     | <span class='neutral'></span>
 36 |     | <span class='neutral'>    function setAdapter(address adapter, bool allowed, uint256 cap) external onlyRole(GOVERNOR_ROLE) whenNotPaused {</span>
 37 |     | <span class='unexecuted'>        adapters[adapter] = AdapterInfo({allowed: allowed, cap: cap});</span>
 38 |     | <span class='unexecuted'>        emit AdapterUpdated(adapter, allowed, cap);</span>
 39 |     | <span class='neutral'>    }</span>
 40 |     | <span class='neutral'></span>
 41 |     | <span class='neutral'>    function isAllowed(address adapter) external view returns (bool) {</span>
 42 |     | <span class='neutral'>        return adapters[adapter].allowed;</span>
 43 |     | <span class='neutral'>    }</span>
 44 |     | <span class='neutral'></span>
 45 |     | <span class='neutral'>    function capOf(address adapter) external view returns (uint256) {</span>
 46 |     | <span class='unexecuted'>        return adapters[adapter].cap;</span>
 47 |     | <span class='neutral'>    }</span>
 48 |     | <span class='neutral'></span>
 49 |     | <span class='neutral'>    function pause() external onlyRole(GOVERNOR_ROLE) {</span>
 50 |     | <span class='neutral'>        _pause();</span>
 51 |     | <span class='unexecuted'>        emit RegistryPaused(true);</span>
 52 |     | <span class='neutral'>    }</span>
 53 |     | <span class='neutral'></span>
 54 |     | <span class='neutral'>    function unpause() external onlyRole(GOVERNOR_ROLE) {</span>
 55 |     | <span class='neutral'>        _unpause();</span>
 56 |     | <span class='unexecuted'>        emit RegistryPaused(false);</span>
 57 |     | <span class='neutral'>    }</span>
 58 |     | <span class='neutral'></span>
 59 |     | <span class='neutral'>    uint256[50] private __gap;</span>
 60 |     | <span class='neutral'>}</span>
 61 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/contracts/tokens/SuperchainERC20.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>pragma solidity ^0.8.24;</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>import {ERC20} from &quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;;</span>
  5 |     | <span class='neutral'>import {ERC20Permit} from &quot;@openzeppelin/contracts/token/ERC20/extensions/ERC20Permit.sol&quot;;</span>
  6 |     | <span class='neutral'>import {AccessControl} from &quot;@openzeppelin/contracts/access/AccessControl.sol&quot;;</span>
  7 |     | <span class='neutral'></span>
  8 |     | <span class='neutral'>/// @title SuperchainERC20</span>
  9 |     | <span class='neutral'>/// @notice Non-upgradeable ERC20 with AccessControl mint/burn via MINTER_ROLE.</span>
 10 | *   | <span class='executed'>contract SuperchainERC20 is ERC20, ERC20Permit, AccessControl {</span>
 11 | *   | <span class='executed'>    bytes32 public constant MINTER_ROLE = keccak256(&quot;MINTER_ROLE&quot;);</span>
 12 |     | <span class='neutral'></span>
 13 |     | <span class='neutral'>    event MinterSet(address indexed vault, bool enabled);</span>
 14 |     | <span class='neutral'></span>
 15 |     | <span class='neutral'>    /// @notice Constructs the token.</span>
 16 |     | <span class='neutral'>    /// @param name_ Token name.</span>
 17 |     | <span class='neutral'>    /// @param symbol_ Token symbol.</span>
 18 |     | <span class='neutral'>    constructor(string memory name_, string memory symbol_) ERC20(name_, symbol_) ERC20Permit(name_) {</span>
 19 | *   | <span class='executed'>        _grantRole(DEFAULT_ADMIN_ROLE, msg.sender);</span>
 20 |     | <span class='neutral'>    }</span>
 21 |     | <span class='neutral'></span>
 22 |     | <span class='neutral'>    /// @notice Grants MINTER_ROLE and emits MinterSet for indexers.</span>
 23 |     | <span class='neutral'>    function grantMinter(address vault) external onlyRole(DEFAULT_ADMIN_ROLE) {</span>
 24 | *   | <span class='executed'>        _grantRole(MINTER_ROLE, vault);</span>
 25 | *   | <span class='executed'>        emit MinterSet(vault, true);</span>
 26 |     | <span class='neutral'>    }</span>
 27 |     | <span class='neutral'></span>
 28 |     | <span class='neutral'>    /// @notice Revokes MINTER_ROLE and emits MinterSet for indexers.</span>
 29 |     | <span class='neutral'>    function revokeMinter(address vault) external onlyRole(DEFAULT_ADMIN_ROLE) {</span>
 30 |     | <span class='unexecuted'>        _revokeRole(MINTER_ROLE, vault);</span>
 31 |     | <span class='unexecuted'>        emit MinterSet(vault, false);</span>
 32 |     | <span class='neutral'>    }</span>
 33 |     | <span class='neutral'></span>
 34 |     | <span class='neutral'>    /// @notice Mints tokens to an account. Only MINTER_ROLE.</span>
 35 |     | <span class='neutral'>    function mint(address to, uint256 amount) external onlyRole(MINTER_ROLE) {</span>
 36 |     | <span class='neutral'>        _mint(to, amount);</span>
 37 |     | <span class='neutral'>    }</span>
 38 |     | <span class='neutral'></span>
 39 |     | <span class='neutral'>    /// @notice Burns tokens from an account. Only MINTER_ROLE (vault controls burns upon redeem).</span>
 40 |     | <span class='neutral'>    function burn(address from, uint256 amount) external onlyRole(MINTER_ROLE) {</span>
 41 |     | <span class='neutral'>        _burn(from, amount);</span>
 42 |     | <span class='neutral'>    }</span>
 43 |     | <span class='neutral'></span>
 44 |     | <span class='neutral'>    function decimals() public view virtual override returns (uint8) {</span>
 45 |     | <span class='unexecuted'>        return 18;</span>
 46 |     | <span class='neutral'>    }</span>
 47 |     | <span class='neutral'>}</span>
 48 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/access/AccessControlUpgradeable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (access/AccessControl.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IAccessControl} from &quot;@openzeppelin/contracts/access/IAccessControl.sol&quot;;</span>
   7 |     | <span class='neutral'>import {ContextUpgradeable} from &quot;../utils/ContextUpgradeable.sol&quot;;</span>
   8 |     | <span class='neutral'>import {ERC165Upgradeable} from &quot;../utils/introspection/ERC165Upgradeable.sol&quot;;</span>
   9 |     | <span class='neutral'>import {Initializable} from &quot;../proxy/utils/Initializable.sol&quot;;</span>
  10 |     | <span class='neutral'></span>
  11 |     | <span class='neutral'>/**</span>
  12 |     | <span class='neutral'> * @dev Contract module that allows children to implement role-based access</span>
  13 |     | <span class='neutral'> * control mechanisms. This is a lightweight version that doesn&#39;t allow enumerating role</span>
  14 |     | <span class='neutral'> * members except through off-chain means by accessing the contract event logs. Some</span>
  15 |     | <span class='neutral'> * applications may benefit from on-chain enumerability, for those cases see</span>
  16 |     | <span class='neutral'> * {AccessControlEnumerable}.</span>
  17 |     | <span class='neutral'> *</span>
  18 |     | <span class='neutral'> * Roles are referred to by their `bytes32` identifier. These should be exposed</span>
  19 |     | <span class='neutral'> * in the external API and be unique. The best way to achieve this is by</span>
  20 |     | <span class='neutral'> * using `public constant` hash digests:</span>
  21 |     | <span class='neutral'> *</span>
  22 |     | <span class='neutral'> * ```solidity</span>
  23 |     | <span class='neutral'> * bytes32 public constant MY_ROLE = keccak256(&quot;MY_ROLE&quot;);</span>
  24 |     | <span class='neutral'> * ```</span>
  25 |     | <span class='neutral'> *</span>
  26 |     | <span class='neutral'> * Roles can be used to represent a set of permissions. To restrict access to a</span>
  27 |     | <span class='neutral'> * function call, use {hasRole}:</span>
  28 |     | <span class='neutral'> *</span>
  29 |     | <span class='neutral'> * ```solidity</span>
  30 |     | <span class='neutral'> * function foo() public {</span>
  31 |     | <span class='neutral'> *     require(hasRole(MY_ROLE, msg.sender));</span>
  32 |     | <span class='neutral'> *     ...</span>
  33 |     | <span class='neutral'> * }</span>
  34 |     | <span class='neutral'> * ```</span>
  35 |     | <span class='neutral'> *</span>
  36 |     | <span class='neutral'> * Roles can be granted and revoked dynamically via the {grantRole} and</span>
  37 |     | <span class='neutral'> * {revokeRole} functions. Each role has an associated admin role, and only</span>
  38 |     | <span class='neutral'> * accounts that have a role&#39;s admin role can call {grantRole} and {revokeRole}.</span>
  39 |     | <span class='neutral'> *</span>
  40 |     | <span class='neutral'> * By default, the admin role for all roles is `DEFAULT_ADMIN_ROLE`, which means</span>
  41 |     | <span class='neutral'> * that only accounts with this role will be able to grant or revoke other</span>
  42 |     | <span class='neutral'> * roles. More complex role relationships can be created by using</span>
  43 |     | <span class='neutral'> * {_setRoleAdmin}.</span>
  44 |     | <span class='neutral'> *</span>
  45 |     | <span class='neutral'> * WARNING: The `DEFAULT_ADMIN_ROLE` is also its own admin: it has permission to</span>
  46 |     | <span class='neutral'> * grant and revoke this role. Extra precautions should be taken to secure</span>
  47 |     | <span class='neutral'> * accounts that have been granted it. We recommend using {AccessControlDefaultAdminRules}</span>
  48 |     | <span class='neutral'> * to enforce additional security measures for this role.</span>
  49 |     | <span class='neutral'> */</span>
  50 |     | <span class='neutral'>abstract contract AccessControlUpgradeable is Initializable, ContextUpgradeable, IAccessControl, ERC165Upgradeable {</span>
  51 |     | <span class='neutral'>    struct RoleData {</span>
  52 |     | <span class='neutral'>        mapping(address account =&gt; bool) hasRole;</span>
  53 |     | <span class='neutral'>        bytes32 adminRole;</span>
  54 |     | <span class='neutral'>    }</span>
  55 |     | <span class='neutral'></span>
  56 |     | <span class='neutral'>    bytes32 public constant DEFAULT_ADMIN_ROLE = 0x00;</span>
  57 |     | <span class='neutral'></span>
  58 |     | <span class='neutral'></span>
  59 |     | <span class='neutral'>    /// @custom:storage-location erc7201:openzeppelin.storage.AccessControl</span>
  60 |     | <span class='neutral'>    struct AccessControlStorage {</span>
  61 |     | <span class='neutral'>        mapping(bytes32 role =&gt; RoleData) _roles;</span>
  62 |     | <span class='neutral'>    }</span>
  63 |     | <span class='neutral'></span>
  64 |     | <span class='neutral'>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.AccessControl&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</span>
  65 |     | <span class='neutral'>    bytes32 private constant AccessControlStorageLocation = 0x02dd7bc7dec4dceedda775e58dd541e08a116c6c53815c0bd028192f7b626800;</span>
  66 |     | <span class='neutral'></span>
  67 |     | <span class='neutral'>    function _getAccessControlStorage() private pure returns (AccessControlStorage storage $) {</span>
  68 | *   | <span class='executed'>        assembly {</span>
  69 |     | <span class='neutral'>            $.slot := AccessControlStorageLocation</span>
  70 |     | <span class='neutral'>        }</span>
  71 |     | <span class='neutral'>    }</span>
  72 |     | <span class='neutral'></span>
  73 |     | <span class='neutral'>    /**</span>
  74 |     | <span class='neutral'>     * @dev Modifier that checks that an account has a specific role. Reverts</span>
  75 |     | <span class='neutral'>     * with an {AccessControlUnauthorizedAccount} error including the required role.</span>
  76 |     | <span class='neutral'>     */</span>
  77 |     | <span class='neutral'>    modifier onlyRole(bytes32 role) {</span>
  78 | *   | <span class='executed'>        _checkRole(role);</span>
  79 |     | <span class='neutral'>        _;</span>
  80 |     | <span class='neutral'>    }</span>
  81 |     | <span class='neutral'></span>
  82 |     | <span class='neutral'>    function __AccessControl_init() internal onlyInitializing {</span>
  83 |     | <span class='neutral'>    }</span>
  84 |     | <span class='neutral'></span>
  85 |     | <span class='neutral'>    function __AccessControl_init_unchained() internal onlyInitializing {</span>
  86 |     | <span class='neutral'>    }</span>
  87 |     | <span class='neutral'>    /**</span>
  88 |     | <span class='neutral'>     * @dev See {IERC165-supportsInterface}.</span>
  89 |     | <span class='neutral'>     */</span>
  90 |     | <span class='neutral'>    function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {</span>
  91 |     | <span class='unexecuted'>        return interfaceId == type(IAccessControl).interfaceId || super.supportsInterface(interfaceId);</span>
  92 |     | <span class='neutral'>    }</span>
  93 |     | <span class='neutral'></span>
  94 |     | <span class='neutral'>    /**</span>
  95 |     | <span class='neutral'>     * @dev Returns `true` if `account` has been granted `role`.</span>
  96 |     | <span class='neutral'>     */</span>
  97 |     | <span class='neutral'>    function hasRole(bytes32 role, address account) public view virtual returns (bool) {</span>
  98 |     | <span class='neutral'>        AccessControlStorage storage $ = _getAccessControlStorage();</span>
  99 |     | <span class='neutral'>        return $._roles[role].hasRole[account];</span>
 100 |     | <span class='neutral'>    }</span>
 101 |     | <span class='neutral'></span>
 102 |     | <span class='neutral'>    /**</span>
 103 |     | <span class='neutral'>     * @dev Reverts with an {AccessControlUnauthorizedAccount} error if `_msgSender()`</span>
 104 |     | <span class='neutral'>     * is missing `role`. Overriding this function changes the behavior of the {onlyRole} modifier.</span>
 105 |     | <span class='neutral'>     */</span>
 106 | *   | <span class='executed'>    function _checkRole(bytes32 role) internal view virtual {</span>
 107 |     | <span class='neutral'>        _checkRole(role, _msgSender());</span>
 108 |     | <span class='neutral'>    }</span>
 109 |     | <span class='neutral'></span>
 110 |     | <span class='neutral'>    /**</span>
 111 |     | <span class='neutral'>     * @dev Reverts with an {AccessControlUnauthorizedAccount} error if `account`</span>
 112 |     | <span class='neutral'>     * is missing `role`.</span>
 113 |     | <span class='neutral'>     */</span>
 114 |     | <span class='neutral'>    function _checkRole(bytes32 role, address account) internal view virtual {</span>
 115 | *   | <span class='executed'>        if (!hasRole(role, account)) {</span>
 116 |     | <span class='unexecuted'>            revert AccessControlUnauthorizedAccount(account, role);</span>
 117 |     | <span class='neutral'>        }</span>
 118 |     | <span class='neutral'>    }</span>
 119 |     | <span class='neutral'></span>
 120 |     | <span class='neutral'>    /**</span>
 121 |     | <span class='neutral'>     * @dev Returns the admin role that controls `role`. See {grantRole} and</span>
 122 |     | <span class='neutral'>     * {revokeRole}.</span>
 123 |     | <span class='neutral'>     *</span>
 124 |     | <span class='neutral'>     * To change a role&#39;s admin, use {_setRoleAdmin}.</span>
 125 |     | <span class='neutral'>     */</span>
 126 |     | <span class='neutral'>    function getRoleAdmin(bytes32 role) public view virtual returns (bytes32) {</span>
 127 |     | <span class='neutral'>        AccessControlStorage storage $ = _getAccessControlStorage();</span>
 128 |     | <span class='unexecuted'>        return $._roles[role].adminRole;</span>
 129 |     | <span class='neutral'>    }</span>
 130 |     | <span class='neutral'></span>
 131 |     | <span class='neutral'>    /**</span>
 132 |     | <span class='neutral'>     * @dev Grants `role` to `account`.</span>
 133 |     | <span class='neutral'>     *</span>
 134 |     | <span class='neutral'>     * If `account` had not been already granted `role`, emits a {RoleGranted}</span>
 135 |     | <span class='neutral'>     * event.</span>
 136 |     | <span class='neutral'>     *</span>
 137 |     | <span class='neutral'>     * Requirements:</span>
 138 |     | <span class='neutral'>     *</span>
 139 |     | <span class='neutral'>     * - the caller must have ``role``&#39;s admin role.</span>
 140 |     | <span class='neutral'>     *</span>
 141 |     | <span class='neutral'>     * May emit a {RoleGranted} event.</span>
 142 |     | <span class='neutral'>     */</span>
 143 |     | <span class='neutral'>    function grantRole(bytes32 role, address account) public virtual onlyRole(getRoleAdmin(role)) {</span>
 144 |     | <span class='unexecuted'>        _grantRole(role, account);</span>
 145 |     | <span class='neutral'>    }</span>
 146 |     | <span class='neutral'></span>
 147 |     | <span class='neutral'>    /**</span>
 148 |     | <span class='neutral'>     * @dev Revokes `role` from `account`.</span>
 149 |     | <span class='neutral'>     *</span>
 150 |     | <span class='neutral'>     * If `account` had been granted `role`, emits a {RoleRevoked} event.</span>
 151 |     | <span class='neutral'>     *</span>
 152 |     | <span class='neutral'>     * Requirements:</span>
 153 |     | <span class='neutral'>     *</span>
 154 |     | <span class='neutral'>     * - the caller must have ``role``&#39;s admin role.</span>
 155 |     | <span class='neutral'>     *</span>
 156 |     | <span class='neutral'>     * May emit a {RoleRevoked} event.</span>
 157 |     | <span class='neutral'>     */</span>
 158 |     | <span class='neutral'>    function revokeRole(bytes32 role, address account) public virtual onlyRole(getRoleAdmin(role)) {</span>
 159 |     | <span class='unexecuted'>        _revokeRole(role, account);</span>
 160 |     | <span class='neutral'>    }</span>
 161 |     | <span class='neutral'></span>
 162 |     | <span class='neutral'>    /**</span>
 163 |     | <span class='neutral'>     * @dev Revokes `role` from the calling account.</span>
 164 |     | <span class='neutral'>     *</span>
 165 |     | <span class='neutral'>     * Roles are often managed via {grantRole} and {revokeRole}: this function&#39;s</span>
 166 |     | <span class='neutral'>     * purpose is to provide a mechanism for accounts to lose their privileges</span>
 167 |     | <span class='neutral'>     * if they are compromised (such as when a trusted device is misplaced).</span>
 168 |     | <span class='neutral'>     *</span>
 169 |     | <span class='neutral'>     * If the calling account had been revoked `role`, emits a {RoleRevoked}</span>
 170 |     | <span class='neutral'>     * event.</span>
 171 |     | <span class='neutral'>     *</span>
 172 |     | <span class='neutral'>     * Requirements:</span>
 173 |     | <span class='neutral'>     *</span>
 174 |     | <span class='neutral'>     * - the caller must be `callerConfirmation`.</span>
 175 |     | <span class='neutral'>     *</span>
 176 |     | <span class='neutral'>     * May emit a {RoleRevoked} event.</span>
 177 |     | <span class='neutral'>     */</span>
 178 |     | <span class='neutral'>    function renounceRole(bytes32 role, address callerConfirmation) public virtual {</span>
 179 |     | <span class='unexecuted'>        if (callerConfirmation != _msgSender()) {</span>
 180 |     | <span class='unexecuted'>            revert AccessControlBadConfirmation();</span>
 181 |     | <span class='neutral'>        }</span>
 182 |     | <span class='neutral'></span>
 183 |     | <span class='unexecuted'>        _revokeRole(role, callerConfirmation);</span>
 184 |     | <span class='neutral'>    }</span>
 185 |     | <span class='neutral'></span>
 186 |     | <span class='neutral'>    /**</span>
 187 |     | <span class='neutral'>     * @dev Sets `adminRole` as ``role``&#39;s admin role.</span>
 188 |     | <span class='neutral'>     *</span>
 189 |     | <span class='neutral'>     * Emits a {RoleAdminChanged} event.</span>
 190 |     | <span class='neutral'>     */</span>
 191 |     | <span class='neutral'>    function _setRoleAdmin(bytes32 role, bytes32 adminRole) internal virtual {</span>
 192 |     | <span class='neutral'>        AccessControlStorage storage $ = _getAccessControlStorage();</span>
 193 |     | <span class='neutral'>        bytes32 previousAdminRole = getRoleAdmin(role);</span>
 194 |     | <span class='neutral'>        $._roles[role].adminRole = adminRole;</span>
 195 |     | <span class='neutral'>        emit RoleAdminChanged(role, previousAdminRole, adminRole);</span>
 196 |     | <span class='neutral'>    }</span>
 197 |     | <span class='neutral'></span>
 198 |     | <span class='neutral'>    /**</span>
 199 |     | <span class='neutral'>     * @dev Attempts to grant `role` to `account` and returns a boolean indicating if `role` was granted.</span>
 200 |     | <span class='neutral'>     *</span>
 201 |     | <span class='neutral'>     * Internal function without access restriction.</span>
 202 |     | <span class='neutral'>     *</span>
 203 |     | <span class='neutral'>     * May emit a {RoleGranted} event.</span>
 204 |     | <span class='neutral'>     */</span>
 205 | *   | <span class='executed'>    function _grantRole(bytes32 role, address account) internal virtual returns (bool) {</span>
 206 |     | <span class='neutral'>        AccessControlStorage storage $ = _getAccessControlStorage();</span>
 207 |     | <span class='unexecuted'>        if (!hasRole(role, account)) {</span>
 208 | *   | <span class='executed'>            $._roles[role].hasRole[account] = true;</span>
 209 | *   | <span class='executed'>            emit RoleGranted(role, account, _msgSender());</span>
 210 | *   | <span class='executed'>            return true;</span>
 211 |     | <span class='neutral'>        } else {</span>
 212 |     | <span class='unexecuted'>            return false;</span>
 213 |     | <span class='neutral'>        }</span>
 214 |     | <span class='neutral'>    }</span>
 215 |     | <span class='neutral'></span>
 216 |     | <span class='neutral'>    /**</span>
 217 |     | <span class='neutral'>     * @dev Attempts to revoke `role` to `account` and returns a boolean indicating if `role` was revoked.</span>
 218 |     | <span class='neutral'>     *</span>
 219 |     | <span class='neutral'>     * Internal function without access restriction.</span>
 220 |     | <span class='neutral'>     *</span>
 221 |     | <span class='neutral'>     * May emit a {RoleRevoked} event.</span>
 222 |     | <span class='neutral'>     */</span>
 223 |     | <span class='unexecuted'>    function _revokeRole(bytes32 role, address account) internal virtual returns (bool) {</span>
 224 |     | <span class='neutral'>        AccessControlStorage storage $ = _getAccessControlStorage();</span>
 225 |     | <span class='unexecuted'>        if (hasRole(role, account)) {</span>
 226 |     | <span class='neutral'>            $._roles[role].hasRole[account] = false;</span>
 227 |     | <span class='unexecuted'>            emit RoleRevoked(role, account, _msgSender());</span>
 228 |     | <span class='unexecuted'>            return true;</span>
 229 |     | <span class='neutral'>        } else {</span>
 230 |     | <span class='neutral'>            return false;</span>
 231 |     | <span class='neutral'>        }</span>
 232 |     | <span class='neutral'>    }</span>
 233 |     | <span class='neutral'>}</span>
 234 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (proxy/utils/Initializable.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>/**</span>
   7 |     | <span class='neutral'> * @dev This is a base contract to aid in writing upgradeable contracts, or any kind of contract that will be deployed</span>
   8 |     | <span class='neutral'> * behind a proxy. Since proxied contracts do not make use of a constructor, it&#39;s common to move constructor logic to an</span>
   9 |     | <span class='neutral'> * external initializer function, usually called `initialize`. It then becomes necessary to protect this initializer</span>
  10 |     | <span class='neutral'> * function so it can only be called once. The {initializer} modifier provided by this contract will have this effect.</span>
  11 |     | <span class='neutral'> *</span>
  12 |     | <span class='neutral'> * The initialization functions use a version number. Once a version number is used, it is consumed and cannot be</span>
  13 |     | <span class='neutral'> * reused. This mechanism prevents re-execution of each &quot;step&quot; but allows the creation of new initialization steps in</span>
  14 |     | <span class='neutral'> * case an upgrade adds a module that needs to be initialized.</span>
  15 |     | <span class='neutral'> *</span>
  16 |     | <span class='neutral'> * For example:</span>
  17 |     | <span class='neutral'> *</span>
  18 |     | <span class='neutral'> * [.hljs-theme-light.nopadding]</span>
  19 |     | <span class='neutral'> * ```solidity</span>
  20 |     | <span class='neutral'> * contract MyToken is ERC20Upgradeable {</span>
  21 |     | <span class='neutral'> *     function initialize() initializer public {</span>
  22 |     | <span class='neutral'> *         __ERC20_init(&quot;MyToken&quot;, &quot;MTK&quot;);</span>
  23 |     | <span class='neutral'> *     }</span>
  24 |     | <span class='neutral'> * }</span>
  25 |     | <span class='neutral'> *</span>
  26 |     | <span class='neutral'> * contract MyTokenV2 is MyToken, ERC20PermitUpgradeable {</span>
  27 |     | <span class='neutral'> *     function initializeV2() reinitializer(2) public {</span>
  28 |     | <span class='neutral'> *         __ERC20Permit_init(&quot;MyToken&quot;);</span>
  29 |     | <span class='neutral'> *     }</span>
  30 |     | <span class='neutral'> * }</span>
  31 |     | <span class='neutral'> * ```</span>
  32 |     | <span class='neutral'> *</span>
  33 |     | <span class='neutral'> * TIP: To avoid leaving the proxy in an uninitialized state, the initializer function should be called as early as</span>
  34 |     | <span class='neutral'> * possible by providing the encoded function call as the `_data` argument to {ERC1967Proxy-constructor}.</span>
  35 |     | <span class='neutral'> *</span>
  36 |     | <span class='neutral'> * CAUTION: When used with inheritance, manual care must be taken to not invoke a parent initializer twice, or to ensure</span>
  37 |     | <span class='neutral'> * that all initializers are idempotent. This is not verified automatically as constructors are by Solidity.</span>
  38 |     | <span class='neutral'> *</span>
  39 |     | <span class='neutral'> * [CAUTION]</span>
  40 |     | <span class='neutral'> * ====</span>
  41 |     | <span class='neutral'> * Avoid leaving a contract uninitialized.</span>
  42 |     | <span class='neutral'> *</span>
  43 |     | <span class='neutral'> * An uninitialized contract can be taken over by an attacker. This applies to both a proxy and its implementation</span>
  44 |     | <span class='neutral'> * contract, which may impact the proxy. To prevent the implementation contract from being used, you should invoke</span>
  45 |     | <span class='neutral'> * the {_disableInitializers} function in the constructor to automatically lock it when it is deployed:</span>
  46 |     | <span class='neutral'> *</span>
  47 |     | <span class='neutral'> * [.hljs-theme-light.nopadding]</span>
  48 |     | <span class='neutral'> * ```</span>
  49 |     | <span class='neutral'> * /// @custom:oz-upgrades-unsafe-allow constructor</span>
  50 |     | <span class='neutral'> * constructor() {</span>
  51 |     | <span class='neutral'> *     _disableInitializers();</span>
  52 |     | <span class='neutral'> * }</span>
  53 |     | <span class='neutral'> * ```</span>
  54 |     | <span class='neutral'> * ====</span>
  55 |     | <span class='neutral'> */</span>
  56 |     | <span class='neutral'>abstract contract Initializable {</span>
  57 |     | <span class='neutral'>    /**</span>
  58 |     | <span class='neutral'>     * @dev Storage of the initializable contract.</span>
  59 |     | <span class='neutral'>     *</span>
  60 |     | <span class='neutral'>     * It&#39;s implemented on a custom ERC-7201 namespace to reduce the risk of storage collisions</span>
  61 |     | <span class='neutral'>     * when using with upgradeable contracts.</span>
  62 |     | <span class='neutral'>     *</span>
  63 |     | <span class='neutral'>     * @custom:storage-location erc7201:openzeppelin.storage.Initializable</span>
  64 |     | <span class='neutral'>     */</span>
  65 |     | <span class='neutral'>    struct InitializableStorage {</span>
  66 |     | <span class='neutral'>        /**</span>
  67 |     | <span class='neutral'>         * @dev Indicates that the contract has been initialized.</span>
  68 |     | <span class='neutral'>         */</span>
  69 |     | <span class='neutral'>        uint64 _initialized;</span>
  70 |     | <span class='neutral'>        /**</span>
  71 |     | <span class='neutral'>         * @dev Indicates that the contract is in the process of being initialized.</span>
  72 |     | <span class='neutral'>         */</span>
  73 |     | <span class='neutral'>        bool _initializing;</span>
  74 |     | <span class='neutral'>    }</span>
  75 |     | <span class='neutral'></span>
  76 |     | <span class='neutral'>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.Initializable&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</span>
  77 |     | <span class='neutral'>    bytes32 private constant INITIALIZABLE_STORAGE = 0xf0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00;</span>
  78 |     | <span class='neutral'></span>
  79 |     | <span class='neutral'>    /**</span>
  80 |     | <span class='neutral'>     * @dev The contract is already initialized.</span>
  81 |     | <span class='neutral'>     */</span>
  82 |     | <span class='neutral'>    error InvalidInitialization();</span>
  83 |     | <span class='neutral'></span>
  84 |     | <span class='neutral'>    /**</span>
  85 |     | <span class='neutral'>     * @dev The contract is not initializing.</span>
  86 |     | <span class='neutral'>     */</span>
  87 |     | <span class='neutral'>    error NotInitializing();</span>
  88 |     | <span class='neutral'></span>
  89 |     | <span class='neutral'>    /**</span>
  90 |     | <span class='neutral'>     * @dev Triggered when the contract has been initialized or reinitialized.</span>
  91 |     | <span class='neutral'>     */</span>
  92 |     | <span class='neutral'>    event Initialized(uint64 version);</span>
  93 |     | <span class='neutral'></span>
  94 |     | <span class='neutral'>    /**</span>
  95 |     | <span class='neutral'>     * @dev A modifier that defines a protected initializer function that can be invoked at most once. In its scope,</span>
  96 |     | <span class='neutral'>     * `onlyInitializing` functions can be used to initialize parent contracts.</span>
  97 |     | <span class='neutral'>     *</span>
  98 |     | <span class='neutral'>     * Similar to `reinitializer(1)`, except that in the context of a constructor an `initializer` may be invoked any</span>
  99 |     | <span class='neutral'>     * number of times. This behavior in the constructor can be useful during testing and is not expected to be used in</span>
 100 |     | <span class='neutral'>     * production.</span>
 101 |     | <span class='neutral'>     *</span>
 102 |     | <span class='neutral'>     * Emits an {Initialized} event.</span>
 103 |     | <span class='neutral'>     */</span>
 104 |     | <span class='neutral'>    modifier initializer() {</span>
 105 |     | <span class='neutral'>        // solhint-disable-next-line var-name-mixedcase</span>
 106 |     | <span class='neutral'>        InitializableStorage storage $ = _getInitializableStorage();</span>
 107 |     | <span class='neutral'></span>
 108 |     | <span class='neutral'>        // Cache values to avoid duplicated sloads</span>
 109 | *   | <span class='executed'>        bool isTopLevelCall = !$._initializing;</span>
 110 |     | <span class='neutral'>        uint64 initialized = $._initialized;</span>
 111 |     | <span class='neutral'></span>
 112 |     | <span class='neutral'>        // Allowed calls:</span>
 113 |     | <span class='neutral'>        // - initialSetup: the contract is not in the initializing state and no previous version was</span>
 114 |     | <span class='neutral'>        //                 initialized</span>
 115 |     | <span class='neutral'>        // - construction: the contract is initialized at version 1 (no reininitialization) and the</span>
 116 |     | <span class='neutral'>        //                 current contract is just being deployed</span>
 117 | *   | <span class='executed'>        bool initialSetup = initialized == 0 &amp;&amp; isTopLevelCall;</span>
 118 | *   | <span class='executed'>        bool construction = initialized == 1 &amp;&amp; address(this).code.length == 0;</span>
 119 |     | <span class='neutral'></span>
 120 | *   | <span class='executed'>        if (!initialSetup &amp;&amp; !construction) {</span>
 121 |     | <span class='unexecuted'>            revert InvalidInitialization();</span>
 122 |     | <span class='neutral'>        }</span>
 123 |     | <span class='neutral'>        $._initialized = 1;</span>
 124 | *   | <span class='executed'>        if (isTopLevelCall) {</span>
 125 |     | <span class='neutral'>            $._initializing = true;</span>
 126 |     | <span class='neutral'>        }</span>
 127 |     | <span class='neutral'>        _;</span>
 128 | *   | <span class='executed'>        if (isTopLevelCall) {</span>
 129 |     | <span class='neutral'>            $._initializing = false;</span>
 130 | *   | <span class='executed'>            emit Initialized(1);</span>
 131 |     | <span class='neutral'>        }</span>
 132 |     | <span class='neutral'>    }</span>
 133 |     | <span class='neutral'></span>
 134 |     | <span class='neutral'>    /**</span>
 135 |     | <span class='neutral'>     * @dev A modifier that defines a protected reinitializer function that can be invoked at most once, and only if the</span>
 136 |     | <span class='neutral'>     * contract hasn&#39;t been initialized to a greater version before. In its scope, `onlyInitializing` functions can be</span>
 137 |     | <span class='neutral'>     * used to initialize parent contracts.</span>
 138 |     | <span class='neutral'>     *</span>
 139 |     | <span class='neutral'>     * A reinitializer may be used after the original initialization step. This is essential to configure modules that</span>
 140 |     | <span class='neutral'>     * are added through upgrades and that require initialization.</span>
 141 |     | <span class='neutral'>     *</span>
 142 |     | <span class='neutral'>     * When `version` is 1, this modifier is similar to `initializer`, except that functions marked with `reinitializer`</span>
 143 |     | <span class='neutral'>     * cannot be nested. If one is invoked in the context of another, execution will revert.</span>
 144 |     | <span class='neutral'>     *</span>
 145 |     | <span class='neutral'>     * Note that versions can jump in increments greater than 1; this implies that if multiple reinitializers coexist in</span>
 146 |     | <span class='neutral'>     * a contract, executing them in the right order is up to the developer or operator.</span>
 147 |     | <span class='neutral'>     *</span>
 148 |     | <span class='neutral'>     * WARNING: Setting the version to 2**64 - 1 will prevent any future reinitialization.</span>
 149 |     | <span class='neutral'>     *</span>
 150 |     | <span class='neutral'>     * Emits an {Initialized} event.</span>
 151 |     | <span class='neutral'>     */</span>
 152 |     | <span class='neutral'>    modifier reinitializer(uint64 version) {</span>
 153 |     | <span class='neutral'>        // solhint-disable-next-line var-name-mixedcase</span>
 154 |     | <span class='neutral'>        InitializableStorage storage $ = _getInitializableStorage();</span>
 155 |     | <span class='neutral'></span>
 156 |     | <span class='neutral'>        if ($._initializing || $._initialized &gt;= version) {</span>
 157 |     | <span class='neutral'>            revert InvalidInitialization();</span>
 158 |     | <span class='neutral'>        }</span>
 159 |     | <span class='neutral'>        $._initialized = version;</span>
 160 |     | <span class='neutral'>        $._initializing = true;</span>
 161 |     | <span class='neutral'>        _;</span>
 162 |     | <span class='neutral'>        $._initializing = false;</span>
 163 |     | <span class='neutral'>        emit Initialized(version);</span>
 164 |     | <span class='neutral'>    }</span>
 165 |     | <span class='neutral'></span>
 166 |     | <span class='neutral'>    /**</span>
 167 |     | <span class='neutral'>     * @dev Modifier to protect an initialization function so that it can only be invoked by functions with the</span>
 168 |     | <span class='neutral'>     * {initializer} and {reinitializer} modifiers, directly or indirectly.</span>
 169 |     | <span class='neutral'>     */</span>
 170 | *   | <span class='executed'>    modifier onlyInitializing() {</span>
 171 |     | <span class='neutral'>        _checkInitializing();</span>
 172 |     | <span class='neutral'>        _;</span>
 173 |     | <span class='neutral'>    }</span>
 174 |     | <span class='neutral'></span>
 175 |     | <span class='neutral'>    /**</span>
 176 |     | <span class='neutral'>     * @dev Reverts if the contract is not in an initializing state. See {onlyInitializing}.</span>
 177 |     | <span class='neutral'>     */</span>
 178 | *   | <span class='executed'>    function _checkInitializing() internal view virtual {</span>
 179 | *   | <span class='executed'>        if (!_isInitializing()) {</span>
 180 |     | <span class='unexecuted'>            revert NotInitializing();</span>
 181 |     | <span class='neutral'>        }</span>
 182 |     | <span class='neutral'>    }</span>
 183 |     | <span class='neutral'></span>
 184 |     | <span class='neutral'>    /**</span>
 185 |     | <span class='neutral'>     * @dev Locks the contract, preventing any future reinitialization. This cannot be part of an initializer call.</span>
 186 |     | <span class='neutral'>     * Calling this in the constructor of a contract will prevent that contract from being initialized or reinitialized</span>
 187 |     | <span class='neutral'>     * to any version. It is recommended to use this to lock implementation contracts that are designed to be called</span>
 188 |     | <span class='neutral'>     * through proxies.</span>
 189 |     | <span class='neutral'>     *</span>
 190 |     | <span class='neutral'>     * Emits an {Initialized} event the first time it is successfully executed.</span>
 191 |     | <span class='neutral'>     */</span>
 192 |     | <span class='neutral'>    function _disableInitializers() internal virtual {</span>
 193 |     | <span class='neutral'>        // solhint-disable-next-line var-name-mixedcase</span>
 194 |     | <span class='neutral'>        InitializableStorage storage $ = _getInitializableStorage();</span>
 195 |     | <span class='neutral'></span>
 196 |     | <span class='neutral'>        if ($._initializing) {</span>
 197 |     | <span class='neutral'>            revert InvalidInitialization();</span>
 198 |     | <span class='neutral'>        }</span>
 199 |     | <span class='neutral'>        if ($._initialized != type(uint64).max) {</span>
 200 |     | <span class='neutral'>            $._initialized = type(uint64).max;</span>
 201 |     | <span class='neutral'>            emit Initialized(type(uint64).max);</span>
 202 |     | <span class='neutral'>        }</span>
 203 |     | <span class='neutral'>    }</span>
 204 |     | <span class='neutral'></span>
 205 |     | <span class='neutral'>    /**</span>
 206 |     | <span class='neutral'>     * @dev Returns the highest version that has been initialized. See {reinitializer}.</span>
 207 |     | <span class='neutral'>     */</span>
 208 |     | <span class='neutral'>    function _getInitializedVersion() internal view returns (uint64) {</span>
 209 |     | <span class='neutral'>        return _getInitializableStorage()._initialized;</span>
 210 |     | <span class='neutral'>    }</span>
 211 |     | <span class='neutral'></span>
 212 |     | <span class='neutral'>    /**</span>
 213 |     | <span class='neutral'>     * @dev Returns `true` if the contract is currently initializing. See {onlyInitializing}.</span>
 214 |     | <span class='neutral'>     */</span>
 215 |     | <span class='neutral'>    function _isInitializing() internal view returns (bool) {</span>
 216 |     | <span class='neutral'>        return _getInitializableStorage()._initializing;</span>
 217 |     | <span class='neutral'>    }</span>
 218 |     | <span class='neutral'></span>
 219 |     | <span class='neutral'>    /**</span>
 220 |     | <span class='neutral'>     * @dev Returns a pointer to the storage namespace.</span>
 221 |     | <span class='neutral'>     */</span>
 222 |     | <span class='neutral'>    // solhint-disable-next-line var-name-mixedcase</span>
 223 |     | <span class='neutral'>    function _getInitializableStorage() private pure returns (InitializableStorage storage $) {</span>
 224 | *   | <span class='executed'>        assembly {</span>
 225 |     | <span class='neutral'>            $.slot := INITIALIZABLE_STORAGE</span>
 226 |     | <span class='neutral'>        }</span>
 227 |     | <span class='neutral'>    }</span>
 228 |     | <span class='neutral'>}</span>
 229 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/UUPSUpgradeable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (proxy/utils/UUPSUpgradeable.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IERC1822Proxiable} from &quot;@openzeppelin/contracts/interfaces/draft-IERC1822.sol&quot;;</span>
   7 |     | <span class='neutral'>import {ERC1967Utils} from &quot;@openzeppelin/contracts/proxy/ERC1967/ERC1967Utils.sol&quot;;</span>
   8 |     | <span class='neutral'>import {Initializable} from &quot;./Initializable.sol&quot;;</span>
   9 |     | <span class='neutral'></span>
  10 |     | <span class='neutral'>/**</span>
  11 |     | <span class='neutral'> * @dev An upgradeability mechanism designed for UUPS proxies. The functions included here can perform an upgrade of an</span>
  12 |     | <span class='neutral'> * {ERC1967Proxy}, when this contract is set as the implementation behind such a proxy.</span>
  13 |     | <span class='neutral'> *</span>
  14 |     | <span class='neutral'> * A security mechanism ensures that an upgrade does not turn off upgradeability accidentally, although this risk is</span>
  15 |     | <span class='neutral'> * reinstated if the upgrade retains upgradeability but removes the security mechanism, e.g. by replacing</span>
  16 |     | <span class='neutral'> * `UUPSUpgradeable` with a custom implementation of upgrades.</span>
  17 |     | <span class='neutral'> *</span>
  18 |     | <span class='neutral'> * The {_authorizeUpgrade} function must be overridden to include access restriction to the upgrade mechanism.</span>
  19 |     | <span class='neutral'> */</span>
  20 |     | <span class='neutral'>abstract contract UUPSUpgradeable is Initializable, IERC1822Proxiable {</span>
  21 |     | <span class='neutral'>    /// @custom:oz-upgrades-unsafe-allow state-variable-immutable</span>
  22 | *   | <span class='executed'>    address private immutable __self = address(this);</span>
  23 |     | <span class='neutral'></span>
  24 |     | <span class='neutral'>    /**</span>
  25 |     | <span class='neutral'>     * @dev The version of the upgrade interface of the contract. If this getter is missing, both `upgradeTo(address)`</span>
  26 |     | <span class='neutral'>     * and `upgradeToAndCall(address,bytes)` are present, and `upgradeTo` must be used if no function should be called,</span>
  27 |     | <span class='neutral'>     * while `upgradeToAndCall` will invoke the `receive` function if the second argument is the empty byte string.</span>
  28 |     | <span class='neutral'>     * If the getter returns `&quot;5.0.0&quot;`, only `upgradeToAndCall(address,bytes)` is present, and the second argument must</span>
  29 |     | <span class='neutral'>     * be the empty byte string if no function should be called, making it impossible to invoke the `receive` function</span>
  30 |     | <span class='neutral'>     * during an upgrade.</span>
  31 |     | <span class='neutral'>     */</span>
  32 |     | <span class='neutral'>    string public constant UPGRADE_INTERFACE_VERSION = &quot;5.0.0&quot;;</span>
  33 |     | <span class='neutral'></span>
  34 |     | <span class='neutral'>    /**</span>
  35 |     | <span class='neutral'>     * @dev The call is from an unauthorized context.</span>
  36 |     | <span class='neutral'>     */</span>
  37 |     | <span class='neutral'>    error UUPSUnauthorizedCallContext();</span>
  38 |     | <span class='neutral'></span>
  39 |     | <span class='neutral'>    /**</span>
  40 |     | <span class='neutral'>     * @dev The storage `slot` is unsupported as a UUID.</span>
  41 |     | <span class='neutral'>     */</span>
  42 |     | <span class='neutral'>    error UUPSUnsupportedProxiableUUID(bytes32 slot);</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>    /**</span>
  45 |     | <span class='neutral'>     * @dev Check that the execution is being performed through a delegatecall call and that the execution context is</span>
  46 |     | <span class='neutral'>     * a proxy contract with an implementation (as defined in ERC1967) pointing to self. This should only be the case</span>
  47 |     | <span class='neutral'>     * for UUPS and transparent proxies that are using the current contract as their implementation. Execution of a</span>
  48 |     | <span class='neutral'>     * function through ERC1167 minimal proxies (clones) would not normally pass this test, but is not guaranteed to</span>
  49 |     | <span class='neutral'>     * fail.</span>
  50 |     | <span class='neutral'>     */</span>
  51 |     | <span class='neutral'>    modifier onlyProxy() {</span>
  52 |     | <span class='neutral'>        _checkProxy();</span>
  53 |     | <span class='neutral'>        _;</span>
  54 |     | <span class='neutral'>    }</span>
  55 |     | <span class='neutral'></span>
  56 |     | <span class='neutral'>    /**</span>
  57 |     | <span class='neutral'>     * @dev Check that the execution is not being performed through a delegate call. This allows a function to be</span>
  58 |     | <span class='neutral'>     * callable on the implementing contract but not through proxies.</span>
  59 |     | <span class='neutral'>     */</span>
  60 |     | <span class='neutral'>    modifier notDelegated() {</span>
  61 |     | <span class='neutral'>        _checkNotDelegated();</span>
  62 |     | <span class='neutral'>        _;</span>
  63 |     | <span class='neutral'>    }</span>
  64 |     | <span class='neutral'></span>
  65 |     | <span class='neutral'>    function __UUPSUpgradeable_init() internal onlyInitializing {</span>
  66 |     | <span class='neutral'>    }</span>
  67 |     | <span class='neutral'></span>
  68 |     | <span class='neutral'>    function __UUPSUpgradeable_init_unchained() internal onlyInitializing {</span>
  69 |     | <span class='neutral'>    }</span>
  70 |     | <span class='neutral'>    /**</span>
  71 |     | <span class='neutral'>     * @dev Implementation of the ERC1822 {proxiableUUID} function. This returns the storage slot used by the</span>
  72 |     | <span class='neutral'>     * implementation. It is used to validate the implementation&#39;s compatibility when performing an upgrade.</span>
  73 |     | <span class='neutral'>     *</span>
  74 |     | <span class='neutral'>     * IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks</span>
  75 |     | <span class='neutral'>     * bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this</span>
  76 |     | <span class='neutral'>     * function revert if invoked through a proxy. This is guaranteed by the `notDelegated` modifier.</span>
  77 |     | <span class='neutral'>     */</span>
  78 |     | <span class='neutral'>    function proxiableUUID() external view virtual notDelegated returns (bytes32) {</span>
  79 |     | <span class='neutral'>        return ERC1967Utils.IMPLEMENTATION_SLOT;</span>
  80 |     | <span class='neutral'>    }</span>
  81 |     | <span class='neutral'></span>
  82 |     | <span class='neutral'>    /**</span>
  83 |     | <span class='neutral'>     * @dev Upgrade the implementation of the proxy to `newImplementation`, and subsequently execute the function call</span>
  84 |     | <span class='neutral'>     * encoded in `data`.</span>
  85 |     | <span class='neutral'>     *</span>
  86 |     | <span class='neutral'>     * Calls {_authorizeUpgrade}.</span>
  87 |     | <span class='neutral'>     *</span>
  88 |     | <span class='neutral'>     * Emits an {Upgraded} event.</span>
  89 |     | <span class='neutral'>     *</span>
  90 |     | <span class='neutral'>     * @custom:oz-upgrades-unsafe-allow-reachable delegatecall</span>
  91 |     | <span class='neutral'>     */</span>
  92 |     | <span class='neutral'>    function upgradeToAndCall(address newImplementation, bytes memory data) public payable virtual onlyProxy {</span>
  93 |     | <span class='neutral'>        _authorizeUpgrade(newImplementation);</span>
  94 |     | <span class='neutral'>        _upgradeToAndCallUUPS(newImplementation, data);</span>
  95 |     | <span class='neutral'>    }</span>
  96 |     | <span class='neutral'></span>
  97 |     | <span class='neutral'>    /**</span>
  98 |     | <span class='neutral'>     * @dev Reverts if the execution is not performed via delegatecall or the execution</span>
  99 |     | <span class='neutral'>     * context is not of a proxy with an ERC1967-compliant implementation pointing to self.</span>
 100 |     | <span class='neutral'>     * See {_onlyProxy}.</span>
 101 |     | <span class='neutral'>     */</span>
 102 |     | <span class='neutral'>    function _checkProxy() internal view virtual {</span>
 103 |     | <span class='unexecuted'>        if (</span>
 104 |     | <span class='unexecuted'>            address(this) == __self || // Must be called through delegatecall</span>
 105 |     | <span class='unexecuted'>            ERC1967Utils.getImplementation() != __self // Must be called through an active proxy</span>
 106 |     | <span class='neutral'>        ) {</span>
 107 |     | <span class='unexecuted'>            revert UUPSUnauthorizedCallContext();</span>
 108 |     | <span class='neutral'>        }</span>
 109 |     | <span class='neutral'>    }</span>
 110 |     | <span class='neutral'></span>
 111 |     | <span class='neutral'>    /**</span>
 112 |     | <span class='neutral'>     * @dev Reverts if the execution is performed via delegatecall.</span>
 113 |     | <span class='neutral'>     * See {notDelegated}.</span>
 114 |     | <span class='neutral'>     */</span>
 115 |     | <span class='neutral'>    function _checkNotDelegated() internal view virtual {</span>
 116 |     | <span class='unexecuted'>        if (address(this) != __self) {</span>
 117 |     | <span class='neutral'>            // Must not be called through delegatecall</span>
 118 |     | <span class='unexecuted'>            revert UUPSUnauthorizedCallContext();</span>
 119 |     | <span class='neutral'>        }</span>
 120 |     | <span class='neutral'>    }</span>
 121 |     | <span class='neutral'></span>
 122 |     | <span class='neutral'>    /**</span>
 123 |     | <span class='neutral'>     * @dev Function that should revert when `msg.sender` is not authorized to upgrade the contract. Called by</span>
 124 |     | <span class='neutral'>     * {upgradeToAndCall}.</span>
 125 |     | <span class='neutral'>     *</span>
 126 |     | <span class='neutral'>     * Normally, this function will use an xref:access.adoc[access control] modifier such as {Ownable-onlyOwner}.</span>
 127 |     | <span class='neutral'>     *</span>
 128 |     | <span class='neutral'>     * ```solidity</span>
 129 |     | <span class='neutral'>     * function _authorizeUpgrade(address) internal onlyOwner {}</span>
 130 |     | <span class='neutral'>     * ```</span>
 131 |     | <span class='neutral'>     */</span>
 132 |     | <span class='neutral'>    function _authorizeUpgrade(address newImplementation) internal virtual;</span>
 133 |     | <span class='neutral'></span>
 134 |     | <span class='neutral'>    /**</span>
 135 |     | <span class='neutral'>     * @dev Performs an implementation upgrade with a security check for UUPS proxies, and additional setup call.</span>
 136 |     | <span class='neutral'>     *</span>
 137 |     | <span class='neutral'>     * As a security check, {proxiableUUID} is invoked in the new implementation, and the return value</span>
 138 |     | <span class='neutral'>     * is expected to be the implementation slot in ERC1967.</span>
 139 |     | <span class='neutral'>     *</span>
 140 |     | <span class='neutral'>     * Emits an {IERC1967-Upgraded} event.</span>
 141 |     | <span class='neutral'>     */</span>
 142 |     | <span class='neutral'>    function _upgradeToAndCallUUPS(address newImplementation, bytes memory data) private {</span>
 143 |     | <span class='unexecuted'>        try IERC1822Proxiable(newImplementation).proxiableUUID() returns (bytes32 slot) {</span>
 144 |     | <span class='unexecuted'>            if (slot != ERC1967Utils.IMPLEMENTATION_SLOT) {</span>
 145 |     | <span class='unexecuted'>                revert UUPSUnsupportedProxiableUUID(slot);</span>
 146 |     | <span class='neutral'>            }</span>
 147 |     | <span class='neutral'>            ERC1967Utils.upgradeToAndCall(newImplementation, data);</span>
 148 |     | <span class='neutral'>        } catch {</span>
 149 |     | <span class='neutral'>            // The implementation is not UUPS</span>
 150 |     | <span class='unexecuted'>            revert ERC1967Utils.ERC1967InvalidImplementation(newImplementation);</span>
 151 |     | <span class='neutral'>        }</span>
 152 |     | <span class='neutral'>    }</span>
 153 |     | <span class='neutral'>}</span>
 154 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/token/ERC20/ERC20Upgradeable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/ERC20.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IERC20} from &quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;;</span>
   7 |     | <span class='neutral'>import {IERC20Metadata} from &quot;@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol&quot;;</span>
   8 |     | <span class='neutral'>import {ContextUpgradeable} from &quot;../../utils/ContextUpgradeable.sol&quot;;</span>
   9 |     | <span class='neutral'>import {IERC20Errors} from &quot;@openzeppelin/contracts/interfaces/draft-IERC6093.sol&quot;;</span>
  10 |     | <span class='neutral'>import {Initializable} from &quot;../../proxy/utils/Initializable.sol&quot;;</span>
  11 |     | <span class='neutral'></span>
  12 |     | <span class='neutral'>/**</span>
  13 |     | <span class='neutral'> * @dev Implementation of the {IERC20} interface.</span>
  14 |     | <span class='neutral'> *</span>
  15 |     | <span class='neutral'> * This implementation is agnostic to the way tokens are created. This means</span>
  16 |     | <span class='neutral'> * that a supply mechanism has to be added in a derived contract using {_mint}.</span>
  17 |     | <span class='neutral'> *</span>
  18 |     | <span class='neutral'> * TIP: For a detailed writeup see our guide</span>
  19 |     | <span class='neutral'> * https://forum.openzeppelin.com/t/how-to-implement-erc20-supply-mechanisms/226[How</span>
  20 |     | <span class='neutral'> * to implement supply mechanisms].</span>
  21 |     | <span class='neutral'> *</span>
  22 |     | <span class='neutral'> * The default value of {decimals} is 18. To change this, you should override</span>
  23 |     | <span class='neutral'> * this function so it returns a different value.</span>
  24 |     | <span class='neutral'> *</span>
  25 |     | <span class='neutral'> * We have followed general OpenZeppelin Contracts guidelines: functions revert</span>
  26 |     | <span class='neutral'> * instead returning `false` on failure. This behavior is nonetheless</span>
  27 |     | <span class='neutral'> * conventional and does not conflict with the expectations of ERC20</span>
  28 |     | <span class='neutral'> * applications.</span>
  29 |     | <span class='neutral'> *</span>
  30 |     | <span class='neutral'> * Additionally, an {Approval} event is emitted on calls to {transferFrom}.</span>
  31 |     | <span class='neutral'> * This allows applications to reconstruct the allowance for all accounts just</span>
  32 |     | <span class='neutral'> * by listening to said events. Other implementations of the EIP may not emit</span>
  33 |     | <span class='neutral'> * these events, as it isn&#39;t required by the specification.</span>
  34 |     | <span class='neutral'> */</span>
  35 |     | <span class='neutral'>abstract contract ERC20Upgradeable is Initializable, ContextUpgradeable, IERC20, IERC20Metadata, IERC20Errors {</span>
  36 |     | <span class='neutral'>    /// @custom:storage-location erc7201:openzeppelin.storage.ERC20</span>
  37 |     | <span class='neutral'>    struct ERC20Storage {</span>
  38 |     | <span class='neutral'>        mapping(address account =&gt; uint256) _balances;</span>
  39 |     | <span class='neutral'></span>
  40 |     | <span class='neutral'>        mapping(address account =&gt; mapping(address spender =&gt; uint256)) _allowances;</span>
  41 |     | <span class='neutral'></span>
  42 |     | <span class='neutral'>        uint256 _totalSupply;</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>        string _name;</span>
  45 |     | <span class='neutral'>        string _symbol;</span>
  46 |     | <span class='neutral'>    }</span>
  47 |     | <span class='neutral'></span>
  48 |     | <span class='neutral'>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.ERC20&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</span>
  49 |     | <span class='neutral'>    bytes32 private constant ERC20StorageLocation = 0x52c63247e1f47db19d5ce0460030c497f067ca4cebf71ba98eeadabe20bace00;</span>
  50 |     | <span class='neutral'></span>
  51 |     | <span class='neutral'>    function _getERC20Storage() private pure returns (ERC20Storage storage $) {</span>
  52 |     | <span class='neutral'>        assembly {</span>
  53 |     | <span class='neutral'>            $.slot := ERC20StorageLocation</span>
  54 |     | <span class='neutral'>        }</span>
  55 |     | <span class='neutral'>    }</span>
  56 |     | <span class='neutral'></span>
  57 |     | <span class='neutral'>    /**</span>
  58 |     | <span class='neutral'>     * @dev Sets the values for {name} and {symbol}.</span>
  59 |     | <span class='neutral'>     *</span>
  60 |     | <span class='neutral'>     * All two of these values are immutable: they can only be set once during</span>
  61 |     | <span class='neutral'>     * construction.</span>
  62 |     | <span class='neutral'>     */</span>
  63 |     | <span class='neutral'>    function __ERC20_init(string memory name_, string memory symbol_) internal onlyInitializing {</span>
  64 |     | <span class='neutral'>        __ERC20_init_unchained(name_, symbol_);</span>
  65 |     | <span class='neutral'>    }</span>
  66 |     | <span class='neutral'></span>
  67 |     | <span class='neutral'>    function __ERC20_init_unchained(string memory name_, string memory symbol_) internal onlyInitializing {</span>
  68 |     | <span class='neutral'>        ERC20Storage storage $ = _getERC20Storage();</span>
  69 | *   | <span class='executed'>        $._name = name_;</span>
  70 |     | <span class='neutral'>        $._symbol = symbol_;</span>
  71 |     | <span class='neutral'>    }</span>
  72 |     | <span class='neutral'></span>
  73 |     | <span class='neutral'>    /**</span>
  74 |     | <span class='neutral'>     * @dev Returns the name of the token.</span>
  75 |     | <span class='neutral'>     */</span>
  76 |     | <span class='neutral'>    function name() public view virtual returns (string memory) {</span>
  77 |     | <span class='neutral'>        ERC20Storage storage $ = _getERC20Storage();</span>
  78 |     | <span class='neutral'>        return $._name;</span>
  79 |     | <span class='neutral'>    }</span>
  80 |     | <span class='neutral'></span>
  81 |     | <span class='neutral'>    /**</span>
  82 |     | <span class='neutral'>     * @dev Returns the symbol of the token, usually a shorter version of the</span>
  83 |     | <span class='neutral'>     * name.</span>
  84 |     | <span class='neutral'>     */</span>
  85 |     | <span class='neutral'>    function symbol() public view virtual returns (string memory) {</span>
  86 |     | <span class='neutral'>        ERC20Storage storage $ = _getERC20Storage();</span>
  87 |     | <span class='neutral'>        return $._symbol;</span>
  88 |     | <span class='neutral'>    }</span>
  89 |     | <span class='neutral'></span>
  90 |     | <span class='neutral'>    /**</span>
  91 |     | <span class='neutral'>     * @dev Returns the number of decimals used to get its user representation.</span>
  92 |     | <span class='neutral'>     * For example, if `decimals` equals `2`, a balance of `505` tokens should</span>
  93 |     | <span class='neutral'>     * be displayed to a user as `5.05` (`505 / 10 ** 2`).</span>
  94 |     | <span class='neutral'>     *</span>
  95 |     | <span class='neutral'>     * Tokens usually opt for a value of 18, imitating the relationship between</span>
  96 |     | <span class='neutral'>     * Ether and Wei. This is the default value returned by this function, unless</span>
  97 |     | <span class='neutral'>     * it&#39;s overridden.</span>
  98 |     | <span class='neutral'>     *</span>
  99 |     | <span class='neutral'>     * NOTE: This information is only used for _display_ purposes: it in</span>
 100 |     | <span class='neutral'>     * no way affects any of the arithmetic of the contract, including</span>
 101 |     | <span class='neutral'>     * {IERC20-balanceOf} and {IERC20-transfer}.</span>
 102 |     | <span class='neutral'>     */</span>
 103 |     | <span class='neutral'>    function decimals() public view virtual returns (uint8) {</span>
 104 |     | <span class='neutral'>        return 18;</span>
 105 |     | <span class='neutral'>    }</span>
 106 |     | <span class='neutral'></span>
 107 |     | <span class='neutral'>    /**</span>
 108 |     | <span class='neutral'>     * @dev See {IERC20-totalSupply}.</span>
 109 |     | <span class='neutral'>     */</span>
 110 |     | <span class='neutral'>    function totalSupply() public view virtual returns (uint256) {</span>
 111 |     | <span class='neutral'>        ERC20Storage storage $ = _getERC20Storage();</span>
 112 |     | <span class='neutral'>        return $._totalSupply;</span>
 113 |     | <span class='neutral'>    }</span>
 114 |     | <span class='neutral'></span>
 115 |     | <span class='neutral'>    /**</span>
 116 |     | <span class='neutral'>     * @dev See {IERC20-balanceOf}.</span>
 117 |     | <span class='neutral'>     */</span>
 118 |     | <span class='unexecuted'>    function balanceOf(address account) public view virtual returns (uint256) {</span>
 119 |     | <span class='neutral'>        ERC20Storage storage $ = _getERC20Storage();</span>
 120 |     | <span class='neutral'>        return $._balances[account];</span>
 121 |     | <span class='neutral'>    }</span>
 122 |     | <span class='neutral'></span>
 123 |     | <span class='neutral'>    /**</span>
 124 |     | <span class='neutral'>     * @dev See {IERC20-transfer}.</span>
 125 |     | <span class='neutral'>     *</span>
 126 |     | <span class='neutral'>     * Requirements:</span>
 127 |     | <span class='neutral'>     *</span>
 128 |     | <span class='neutral'>     * - `to` cannot be the zero address.</span>
 129 |     | <span class='neutral'>     * - the caller must have a balance of at least `value`.</span>
 130 |     | <span class='neutral'>     */</span>
 131 |     | <span class='neutral'>    function transfer(address to, uint256 value) public virtual returns (bool) {</span>
 132 |     | <span class='neutral'>        address owner = _msgSender();</span>
 133 |     | <span class='unexecuted'>        _transfer(owner, to, value);</span>
 134 |     | <span class='neutral'>        return true;</span>
 135 |     | <span class='neutral'>    }</span>
 136 |     | <span class='neutral'></span>
 137 |     | <span class='neutral'>    /**</span>
 138 |     | <span class='neutral'>     * @dev See {IERC20-allowance}.</span>
 139 |     | <span class='neutral'>     */</span>
 140 |     | <span class='neutral'>    function allowance(address owner, address spender) public view virtual returns (uint256) {</span>
 141 |     | <span class='neutral'>        ERC20Storage storage $ = _getERC20Storage();</span>
 142 | *   | <span class='executed'>        return $._allowances[owner][spender];</span>
 143 |     | <span class='neutral'>    }</span>
 144 |     | <span class='neutral'></span>
 145 |     | <span class='neutral'>    /**</span>
 146 |     | <span class='neutral'>     * @dev See {IERC20-approve}.</span>
 147 |     | <span class='neutral'>     *</span>
 148 |     | <span class='neutral'>     * NOTE: If `value` is the maximum `uint256`, the allowance is not updated on</span>
 149 |     | <span class='neutral'>     * `transferFrom`. This is semantically equivalent to an infinite approval.</span>
 150 |     | <span class='neutral'>     *</span>
 151 |     | <span class='neutral'>     * Requirements:</span>
 152 |     | <span class='neutral'>     *</span>
 153 |     | <span class='neutral'>     * - `spender` cannot be the zero address.</span>
 154 |     | <span class='neutral'>     */</span>
 155 |     | <span class='neutral'>    function approve(address spender, uint256 value) public virtual returns (bool) {</span>
 156 |     | <span class='neutral'>        address owner = _msgSender();</span>
 157 |     | <span class='neutral'>        _approve(owner, spender, value);</span>
 158 |     | <span class='neutral'>        return true;</span>
 159 |     | <span class='neutral'>    }</span>
 160 |     | <span class='neutral'></span>
 161 |     | <span class='neutral'>    /**</span>
 162 |     | <span class='neutral'>     * @dev See {IERC20-transferFrom}.</span>
 163 |     | <span class='neutral'>     *</span>
 164 |     | <span class='neutral'>     * Emits an {Approval} event indicating the updated allowance. This is not</span>
 165 |     | <span class='neutral'>     * required by the EIP. See the note at the beginning of {ERC20}.</span>
 166 |     | <span class='neutral'>     *</span>
 167 |     | <span class='neutral'>     * NOTE: Does not update the allowance if the current allowance</span>
 168 |     | <span class='neutral'>     * is the maximum `uint256`.</span>
 169 |     | <span class='neutral'>     *</span>
 170 |     | <span class='neutral'>     * Requirements:</span>
 171 |     | <span class='neutral'>     *</span>
 172 |     | <span class='neutral'>     * - `from` and `to` cannot be the zero address.</span>
 173 |     | <span class='neutral'>     * - `from` must have a balance of at least `value`.</span>
 174 |     | <span class='neutral'>     * - the caller must have allowance for ``from``&#39;s tokens of at least</span>
 175 |     | <span class='neutral'>     * `value`.</span>
 176 |     | <span class='neutral'>     */</span>
 177 |     | <span class='neutral'>    function transferFrom(address from, address to, uint256 value) public virtual returns (bool) {</span>
 178 |     | <span class='neutral'>        address spender = _msgSender();</span>
 179 |     | <span class='unexecuted'>        _spendAllowance(from, spender, value);</span>
 180 |     | <span class='unexecuted'>        _transfer(from, to, value);</span>
 181 |     | <span class='neutral'>        return true;</span>
 182 |     | <span class='neutral'>    }</span>
 183 |     | <span class='neutral'></span>
 184 |     | <span class='neutral'>    /**</span>
 185 |     | <span class='neutral'>     * @dev Moves a `value` amount of tokens from `from` to `to`.</span>
 186 |     | <span class='neutral'>     *</span>
 187 |     | <span class='neutral'>     * This internal function is equivalent to {transfer}, and can be used to</span>
 188 |     | <span class='neutral'>     * e.g. implement automatic token fees, slashing mechanisms, etc.</span>
 189 |     | <span class='neutral'>     *</span>
 190 |     | <span class='neutral'>     * Emits a {Transfer} event.</span>
 191 |     | <span class='neutral'>     *</span>
 192 |     | <span class='neutral'>     * NOTE: This function is not virtual, {_update} should be overridden instead.</span>
 193 |     | <span class='neutral'>     */</span>
 194 |     | <span class='unexecuted'>    function _transfer(address from, address to, uint256 value) internal {</span>
 195 |     | <span class='unexecuted'>        if (from == address(0)) {</span>
 196 |     | <span class='unexecuted'>            revert ERC20InvalidSender(address(0));</span>
 197 |     | <span class='neutral'>        }</span>
 198 |     | <span class='unexecuted'>        if (to == address(0)) {</span>
 199 |     | <span class='unexecuted'>            revert ERC20InvalidReceiver(address(0));</span>
 200 |     | <span class='neutral'>        }</span>
 201 |     | <span class='neutral'>        _update(from, to, value);</span>
 202 |     | <span class='neutral'>    }</span>
 203 |     | <span class='neutral'></span>
 204 |     | <span class='neutral'>    /**</span>
 205 |     | <span class='neutral'>     * @dev Transfers a `value` amount of tokens from `from` to `to`, or alternatively mints (or burns) if `from`</span>
 206 |     | <span class='neutral'>     * (or `to`) is the zero address. All customizations to transfers, mints, and burns should be done by overriding</span>
 207 |     | <span class='neutral'>     * this function.</span>
 208 |     | <span class='neutral'>     *</span>
 209 |     | <span class='neutral'>     * Emits a {Transfer} event.</span>
 210 |     | <span class='neutral'>     */</span>
 211 |     | <span class='neutral'>    function _update(address from, address to, uint256 value) internal virtual {</span>
 212 |     | <span class='neutral'>        ERC20Storage storage $ = _getERC20Storage();</span>
 213 | *   | <span class='executed'>        if (from == address(0)) {</span>
 214 |     | <span class='neutral'>            // Overflow check required: The rest of the code assumes that totalSupply never overflows</span>
 215 | *   | <span class='executed'>            $._totalSupply += value;</span>
 216 |     | <span class='neutral'>        } else {</span>
 217 |     | <span class='neutral'>            uint256 fromBalance = $._balances[from];</span>
 218 | *   | <span class='executed'>            if (fromBalance &lt; value) {</span>
 219 |     | <span class='unexecuted'>                revert ERC20InsufficientBalance(from, fromBalance, value);</span>
 220 |     | <span class='neutral'>            }</span>
 221 |     | <span class='neutral'>            unchecked {</span>
 222 |     | <span class='neutral'>                // Overflow not possible: value &lt;= fromBalance &lt;= totalSupply.</span>
 223 |     | <span class='neutral'>                $._balances[from] = fromBalance - value;</span>
 224 |     | <span class='neutral'>            }</span>
 225 |     | <span class='neutral'>        }</span>
 226 |     | <span class='neutral'></span>
 227 | *   | <span class='executed'>        if (to == address(0)) {</span>
 228 |     | <span class='neutral'>            unchecked {</span>
 229 |     | <span class='neutral'>                // Overflow not possible: value &lt;= totalSupply or value &lt;= fromBalance &lt;= totalSupply.</span>
 230 |     | <span class='neutral'>                $._totalSupply -= value;</span>
 231 |     | <span class='neutral'>            }</span>
 232 |     | <span class='neutral'>        } else {</span>
 233 |     | <span class='neutral'>            unchecked {</span>
 234 |     | <span class='neutral'>                // Overflow not possible: balance + value is at most totalSupply, which we know fits into a uint256.</span>
 235 |     | <span class='neutral'>                $._balances[to] += value;</span>
 236 |     | <span class='neutral'>            }</span>
 237 |     | <span class='neutral'>        }</span>
 238 |     | <span class='neutral'></span>
 239 | *   | <span class='executed'>        emit Transfer(from, to, value);</span>
 240 |     | <span class='neutral'>    }</span>
 241 |     | <span class='neutral'></span>
 242 |     | <span class='neutral'>    /**</span>
 243 |     | <span class='neutral'>     * @dev Creates a `value` amount of tokens and assigns them to `account`, by transferring it from address(0).</span>
 244 |     | <span class='neutral'>     * Relies on the `_update` mechanism</span>
 245 |     | <span class='neutral'>     *</span>
 246 |     | <span class='neutral'>     * Emits a {Transfer} event with `from` set to the zero address.</span>
 247 |     | <span class='neutral'>     *</span>
 248 |     | <span class='neutral'>     * NOTE: This function is not virtual, {_update} should be overridden instead.</span>
 249 |     | <span class='neutral'>     */</span>
 250 |     | <span class='neutral'>    function _mint(address account, uint256 value) internal {</span>
 251 | *   | <span class='executed'>        if (account == address(0)) {</span>
 252 |     | <span class='unexecuted'>            revert ERC20InvalidReceiver(address(0));</span>
 253 |     | <span class='neutral'>        }</span>
 254 |     | <span class='neutral'>        _update(address(0), account, value);</span>
 255 |     | <span class='neutral'>    }</span>
 256 |     | <span class='neutral'></span>
 257 |     | <span class='neutral'>    /**</span>
 258 |     | <span class='neutral'>     * @dev Destroys a `value` amount of tokens from `account`, lowering the total supply.</span>
 259 |     | <span class='neutral'>     * Relies on the `_update` mechanism.</span>
 260 |     | <span class='neutral'>     *</span>
 261 |     | <span class='neutral'>     * Emits a {Transfer} event with `to` set to the zero address.</span>
 262 |     | <span class='neutral'>     *</span>
 263 |     | <span class='neutral'>     * NOTE: This function is not virtual, {_update} should be overridden instead</span>
 264 |     | <span class='neutral'>     */</span>
 265 |     | <span class='neutral'>    function _burn(address account, uint256 value) internal {</span>
 266 | *   | <span class='executed'>        if (account == address(0)) {</span>
 267 |     | <span class='neutral'>            revert ERC20InvalidSender(address(0));</span>
 268 |     | <span class='neutral'>        }</span>
 269 |     | <span class='neutral'>        _update(account, address(0), value);</span>
 270 |     | <span class='neutral'>    }</span>
 271 |     | <span class='neutral'></span>
 272 |     | <span class='neutral'>    /**</span>
 273 |     | <span class='neutral'>     * @dev Sets `value` as the allowance of `spender` over the `owner` s tokens.</span>
 274 |     | <span class='neutral'>     *</span>
 275 |     | <span class='neutral'>     * This internal function is equivalent to `approve`, and can be used to</span>
 276 |     | <span class='neutral'>     * e.g. set automatic allowances for certain subsystems, etc.</span>
 277 |     | <span class='neutral'>     *</span>
 278 |     | <span class='neutral'>     * Emits an {Approval} event.</span>
 279 |     | <span class='neutral'>     *</span>
 280 |     | <span class='neutral'>     * Requirements:</span>
 281 |     | <span class='neutral'>     *</span>
 282 |     | <span class='neutral'>     * - `owner` cannot be the zero address.</span>
 283 |     | <span class='neutral'>     * - `spender` cannot be the zero address.</span>
 284 |     | <span class='neutral'>     *</span>
 285 |     | <span class='neutral'>     * Overrides to this logic should be done to the variant with an additional `bool emitEvent` argument.</span>
 286 |     | <span class='neutral'>     */</span>
 287 |     | <span class='neutral'>    function _approve(address owner, address spender, uint256 value) internal {</span>
 288 |     | <span class='neutral'>        _approve(owner, spender, value, true);</span>
 289 |     | <span class='neutral'>    }</span>
 290 |     | <span class='neutral'></span>
 291 |     | <span class='neutral'>    /**</span>
 292 |     | <span class='neutral'>     * @dev Variant of {_approve} with an optional flag to enable or disable the {Approval} event.</span>
 293 |     | <span class='neutral'>     *</span>
 294 |     | <span class='neutral'>     * By default (when calling {_approve}) the flag is set to true. On the other hand, approval changes made by</span>
 295 |     | <span class='neutral'>     * `_spendAllowance` during the `transferFrom` operation set the flag to false. This saves gas by not emitting any</span>
 296 |     | <span class='neutral'>     * `Approval` event during `transferFrom` operations.</span>
 297 |     | <span class='neutral'>     *</span>
 298 |     | <span class='neutral'>     * Anyone who wishes to continue emitting `Approval` events on the`transferFrom` operation can force the flag to</span>
 299 |     | <span class='neutral'>     * true using the following override:</span>
 300 |     | <span class='neutral'>     * ```</span>
 301 |     | <span class='neutral'>     * function _approve(address owner, address spender, uint256 value, bool) internal virtual override {</span>
 302 |     | <span class='neutral'>     *     super._approve(owner, spender, value, true);</span>
 303 |     | <span class='neutral'>     * }</span>
 304 |     | <span class='neutral'>     * ```</span>
 305 |     | <span class='neutral'>     *</span>
 306 |     | <span class='neutral'>     * Requirements are the same as {_approve}.</span>
 307 |     | <span class='neutral'>     */</span>
 308 |     | <span class='neutral'>    function _approve(address owner, address spender, uint256 value, bool emitEvent) internal virtual {</span>
 309 |     | <span class='neutral'>        ERC20Storage storage $ = _getERC20Storage();</span>
 310 | *   | <span class='executed'>        if (owner == address(0)) {</span>
 311 |     | <span class='unexecuted'>            revert ERC20InvalidApprover(address(0));</span>
 312 |     | <span class='neutral'>        }</span>
 313 | *   | <span class='executed'>        if (spender == address(0)) {</span>
 314 |     | <span class='unexecuted'>            revert ERC20InvalidSpender(address(0));</span>
 315 |     | <span class='neutral'>        }</span>
 316 | *   | <span class='executed'>        $._allowances[owner][spender] = value;</span>
 317 |     | <span class='neutral'>        if (emitEvent) {</span>
 318 |     | <span class='unexecuted'>            emit Approval(owner, spender, value);</span>
 319 |     | <span class='neutral'>        }</span>
 320 |     | <span class='neutral'>    }</span>
 321 |     | <span class='neutral'></span>
 322 |     | <span class='neutral'>    /**</span>
 323 |     | <span class='neutral'>     * @dev Updates `owner` s allowance for `spender` based on spent `value`.</span>
 324 |     | <span class='neutral'>     *</span>
 325 |     | <span class='neutral'>     * Does not update the allowance value in case of infinite allowance.</span>
 326 |     | <span class='neutral'>     * Revert if not enough allowance is available.</span>
 327 |     | <span class='neutral'>     *</span>
 328 |     | <span class='neutral'>     * Does not emit an {Approval} event.</span>
 329 |     | <span class='neutral'>     */</span>
 330 | *   | <span class='executed'>    function _spendAllowance(address owner, address spender, uint256 value) internal virtual {</span>
 331 |     | <span class='neutral'>        uint256 currentAllowance = allowance(owner, spender);</span>
 332 | *   | <span class='executed'>        if (currentAllowance != type(uint256).max) {</span>
 333 | *   | <span class='executed'>            if (currentAllowance &lt; value) {</span>
 334 |     | <span class='unexecuted'>                revert ERC20InsufficientAllowance(spender, currentAllowance, value);</span>
 335 |     | <span class='neutral'>            }</span>
 336 |     | <span class='neutral'>            unchecked {</span>
 337 |     | <span class='neutral'>                _approve(owner, spender, currentAllowance - value, false);</span>
 338 |     | <span class='neutral'>            }</span>
 339 |     | <span class='neutral'>        }</span>
 340 |     | <span class='neutral'>    }</span>
 341 |     | <span class='neutral'>}</span>
 342 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/token/ERC20/extensions/ERC4626Upgradeable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/extensions/ERC4626.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IERC20} from &quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;;</span>
   7 |     | <span class='neutral'>import {IERC20Metadata} from &quot;@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol&quot;;</span>
   8 |     | <span class='neutral'>import {ERC20Upgradeable} from &quot;../ERC20Upgradeable.sol&quot;;</span>
   9 |     | <span class='neutral'>import {SafeERC20} from &quot;@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol&quot;;</span>
  10 |     | <span class='neutral'>import {IERC4626} from &quot;@openzeppelin/contracts/interfaces/IERC4626.sol&quot;;</span>
  11 |     | <span class='neutral'>import {Math} from &quot;@openzeppelin/contracts/utils/math/Math.sol&quot;;</span>
  12 |     | <span class='neutral'>import {Initializable} from &quot;../../../proxy/utils/Initializable.sol&quot;;</span>
  13 |     | <span class='neutral'></span>
  14 |     | <span class='neutral'>/**</span>
  15 |     | <span class='neutral'> * @dev Implementation of the ERC4626 &quot;Tokenized Vault Standard&quot; as defined in</span>
  16 |     | <span class='neutral'> * https://eips.ethereum.org/EIPS/eip-4626[EIP-4626].</span>
  17 |     | <span class='neutral'> *</span>
  18 |     | <span class='neutral'> * This extension allows the minting and burning of &quot;shares&quot; (represented using the ERC20 inheritance) in exchange for</span>
  19 |     | <span class='neutral'> * underlying &quot;assets&quot; through standardized {deposit}, {mint}, {redeem} and {burn} workflows. This contract extends</span>
  20 |     | <span class='neutral'> * the ERC20 standard. Any additional extensions included along it would affect the &quot;shares&quot; token represented by this</span>
  21 |     | <span class='neutral'> * contract and not the &quot;assets&quot; token which is an independent contract.</span>
  22 |     | <span class='neutral'> *</span>
  23 |     | <span class='neutral'> * [CAUTION]</span>
  24 |     | <span class='neutral'> * ====</span>
  25 |     | <span class='neutral'> * In empty (or nearly empty) ERC-4626 vaults, deposits are at high risk of being stolen through frontrunning</span>
  26 |     | <span class='neutral'> * with a &quot;donation&quot; to the vault that inflates the price of a share. This is variously known as a donation or inflation</span>
  27 |     | <span class='neutral'> * attack and is essentially a problem of slippage. Vault deployers can protect against this attack by making an initial</span>
  28 |     | <span class='neutral'> * deposit of a non-trivial amount of the asset, such that price manipulation becomes infeasible. Withdrawals may</span>
  29 |     | <span class='neutral'> * similarly be affected by slippage. Users can protect against this attack as well as unexpected slippage in general by</span>
  30 |     | <span class='neutral'> * verifying the amount received is as expected, using a wrapper that performs these checks such as</span>
  31 |     | <span class='neutral'> * https://github.com/fei-protocol/ERC4626#erc4626router-and-base[ERC4626Router].</span>
  32 |     | <span class='neutral'> *</span>
  33 |     | <span class='neutral'> * Since v4.9, this implementation uses virtual assets and shares to mitigate that risk. The `_decimalsOffset()`</span>
  34 |     | <span class='neutral'> * corresponds to an offset in the decimal representation between the underlying asset&#39;s decimals and the vault</span>
  35 |     | <span class='neutral'> * decimals. This offset also determines the rate of virtual shares to virtual assets in the vault, which itself</span>
  36 |     | <span class='neutral'> * determines the initial exchange rate. While not fully preventing the attack, analysis shows that the default offset</span>
  37 |     | <span class='neutral'> * (0) makes it non-profitable, as a result of the value being captured by the virtual shares (out of the attacker&#39;s</span>
  38 |     | <span class='neutral'> * donation) matching the attacker&#39;s expected gains. With a larger offset, the attack becomes orders of magnitude more</span>
  39 |     | <span class='neutral'> * expensive than it is profitable. More details about the underlying math can be found</span>
  40 |     | <span class='neutral'> * xref:erc4626.adoc#inflation-attack[here].</span>
  41 |     | <span class='neutral'> *</span>
  42 |     | <span class='neutral'> * The drawback of this approach is that the virtual shares do capture (a very small) part of the value being accrued</span>
  43 |     | <span class='neutral'> * to the vault. Also, if the vault experiences losses, the users try to exit the vault, the virtual shares and assets</span>
  44 |     | <span class='neutral'> * will cause the first user to exit to experience reduced losses in detriment to the last users that will experience</span>
  45 |     | <span class='neutral'> * bigger losses. Developers willing to revert back to the pre-v4.9 behavior just need to override the</span>
  46 |     | <span class='neutral'> * `_convertToShares` and `_convertToAssets` functions.</span>
  47 |     | <span class='neutral'> *</span>
  48 |     | <span class='neutral'> * To learn more, check out our xref:ROOT:erc4626.adoc[ERC-4626 guide].</span>
  49 |     | <span class='neutral'> * ====</span>
  50 |     | <span class='neutral'> */</span>
  51 |     | <span class='neutral'>abstract contract ERC4626Upgradeable is Initializable, ERC20Upgradeable, IERC4626 {</span>
  52 |     | <span class='neutral'>    using Math for uint256;</span>
  53 |     | <span class='neutral'></span>
  54 |     | <span class='neutral'>    /// @custom:storage-location erc7201:openzeppelin.storage.ERC4626</span>
  55 |     | <span class='neutral'>    struct ERC4626Storage {</span>
  56 |     | <span class='neutral'>        IERC20 _asset;</span>
  57 |     | <span class='neutral'>        uint8 _underlyingDecimals;</span>
  58 |     | <span class='neutral'>    }</span>
  59 |     | <span class='neutral'></span>
  60 |     | <span class='neutral'>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.ERC4626&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</span>
  61 |     | <span class='neutral'>    bytes32 private constant ERC4626StorageLocation = 0x0773e532dfede91f04b12a73d3d2acd361424f41f76b4fb79f090161e36b4e00;</span>
  62 |     | <span class='neutral'></span>
  63 |     | <span class='neutral'>    function _getERC4626Storage() private pure returns (ERC4626Storage storage $) {</span>
  64 |     | <span class='unexecuted'>        assembly {</span>
  65 |     | <span class='neutral'>            $.slot := ERC4626StorageLocation</span>
  66 |     | <span class='neutral'>        }</span>
  67 |     | <span class='neutral'>    }</span>
  68 |     | <span class='neutral'></span>
  69 |     | <span class='neutral'>    /**</span>
  70 |     | <span class='neutral'>     * @dev Attempted to deposit more assets than the max amount for `receiver`.</span>
  71 |     | <span class='neutral'>     */</span>
  72 |     | <span class='neutral'>    error ERC4626ExceededMaxDeposit(address receiver, uint256 assets, uint256 max);</span>
  73 |     | <span class='neutral'></span>
  74 |     | <span class='neutral'>    /**</span>
  75 |     | <span class='neutral'>     * @dev Attempted to mint more shares than the max amount for `receiver`.</span>
  76 |     | <span class='neutral'>     */</span>
  77 |     | <span class='neutral'>    error ERC4626ExceededMaxMint(address receiver, uint256 shares, uint256 max);</span>
  78 |     | <span class='neutral'></span>
  79 |     | <span class='neutral'>    /**</span>
  80 |     | <span class='neutral'>     * @dev Attempted to withdraw more assets than the max amount for `receiver`.</span>
  81 |     | <span class='neutral'>     */</span>
  82 |     | <span class='neutral'>    error ERC4626ExceededMaxWithdraw(address owner, uint256 assets, uint256 max);</span>
  83 |     | <span class='neutral'></span>
  84 |     | <span class='neutral'>    /**</span>
  85 |     | <span class='neutral'>     * @dev Attempted to redeem more shares than the max amount for `receiver`.</span>
  86 |     | <span class='neutral'>     */</span>
  87 |     | <span class='neutral'>    error ERC4626ExceededMaxRedeem(address owner, uint256 shares, uint256 max);</span>
  88 |     | <span class='neutral'></span>
  89 |     | <span class='neutral'>    /**</span>
  90 |     | <span class='neutral'>     * @dev Set the underlying asset contract. This must be an ERC20-compatible contract (ERC20 or ERC777).</span>
  91 |     | <span class='neutral'>     */</span>
  92 |     | <span class='neutral'>    function __ERC4626_init(IERC20 asset_) internal onlyInitializing {</span>
  93 |     | <span class='neutral'>        __ERC4626_init_unchained(asset_);</span>
  94 |     | <span class='neutral'>    }</span>
  95 |     | <span class='neutral'></span>
  96 |     | <span class='neutral'>    function __ERC4626_init_unchained(IERC20 asset_) internal onlyInitializing {</span>
  97 |     | <span class='neutral'>        ERC4626Storage storage $ = _getERC4626Storage();</span>
  98 | *   | <span class='executed'>        (bool success, uint8 assetDecimals) = _tryGetAssetDecimals(asset_);</span>
  99 | *   | <span class='executed'>        $._underlyingDecimals = success ? assetDecimals : 18;</span>
 100 |     | <span class='neutral'>        $._asset = asset_;</span>
 101 |     | <span class='neutral'>    }</span>
 102 |     | <span class='neutral'></span>
 103 |     | <span class='neutral'>    /**</span>
 104 |     | <span class='neutral'>     * @dev Attempts to fetch the asset decimals. A return value of false indicates that the attempt failed in some way.</span>
 105 |     | <span class='neutral'>     */</span>
 106 | *   | <span class='executed'>    function _tryGetAssetDecimals(IERC20 asset_) private view returns (bool, uint8) {</span>
 107 | *   | <span class='executed'>        (bool success, bytes memory encodedDecimals) = address(asset_).staticcall(</span>
 108 | *   | <span class='executed'>            abi.encodeCall(IERC20Metadata.decimals, ())</span>
 109 |     | <span class='neutral'>        );</span>
 110 | *   | <span class='executed'>        if (success &amp;&amp; encodedDecimals.length &gt;= 32) {</span>
 111 | *   | <span class='executed'>            uint256 returnedDecimals = abi.decode(encodedDecimals, (uint256));</span>
 112 | *   | <span class='executed'>            if (returnedDecimals &lt;= type(uint8).max) {</span>
 113 | *   | <span class='executed'>                return (true, uint8(returnedDecimals));</span>
 114 |     | <span class='neutral'>            }</span>
 115 |     | <span class='neutral'>        }</span>
 116 |     | <span class='unexecuted'>        return (false, 0);</span>
 117 |     | <span class='neutral'>    }</span>
 118 |     | <span class='neutral'></span>
 119 |     | <span class='neutral'>    /**</span>
 120 |     | <span class='neutral'>     * @dev Decimals are computed by adding the decimal offset on top of the underlying asset&#39;s decimals. This</span>
 121 |     | <span class='neutral'>     * &quot;original&quot; value is cached during construction of the vault contract. If this read operation fails (e.g., the</span>
 122 |     | <span class='neutral'>     * asset has not been created yet), a default of 18 is used to represent the underlying asset&#39;s decimals.</span>
 123 |     | <span class='neutral'>     *</span>
 124 |     | <span class='neutral'>     * See {IERC20Metadata-decimals}.</span>
 125 |     | <span class='neutral'>     */</span>
 126 |     | <span class='neutral'>    function decimals() public view virtual override(IERC20Metadata, ERC20Upgradeable) returns (uint8) {</span>
 127 |     | <span class='neutral'>        ERC4626Storage storage $ = _getERC4626Storage();</span>
 128 |     | <span class='neutral'>        return $._underlyingDecimals + _decimalsOffset();</span>
 129 |     | <span class='neutral'>    }</span>
 130 |     | <span class='neutral'></span>
 131 |     | <span class='neutral'>    /** @dev See {IERC4626-asset}. */</span>
 132 |     | <span class='neutral'>    function asset() public view virtual returns (address) {</span>
 133 |     | <span class='neutral'>        ERC4626Storage storage $ = _getERC4626Storage();</span>
 134 |     | <span class='neutral'>        return address($._asset);</span>
 135 |     | <span class='neutral'>    }</span>
 136 |     | <span class='neutral'></span>
 137 |     | <span class='neutral'>    /** @dev See {IERC4626-totalAssets}. */</span>
 138 | *   | <span class='executed'>    function totalAssets() public view virtual returns (uint256) {</span>
 139 |     | <span class='neutral'>        ERC4626Storage storage $ = _getERC4626Storage();</span>
 140 | *   | <span class='executed'>        return $._asset.balanceOf(address(this));</span>
 141 |     | <span class='neutral'>    }</span>
 142 |     | <span class='neutral'></span>
 143 |     | <span class='neutral'>    /** @dev See {IERC4626-convertToShares}. */</span>
 144 |     | <span class='neutral'>    function convertToShares(uint256 assets) public view virtual returns (uint256) {</span>
 145 | *   | <span class='executed'>        return _convertToShares(assets, Math.Rounding.Floor);</span>
 146 |     | <span class='neutral'>    }</span>
 147 |     | <span class='neutral'></span>
 148 |     | <span class='neutral'>    /** @dev See {IERC4626-convertToAssets}. */</span>
 149 |     | <span class='neutral'>    function convertToAssets(uint256 shares) public view virtual returns (uint256) {</span>
 150 | *   | <span class='executed'>        return _convertToAssets(shares, Math.Rounding.Floor);</span>
 151 |     | <span class='neutral'>    }</span>
 152 |     | <span class='neutral'></span>
 153 |     | <span class='neutral'>    /** @dev See {IERC4626-maxDeposit}. */</span>
 154 |     | <span class='neutral'>    function maxDeposit(address) public view virtual returns (uint256) {</span>
 155 |     | <span class='neutral'>        return type(uint256).max;</span>
 156 |     | <span class='neutral'>    }</span>
 157 |     | <span class='neutral'></span>
 158 |     | <span class='neutral'>    /** @dev See {IERC4626-maxMint}. */</span>
 159 |     | <span class='neutral'>    function maxMint(address) public view virtual returns (uint256) {</span>
 160 |     | <span class='neutral'>        return type(uint256).max;</span>
 161 |     | <span class='neutral'>    }</span>
 162 |     | <span class='neutral'></span>
 163 |     | <span class='neutral'>    /** @dev See {IERC4626-maxWithdraw}. */</span>
 164 |     | <span class='neutral'>    function maxWithdraw(address owner) public view virtual returns (uint256) {</span>
 165 |     | <span class='unexecuted'>        return _convertToAssets(balanceOf(owner), Math.Rounding.Floor);</span>
 166 |     | <span class='neutral'>    }</span>
 167 |     | <span class='neutral'></span>
 168 |     | <span class='neutral'>    /** @dev See {IERC4626-maxRedeem}. */</span>
 169 |     | <span class='neutral'>    function maxRedeem(address owner) public view virtual returns (uint256) {</span>
 170 |     | <span class='neutral'>        return balanceOf(owner);</span>
 171 |     | <span class='neutral'>    }</span>
 172 |     | <span class='neutral'></span>
 173 |     | <span class='neutral'>    /** @dev See {IERC4626-previewDeposit}. */</span>
 174 |     | <span class='neutral'>    function previewDeposit(uint256 assets) public view virtual returns (uint256) {</span>
 175 |     | <span class='neutral'>        return _convertToShares(assets, Math.Rounding.Floor);</span>
 176 |     | <span class='neutral'>    }</span>
 177 |     | <span class='neutral'></span>
 178 |     | <span class='neutral'>    /** @dev See {IERC4626-previewMint}. */</span>
 179 |     | <span class='neutral'>    function previewMint(uint256 shares) public view virtual returns (uint256) {</span>
 180 |     | <span class='unexecuted'>        return _convertToAssets(shares, Math.Rounding.Ceil);</span>
 181 |     | <span class='neutral'>    }</span>
 182 |     | <span class='neutral'></span>
 183 |     | <span class='neutral'>    /** @dev See {IERC4626-previewWithdraw}. */</span>
 184 |     | <span class='neutral'>    function previewWithdraw(uint256 assets) public view virtual returns (uint256) {</span>
 185 |     | <span class='unexecuted'>        return _convertToShares(assets, Math.Rounding.Ceil);</span>
 186 |     | <span class='neutral'>    }</span>
 187 |     | <span class='neutral'></span>
 188 |     | <span class='neutral'>    /** @dev See {IERC4626-previewRedeem}. */</span>
 189 |     | <span class='neutral'>    function previewRedeem(uint256 shares) public view virtual returns (uint256) {</span>
 190 |     | <span class='neutral'>        return _convertToAssets(shares, Math.Rounding.Floor);</span>
 191 |     | <span class='neutral'>    }</span>
 192 |     | <span class='neutral'></span>
 193 |     | <span class='neutral'>    /** @dev See {IERC4626-deposit}. */</span>
 194 |     | <span class='neutral'>    function deposit(uint256 assets, address receiver) public virtual returns (uint256) {</span>
 195 |     | <span class='neutral'>        uint256 maxAssets = maxDeposit(receiver);</span>
 196 |     | <span class='neutral'>        if (assets &gt; maxAssets) {</span>
 197 |     | <span class='neutral'>            revert ERC4626ExceededMaxDeposit(receiver, assets, maxAssets);</span>
 198 |     | <span class='neutral'>        }</span>
 199 |     | <span class='neutral'></span>
 200 |     | <span class='neutral'>        uint256 shares = previewDeposit(assets);</span>
 201 | *   | <span class='executed'>        _deposit(_msgSender(), receiver, assets, shares);</span>
 202 |     | <span class='neutral'></span>
 203 |     | <span class='neutral'>        return shares;</span>
 204 |     | <span class='neutral'>    }</span>
 205 |     | <span class='neutral'></span>
 206 |     | <span class='neutral'>    /** @dev See {IERC4626-mint}.</span>
 207 |     | <span class='neutral'>     *</span>
 208 |     | <span class='neutral'>     * As opposed to {deposit}, minting is allowed even if the vault is in a state where the price of a share is zero.</span>
 209 |     | <span class='neutral'>     * In this case, the shares will be minted without requiring any assets to be deposited.</span>
 210 |     | <span class='neutral'>     */</span>
 211 |     | <span class='neutral'>    function mint(uint256 shares, address receiver) public virtual returns (uint256) {</span>
 212 |     | <span class='neutral'>        uint256 maxShares = maxMint(receiver);</span>
 213 |     | <span class='neutral'>        if (shares &gt; maxShares) {</span>
 214 |     | <span class='neutral'>            revert ERC4626ExceededMaxMint(receiver, shares, maxShares);</span>
 215 |     | <span class='neutral'>        }</span>
 216 |     | <span class='neutral'></span>
 217 |     | <span class='neutral'>        uint256 assets = previewMint(shares);</span>
 218 |     | <span class='unexecuted'>        _deposit(_msgSender(), receiver, assets, shares);</span>
 219 |     | <span class='neutral'></span>
 220 |     | <span class='neutral'>        return assets;</span>
 221 |     | <span class='neutral'>    }</span>
 222 |     | <span class='neutral'></span>
 223 |     | <span class='neutral'>    /** @dev See {IERC4626-withdraw}. */</span>
 224 |     | <span class='neutral'>    function withdraw(uint256 assets, address receiver, address owner) public virtual returns (uint256) {</span>
 225 |     | <span class='neutral'>        uint256 maxAssets = maxWithdraw(owner);</span>
 226 |     | <span class='unexecuted'>        if (assets &gt; maxAssets) {</span>
 227 |     | <span class='unexecuted'>            revert ERC4626ExceededMaxWithdraw(owner, assets, maxAssets);</span>
 228 |     | <span class='neutral'>        }</span>
 229 |     | <span class='neutral'></span>
 230 |     | <span class='neutral'>        uint256 shares = previewWithdraw(assets);</span>
 231 |     | <span class='unexecuted'>        _withdraw(_msgSender(), receiver, owner, assets, shares);</span>
 232 |     | <span class='neutral'></span>
 233 |     | <span class='neutral'>        return shares;</span>
 234 |     | <span class='neutral'>    }</span>
 235 |     | <span class='neutral'></span>
 236 |     | <span class='neutral'>    /** @dev See {IERC4626-redeem}. */</span>
 237 |     | <span class='neutral'>    function redeem(uint256 shares, address receiver, address owner) public virtual returns (uint256) {</span>
 238 |     | <span class='neutral'>        uint256 maxShares = maxRedeem(owner);</span>
 239 | *   | <span class='executed'>        if (shares &gt; maxShares) {</span>
 240 |     | <span class='unexecuted'>            revert ERC4626ExceededMaxRedeem(owner, shares, maxShares);</span>
 241 |     | <span class='neutral'>        }</span>
 242 |     | <span class='neutral'></span>
 243 |     | <span class='neutral'>        uint256 assets = previewRedeem(shares);</span>
 244 | *   | <span class='executed'>        _withdraw(_msgSender(), receiver, owner, assets, shares);</span>
 245 |     | <span class='neutral'></span>
 246 |     | <span class='neutral'>        return assets;</span>
 247 |     | <span class='neutral'>    }</span>
 248 |     | <span class='neutral'></span>
 249 |     | <span class='neutral'>    /**</span>
 250 |     | <span class='neutral'>     * @dev Internal conversion function (from assets to shares) with support for rounding direction.</span>
 251 |     | <span class='neutral'>     */</span>
 252 |     | <span class='neutral'>    function _convertToShares(uint256 assets, Math.Rounding rounding) internal view virtual returns (uint256) {</span>
 253 |     | <span class='neutral'>        return assets.mulDiv(totalSupply() + 10 ** _decimalsOffset(), totalAssets() + 1, rounding);</span>
 254 |     | <span class='neutral'>    }</span>
 255 |     | <span class='neutral'></span>
 256 |     | <span class='neutral'>    /**</span>
 257 |     | <span class='neutral'>     * @dev Internal conversion function (from shares to assets) with support for rounding direction.</span>
 258 |     | <span class='neutral'>     */</span>
 259 |     | <span class='neutral'>    function _convertToAssets(uint256 shares, Math.Rounding rounding) internal view virtual returns (uint256) {</span>
 260 |     | <span class='neutral'>        return shares.mulDiv(totalAssets() + 1, totalSupply() + 10 ** _decimalsOffset(), rounding);</span>
 261 |     | <span class='neutral'>    }</span>
 262 |     | <span class='neutral'></span>
 263 |     | <span class='neutral'>    /**</span>
 264 |     | <span class='neutral'>     * @dev Deposit/mint common workflow.</span>
 265 |     | <span class='neutral'>     */</span>
 266 | *   | <span class='executed'>    function _deposit(address caller, address receiver, uint256 assets, uint256 shares) internal virtual {</span>
 267 |     | <span class='neutral'>        ERC4626Storage storage $ = _getERC4626Storage();</span>
 268 |     | <span class='neutral'>        // If _asset is ERC777, `transferFrom` can trigger a reentrancy BEFORE the transfer happens through the</span>
 269 |     | <span class='neutral'>        // `tokensToSend` hook. On the other hand, the `tokenReceived` hook, that is triggered after the transfer,</span>
 270 |     | <span class='neutral'>        // calls the vault, which is assumed not malicious.</span>
 271 |     | <span class='neutral'>        //</span>
 272 |     | <span class='neutral'>        // Conclusion: we need to do the transfer before we mint so that any reentrancy would happen before the</span>
 273 |     | <span class='neutral'>        // assets are transferred and before the shares are minted, which is a valid state.</span>
 274 |     | <span class='neutral'>        // slither-disable-next-line reentrancy-no-eth</span>
 275 | *   | <span class='executed'>        SafeERC20.safeTransferFrom($._asset, caller, address(this), assets);</span>
 276 |     | <span class='neutral'>        _mint(receiver, shares);</span>
 277 |     | <span class='neutral'></span>
 278 | *   | <span class='executed'>        emit Deposit(caller, receiver, assets, shares);</span>
 279 |     | <span class='neutral'>    }</span>
 280 |     | <span class='neutral'></span>
 281 |     | <span class='neutral'>    /**</span>
 282 |     | <span class='neutral'>     * @dev Withdraw/redeem common workflow.</span>
 283 |     | <span class='neutral'>     */</span>
 284 | *   | <span class='executed'>    function _withdraw(</span>
 285 |     | <span class='neutral'>        address caller,</span>
 286 |     | <span class='neutral'>        address receiver,</span>
 287 |     | <span class='neutral'>        address owner,</span>
 288 |     | <span class='neutral'>        uint256 assets,</span>
 289 |     | <span class='neutral'>        uint256 shares</span>
 290 |     | <span class='neutral'>    ) internal virtual {</span>
 291 |     | <span class='neutral'>        ERC4626Storage storage $ = _getERC4626Storage();</span>
 292 | *   | <span class='executed'>        if (caller != owner) {</span>
 293 | *   | <span class='executed'>            _spendAllowance(owner, caller, shares);</span>
 294 |     | <span class='neutral'>        }</span>
 295 |     | <span class='neutral'></span>
 296 |     | <span class='neutral'>        // If _asset is ERC777, `transfer` can trigger a reentrancy AFTER the transfer happens through the</span>
 297 |     | <span class='neutral'>        // `tokensReceived` hook. On the other hand, the `tokensToSend` hook, that is triggered before the transfer,</span>
 298 |     | <span class='neutral'>        // calls the vault, which is assumed not malicious.</span>
 299 |     | <span class='neutral'>        //</span>
 300 |     | <span class='neutral'>        // Conclusion: we need to do the transfer after the burn so that any reentrancy would happen after the</span>
 301 |     | <span class='neutral'>        // shares are burned and after the assets are transferred, which is a valid state.</span>
 302 |     | <span class='neutral'>        _burn(owner, shares);</span>
 303 | *   | <span class='executed'>        SafeERC20.safeTransfer($._asset, receiver, assets);</span>
 304 |     | <span class='neutral'></span>
 305 | *   | <span class='executed'>        emit Withdraw(caller, receiver, owner, assets, shares);</span>
 306 |     | <span class='neutral'>    }</span>
 307 |     | <span class='neutral'></span>
 308 |     | <span class='neutral'>    function _decimalsOffset() internal view virtual returns (uint8) {</span>
 309 |     | <span class='neutral'>        return 0;</span>
 310 |     | <span class='neutral'>    }</span>
 311 |     | <span class='neutral'>}</span>
 312 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/utils/ContextUpgradeable.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.1) (utils/Context.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'>import {Initializable} from &quot;../proxy/utils/Initializable.sol&quot;;</span>
  6 |     | <span class='neutral'></span>
  7 |     | <span class='neutral'>/**</span>
  8 |     | <span class='neutral'> * @dev Provides information about the current execution context, including the</span>
  9 |     | <span class='neutral'> * sender of the transaction and its data. While these are generally available</span>
 10 |     | <span class='neutral'> * via msg.sender and msg.data, they should not be accessed in such a direct</span>
 11 |     | <span class='neutral'> * manner, since when dealing with meta-transactions the account sending and</span>
 12 |     | <span class='neutral'> * paying for execution may not be the actual sender (as far as an application</span>
 13 |     | <span class='neutral'> * is concerned).</span>
 14 |     | <span class='neutral'> *</span>
 15 |     | <span class='neutral'> * This contract is only required for intermediate, library-like contracts.</span>
 16 |     | <span class='neutral'> */</span>
 17 |     | <span class='neutral'>abstract contract ContextUpgradeable is Initializable {</span>
 18 |     | <span class='neutral'>    function __Context_init() internal onlyInitializing {</span>
 19 |     | <span class='neutral'>    }</span>
 20 |     | <span class='neutral'></span>
 21 |     | <span class='neutral'>    function __Context_init_unchained() internal onlyInitializing {</span>
 22 |     | <span class='neutral'>    }</span>
 23 |     | <span class='neutral'>    function _msgSender() internal view virtual returns (address) {</span>
 24 | *   | <span class='executed'>        return msg.sender;</span>
 25 |     | <span class='neutral'>    }</span>
 26 |     | <span class='neutral'></span>
 27 |     | <span class='neutral'>    function _msgData() internal view virtual returns (bytes calldata) {</span>
 28 |     | <span class='neutral'>        return msg.data;</span>
 29 |     | <span class='neutral'>    }</span>
 30 |     | <span class='neutral'></span>
 31 |     | <span class='neutral'>    function _contextSuffixLength() internal view virtual returns (uint256) {</span>
 32 |     | <span class='neutral'>        return 0;</span>
 33 |     | <span class='neutral'>    }</span>
 34 |     | <span class='neutral'>}</span>
 35 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/utils/PausableUpgradeable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/Pausable.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {ContextUpgradeable} from &quot;../utils/ContextUpgradeable.sol&quot;;</span>
   7 |     | <span class='neutral'>import {Initializable} from &quot;../proxy/utils/Initializable.sol&quot;;</span>
   8 |     | <span class='neutral'></span>
   9 |     | <span class='neutral'>/**</span>
  10 |     | <span class='neutral'> * @dev Contract module which allows children to implement an emergency stop</span>
  11 |     | <span class='neutral'> * mechanism that can be triggered by an authorized account.</span>
  12 |     | <span class='neutral'> *</span>
  13 |     | <span class='neutral'> * This module is used through inheritance. It will make available the</span>
  14 |     | <span class='neutral'> * modifiers `whenNotPaused` and `whenPaused`, which can be applied to</span>
  15 |     | <span class='neutral'> * the functions of your contract. Note that they will not be pausable by</span>
  16 |     | <span class='neutral'> * simply including this module, only once the modifiers are put in place.</span>
  17 |     | <span class='neutral'> */</span>
  18 |     | <span class='neutral'>abstract contract PausableUpgradeable is Initializable, ContextUpgradeable {</span>
  19 |     | <span class='neutral'>    /// @custom:storage-location erc7201:openzeppelin.storage.Pausable</span>
  20 |     | <span class='neutral'>    struct PausableStorage {</span>
  21 |     | <span class='neutral'>        bool _paused;</span>
  22 |     | <span class='neutral'>    }</span>
  23 |     | <span class='neutral'></span>
  24 |     | <span class='neutral'>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.Pausable&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</span>
  25 |     | <span class='neutral'>    bytes32 private constant PausableStorageLocation = 0xcd5ed15c6e187e77e9aee88184c21f4f2182ab5827cb3b7e07fbedcd63f03300;</span>
  26 |     | <span class='neutral'></span>
  27 |     | <span class='neutral'>    function _getPausableStorage() private pure returns (PausableStorage storage $) {</span>
  28 | *   | <span class='executed'>        assembly {</span>
  29 |     | <span class='neutral'>            $.slot := PausableStorageLocation</span>
  30 |     | <span class='neutral'>        }</span>
  31 |     | <span class='neutral'>    }</span>
  32 |     | <span class='neutral'></span>
  33 |     | <span class='neutral'>    /**</span>
  34 |     | <span class='neutral'>     * @dev Emitted when the pause is triggered by `account`.</span>
  35 |     | <span class='neutral'>     */</span>
  36 |     | <span class='neutral'>    event Paused(address account);</span>
  37 |     | <span class='neutral'></span>
  38 |     | <span class='neutral'>    /**</span>
  39 |     | <span class='neutral'>     * @dev Emitted when the pause is lifted by `account`.</span>
  40 |     | <span class='neutral'>     */</span>
  41 |     | <span class='neutral'>    event Unpaused(address account);</span>
  42 |     | <span class='neutral'></span>
  43 |     | <span class='neutral'>    /**</span>
  44 |     | <span class='neutral'>     * @dev The operation failed because the contract is paused.</span>
  45 |     | <span class='neutral'>     */</span>
  46 |     | <span class='neutral'>    error EnforcedPause();</span>
  47 |     | <span class='neutral'></span>
  48 |     | <span class='neutral'>    /**</span>
  49 |     | <span class='neutral'>     * @dev The operation failed because the contract is not paused.</span>
  50 |     | <span class='neutral'>     */</span>
  51 |     | <span class='neutral'>    error ExpectedPause();</span>
  52 |     | <span class='neutral'></span>
  53 |     | <span class='neutral'>    /**</span>
  54 |     | <span class='neutral'>     * @dev Initializes the contract in unpaused state.</span>
  55 |     | <span class='neutral'>     */</span>
  56 |     | <span class='neutral'>    function __Pausable_init() internal onlyInitializing {</span>
  57 |     | <span class='neutral'>        __Pausable_init_unchained();</span>
  58 |     | <span class='neutral'>    }</span>
  59 |     | <span class='neutral'></span>
  60 |     | <span class='neutral'>    function __Pausable_init_unchained() internal onlyInitializing {</span>
  61 |     | <span class='neutral'>        PausableStorage storage $ = _getPausableStorage();</span>
  62 |     | <span class='neutral'>        $._paused = false;</span>
  63 |     | <span class='neutral'>    }</span>
  64 |     | <span class='neutral'></span>
  65 |     | <span class='neutral'>    /**</span>
  66 |     | <span class='neutral'>     * @dev Modifier to make a function callable only when the contract is not paused.</span>
  67 |     | <span class='neutral'>     *</span>
  68 |     | <span class='neutral'>     * Requirements:</span>
  69 |     | <span class='neutral'>     *</span>
  70 |     | <span class='neutral'>     * - The contract must not be paused.</span>
  71 |     | <span class='neutral'>     */</span>
  72 | *   | <span class='executed'>    modifier whenNotPaused() {</span>
  73 |     | <span class='neutral'>        _requireNotPaused();</span>
  74 |     | <span class='neutral'>        _;</span>
  75 |     | <span class='neutral'>    }</span>
  76 |     | <span class='neutral'></span>
  77 |     | <span class='neutral'>    /**</span>
  78 |     | <span class='neutral'>     * @dev Modifier to make a function callable only when the contract is paused.</span>
  79 |     | <span class='neutral'>     *</span>
  80 |     | <span class='neutral'>     * Requirements:</span>
  81 |     | <span class='neutral'>     *</span>
  82 |     | <span class='neutral'>     * - The contract must be paused.</span>
  83 |     | <span class='neutral'>     */</span>
  84 |     | <span class='neutral'>    modifier whenPaused() {</span>
  85 |     | <span class='neutral'>        _requirePaused();</span>
  86 |     | <span class='neutral'>        _;</span>
  87 |     | <span class='neutral'>    }</span>
  88 |     | <span class='neutral'></span>
  89 |     | <span class='neutral'>    /**</span>
  90 |     | <span class='neutral'>     * @dev Returns true if the contract is paused, and false otherwise.</span>
  91 |     | <span class='neutral'>     */</span>
  92 |     | <span class='neutral'>    function paused() public view virtual returns (bool) {</span>
  93 |     | <span class='neutral'>        PausableStorage storage $ = _getPausableStorage();</span>
  94 |     | <span class='neutral'>        return $._paused;</span>
  95 |     | <span class='neutral'>    }</span>
  96 |     | <span class='neutral'></span>
  97 |     | <span class='neutral'>    /**</span>
  98 |     | <span class='neutral'>     * @dev Throws if the contract is paused.</span>
  99 |     | <span class='neutral'>     */</span>
 100 | *   | <span class='executed'>    function _requireNotPaused() internal view virtual {</span>
 101 | *   | <span class='executed'>        if (paused()) {</span>
 102 |     | <span class='unexecuted'>            revert EnforcedPause();</span>
 103 |     | <span class='neutral'>        }</span>
 104 |     | <span class='neutral'>    }</span>
 105 |     | <span class='neutral'></span>
 106 |     | <span class='neutral'>    /**</span>
 107 |     | <span class='neutral'>     * @dev Throws if the contract is not paused.</span>
 108 |     | <span class='neutral'>     */</span>
 109 |     | <span class='neutral'>    function _requirePaused() internal view virtual {</span>
 110 |     | <span class='unexecuted'>        if (!paused()) {</span>
 111 |     | <span class='unexecuted'>            revert ExpectedPause();</span>
 112 |     | <span class='neutral'>        }</span>
 113 |     | <span class='neutral'>    }</span>
 114 |     | <span class='neutral'></span>
 115 |     | <span class='neutral'>    /**</span>
 116 |     | <span class='neutral'>     * @dev Triggers stopped state.</span>
 117 |     | <span class='neutral'>     *</span>
 118 |     | <span class='neutral'>     * Requirements:</span>
 119 |     | <span class='neutral'>     *</span>
 120 |     | <span class='neutral'>     * - The contract must not be paused.</span>
 121 |     | <span class='neutral'>     */</span>
 122 |     | <span class='neutral'>    function _pause() internal virtual whenNotPaused {</span>
 123 |     | <span class='neutral'>        PausableStorage storage $ = _getPausableStorage();</span>
 124 |     | <span class='unexecuted'>        $._paused = true;</span>
 125 |     | <span class='unexecuted'>        emit Paused(_msgSender());</span>
 126 |     | <span class='neutral'>    }</span>
 127 |     | <span class='neutral'></span>
 128 |     | <span class='neutral'>    /**</span>
 129 |     | <span class='neutral'>     * @dev Returns to normal state.</span>
 130 |     | <span class='neutral'>     *</span>
 131 |     | <span class='neutral'>     * Requirements:</span>
 132 |     | <span class='neutral'>     *</span>
 133 |     | <span class='neutral'>     * - The contract must be paused.</span>
 134 |     | <span class='neutral'>     */</span>
 135 |     | <span class='neutral'>    function _unpause() internal virtual whenPaused {</span>
 136 |     | <span class='neutral'>        PausableStorage storage $ = _getPausableStorage();</span>
 137 |     | <span class='neutral'>        $._paused = false;</span>
 138 |     | <span class='unexecuted'>        emit Unpaused(_msgSender());</span>
 139 |     | <span class='neutral'>    }</span>
 140 |     | <span class='neutral'>}</span>
 141 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/utils/ReentrancyGuardUpgradeable.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/ReentrancyGuard.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'>import {Initializable} from &quot;../proxy/utils/Initializable.sol&quot;;</span>
   6 |     | <span class='neutral'></span>
   7 |     | <span class='neutral'>/**</span>
   8 |     | <span class='neutral'> * @dev Contract module that helps prevent reentrant calls to a function.</span>
   9 |     | <span class='neutral'> *</span>
  10 |     | <span class='neutral'> * Inheriting from `ReentrancyGuard` will make the {nonReentrant} modifier</span>
  11 |     | <span class='neutral'> * available, which can be applied to functions to make sure there are no nested</span>
  12 |     | <span class='neutral'> * (reentrant) calls to them.</span>
  13 |     | <span class='neutral'> *</span>
  14 |     | <span class='neutral'> * Note that because there is a single `nonReentrant` guard, functions marked as</span>
  15 |     | <span class='neutral'> * `nonReentrant` may not call one another. This can be worked around by making</span>
  16 |     | <span class='neutral'> * those functions `private`, and then adding `external` `nonReentrant` entry</span>
  17 |     | <span class='neutral'> * points to them.</span>
  18 |     | <span class='neutral'> *</span>
  19 |     | <span class='neutral'> * TIP: If you would like to learn more about reentrancy and alternative ways</span>
  20 |     | <span class='neutral'> * to protect against it, check out our blog post</span>
  21 |     | <span class='neutral'> * https://blog.openzeppelin.com/reentrancy-after-istanbul/[Reentrancy After Istanbul].</span>
  22 |     | <span class='neutral'> */</span>
  23 |     | <span class='neutral'>abstract contract ReentrancyGuardUpgradeable is Initializable {</span>
  24 |     | <span class='neutral'>    // Booleans are more expensive than uint256 or any type that takes up a full</span>
  25 |     | <span class='neutral'>    // word because each write operation emits an extra SLOAD to first read the</span>
  26 |     | <span class='neutral'>    // slot&#39;s contents, replace the bits taken up by the boolean, and then write</span>
  27 |     | <span class='neutral'>    // back. This is the compiler&#39;s defense against contract upgrades and</span>
  28 |     | <span class='neutral'>    // pointer aliasing, and it cannot be disabled.</span>
  29 |     | <span class='neutral'></span>
  30 |     | <span class='neutral'>    // The values being non-zero value makes deployment a bit more expensive,</span>
  31 |     | <span class='neutral'>    // but in exchange the refund on every call to nonReentrant will be lower in</span>
  32 |     | <span class='neutral'>    // amount. Since refunds are capped to a percentage of the total</span>
  33 |     | <span class='neutral'>    // transaction&#39;s gas, it is best to keep them low in cases like this one, to</span>
  34 |     | <span class='neutral'>    // increase the likelihood of the full refund coming into effect.</span>
  35 |     | <span class='unexecuted'>    uint256 private constant NOT_ENTERED = 1;</span>
  36 | *   | <span class='executed'>    uint256 private constant ENTERED = 2;</span>
  37 |     | <span class='neutral'></span>
  38 |     | <span class='neutral'>    /// @custom:storage-location erc7201:openzeppelin.storage.ReentrancyGuard</span>
  39 |     | <span class='neutral'>    struct ReentrancyGuardStorage {</span>
  40 |     | <span class='neutral'>        uint256 _status;</span>
  41 |     | <span class='neutral'>    }</span>
  42 |     | <span class='neutral'></span>
  43 |     | <span class='neutral'>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.ReentrancyGuard&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</span>
  44 |     | <span class='neutral'>    bytes32 private constant ReentrancyGuardStorageLocation = 0x9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f00;</span>
  45 |     | <span class='neutral'></span>
  46 |     | <span class='neutral'>    function _getReentrancyGuardStorage() private pure returns (ReentrancyGuardStorage storage $) {</span>
  47 |     | <span class='neutral'>        assembly {</span>
  48 |     | <span class='neutral'>            $.slot := ReentrancyGuardStorageLocation</span>
  49 |     | <span class='neutral'>        }</span>
  50 |     | <span class='neutral'>    }</span>
  51 |     | <span class='neutral'></span>
  52 |     | <span class='neutral'>    /**</span>
  53 |     | <span class='neutral'>     * @dev Unauthorized reentrant call.</span>
  54 |     | <span class='neutral'>     */</span>
  55 |     | <span class='neutral'>    error ReentrancyGuardReentrantCall();</span>
  56 |     | <span class='neutral'></span>
  57 |     | <span class='neutral'>    function __ReentrancyGuard_init() internal onlyInitializing {</span>
  58 |     | <span class='neutral'>        __ReentrancyGuard_init_unchained();</span>
  59 |     | <span class='neutral'>    }</span>
  60 |     | <span class='neutral'></span>
  61 |     | <span class='neutral'>    function __ReentrancyGuard_init_unchained() internal onlyInitializing {</span>
  62 |     | <span class='neutral'>        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();</span>
  63 |     | <span class='neutral'>        $._status = NOT_ENTERED;</span>
  64 |     | <span class='neutral'>    }</span>
  65 |     | <span class='neutral'></span>
  66 |     | <span class='neutral'>    /**</span>
  67 |     | <span class='neutral'>     * @dev Prevents a contract from calling itself, directly or indirectly.</span>
  68 |     | <span class='neutral'>     * Calling a `nonReentrant` function from another `nonReentrant`</span>
  69 |     | <span class='neutral'>     * function is not supported. It is possible to prevent this from happening</span>
  70 |     | <span class='neutral'>     * by making the `nonReentrant` function external, and making it call a</span>
  71 |     | <span class='neutral'>     * `private` function that does the actual work.</span>
  72 |     | <span class='neutral'>     */</span>
  73 | *   | <span class='executed'>    modifier nonReentrant() {</span>
  74 |     | <span class='neutral'>        _nonReentrantBefore();</span>
  75 |     | <span class='neutral'>        _;</span>
  76 |     | <span class='neutral'>        _nonReentrantAfter();</span>
  77 |     | <span class='neutral'>    }</span>
  78 |     | <span class='neutral'></span>
  79 | *   | <span class='executed'>    function _nonReentrantBefore() private {</span>
  80 |     | <span class='neutral'>        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();</span>
  81 |     | <span class='neutral'>        // On the first call to nonReentrant, _status will be NOT_ENTERED</span>
  82 | *   | <span class='executed'>        if ($._status == ENTERED) {</span>
  83 |     | <span class='unexecuted'>            revert ReentrancyGuardReentrantCall();</span>
  84 |     | <span class='neutral'>        }</span>
  85 |     | <span class='neutral'></span>
  86 |     | <span class='neutral'>        // Any calls to nonReentrant after this point will fail</span>
  87 |     | <span class='neutral'>        $._status = ENTERED;</span>
  88 |     | <span class='neutral'>    }</span>
  89 |     | <span class='neutral'></span>
  90 |     | <span class='neutral'>    function _nonReentrantAfter() private {</span>
  91 |     | <span class='neutral'>        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();</span>
  92 |     | <span class='neutral'>        // By storing the original value once again, a refund is triggered (see</span>
  93 |     | <span class='neutral'>        // https://eips.ethereum.org/EIPS/eip-2200)</span>
  94 |     | <span class='neutral'>        $._status = NOT_ENTERED;</span>
  95 |     | <span class='neutral'>    }</span>
  96 |     | <span class='neutral'></span>
  97 |     | <span class='neutral'>    /**</span>
  98 |     | <span class='neutral'>     * @dev Returns true if the reentrancy guard is currently set to &quot;entered&quot;, which indicates there is a</span>
  99 |     | <span class='neutral'>     * `nonReentrant` function in the call stack.</span>
 100 |     | <span class='neutral'>     */</span>
 101 |     | <span class='neutral'>    function _reentrancyGuardEntered() internal view returns (bool) {</span>
 102 |     | <span class='neutral'>        ReentrancyGuardStorage storage $ = _getReentrancyGuardStorage();</span>
 103 |     | <span class='neutral'>        return $._status == ENTERED;</span>
 104 |     | <span class='neutral'>    }</span>
 105 |     | <span class='neutral'>}</span>
 106 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts-upgradeable/contracts/utils/introspection/ERC165Upgradeable.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/introspection/ERC165.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>import {IERC165} from &quot;@openzeppelin/contracts/utils/introspection/IERC165.sol&quot;;</span>
  7 |     | <span class='neutral'>import {Initializable} from &quot;../../proxy/utils/Initializable.sol&quot;;</span>
  8 |     | <span class='neutral'></span>
  9 |     | <span class='neutral'>/**</span>
 10 |     | <span class='neutral'> * @dev Implementation of the {IERC165} interface.</span>
 11 |     | <span class='neutral'> *</span>
 12 |     | <span class='neutral'> * Contracts that want to implement ERC165 should inherit from this contract and override {supportsInterface} to check</span>
 13 |     | <span class='neutral'> * for the additional interface id that will be supported. For example:</span>
 14 |     | <span class='neutral'> *</span>
 15 |     | <span class='neutral'> * ```solidity</span>
 16 |     | <span class='neutral'> * function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {</span>
 17 |     | <span class='neutral'> *     return interfaceId == type(MyInterface).interfaceId || super.supportsInterface(interfaceId);</span>
 18 |     | <span class='neutral'> * }</span>
 19 |     | <span class='neutral'> * ```</span>
 20 |     | <span class='neutral'> */</span>
 21 |     | <span class='neutral'>abstract contract ERC165Upgradeable is Initializable, IERC165 {</span>
 22 |     | <span class='neutral'>    function __ERC165_init() internal onlyInitializing {</span>
 23 |     | <span class='neutral'>    }</span>
 24 |     | <span class='neutral'></span>
 25 |     | <span class='neutral'>    function __ERC165_init_unchained() internal onlyInitializing {</span>
 26 |     | <span class='neutral'>    }</span>
 27 |     | <span class='neutral'>    /**</span>
 28 |     | <span class='neutral'>     * @dev See {IERC165-supportsInterface}.</span>
 29 |     | <span class='neutral'>     */</span>
 30 |     | <span class='neutral'>    function supportsInterface(bytes4 interfaceId) public view virtual returns (bool) {</span>
 31 |     | <span class='unexecuted'>        return interfaceId == type(IERC165).interfaceId;</span>
 32 |     | <span class='neutral'>    }</span>
 33 |     | <span class='neutral'>}</span>
 34 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/access/AccessControl.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (access/AccessControl.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IAccessControl} from &quot;./IAccessControl.sol&quot;;</span>
   7 |     | <span class='neutral'>import {Context} from &quot;../utils/Context.sol&quot;;</span>
   8 |     | <span class='neutral'>import {ERC165} from &quot;../utils/introspection/ERC165.sol&quot;;</span>
   9 |     | <span class='neutral'></span>
  10 |     | <span class='neutral'>/**</span>
  11 |     | <span class='neutral'> * @dev Contract module that allows children to implement role-based access</span>
  12 |     | <span class='neutral'> * control mechanisms. This is a lightweight version that doesn&#39;t allow enumerating role</span>
  13 |     | <span class='neutral'> * members except through off-chain means by accessing the contract event logs. Some</span>
  14 |     | <span class='neutral'> * applications may benefit from on-chain enumerability, for those cases see</span>
  15 |     | <span class='neutral'> * {AccessControlEnumerable}.</span>
  16 |     | <span class='neutral'> *</span>
  17 |     | <span class='neutral'> * Roles are referred to by their `bytes32` identifier. These should be exposed</span>
  18 |     | <span class='neutral'> * in the external API and be unique. The best way to achieve this is by</span>
  19 |     | <span class='neutral'> * using `public constant` hash digests:</span>
  20 |     | <span class='neutral'> *</span>
  21 |     | <span class='neutral'> * ```solidity</span>
  22 |     | <span class='neutral'> * bytes32 public constant MY_ROLE = keccak256(&quot;MY_ROLE&quot;);</span>
  23 |     | <span class='neutral'> * ```</span>
  24 |     | <span class='neutral'> *</span>
  25 |     | <span class='neutral'> * Roles can be used to represent a set of permissions. To restrict access to a</span>
  26 |     | <span class='neutral'> * function call, use {hasRole}:</span>
  27 |     | <span class='neutral'> *</span>
  28 |     | <span class='neutral'> * ```solidity</span>
  29 |     | <span class='neutral'> * function foo() public {</span>
  30 |     | <span class='neutral'> *     require(hasRole(MY_ROLE, msg.sender));</span>
  31 |     | <span class='neutral'> *     ...</span>
  32 |     | <span class='neutral'> * }</span>
  33 |     | <span class='neutral'> * ```</span>
  34 |     | <span class='neutral'> *</span>
  35 |     | <span class='neutral'> * Roles can be granted and revoked dynamically via the {grantRole} and</span>
  36 |     | <span class='neutral'> * {revokeRole} functions. Each role has an associated admin role, and only</span>
  37 |     | <span class='neutral'> * accounts that have a role&#39;s admin role can call {grantRole} and {revokeRole}.</span>
  38 |     | <span class='neutral'> *</span>
  39 |     | <span class='neutral'> * By default, the admin role for all roles is `DEFAULT_ADMIN_ROLE`, which means</span>
  40 |     | <span class='neutral'> * that only accounts with this role will be able to grant or revoke other</span>
  41 |     | <span class='neutral'> * roles. More complex role relationships can be created by using</span>
  42 |     | <span class='neutral'> * {_setRoleAdmin}.</span>
  43 |     | <span class='neutral'> *</span>
  44 |     | <span class='neutral'> * WARNING: The `DEFAULT_ADMIN_ROLE` is also its own admin: it has permission to</span>
  45 |     | <span class='neutral'> * grant and revoke this role. Extra precautions should be taken to secure</span>
  46 |     | <span class='neutral'> * accounts that have been granted it. We recommend using {AccessControlDefaultAdminRules}</span>
  47 |     | <span class='neutral'> * to enforce additional security measures for this role.</span>
  48 |     | <span class='neutral'> */</span>
  49 |     | <span class='neutral'>abstract contract AccessControl is Context, IAccessControl, ERC165 {</span>
  50 |     | <span class='neutral'>    struct RoleData {</span>
  51 |     | <span class='neutral'>        mapping(address account =&gt; bool) hasRole;</span>
  52 |     | <span class='neutral'>        bytes32 adminRole;</span>
  53 |     | <span class='neutral'>    }</span>
  54 |     | <span class='neutral'></span>
  55 |     | <span class='neutral'>    mapping(bytes32 role =&gt; RoleData) private _roles;</span>
  56 |     | <span class='neutral'></span>
  57 |     | <span class='neutral'>    bytes32 public constant DEFAULT_ADMIN_ROLE = 0x00;</span>
  58 |     | <span class='neutral'></span>
  59 |     | <span class='neutral'>    /**</span>
  60 |     | <span class='neutral'>     * @dev Modifier that checks that an account has a specific role. Reverts</span>
  61 |     | <span class='neutral'>     * with an {AccessControlUnauthorizedAccount} error including the required role.</span>
  62 |     | <span class='neutral'>     */</span>
  63 |     | <span class='neutral'>    modifier onlyRole(bytes32 role) {</span>
  64 | *   | <span class='executed'>        _checkRole(role);</span>
  65 |     | <span class='neutral'>        _;</span>
  66 |     | <span class='neutral'>    }</span>
  67 |     | <span class='neutral'></span>
  68 |     | <span class='neutral'>    /**</span>
  69 |     | <span class='neutral'>     * @dev See {IERC165-supportsInterface}.</span>
  70 |     | <span class='neutral'>     */</span>
  71 |     | <span class='neutral'>    function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {</span>
  72 |     | <span class='unexecuted'>        return interfaceId == type(IAccessControl).interfaceId || super.supportsInterface(interfaceId);</span>
  73 |     | <span class='neutral'>    }</span>
  74 |     | <span class='neutral'></span>
  75 |     | <span class='neutral'>    /**</span>
  76 |     | <span class='neutral'>     * @dev Returns `true` if `account` has been granted `role`.</span>
  77 |     | <span class='neutral'>     */</span>
  78 |     | <span class='neutral'>    function hasRole(bytes32 role, address account) public view virtual returns (bool) {</span>
  79 | *   | <span class='executed'>        return _roles[role].hasRole[account];</span>
  80 |     | <span class='neutral'>    }</span>
  81 |     | <span class='neutral'></span>
  82 |     | <span class='neutral'>    /**</span>
  83 |     | <span class='neutral'>     * @dev Reverts with an {AccessControlUnauthorizedAccount} error if `_msgSender()`</span>
  84 |     | <span class='neutral'>     * is missing `role`. Overriding this function changes the behavior of the {onlyRole} modifier.</span>
  85 |     | <span class='neutral'>     */</span>
  86 | *   | <span class='executed'>    function _checkRole(bytes32 role) internal view virtual {</span>
  87 |     | <span class='neutral'>        _checkRole(role, _msgSender());</span>
  88 |     | <span class='neutral'>    }</span>
  89 |     | <span class='neutral'></span>
  90 |     | <span class='neutral'>    /**</span>
  91 |     | <span class='neutral'>     * @dev Reverts with an {AccessControlUnauthorizedAccount} error if `account`</span>
  92 |     | <span class='neutral'>     * is missing `role`.</span>
  93 |     | <span class='neutral'>     */</span>
  94 |     | <span class='neutral'>    function _checkRole(bytes32 role, address account) internal view virtual {</span>
  95 | *   | <span class='executed'>        if (!hasRole(role, account)) {</span>
  96 |     | <span class='unexecuted'>            revert AccessControlUnauthorizedAccount(account, role);</span>
  97 |     | <span class='neutral'>        }</span>
  98 |     | <span class='neutral'>    }</span>
  99 |     | <span class='neutral'></span>
 100 |     | <span class='neutral'>    /**</span>
 101 |     | <span class='neutral'>     * @dev Returns the admin role that controls `role`. See {grantRole} and</span>
 102 |     | <span class='neutral'>     * {revokeRole}.</span>
 103 |     | <span class='neutral'>     *</span>
 104 |     | <span class='neutral'>     * To change a role&#39;s admin, use {_setRoleAdmin}.</span>
 105 |     | <span class='neutral'>     */</span>
 106 |     | <span class='neutral'>    function getRoleAdmin(bytes32 role) public view virtual returns (bytes32) {</span>
 107 |     | <span class='unexecuted'>        return _roles[role].adminRole;</span>
 108 |     | <span class='neutral'>    }</span>
 109 |     | <span class='neutral'></span>
 110 |     | <span class='neutral'>    /**</span>
 111 |     | <span class='neutral'>     * @dev Grants `role` to `account`.</span>
 112 |     | <span class='neutral'>     *</span>
 113 |     | <span class='neutral'>     * If `account` had not been already granted `role`, emits a {RoleGranted}</span>
 114 |     | <span class='neutral'>     * event.</span>
 115 |     | <span class='neutral'>     *</span>
 116 |     | <span class='neutral'>     * Requirements:</span>
 117 |     | <span class='neutral'>     *</span>
 118 |     | <span class='neutral'>     * - the caller must have ``role``&#39;s admin role.</span>
 119 |     | <span class='neutral'>     *</span>
 120 |     | <span class='neutral'>     * May emit a {RoleGranted} event.</span>
 121 |     | <span class='neutral'>     */</span>
 122 |     | <span class='neutral'>    function grantRole(bytes32 role, address account) public virtual onlyRole(getRoleAdmin(role)) {</span>
 123 |     | <span class='unexecuted'>        _grantRole(role, account);</span>
 124 |     | <span class='neutral'>    }</span>
 125 |     | <span class='neutral'></span>
 126 |     | <span class='neutral'>    /**</span>
 127 |     | <span class='neutral'>     * @dev Revokes `role` from `account`.</span>
 128 |     | <span class='neutral'>     *</span>
 129 |     | <span class='neutral'>     * If `account` had been granted `role`, emits a {RoleRevoked} event.</span>
 130 |     | <span class='neutral'>     *</span>
 131 |     | <span class='neutral'>     * Requirements:</span>
 132 |     | <span class='neutral'>     *</span>
 133 |     | <span class='neutral'>     * - the caller must have ``role``&#39;s admin role.</span>
 134 |     | <span class='neutral'>     *</span>
 135 |     | <span class='neutral'>     * May emit a {RoleRevoked} event.</span>
 136 |     | <span class='neutral'>     */</span>
 137 |     | <span class='neutral'>    function revokeRole(bytes32 role, address account) public virtual onlyRole(getRoleAdmin(role)) {</span>
 138 |     | <span class='unexecuted'>        _revokeRole(role, account);</span>
 139 |     | <span class='neutral'>    }</span>
 140 |     | <span class='neutral'></span>
 141 |     | <span class='neutral'>    /**</span>
 142 |     | <span class='neutral'>     * @dev Revokes `role` from the calling account.</span>
 143 |     | <span class='neutral'>     *</span>
 144 |     | <span class='neutral'>     * Roles are often managed via {grantRole} and {revokeRole}: this function&#39;s</span>
 145 |     | <span class='neutral'>     * purpose is to provide a mechanism for accounts to lose their privileges</span>
 146 |     | <span class='neutral'>     * if they are compromised (such as when a trusted device is misplaced).</span>
 147 |     | <span class='neutral'>     *</span>
 148 |     | <span class='neutral'>     * If the calling account had been revoked `role`, emits a {RoleRevoked}</span>
 149 |     | <span class='neutral'>     * event.</span>
 150 |     | <span class='neutral'>     *</span>
 151 |     | <span class='neutral'>     * Requirements:</span>
 152 |     | <span class='neutral'>     *</span>
 153 |     | <span class='neutral'>     * - the caller must be `callerConfirmation`.</span>
 154 |     | <span class='neutral'>     *</span>
 155 |     | <span class='neutral'>     * May emit a {RoleRevoked} event.</span>
 156 |     | <span class='neutral'>     */</span>
 157 |     | <span class='neutral'>    function renounceRole(bytes32 role, address callerConfirmation) public virtual {</span>
 158 |     | <span class='unexecuted'>        if (callerConfirmation != _msgSender()) {</span>
 159 |     | <span class='unexecuted'>            revert AccessControlBadConfirmation();</span>
 160 |     | <span class='neutral'>        }</span>
 161 |     | <span class='neutral'></span>
 162 |     | <span class='unexecuted'>        _revokeRole(role, callerConfirmation);</span>
 163 |     | <span class='neutral'>    }</span>
 164 |     | <span class='neutral'></span>
 165 |     | <span class='neutral'>    /**</span>
 166 |     | <span class='neutral'>     * @dev Sets `adminRole` as ``role``&#39;s admin role.</span>
 167 |     | <span class='neutral'>     *</span>
 168 |     | <span class='neutral'>     * Emits a {RoleAdminChanged} event.</span>
 169 |     | <span class='neutral'>     */</span>
 170 |     | <span class='neutral'>    function _setRoleAdmin(bytes32 role, bytes32 adminRole) internal virtual {</span>
 171 |     | <span class='neutral'>        bytes32 previousAdminRole = getRoleAdmin(role);</span>
 172 |     | <span class='neutral'>        _roles[role].adminRole = adminRole;</span>
 173 |     | <span class='neutral'>        emit RoleAdminChanged(role, previousAdminRole, adminRole);</span>
 174 |     | <span class='neutral'>    }</span>
 175 |     | <span class='neutral'></span>
 176 |     | <span class='neutral'>    /**</span>
 177 |     | <span class='neutral'>     * @dev Attempts to grant `role` to `account` and returns a boolean indicating if `role` was granted.</span>
 178 |     | <span class='neutral'>     *</span>
 179 |     | <span class='neutral'>     * Internal function without access restriction.</span>
 180 |     | <span class='neutral'>     *</span>
 181 |     | <span class='neutral'>     * May emit a {RoleGranted} event.</span>
 182 |     | <span class='neutral'>     */</span>
 183 | *   | <span class='executed'>    function _grantRole(bytes32 role, address account) internal virtual returns (bool) {</span>
 184 |     | <span class='unexecuted'>        if (!hasRole(role, account)) {</span>
 185 | *   | <span class='executed'>            _roles[role].hasRole[account] = true;</span>
 186 | *   | <span class='executed'>            emit RoleGranted(role, account, _msgSender());</span>
 187 | *   | <span class='executed'>            return true;</span>
 188 |     | <span class='neutral'>        } else {</span>
 189 |     | <span class='unexecuted'>            return false;</span>
 190 |     | <span class='neutral'>        }</span>
 191 |     | <span class='neutral'>    }</span>
 192 |     | <span class='neutral'></span>
 193 |     | <span class='neutral'>    /**</span>
 194 |     | <span class='neutral'>     * @dev Attempts to revoke `role` to `account` and returns a boolean indicating if `role` was revoked.</span>
 195 |     | <span class='neutral'>     *</span>
 196 |     | <span class='neutral'>     * Internal function without access restriction.</span>
 197 |     | <span class='neutral'>     *</span>
 198 |     | <span class='neutral'>     * May emit a {RoleRevoked} event.</span>
 199 |     | <span class='neutral'>     */</span>
 200 |     | <span class='unexecuted'>    function _revokeRole(bytes32 role, address account) internal virtual returns (bool) {</span>
 201 |     | <span class='unexecuted'>        if (hasRole(role, account)) {</span>
 202 |     | <span class='neutral'>            _roles[role].hasRole[account] = false;</span>
 203 |     | <span class='unexecuted'>            emit RoleRevoked(role, account, _msgSender());</span>
 204 |     | <span class='unexecuted'>            return true;</span>
 205 |     | <span class='neutral'>        } else {</span>
 206 |     | <span class='neutral'>            return false;</span>
 207 |     | <span class='neutral'>        }</span>
 208 |     | <span class='neutral'>    }</span>
 209 |     | <span class='neutral'>}</span>
 210 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/access/IAccessControl.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (access/IAccessControl.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>/**</span>
   7 |     | <span class='neutral'> * @dev External interface of AccessControl declared to support ERC165 detection.</span>
   8 |     | <span class='neutral'> */</span>
   9 |     | <span class='neutral'>interface IAccessControl {</span>
  10 |     | <span class='neutral'>    /**</span>
  11 |     | <span class='neutral'>     * @dev The `account` is missing a role.</span>
  12 |     | <span class='neutral'>     */</span>
  13 |     | <span class='neutral'>    error AccessControlUnauthorizedAccount(address account, bytes32 neededRole);</span>
  14 |     | <span class='neutral'></span>
  15 |     | <span class='neutral'>    /**</span>
  16 |     | <span class='neutral'>     * @dev The caller of a function is not the expected one.</span>
  17 |     | <span class='neutral'>     *</span>
  18 |     | <span class='neutral'>     * NOTE: Don&#39;t confuse with {AccessControlUnauthorizedAccount}.</span>
  19 |     | <span class='neutral'>     */</span>
  20 |     | <span class='neutral'>    error AccessControlBadConfirmation();</span>
  21 |     | <span class='neutral'></span>
  22 |     | <span class='neutral'>    /**</span>
  23 |     | <span class='neutral'>     * @dev Emitted when `newAdminRole` is set as ``role``&#39;s admin role, replacing `previousAdminRole`</span>
  24 |     | <span class='neutral'>     *</span>
  25 |     | <span class='neutral'>     * `DEFAULT_ADMIN_ROLE` is the starting admin for all roles, despite</span>
  26 |     | <span class='neutral'>     * {RoleAdminChanged} not being emitted signaling this.</span>
  27 |     | <span class='neutral'>     */</span>
  28 |     | <span class='neutral'>    event RoleAdminChanged(bytes32 indexed role, bytes32 indexed previousAdminRole, bytes32 indexed newAdminRole);</span>
  29 |     | <span class='neutral'></span>
  30 |     | <span class='neutral'>    /**</span>
  31 |     | <span class='neutral'>     * @dev Emitted when `account` is granted `role`.</span>
  32 |     | <span class='neutral'>     *</span>
  33 |     | <span class='neutral'>     * `sender` is the account that originated the contract call, an admin role</span>
  34 |     | <span class='neutral'>     * bearer except when using {AccessControl-_setupRole}.</span>
  35 |     | <span class='neutral'>     */</span>
  36 |     | <span class='neutral'>    event RoleGranted(bytes32 indexed role, address indexed account, address indexed sender);</span>
  37 |     | <span class='neutral'></span>
  38 |     | <span class='neutral'>    /**</span>
  39 |     | <span class='neutral'>     * @dev Emitted when `account` is revoked `role`.</span>
  40 |     | <span class='neutral'>     *</span>
  41 |     | <span class='neutral'>     * `sender` is the account that originated the contract call:</span>
  42 |     | <span class='neutral'>     *   - if using `revokeRole`, it is the admin role bearer</span>
  43 |     | <span class='neutral'>     *   - if using `renounceRole`, it is the role bearer (i.e. `account`)</span>
  44 |     | <span class='neutral'>     */</span>
  45 |     | <span class='neutral'>    event RoleRevoked(bytes32 indexed role, address indexed account, address indexed sender);</span>
  46 |     | <span class='neutral'></span>
  47 |     | <span class='neutral'>    /**</span>
  48 |     | <span class='neutral'>     * @dev Returns `true` if `account` has been granted `role`.</span>
  49 |     | <span class='neutral'>     */</span>
  50 |     | <span class='neutral'>    function hasRole(bytes32 role, address account) external view returns (bool);</span>
  51 |     | <span class='neutral'></span>
  52 |     | <span class='neutral'>    /**</span>
  53 |     | <span class='neutral'>     * @dev Returns the admin role that controls `role`. See {grantRole} and</span>
  54 |     | <span class='neutral'>     * {revokeRole}.</span>
  55 |     | <span class='neutral'>     *</span>
  56 |     | <span class='neutral'>     * To change a role&#39;s admin, use {AccessControl-_setRoleAdmin}.</span>
  57 |     | <span class='neutral'>     */</span>
  58 |     | <span class='neutral'>    function getRoleAdmin(bytes32 role) external view returns (bytes32);</span>
  59 |     | <span class='neutral'></span>
  60 |     | <span class='neutral'>    /**</span>
  61 |     | <span class='neutral'>     * @dev Grants `role` to `account`.</span>
  62 |     | <span class='neutral'>     *</span>
  63 |     | <span class='neutral'>     * If `account` had not been already granted `role`, emits a {RoleGranted}</span>
  64 |     | <span class='neutral'>     * event.</span>
  65 |     | <span class='neutral'>     *</span>
  66 |     | <span class='neutral'>     * Requirements:</span>
  67 |     | <span class='neutral'>     *</span>
  68 |     | <span class='neutral'>     * - the caller must have ``role``&#39;s admin role.</span>
  69 |     | <span class='neutral'>     */</span>
  70 |     | <span class='neutral'>    function grantRole(bytes32 role, address account) external;</span>
  71 |     | <span class='neutral'></span>
  72 |     | <span class='neutral'>    /**</span>
  73 |     | <span class='neutral'>     * @dev Revokes `role` from `account`.</span>
  74 |     | <span class='neutral'>     *</span>
  75 |     | <span class='neutral'>     * If `account` had been granted `role`, emits a {RoleRevoked} event.</span>
  76 |     | <span class='neutral'>     *</span>
  77 |     | <span class='neutral'>     * Requirements:</span>
  78 |     | <span class='neutral'>     *</span>
  79 |     | <span class='neutral'>     * - the caller must have ``role``&#39;s admin role.</span>
  80 |     | <span class='neutral'>     */</span>
  81 |     | <span class='neutral'>    function revokeRole(bytes32 role, address account) external;</span>
  82 |     | <span class='neutral'></span>
  83 |     | <span class='neutral'>    /**</span>
  84 |     | <span class='neutral'>     * @dev Revokes `role` from the calling account.</span>
  85 |     | <span class='neutral'>     *</span>
  86 |     | <span class='neutral'>     * Roles are often managed via {grantRole} and {revokeRole}: this function&#39;s</span>
  87 |     | <span class='neutral'>     * purpose is to provide a mechanism for accounts to lose their privileges</span>
  88 |     | <span class='neutral'>     * if they are compromised (such as when a trusted device is misplaced).</span>
  89 |     | <span class='neutral'>     *</span>
  90 |     | <span class='neutral'>     * If the calling account had been granted `role`, emits a {RoleRevoked}</span>
  91 |     | <span class='neutral'>     * event.</span>
  92 |     | <span class='neutral'>     *</span>
  93 |     | <span class='neutral'>     * Requirements:</span>
  94 |     | <span class='neutral'>     *</span>
  95 |     | <span class='neutral'>     * - the caller must be `callerConfirmation`.</span>
  96 |     | <span class='neutral'>     */</span>
  97 |     | <span class='neutral'>    function renounceRole(bytes32 role, address callerConfirmation) external;</span>
  98 |     | <span class='neutral'>}</span>
  99 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/interfaces/IERC4626.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (interfaces/IERC4626.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IERC20} from &quot;../token/ERC20/IERC20.sol&quot;;</span>
   7 |     | <span class='neutral'>import {IERC20Metadata} from &quot;../token/ERC20/extensions/IERC20Metadata.sol&quot;;</span>
   8 |     | <span class='neutral'></span>
   9 |     | <span class='neutral'>/**</span>
  10 |     | <span class='neutral'> * @dev Interface of the ERC4626 &quot;Tokenized Vault Standard&quot;, as defined in</span>
  11 |     | <span class='neutral'> * https://eips.ethereum.org/EIPS/eip-4626[ERC-4626].</span>
  12 |     | <span class='neutral'> */</span>
  13 |     | <span class='neutral'>interface IERC4626 is IERC20, IERC20Metadata {</span>
  14 |     | <span class='neutral'>    event Deposit(address indexed sender, address indexed owner, uint256 assets, uint256 shares);</span>
  15 |     | <span class='neutral'></span>
  16 |     | <span class='neutral'>    event Withdraw(</span>
  17 |     | <span class='neutral'>        address indexed sender,</span>
  18 |     | <span class='neutral'>        address indexed receiver,</span>
  19 |     | <span class='neutral'>        address indexed owner,</span>
  20 |     | <span class='neutral'>        uint256 assets,</span>
  21 |     | <span class='neutral'>        uint256 shares</span>
  22 |     | <span class='neutral'>    );</span>
  23 |     | <span class='neutral'></span>
  24 |     | <span class='neutral'>    /**</span>
  25 |     | <span class='neutral'>     * @dev Returns the address of the underlying token used for the Vault for accounting, depositing, and withdrawing.</span>
  26 |     | <span class='neutral'>     *</span>
  27 |     | <span class='neutral'>     * - MUST be an ERC-20 token contract.</span>
  28 |     | <span class='neutral'>     * - MUST NOT revert.</span>
  29 |     | <span class='neutral'>     */</span>
  30 |     | <span class='neutral'>    function asset() external view returns (address assetTokenAddress);</span>
  31 |     | <span class='neutral'></span>
  32 |     | <span class='neutral'>    /**</span>
  33 |     | <span class='neutral'>     * @dev Returns the total amount of the underlying asset that is “managed” by Vault.</span>
  34 |     | <span class='neutral'>     *</span>
  35 |     | <span class='neutral'>     * - SHOULD include any compounding that occurs from yield.</span>
  36 |     | <span class='neutral'>     * - MUST be inclusive of any fees that are charged against assets in the Vault.</span>
  37 |     | <span class='neutral'>     * - MUST NOT revert.</span>
  38 |     | <span class='neutral'>     */</span>
  39 |     | <span class='neutral'>    function totalAssets() external view returns (uint256 totalManagedAssets);</span>
  40 |     | <span class='neutral'></span>
  41 |     | <span class='neutral'>    /**</span>
  42 |     | <span class='neutral'>     * @dev Returns the amount of shares that the Vault would exchange for the amount of assets provided, in an ideal</span>
  43 |     | <span class='neutral'>     * scenario where all the conditions are met.</span>
  44 |     | <span class='neutral'>     *</span>
  45 |     | <span class='neutral'>     * - MUST NOT be inclusive of any fees that are charged against assets in the Vault.</span>
  46 |     | <span class='neutral'>     * - MUST NOT show any variations depending on the caller.</span>
  47 |     | <span class='neutral'>     * - MUST NOT reflect slippage or other on-chain conditions, when performing the actual exchange.</span>
  48 |     | <span class='neutral'>     * - MUST NOT revert.</span>
  49 |     | <span class='neutral'>     *</span>
  50 |     | <span class='neutral'>     * NOTE: This calculation MAY NOT reflect the “per-user” price-per-share, and instead should reflect the</span>
  51 |     | <span class='neutral'>     * “average-user’s” price-per-share, meaning what the average user should expect to see when exchanging to and</span>
  52 |     | <span class='neutral'>     * from.</span>
  53 |     | <span class='neutral'>     */</span>
  54 |     | <span class='neutral'>    function convertToShares(uint256 assets) external view returns (uint256 shares);</span>
  55 |     | <span class='neutral'></span>
  56 |     | <span class='neutral'>    /**</span>
  57 |     | <span class='neutral'>     * @dev Returns the amount of assets that the Vault would exchange for the amount of shares provided, in an ideal</span>
  58 |     | <span class='neutral'>     * scenario where all the conditions are met.</span>
  59 |     | <span class='neutral'>     *</span>
  60 |     | <span class='neutral'>     * - MUST NOT be inclusive of any fees that are charged against assets in the Vault.</span>
  61 |     | <span class='neutral'>     * - MUST NOT show any variations depending on the caller.</span>
  62 |     | <span class='neutral'>     * - MUST NOT reflect slippage or other on-chain conditions, when performing the actual exchange.</span>
  63 |     | <span class='neutral'>     * - MUST NOT revert.</span>
  64 |     | <span class='neutral'>     *</span>
  65 |     | <span class='neutral'>     * NOTE: This calculation MAY NOT reflect the “per-user” price-per-share, and instead should reflect the</span>
  66 |     | <span class='neutral'>     * “average-user’s” price-per-share, meaning what the average user should expect to see when exchanging to and</span>
  67 |     | <span class='neutral'>     * from.</span>
  68 |     | <span class='neutral'>     */</span>
  69 |     | <span class='neutral'>    function convertToAssets(uint256 shares) external view returns (uint256 assets);</span>
  70 |     | <span class='neutral'></span>
  71 |     | <span class='neutral'>    /**</span>
  72 |     | <span class='neutral'>     * @dev Returns the maximum amount of the underlying asset that can be deposited into the Vault for the receiver,</span>
  73 |     | <span class='neutral'>     * through a deposit call.</span>
  74 |     | <span class='neutral'>     *</span>
  75 |     | <span class='neutral'>     * - MUST return a limited value if receiver is subject to some deposit limit.</span>
  76 |     | <span class='neutral'>     * - MUST return 2 ** 256 - 1 if there is no limit on the maximum amount of assets that may be deposited.</span>
  77 |     | <span class='neutral'>     * - MUST NOT revert.</span>
  78 |     | <span class='neutral'>     */</span>
  79 |     | <span class='neutral'>    function maxDeposit(address receiver) external view returns (uint256 maxAssets);</span>
  80 |     | <span class='neutral'></span>
  81 |     | <span class='neutral'>    /**</span>
  82 |     | <span class='neutral'>     * @dev Allows an on-chain or off-chain user to simulate the effects of their deposit at the current block, given</span>
  83 |     | <span class='neutral'>     * current on-chain conditions.</span>
  84 |     | <span class='neutral'>     *</span>
  85 |     | <span class='neutral'>     * - MUST return as close to and no more than the exact amount of Vault shares that would be minted in a deposit</span>
  86 |     | <span class='neutral'>     *   call in the same transaction. I.e. deposit should return the same or more shares as previewDeposit if called</span>
  87 |     | <span class='neutral'>     *   in the same transaction.</span>
  88 |     | <span class='neutral'>     * - MUST NOT account for deposit limits like those returned from maxDeposit and should always act as though the</span>
  89 |     | <span class='neutral'>     *   deposit would be accepted, regardless if the user has enough tokens approved, etc.</span>
  90 |     | <span class='neutral'>     * - MUST be inclusive of deposit fees. Integrators should be aware of the existence of deposit fees.</span>
  91 |     | <span class='neutral'>     * - MUST NOT revert.</span>
  92 |     | <span class='neutral'>     *</span>
  93 |     | <span class='neutral'>     * NOTE: any unfavorable discrepancy between convertToShares and previewDeposit SHOULD be considered slippage in</span>
  94 |     | <span class='neutral'>     * share price or some other type of condition, meaning the depositor will lose assets by depositing.</span>
  95 |     | <span class='neutral'>     */</span>
  96 |     | <span class='neutral'>    function previewDeposit(uint256 assets) external view returns (uint256 shares);</span>
  97 |     | <span class='neutral'></span>
  98 |     | <span class='neutral'>    /**</span>
  99 |     | <span class='neutral'>     * @dev Mints shares Vault shares to receiver by depositing exactly amount of underlying tokens.</span>
 100 |     | <span class='neutral'>     *</span>
 101 |     | <span class='neutral'>     * - MUST emit the Deposit event.</span>
 102 |     | <span class='neutral'>     * - MAY support an additional flow in which the underlying tokens are owned by the Vault contract before the</span>
 103 |     | <span class='neutral'>     *   deposit execution, and are accounted for during deposit.</span>
 104 |     | <span class='neutral'>     * - MUST revert if all of assets cannot be deposited (due to deposit limit being reached, slippage, the user not</span>
 105 |     | <span class='neutral'>     *   approving enough underlying tokens to the Vault contract, etc).</span>
 106 |     | <span class='neutral'>     *</span>
 107 |     | <span class='neutral'>     * NOTE: most implementations will require pre-approval of the Vault with the Vault’s underlying asset token.</span>
 108 |     | <span class='neutral'>     */</span>
 109 |     | <span class='neutral'>    function deposit(uint256 assets, address receiver) external returns (uint256 shares);</span>
 110 |     | <span class='neutral'></span>
 111 |     | <span class='neutral'>    /**</span>
 112 |     | <span class='neutral'>     * @dev Returns the maximum amount of the Vault shares that can be minted for the receiver, through a mint call.</span>
 113 |     | <span class='neutral'>     * - MUST return a limited value if receiver is subject to some mint limit.</span>
 114 |     | <span class='neutral'>     * - MUST return 2 ** 256 - 1 if there is no limit on the maximum amount of shares that may be minted.</span>
 115 |     | <span class='neutral'>     * - MUST NOT revert.</span>
 116 |     | <span class='neutral'>     */</span>
 117 |     | <span class='neutral'>    function maxMint(address receiver) external view returns (uint256 maxShares);</span>
 118 |     | <span class='neutral'></span>
 119 |     | <span class='neutral'>    /**</span>
 120 |     | <span class='neutral'>     * @dev Allows an on-chain or off-chain user to simulate the effects of their mint at the current block, given</span>
 121 |     | <span class='neutral'>     * current on-chain conditions.</span>
 122 |     | <span class='neutral'>     *</span>
 123 |     | <span class='neutral'>     * - MUST return as close to and no fewer than the exact amount of assets that would be deposited in a mint call</span>
 124 |     | <span class='neutral'>     *   in the same transaction. I.e. mint should return the same or fewer assets as previewMint if called in the</span>
 125 |     | <span class='neutral'>     *   same transaction.</span>
 126 |     | <span class='neutral'>     * - MUST NOT account for mint limits like those returned from maxMint and should always act as though the mint</span>
 127 |     | <span class='neutral'>     *   would be accepted, regardless if the user has enough tokens approved, etc.</span>
 128 |     | <span class='neutral'>     * - MUST be inclusive of deposit fees. Integrators should be aware of the existence of deposit fees.</span>
 129 |     | <span class='neutral'>     * - MUST NOT revert.</span>
 130 |     | <span class='neutral'>     *</span>
 131 |     | <span class='neutral'>     * NOTE: any unfavorable discrepancy between convertToAssets and previewMint SHOULD be considered slippage in</span>
 132 |     | <span class='neutral'>     * share price or some other type of condition, meaning the depositor will lose assets by minting.</span>
 133 |     | <span class='neutral'>     */</span>
 134 |     | <span class='neutral'>    function previewMint(uint256 shares) external view returns (uint256 assets);</span>
 135 |     | <span class='neutral'></span>
 136 |     | <span class='neutral'>    /**</span>
 137 |     | <span class='neutral'>     * @dev Mints exactly shares Vault shares to receiver by depositing amount of underlying tokens.</span>
 138 |     | <span class='neutral'>     *</span>
 139 |     | <span class='neutral'>     * - MUST emit the Deposit event.</span>
 140 |     | <span class='neutral'>     * - MAY support an additional flow in which the underlying tokens are owned by the Vault contract before the mint</span>
 141 |     | <span class='neutral'>     *   execution, and are accounted for during mint.</span>
 142 |     | <span class='neutral'>     * - MUST revert if all of shares cannot be minted (due to deposit limit being reached, slippage, the user not</span>
 143 |     | <span class='neutral'>     *   approving enough underlying tokens to the Vault contract, etc).</span>
 144 |     | <span class='neutral'>     *</span>
 145 |     | <span class='neutral'>     * NOTE: most implementations will require pre-approval of the Vault with the Vault’s underlying asset token.</span>
 146 |     | <span class='neutral'>     */</span>
 147 |     | <span class='neutral'>    function mint(uint256 shares, address receiver) external returns (uint256 assets);</span>
 148 |     | <span class='neutral'></span>
 149 |     | <span class='neutral'>    /**</span>
 150 |     | <span class='neutral'>     * @dev Returns the maximum amount of the underlying asset that can be withdrawn from the owner balance in the</span>
 151 |     | <span class='neutral'>     * Vault, through a withdraw call.</span>
 152 |     | <span class='neutral'>     *</span>
 153 |     | <span class='neutral'>     * - MUST return a limited value if owner is subject to some withdrawal limit or timelock.</span>
 154 |     | <span class='neutral'>     * - MUST NOT revert.</span>
 155 |     | <span class='neutral'>     */</span>
 156 |     | <span class='neutral'>    function maxWithdraw(address owner) external view returns (uint256 maxAssets);</span>
 157 |     | <span class='neutral'></span>
 158 |     | <span class='neutral'>    /**</span>
 159 |     | <span class='neutral'>     * @dev Allows an on-chain or off-chain user to simulate the effects of their withdrawal at the current block,</span>
 160 |     | <span class='neutral'>     * given current on-chain conditions.</span>
 161 |     | <span class='neutral'>     *</span>
 162 |     | <span class='neutral'>     * - MUST return as close to and no fewer than the exact amount of Vault shares that would be burned in a withdraw</span>
 163 |     | <span class='neutral'>     *   call in the same transaction. I.e. withdraw should return the same or fewer shares as previewWithdraw if</span>
 164 |     | <span class='neutral'>     *   called</span>
 165 |     | <span class='neutral'>     *   in the same transaction.</span>
 166 |     | <span class='neutral'>     * - MUST NOT account for withdrawal limits like those returned from maxWithdraw and should always act as though</span>
 167 |     | <span class='neutral'>     *   the withdrawal would be accepted, regardless if the user has enough shares, etc.</span>
 168 |     | <span class='neutral'>     * - MUST be inclusive of withdrawal fees. Integrators should be aware of the existence of withdrawal fees.</span>
 169 |     | <span class='neutral'>     * - MUST NOT revert.</span>
 170 |     | <span class='neutral'>     *</span>
 171 |     | <span class='neutral'>     * NOTE: any unfavorable discrepancy between convertToShares and previewWithdraw SHOULD be considered slippage in</span>
 172 |     | <span class='neutral'>     * share price or some other type of condition, meaning the depositor will lose assets by depositing.</span>
 173 |     | <span class='neutral'>     */</span>
 174 |     | <span class='neutral'>    function previewWithdraw(uint256 assets) external view returns (uint256 shares);</span>
 175 |     | <span class='neutral'></span>
 176 |     | <span class='neutral'>    /**</span>
 177 |     | <span class='neutral'>     * @dev Burns shares from owner and sends exactly assets of underlying tokens to receiver.</span>
 178 |     | <span class='neutral'>     *</span>
 179 |     | <span class='neutral'>     * - MUST emit the Withdraw event.</span>
 180 |     | <span class='neutral'>     * - MAY support an additional flow in which the underlying tokens are owned by the Vault contract before the</span>
 181 |     | <span class='neutral'>     *   withdraw execution, and are accounted for during withdraw.</span>
 182 |     | <span class='neutral'>     * - MUST revert if all of assets cannot be withdrawn (due to withdrawal limit being reached, slippage, the owner</span>
 183 |     | <span class='neutral'>     *   not having enough shares, etc).</span>
 184 |     | <span class='neutral'>     *</span>
 185 |     | <span class='neutral'>     * Note that some implementations will require pre-requesting to the Vault before a withdrawal may be performed.</span>
 186 |     | <span class='neutral'>     * Those methods should be performed separately.</span>
 187 |     | <span class='neutral'>     */</span>
 188 |     | <span class='neutral'>    function withdraw(uint256 assets, address receiver, address owner) external returns (uint256 shares);</span>
 189 |     | <span class='neutral'></span>
 190 |     | <span class='neutral'>    /**</span>
 191 |     | <span class='neutral'>     * @dev Returns the maximum amount of Vault shares that can be redeemed from the owner balance in the Vault,</span>
 192 |     | <span class='neutral'>     * through a redeem call.</span>
 193 |     | <span class='neutral'>     *</span>
 194 |     | <span class='neutral'>     * - MUST return a limited value if owner is subject to some withdrawal limit or timelock.</span>
 195 |     | <span class='neutral'>     * - MUST return balanceOf(owner) if owner is not subject to any withdrawal limit or timelock.</span>
 196 |     | <span class='neutral'>     * - MUST NOT revert.</span>
 197 |     | <span class='neutral'>     */</span>
 198 |     | <span class='neutral'>    function maxRedeem(address owner) external view returns (uint256 maxShares);</span>
 199 |     | <span class='neutral'></span>
 200 |     | <span class='neutral'>    /**</span>
 201 |     | <span class='neutral'>     * @dev Allows an on-chain or off-chain user to simulate the effects of their redeemption at the current block,</span>
 202 |     | <span class='neutral'>     * given current on-chain conditions.</span>
 203 |     | <span class='neutral'>     *</span>
 204 |     | <span class='neutral'>     * - MUST return as close to and no more than the exact amount of assets that would be withdrawn in a redeem call</span>
 205 |     | <span class='neutral'>     *   in the same transaction. I.e. redeem should return the same or more assets as previewRedeem if called in the</span>
 206 |     | <span class='neutral'>     *   same transaction.</span>
 207 |     | <span class='neutral'>     * - MUST NOT account for redemption limits like those returned from maxRedeem and should always act as though the</span>
 208 |     | <span class='neutral'>     *   redemption would be accepted, regardless if the user has enough shares, etc.</span>
 209 |     | <span class='neutral'>     * - MUST be inclusive of withdrawal fees. Integrators should be aware of the existence of withdrawal fees.</span>
 210 |     | <span class='neutral'>     * - MUST NOT revert.</span>
 211 |     | <span class='neutral'>     *</span>
 212 |     | <span class='neutral'>     * NOTE: any unfavorable discrepancy between convertToAssets and previewRedeem SHOULD be considered slippage in</span>
 213 |     | <span class='neutral'>     * share price or some other type of condition, meaning the depositor will lose assets by redeeming.</span>
 214 |     | <span class='neutral'>     */</span>
 215 |     | <span class='neutral'>    function previewRedeem(uint256 shares) external view returns (uint256 assets);</span>
 216 |     | <span class='neutral'></span>
 217 |     | <span class='neutral'>    /**</span>
 218 |     | <span class='neutral'>     * @dev Burns exactly shares from owner and sends assets of underlying tokens to receiver.</span>
 219 |     | <span class='neutral'>     *</span>
 220 |     | <span class='neutral'>     * - MUST emit the Withdraw event.</span>
 221 |     | <span class='neutral'>     * - MAY support an additional flow in which the underlying tokens are owned by the Vault contract before the</span>
 222 |     | <span class='neutral'>     *   redeem execution, and are accounted for during redeem.</span>
 223 |     | <span class='neutral'>     * - MUST revert if all of shares cannot be redeemed (due to withdrawal limit being reached, slippage, the owner</span>
 224 |     | <span class='neutral'>     *   not having enough shares, etc).</span>
 225 |     | <span class='neutral'>     *</span>
 226 |     | <span class='neutral'>     * NOTE: some implementations will require pre-requesting to the Vault before a withdrawal may be performed.</span>
 227 |     | <span class='neutral'>     * Those methods should be performed separately.</span>
 228 |     | <span class='neutral'>     */</span>
 229 |     | <span class='neutral'>    function redeem(uint256 shares, address receiver, address owner) external returns (uint256 assets);</span>
 230 |     | <span class='neutral'>}</span>
 231 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/interfaces/IERC5267.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (interfaces/IERC5267.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>interface IERC5267 {</span>
  7 |     | <span class='neutral'>    /**</span>
  8 |     | <span class='neutral'>     * @dev MAY be emitted to signal that the domain could have changed.</span>
  9 |     | <span class='neutral'>     */</span>
 10 |     | <span class='neutral'>    event EIP712DomainChanged();</span>
 11 |     | <span class='neutral'></span>
 12 |     | <span class='neutral'>    /**</span>
 13 |     | <span class='neutral'>     * @dev returns the fields and values that describe the domain separator used by this contract for EIP-712</span>
 14 |     | <span class='neutral'>     * signature.</span>
 15 |     | <span class='neutral'>     */</span>
 16 |     | <span class='neutral'>    function eip712Domain()</span>
 17 |     | <span class='neutral'>        external</span>
 18 |     | <span class='neutral'>        view</span>
 19 |     | <span class='neutral'>        returns (</span>
 20 |     | <span class='neutral'>            bytes1 fields,</span>
 21 |     | <span class='neutral'>            string memory name,</span>
 22 |     | <span class='neutral'>            string memory version,</span>
 23 |     | <span class='neutral'>            uint256 chainId,</span>
 24 |     | <span class='neutral'>            address verifyingContract,</span>
 25 |     | <span class='neutral'>            bytes32 salt,</span>
 26 |     | <span class='neutral'>            uint256[] memory extensions</span>
 27 |     | <span class='neutral'>        );</span>
 28 |     | <span class='neutral'>}</span>
 29 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/interfaces/draft-IERC1822.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (interfaces/draft-IERC1822.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev ERC1822: Universal Upgradeable Proxy Standard (UUPS) documents a method for upgradeability through a simplified</span>
  8 |     | <span class='neutral'> * proxy whose upgrades are fully controlled by the current implementation.</span>
  9 |     | <span class='neutral'> */</span>
 10 |     | <span class='neutral'>interface IERC1822Proxiable {</span>
 11 |     | <span class='neutral'>    /**</span>
 12 |     | <span class='neutral'>     * @dev Returns the storage slot that the proxiable contract assumes is being used to store the implementation</span>
 13 |     | <span class='neutral'>     * address.</span>
 14 |     | <span class='neutral'>     *</span>
 15 |     | <span class='neutral'>     * IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks</span>
 16 |     | <span class='neutral'>     * bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this</span>
 17 |     | <span class='neutral'>     * function revert if invoked through a proxy.</span>
 18 |     | <span class='neutral'>     */</span>
 19 |     | <span class='neutral'>    function proxiableUUID() external view returns (bytes32);</span>
 20 |     | <span class='neutral'>}</span>
 21 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (interfaces/draft-IERC6093.sol)</span>
   3 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   4 |     | <span class='neutral'></span>
   5 |     | <span class='neutral'>/**</span>
   6 |     | <span class='neutral'> * @dev Standard ERC20 Errors</span>
   7 |     | <span class='neutral'> * Interface of the https://eips.ethereum.org/EIPS/eip-6093[ERC-6093] custom errors for ERC20 tokens.</span>
   8 |     | <span class='neutral'> */</span>
   9 |     | <span class='neutral'>interface IERC20Errors {</span>
  10 |     | <span class='neutral'>    /**</span>
  11 |     | <span class='neutral'>     * @dev Indicates an error related to the current `balance` of a `sender`. Used in transfers.</span>
  12 |     | <span class='neutral'>     * @param sender Address whose tokens are being transferred.</span>
  13 |     | <span class='neutral'>     * @param balance Current balance for the interacting account.</span>
  14 |     | <span class='neutral'>     * @param needed Minimum amount required to perform a transfer.</span>
  15 |     | <span class='neutral'>     */</span>
  16 |     | <span class='neutral'>    error ERC20InsufficientBalance(address sender, uint256 balance, uint256 needed);</span>
  17 |     | <span class='neutral'></span>
  18 |     | <span class='neutral'>    /**</span>
  19 |     | <span class='neutral'>     * @dev Indicates a failure with the token `sender`. Used in transfers.</span>
  20 |     | <span class='neutral'>     * @param sender Address whose tokens are being transferred.</span>
  21 |     | <span class='neutral'>     */</span>
  22 |     | <span class='neutral'>    error ERC20InvalidSender(address sender);</span>
  23 |     | <span class='neutral'></span>
  24 |     | <span class='neutral'>    /**</span>
  25 |     | <span class='neutral'>     * @dev Indicates a failure with the token `receiver`. Used in transfers.</span>
  26 |     | <span class='neutral'>     * @param receiver Address to which tokens are being transferred.</span>
  27 |     | <span class='neutral'>     */</span>
  28 |     | <span class='neutral'>    error ERC20InvalidReceiver(address receiver);</span>
  29 |     | <span class='neutral'></span>
  30 |     | <span class='neutral'>    /**</span>
  31 |     | <span class='neutral'>     * @dev Indicates a failure with the `spender`’s `allowance`. Used in transfers.</span>
  32 |     | <span class='neutral'>     * @param spender Address that may be allowed to operate on tokens without being their owner.</span>
  33 |     | <span class='neutral'>     * @param allowance Amount of tokens a `spender` is allowed to operate with.</span>
  34 |     | <span class='neutral'>     * @param needed Minimum amount required to perform a transfer.</span>
  35 |     | <span class='neutral'>     */</span>
  36 |     | <span class='neutral'>    error ERC20InsufficientAllowance(address spender, uint256 allowance, uint256 needed);</span>
  37 |     | <span class='neutral'></span>
  38 |     | <span class='neutral'>    /**</span>
  39 |     | <span class='neutral'>     * @dev Indicates a failure with the `approver` of a token to be approved. Used in approvals.</span>
  40 |     | <span class='neutral'>     * @param approver Address initiating an approval operation.</span>
  41 |     | <span class='neutral'>     */</span>
  42 |     | <span class='neutral'>    error ERC20InvalidApprover(address approver);</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>    /**</span>
  45 |     | <span class='neutral'>     * @dev Indicates a failure with the `spender` to be approved. Used in approvals.</span>
  46 |     | <span class='neutral'>     * @param spender Address that may be allowed to operate on tokens without being their owner.</span>
  47 |     | <span class='neutral'>     */</span>
  48 |     | <span class='neutral'>    error ERC20InvalidSpender(address spender);</span>
  49 |     | <span class='neutral'>}</span>
  50 |     | <span class='neutral'></span>
  51 |     | <span class='neutral'>/**</span>
  52 |     | <span class='neutral'> * @dev Standard ERC721 Errors</span>
  53 |     | <span class='neutral'> * Interface of the https://eips.ethereum.org/EIPS/eip-6093[ERC-6093] custom errors for ERC721 tokens.</span>
  54 |     | <span class='neutral'> */</span>
  55 |     | <span class='neutral'>interface IERC721Errors {</span>
  56 |     | <span class='neutral'>    /**</span>
  57 |     | <span class='neutral'>     * @dev Indicates that an address can&#39;t be an owner. For example, `address(0)` is a forbidden owner in EIP-20.</span>
  58 |     | <span class='neutral'>     * Used in balance queries.</span>
  59 |     | <span class='neutral'>     * @param owner Address of the current owner of a token.</span>
  60 |     | <span class='neutral'>     */</span>
  61 |     | <span class='neutral'>    error ERC721InvalidOwner(address owner);</span>
  62 |     | <span class='neutral'></span>
  63 |     | <span class='neutral'>    /**</span>
  64 |     | <span class='neutral'>     * @dev Indicates a `tokenId` whose `owner` is the zero address.</span>
  65 |     | <span class='neutral'>     * @param tokenId Identifier number of a token.</span>
  66 |     | <span class='neutral'>     */</span>
  67 |     | <span class='neutral'>    error ERC721NonexistentToken(uint256 tokenId);</span>
  68 |     | <span class='neutral'></span>
  69 |     | <span class='neutral'>    /**</span>
  70 |     | <span class='neutral'>     * @dev Indicates an error related to the ownership over a particular token. Used in transfers.</span>
  71 |     | <span class='neutral'>     * @param sender Address whose tokens are being transferred.</span>
  72 |     | <span class='neutral'>     * @param tokenId Identifier number of a token.</span>
  73 |     | <span class='neutral'>     * @param owner Address of the current owner of a token.</span>
  74 |     | <span class='neutral'>     */</span>
  75 |     | <span class='neutral'>    error ERC721IncorrectOwner(address sender, uint256 tokenId, address owner);</span>
  76 |     | <span class='neutral'></span>
  77 |     | <span class='neutral'>    /**</span>
  78 |     | <span class='neutral'>     * @dev Indicates a failure with the token `sender`. Used in transfers.</span>
  79 |     | <span class='neutral'>     * @param sender Address whose tokens are being transferred.</span>
  80 |     | <span class='neutral'>     */</span>
  81 |     | <span class='neutral'>    error ERC721InvalidSender(address sender);</span>
  82 |     | <span class='neutral'></span>
  83 |     | <span class='neutral'>    /**</span>
  84 |     | <span class='neutral'>     * @dev Indicates a failure with the token `receiver`. Used in transfers.</span>
  85 |     | <span class='neutral'>     * @param receiver Address to which tokens are being transferred.</span>
  86 |     | <span class='neutral'>     */</span>
  87 |     | <span class='neutral'>    error ERC721InvalidReceiver(address receiver);</span>
  88 |     | <span class='neutral'></span>
  89 |     | <span class='neutral'>    /**</span>
  90 |     | <span class='neutral'>     * @dev Indicates a failure with the `operator`’s approval. Used in transfers.</span>
  91 |     | <span class='neutral'>     * @param operator Address that may be allowed to operate on tokens without being their owner.</span>
  92 |     | <span class='neutral'>     * @param tokenId Identifier number of a token.</span>
  93 |     | <span class='neutral'>     */</span>
  94 |     | <span class='neutral'>    error ERC721InsufficientApproval(address operator, uint256 tokenId);</span>
  95 |     | <span class='neutral'></span>
  96 |     | <span class='neutral'>    /**</span>
  97 |     | <span class='neutral'>     * @dev Indicates a failure with the `approver` of a token to be approved. Used in approvals.</span>
  98 |     | <span class='neutral'>     * @param approver Address initiating an approval operation.</span>
  99 |     | <span class='neutral'>     */</span>
 100 |     | <span class='neutral'>    error ERC721InvalidApprover(address approver);</span>
 101 |     | <span class='neutral'></span>
 102 |     | <span class='neutral'>    /**</span>
 103 |     | <span class='neutral'>     * @dev Indicates a failure with the `operator` to be approved. Used in approvals.</span>
 104 |     | <span class='neutral'>     * @param operator Address that may be allowed to operate on tokens without being their owner.</span>
 105 |     | <span class='neutral'>     */</span>
 106 |     | <span class='neutral'>    error ERC721InvalidOperator(address operator);</span>
 107 |     | <span class='neutral'>}</span>
 108 |     | <span class='neutral'></span>
 109 |     | <span class='neutral'>/**</span>
 110 |     | <span class='neutral'> * @dev Standard ERC1155 Errors</span>
 111 |     | <span class='neutral'> * Interface of the https://eips.ethereum.org/EIPS/eip-6093[ERC-6093] custom errors for ERC1155 tokens.</span>
 112 |     | <span class='neutral'> */</span>
 113 |     | <span class='neutral'>interface IERC1155Errors {</span>
 114 |     | <span class='neutral'>    /**</span>
 115 |     | <span class='neutral'>     * @dev Indicates an error related to the current `balance` of a `sender`. Used in transfers.</span>
 116 |     | <span class='neutral'>     * @param sender Address whose tokens are being transferred.</span>
 117 |     | <span class='neutral'>     * @param balance Current balance for the interacting account.</span>
 118 |     | <span class='neutral'>     * @param needed Minimum amount required to perform a transfer.</span>
 119 |     | <span class='neutral'>     * @param tokenId Identifier number of a token.</span>
 120 |     | <span class='neutral'>     */</span>
 121 |     | <span class='neutral'>    error ERC1155InsufficientBalance(address sender, uint256 balance, uint256 needed, uint256 tokenId);</span>
 122 |     | <span class='neutral'></span>
 123 |     | <span class='neutral'>    /**</span>
 124 |     | <span class='neutral'>     * @dev Indicates a failure with the token `sender`. Used in transfers.</span>
 125 |     | <span class='neutral'>     * @param sender Address whose tokens are being transferred.</span>
 126 |     | <span class='neutral'>     */</span>
 127 |     | <span class='neutral'>    error ERC1155InvalidSender(address sender);</span>
 128 |     | <span class='neutral'></span>
 129 |     | <span class='neutral'>    /**</span>
 130 |     | <span class='neutral'>     * @dev Indicates a failure with the token `receiver`. Used in transfers.</span>
 131 |     | <span class='neutral'>     * @param receiver Address to which tokens are being transferred.</span>
 132 |     | <span class='neutral'>     */</span>
 133 |     | <span class='neutral'>    error ERC1155InvalidReceiver(address receiver);</span>
 134 |     | <span class='neutral'></span>
 135 |     | <span class='neutral'>    /**</span>
 136 |     | <span class='neutral'>     * @dev Indicates a failure with the `operator`’s approval. Used in transfers.</span>
 137 |     | <span class='neutral'>     * @param operator Address that may be allowed to operate on tokens without being their owner.</span>
 138 |     | <span class='neutral'>     * @param owner Address of the current owner of a token.</span>
 139 |     | <span class='neutral'>     */</span>
 140 |     | <span class='neutral'>    error ERC1155MissingApprovalForAll(address operator, address owner);</span>
 141 |     | <span class='neutral'></span>
 142 |     | <span class='neutral'>    /**</span>
 143 |     | <span class='neutral'>     * @dev Indicates a failure with the `approver` of a token to be approved. Used in approvals.</span>
 144 |     | <span class='neutral'>     * @param approver Address initiating an approval operation.</span>
 145 |     | <span class='neutral'>     */</span>
 146 |     | <span class='neutral'>    error ERC1155InvalidApprover(address approver);</span>
 147 |     | <span class='neutral'></span>
 148 |     | <span class='neutral'>    /**</span>
 149 |     | <span class='neutral'>     * @dev Indicates a failure with the `operator` to be approved. Used in approvals.</span>
 150 |     | <span class='neutral'>     * @param operator Address that may be allowed to operate on tokens without being their owner.</span>
 151 |     | <span class='neutral'>     */</span>
 152 |     | <span class='neutral'>    error ERC1155InvalidOperator(address operator);</span>
 153 |     | <span class='neutral'></span>
 154 |     | <span class='neutral'>    /**</span>
 155 |     | <span class='neutral'>     * @dev Indicates an array length mismatch between ids and values in a safeBatchTransferFrom operation.</span>
 156 |     | <span class='neutral'>     * Used in batch transfers.</span>
 157 |     | <span class='neutral'>     * @param idsLength Length of the array of token identifiers</span>
 158 |     | <span class='neutral'>     * @param valuesLength Length of the array of token amounts</span>
 159 |     | <span class='neutral'>     */</span>
 160 |     | <span class='neutral'>    error ERC1155InvalidArrayLength(uint256 idsLength, uint256 valuesLength);</span>
 161 |     | <span class='neutral'>}</span>
 162 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/proxy/ERC1967/ERC1967Utils.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (proxy/ERC1967/ERC1967Utils.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IBeacon} from &quot;../beacon/IBeacon.sol&quot;;</span>
   7 |     | <span class='neutral'>import {Address} from &quot;../../utils/Address.sol&quot;;</span>
   8 |     | <span class='neutral'>import {StorageSlot} from &quot;../../utils/StorageSlot.sol&quot;;</span>
   9 |     | <span class='neutral'></span>
  10 |     | <span class='neutral'>/**</span>
  11 |     | <span class='neutral'> * @dev This abstract contract provides getters and event emitting update functions for</span>
  12 |     | <span class='neutral'> * https://eips.ethereum.org/EIPS/eip-1967[EIP1967] slots.</span>
  13 |     | <span class='neutral'> */</span>
  14 |     | <span class='unexecuted'>library ERC1967Utils {</span>
  15 |     | <span class='neutral'>    // We re-declare ERC-1967 events here because they can&#39;t be used directly from IERC1967.</span>
  16 |     | <span class='neutral'>    // This will be fixed in Solidity 0.8.21. At that point we should remove these events.</span>
  17 |     | <span class='neutral'>    /**</span>
  18 |     | <span class='neutral'>     * @dev Emitted when the implementation is upgraded.</span>
  19 |     | <span class='neutral'>     */</span>
  20 |     | <span class='neutral'>    event Upgraded(address indexed implementation);</span>
  21 |     | <span class='neutral'></span>
  22 |     | <span class='neutral'>    /**</span>
  23 |     | <span class='neutral'>     * @dev Emitted when the admin account has changed.</span>
  24 |     | <span class='neutral'>     */</span>
  25 |     | <span class='neutral'>    event AdminChanged(address previousAdmin, address newAdmin);</span>
  26 |     | <span class='neutral'></span>
  27 |     | <span class='neutral'>    /**</span>
  28 |     | <span class='neutral'>     * @dev Emitted when the beacon is changed.</span>
  29 |     | <span class='neutral'>     */</span>
  30 |     | <span class='neutral'>    event BeaconUpgraded(address indexed beacon);</span>
  31 |     | <span class='neutral'></span>
  32 |     | <span class='neutral'>    /**</span>
  33 |     | <span class='neutral'>     * @dev Storage slot with the address of the current implementation.</span>
  34 |     | <span class='neutral'>     * This is the keccak-256 hash of &quot;eip1967.proxy.implementation&quot; subtracted by 1.</span>
  35 |     | <span class='neutral'>     */</span>
  36 |     | <span class='neutral'>    // solhint-disable-next-line private-vars-leading-underscore</span>
  37 |     | <span class='unexecuted'>    bytes32 internal constant IMPLEMENTATION_SLOT = 0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc;</span>
  38 |     | <span class='neutral'></span>
  39 |     | <span class='neutral'>    /**</span>
  40 |     | <span class='neutral'>     * @dev The `implementation` of the proxy is invalid.</span>
  41 |     | <span class='neutral'>     */</span>
  42 |     | <span class='neutral'>    error ERC1967InvalidImplementation(address implementation);</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>    /**</span>
  45 |     | <span class='neutral'>     * @dev The `admin` of the proxy is invalid.</span>
  46 |     | <span class='neutral'>     */</span>
  47 |     | <span class='neutral'>    error ERC1967InvalidAdmin(address admin);</span>
  48 |     | <span class='neutral'></span>
  49 |     | <span class='neutral'>    /**</span>
  50 |     | <span class='neutral'>     * @dev The `beacon` of the proxy is invalid.</span>
  51 |     | <span class='neutral'>     */</span>
  52 |     | <span class='neutral'>    error ERC1967InvalidBeacon(address beacon);</span>
  53 |     | <span class='neutral'></span>
  54 |     | <span class='neutral'>    /**</span>
  55 |     | <span class='neutral'>     * @dev An upgrade function sees `msg.value &gt; 0` that may be lost.</span>
  56 |     | <span class='neutral'>     */</span>
  57 |     | <span class='neutral'>    error ERC1967NonPayable();</span>
  58 |     | <span class='neutral'></span>
  59 |     | <span class='neutral'>    /**</span>
  60 |     | <span class='neutral'>     * @dev Returns the current implementation address.</span>
  61 |     | <span class='neutral'>     */</span>
  62 |     | <span class='neutral'>    function getImplementation() internal view returns (address) {</span>
  63 |     | <span class='neutral'>        return StorageSlot.getAddressSlot(IMPLEMENTATION_SLOT).value;</span>
  64 |     | <span class='neutral'>    }</span>
  65 |     | <span class='neutral'></span>
  66 |     | <span class='neutral'>    /**</span>
  67 |     | <span class='neutral'>     * @dev Stores a new address in the EIP1967 implementation slot.</span>
  68 |     | <span class='neutral'>     */</span>
  69 |     | <span class='neutral'>    function _setImplementation(address newImplementation) private {</span>
  70 |     | <span class='unexecuted'>        if (newImplementation.code.length == 0) {</span>
  71 |     | <span class='unexecuted'>            revert ERC1967InvalidImplementation(newImplementation);</span>
  72 |     | <span class='neutral'>        }</span>
  73 |     | <span class='neutral'>        StorageSlot.getAddressSlot(IMPLEMENTATION_SLOT).value = newImplementation;</span>
  74 |     | <span class='neutral'>    }</span>
  75 |     | <span class='neutral'></span>
  76 |     | <span class='neutral'>    /**</span>
  77 |     | <span class='neutral'>     * @dev Performs implementation upgrade with additional setup call if data is nonempty.</span>
  78 |     | <span class='neutral'>     * This function is payable only if the setup call is performed, otherwise `msg.value` is rejected</span>
  79 |     | <span class='neutral'>     * to avoid stuck value in the contract.</span>
  80 |     | <span class='neutral'>     *</span>
  81 |     | <span class='neutral'>     * Emits an {IERC1967-Upgraded} event.</span>
  82 |     | <span class='neutral'>     */</span>
  83 |     | <span class='neutral'>    function upgradeToAndCall(address newImplementation, bytes memory data) internal {</span>
  84 |     | <span class='neutral'>        _setImplementation(newImplementation);</span>
  85 |     | <span class='unexecuted'>        emit Upgraded(newImplementation);</span>
  86 |     | <span class='neutral'></span>
  87 |     | <span class='unexecuted'>        if (data.length &gt; 0) {</span>
  88 |     | <span class='neutral'>            Address.functionDelegateCall(newImplementation, data);</span>
  89 |     | <span class='neutral'>        } else {</span>
  90 |     | <span class='neutral'>            _checkNonPayable();</span>
  91 |     | <span class='neutral'>        }</span>
  92 |     | <span class='neutral'>    }</span>
  93 |     | <span class='neutral'></span>
  94 |     | <span class='neutral'>    /**</span>
  95 |     | <span class='neutral'>     * @dev Storage slot with the admin of the contract.</span>
  96 |     | <span class='neutral'>     * This is the keccak-256 hash of &quot;eip1967.proxy.admin&quot; subtracted by 1.</span>
  97 |     | <span class='neutral'>     */</span>
  98 |     | <span class='neutral'>    // solhint-disable-next-line private-vars-leading-underscore</span>
  99 |     | <span class='neutral'>    bytes32 internal constant ADMIN_SLOT = 0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103;</span>
 100 |     | <span class='neutral'></span>
 101 |     | <span class='neutral'>    /**</span>
 102 |     | <span class='neutral'>     * @dev Returns the current admin.</span>
 103 |     | <span class='neutral'>     *</span>
 104 |     | <span class='neutral'>     * TIP: To get this value clients can read directly from the storage slot shown below (specified by EIP1967) using</span>
 105 |     | <span class='neutral'>     * the https://eth.wiki/json-rpc/API#eth_getstorageat[`eth_getStorageAt`] RPC call.</span>
 106 |     | <span class='neutral'>     * `0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103`</span>
 107 |     | <span class='neutral'>     */</span>
 108 |     | <span class='neutral'>    function getAdmin() internal view returns (address) {</span>
 109 |     | <span class='neutral'>        return StorageSlot.getAddressSlot(ADMIN_SLOT).value;</span>
 110 |     | <span class='neutral'>    }</span>
 111 |     | <span class='neutral'></span>
 112 |     | <span class='neutral'>    /**</span>
 113 |     | <span class='neutral'>     * @dev Stores a new address in the EIP1967 admin slot.</span>
 114 |     | <span class='neutral'>     */</span>
 115 |     | <span class='neutral'>    function _setAdmin(address newAdmin) private {</span>
 116 |     | <span class='neutral'>        if (newAdmin == address(0)) {</span>
 117 |     | <span class='neutral'>            revert ERC1967InvalidAdmin(address(0));</span>
 118 |     | <span class='neutral'>        }</span>
 119 |     | <span class='neutral'>        StorageSlot.getAddressSlot(ADMIN_SLOT).value = newAdmin;</span>
 120 |     | <span class='neutral'>    }</span>
 121 |     | <span class='neutral'></span>
 122 |     | <span class='neutral'>    /**</span>
 123 |     | <span class='neutral'>     * @dev Changes the admin of the proxy.</span>
 124 |     | <span class='neutral'>     *</span>
 125 |     | <span class='neutral'>     * Emits an {IERC1967-AdminChanged} event.</span>
 126 |     | <span class='neutral'>     */</span>
 127 |     | <span class='neutral'>    function changeAdmin(address newAdmin) internal {</span>
 128 |     | <span class='neutral'>        emit AdminChanged(getAdmin(), newAdmin);</span>
 129 |     | <span class='neutral'>        _setAdmin(newAdmin);</span>
 130 |     | <span class='neutral'>    }</span>
 131 |     | <span class='neutral'></span>
 132 |     | <span class='neutral'>    /**</span>
 133 |     | <span class='neutral'>     * @dev The storage slot of the UpgradeableBeacon contract which defines the implementation for this proxy.</span>
 134 |     | <span class='neutral'>     * This is the keccak-256 hash of &quot;eip1967.proxy.beacon&quot; subtracted by 1.</span>
 135 |     | <span class='neutral'>     */</span>
 136 |     | <span class='neutral'>    // solhint-disable-next-line private-vars-leading-underscore</span>
 137 |     | <span class='neutral'>    bytes32 internal constant BEACON_SLOT = 0xa3f0ad74e5423aebfd80d3ef4346578335a9a72aeaee59ff6cb3582b35133d50;</span>
 138 |     | <span class='neutral'></span>
 139 |     | <span class='neutral'>    /**</span>
 140 |     | <span class='neutral'>     * @dev Returns the current beacon.</span>
 141 |     | <span class='neutral'>     */</span>
 142 |     | <span class='neutral'>    function getBeacon() internal view returns (address) {</span>
 143 |     | <span class='neutral'>        return StorageSlot.getAddressSlot(BEACON_SLOT).value;</span>
 144 |     | <span class='neutral'>    }</span>
 145 |     | <span class='neutral'></span>
 146 |     | <span class='neutral'>    /**</span>
 147 |     | <span class='neutral'>     * @dev Stores a new beacon in the EIP1967 beacon slot.</span>
 148 |     | <span class='neutral'>     */</span>
 149 |     | <span class='neutral'>    function _setBeacon(address newBeacon) private {</span>
 150 |     | <span class='neutral'>        if (newBeacon.code.length == 0) {</span>
 151 |     | <span class='neutral'>            revert ERC1967InvalidBeacon(newBeacon);</span>
 152 |     | <span class='neutral'>        }</span>
 153 |     | <span class='neutral'></span>
 154 |     | <span class='neutral'>        StorageSlot.getAddressSlot(BEACON_SLOT).value = newBeacon;</span>
 155 |     | <span class='neutral'></span>
 156 |     | <span class='neutral'>        address beaconImplementation = IBeacon(newBeacon).implementation();</span>
 157 |     | <span class='neutral'>        if (beaconImplementation.code.length == 0) {</span>
 158 |     | <span class='neutral'>            revert ERC1967InvalidImplementation(beaconImplementation);</span>
 159 |     | <span class='neutral'>        }</span>
 160 |     | <span class='neutral'>    }</span>
 161 |     | <span class='neutral'></span>
 162 |     | <span class='neutral'>    /**</span>
 163 |     | <span class='neutral'>     * @dev Change the beacon and trigger a setup call if data is nonempty.</span>
 164 |     | <span class='neutral'>     * This function is payable only if the setup call is performed, otherwise `msg.value` is rejected</span>
 165 |     | <span class='neutral'>     * to avoid stuck value in the contract.</span>
 166 |     | <span class='neutral'>     *</span>
 167 |     | <span class='neutral'>     * Emits an {IERC1967-BeaconUpgraded} event.</span>
 168 |     | <span class='neutral'>     *</span>
 169 |     | <span class='neutral'>     * CAUTION: Invoking this function has no effect on an instance of {BeaconProxy} since v5, since</span>
 170 |     | <span class='neutral'>     * it uses an immutable beacon without looking at the value of the ERC-1967 beacon slot for</span>
 171 |     | <span class='neutral'>     * efficiency.</span>
 172 |     | <span class='neutral'>     */</span>
 173 |     | <span class='neutral'>    function upgradeBeaconToAndCall(address newBeacon, bytes memory data) internal {</span>
 174 |     | <span class='neutral'>        _setBeacon(newBeacon);</span>
 175 |     | <span class='neutral'>        emit BeaconUpgraded(newBeacon);</span>
 176 |     | <span class='neutral'></span>
 177 |     | <span class='neutral'>        if (data.length &gt; 0) {</span>
 178 |     | <span class='neutral'>            Address.functionDelegateCall(IBeacon(newBeacon).implementation(), data);</span>
 179 |     | <span class='neutral'>        } else {</span>
 180 |     | <span class='neutral'>            _checkNonPayable();</span>
 181 |     | <span class='neutral'>        }</span>
 182 |     | <span class='neutral'>    }</span>
 183 |     | <span class='neutral'></span>
 184 |     | <span class='neutral'>    /**</span>
 185 |     | <span class='neutral'>     * @dev Reverts if `msg.value` is not zero. It can be used to avoid `msg.value` stuck in the contract</span>
 186 |     | <span class='neutral'>     * if an upgrade doesn&#39;t perform an initialization call.</span>
 187 |     | <span class='neutral'>     */</span>
 188 |     | <span class='neutral'>    function _checkNonPayable() private {</span>
 189 |     | <span class='unexecuted'>        if (msg.value &gt; 0) {</span>
 190 |     | <span class='unexecuted'>            revert ERC1967NonPayable();</span>
 191 |     | <span class='neutral'>        }</span>
 192 |     | <span class='neutral'>    }</span>
 193 |     | <span class='neutral'>}</span>
 194 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/proxy/beacon/IBeacon.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (proxy/beacon/IBeacon.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev This is the interface that {BeaconProxy} expects of its beacon.</span>
  8 |     | <span class='neutral'> */</span>
  9 |     | <span class='neutral'>interface IBeacon {</span>
 10 |     | <span class='neutral'>    /**</span>
 11 |     | <span class='neutral'>     * @dev Must return an address that can be used as a delegate call target.</span>
 12 |     | <span class='neutral'>     *</span>
 13 |     | <span class='neutral'>     * {UpgradeableBeacon} will check that this address is a contract.</span>
 14 |     | <span class='neutral'>     */</span>
 15 |     | <span class='neutral'>    function implementation() external view returns (address);</span>
 16 |     | <span class='neutral'>}</span>
 17 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/token/ERC20/ERC20.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/ERC20.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IERC20} from &quot;./IERC20.sol&quot;;</span>
   7 |     | <span class='neutral'>import {IERC20Metadata} from &quot;./extensions/IERC20Metadata.sol&quot;;</span>
   8 |     | <span class='neutral'>import {Context} from &quot;../../utils/Context.sol&quot;;</span>
   9 |     | <span class='neutral'>import {IERC20Errors} from &quot;../../interfaces/draft-IERC6093.sol&quot;;</span>
  10 |     | <span class='neutral'></span>
  11 |     | <span class='neutral'>/**</span>
  12 |     | <span class='neutral'> * @dev Implementation of the {IERC20} interface.</span>
  13 |     | <span class='neutral'> *</span>
  14 |     | <span class='neutral'> * This implementation is agnostic to the way tokens are created. This means</span>
  15 |     | <span class='neutral'> * that a supply mechanism has to be added in a derived contract using {_mint}.</span>
  16 |     | <span class='neutral'> *</span>
  17 |     | <span class='neutral'> * TIP: For a detailed writeup see our guide</span>
  18 |     | <span class='neutral'> * https://forum.openzeppelin.com/t/how-to-implement-erc20-supply-mechanisms/226[How</span>
  19 |     | <span class='neutral'> * to implement supply mechanisms].</span>
  20 |     | <span class='neutral'> *</span>
  21 |     | <span class='neutral'> * The default value of {decimals} is 18. To change this, you should override</span>
  22 |     | <span class='neutral'> * this function so it returns a different value.</span>
  23 |     | <span class='neutral'> *</span>
  24 |     | <span class='neutral'> * We have followed general OpenZeppelin Contracts guidelines: functions revert</span>
  25 |     | <span class='neutral'> * instead returning `false` on failure. This behavior is nonetheless</span>
  26 |     | <span class='neutral'> * conventional and does not conflict with the expectations of ERC20</span>
  27 |     | <span class='neutral'> * applications.</span>
  28 |     | <span class='neutral'> *</span>
  29 |     | <span class='neutral'> * Additionally, an {Approval} event is emitted on calls to {transferFrom}.</span>
  30 |     | <span class='neutral'> * This allows applications to reconstruct the allowance for all accounts just</span>
  31 |     | <span class='neutral'> * by listening to said events. Other implementations of the EIP may not emit</span>
  32 |     | <span class='neutral'> * these events, as it isn&#39;t required by the specification.</span>
  33 |     | <span class='neutral'> */</span>
  34 |     | <span class='neutral'>abstract contract ERC20 is Context, IERC20, IERC20Metadata, IERC20Errors {</span>
  35 |     | <span class='neutral'>    mapping(address account =&gt; uint256) private _balances;</span>
  36 |     | <span class='neutral'></span>
  37 |     | <span class='neutral'>    mapping(address account =&gt; mapping(address spender =&gt; uint256)) private _allowances;</span>
  38 |     | <span class='neutral'></span>
  39 |     | <span class='neutral'>    uint256 private _totalSupply;</span>
  40 |     | <span class='neutral'></span>
  41 |     | <span class='neutral'>    string private _name;</span>
  42 |     | <span class='neutral'>    string private _symbol;</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>    /**</span>
  45 |     | <span class='neutral'>     * @dev Sets the values for {name} and {symbol}.</span>
  46 |     | <span class='neutral'>     *</span>
  47 |     | <span class='neutral'>     * All two of these values are immutable: they can only be set once during</span>
  48 |     | <span class='neutral'>     * construction.</span>
  49 |     | <span class='neutral'>     */</span>
  50 |     | <span class='neutral'>    constructor(string memory name_, string memory symbol_) {</span>
  51 | *   | <span class='executed'>        _name = name_;</span>
  52 | *   | <span class='executed'>        _symbol = symbol_;</span>
  53 |     | <span class='neutral'>    }</span>
  54 |     | <span class='neutral'></span>
  55 |     | <span class='neutral'>    /**</span>
  56 |     | <span class='neutral'>     * @dev Returns the name of the token.</span>
  57 |     | <span class='neutral'>     */</span>
  58 |     | <span class='neutral'>    function name() public view virtual returns (string memory) {</span>
  59 |     | <span class='unexecuted'>        return _name;</span>
  60 |     | <span class='neutral'>    }</span>
  61 |     | <span class='neutral'></span>
  62 |     | <span class='neutral'>    /**</span>
  63 |     | <span class='neutral'>     * @dev Returns the symbol of the token, usually a shorter version of the</span>
  64 |     | <span class='neutral'>     * name.</span>
  65 |     | <span class='neutral'>     */</span>
  66 |     | <span class='neutral'>    function symbol() public view virtual returns (string memory) {</span>
  67 |     | <span class='neutral'>        return _symbol;</span>
  68 |     | <span class='neutral'>    }</span>
  69 |     | <span class='neutral'></span>
  70 |     | <span class='neutral'>    /**</span>
  71 |     | <span class='neutral'>     * @dev Returns the number of decimals used to get its user representation.</span>
  72 |     | <span class='neutral'>     * For example, if `decimals` equals `2`, a balance of `505` tokens should</span>
  73 |     | <span class='neutral'>     * be displayed to a user as `5.05` (`505 / 10 ** 2`).</span>
  74 |     | <span class='neutral'>     *</span>
  75 |     | <span class='neutral'>     * Tokens usually opt for a value of 18, imitating the relationship between</span>
  76 |     | <span class='neutral'>     * Ether and Wei. This is the default value returned by this function, unless</span>
  77 |     | <span class='neutral'>     * it&#39;s overridden.</span>
  78 |     | <span class='neutral'>     *</span>
  79 |     | <span class='neutral'>     * NOTE: This information is only used for _display_ purposes: it in</span>
  80 |     | <span class='neutral'>     * no way affects any of the arithmetic of the contract, including</span>
  81 |     | <span class='neutral'>     * {IERC20-balanceOf} and {IERC20-transfer}.</span>
  82 |     | <span class='neutral'>     */</span>
  83 |     | <span class='neutral'>    function decimals() public view virtual returns (uint8) {</span>
  84 |     | <span class='neutral'>        return 18;</span>
  85 |     | <span class='neutral'>    }</span>
  86 |     | <span class='neutral'></span>
  87 |     | <span class='neutral'>    /**</span>
  88 |     | <span class='neutral'>     * @dev See {IERC20-totalSupply}.</span>
  89 |     | <span class='neutral'>     */</span>
  90 |     | <span class='neutral'>    function totalSupply() public view virtual returns (uint256) {</span>
  91 |     | <span class='unexecuted'>        return _totalSupply;</span>
  92 |     | <span class='neutral'>    }</span>
  93 |     | <span class='neutral'></span>
  94 |     | <span class='neutral'>    /**</span>
  95 |     | <span class='neutral'>     * @dev See {IERC20-balanceOf}.</span>
  96 |     | <span class='neutral'>     */</span>
  97 |     | <span class='neutral'>    function balanceOf(address account) public view virtual returns (uint256) {</span>
  98 |     | <span class='neutral'>        return _balances[account];</span>
  99 |     | <span class='neutral'>    }</span>
 100 |     | <span class='neutral'></span>
 101 |     | <span class='neutral'>    /**</span>
 102 |     | <span class='neutral'>     * @dev See {IERC20-transfer}.</span>
 103 |     | <span class='neutral'>     *</span>
 104 |     | <span class='neutral'>     * Requirements:</span>
 105 |     | <span class='neutral'>     *</span>
 106 |     | <span class='neutral'>     * - `to` cannot be the zero address.</span>
 107 |     | <span class='neutral'>     * - the caller must have a balance of at least `value`.</span>
 108 |     | <span class='neutral'>     */</span>
 109 |     | <span class='neutral'>    function transfer(address to, uint256 value) public virtual returns (bool) {</span>
 110 |     | <span class='neutral'>        address owner = _msgSender();</span>
 111 |     | <span class='unexecuted'>        _transfer(owner, to, value);</span>
 112 |     | <span class='neutral'>        return true;</span>
 113 |     | <span class='neutral'>    }</span>
 114 |     | <span class='neutral'></span>
 115 |     | <span class='neutral'>    /**</span>
 116 |     | <span class='neutral'>     * @dev See {IERC20-allowance}.</span>
 117 |     | <span class='neutral'>     */</span>
 118 |     | <span class='neutral'>    function allowance(address owner, address spender) public view virtual returns (uint256) {</span>
 119 |     | <span class='unexecuted'>        return _allowances[owner][spender];</span>
 120 |     | <span class='neutral'>    }</span>
 121 |     | <span class='neutral'></span>
 122 |     | <span class='neutral'>    /**</span>
 123 |     | <span class='neutral'>     * @dev See {IERC20-approve}.</span>
 124 |     | <span class='neutral'>     *</span>
 125 |     | <span class='neutral'>     * NOTE: If `value` is the maximum `uint256`, the allowance is not updated on</span>
 126 |     | <span class='neutral'>     * `transferFrom`. This is semantically equivalent to an infinite approval.</span>
 127 |     | <span class='neutral'>     *</span>
 128 |     | <span class='neutral'>     * Requirements:</span>
 129 |     | <span class='neutral'>     *</span>
 130 |     | <span class='neutral'>     * - `spender` cannot be the zero address.</span>
 131 |     | <span class='neutral'>     */</span>
 132 |     | <span class='neutral'>    function approve(address spender, uint256 value) public virtual returns (bool) {</span>
 133 |     | <span class='neutral'>        address owner = _msgSender();</span>
 134 |     | <span class='neutral'>        _approve(owner, spender, value);</span>
 135 |     | <span class='neutral'>        return true;</span>
 136 |     | <span class='neutral'>    }</span>
 137 |     | <span class='neutral'></span>
 138 |     | <span class='neutral'>    /**</span>
 139 |     | <span class='neutral'>     * @dev See {IERC20-transferFrom}.</span>
 140 |     | <span class='neutral'>     *</span>
 141 |     | <span class='neutral'>     * Emits an {Approval} event indicating the updated allowance. This is not</span>
 142 |     | <span class='neutral'>     * required by the EIP. See the note at the beginning of {ERC20}.</span>
 143 |     | <span class='neutral'>     *</span>
 144 |     | <span class='neutral'>     * NOTE: Does not update the allowance if the current allowance</span>
 145 |     | <span class='neutral'>     * is the maximum `uint256`.</span>
 146 |     | <span class='neutral'>     *</span>
 147 |     | <span class='neutral'>     * Requirements:</span>
 148 |     | <span class='neutral'>     *</span>
 149 |     | <span class='neutral'>     * - `from` and `to` cannot be the zero address.</span>
 150 |     | <span class='neutral'>     * - `from` must have a balance of at least `value`.</span>
 151 |     | <span class='neutral'>     * - the caller must have allowance for ``from``&#39;s tokens of at least</span>
 152 |     | <span class='neutral'>     * `value`.</span>
 153 |     | <span class='neutral'>     */</span>
 154 |     | <span class='neutral'>    function transferFrom(address from, address to, uint256 value) public virtual returns (bool) {</span>
 155 |     | <span class='neutral'>        address spender = _msgSender();</span>
 156 |     | <span class='neutral'>        _spendAllowance(from, spender, value);</span>
 157 |     | <span class='unexecuted'>        _transfer(from, to, value);</span>
 158 |     | <span class='neutral'>        return true;</span>
 159 |     | <span class='neutral'>    }</span>
 160 |     | <span class='neutral'></span>
 161 |     | <span class='neutral'>    /**</span>
 162 |     | <span class='neutral'>     * @dev Moves a `value` amount of tokens from `from` to `to`.</span>
 163 |     | <span class='neutral'>     *</span>
 164 |     | <span class='neutral'>     * This internal function is equivalent to {transfer}, and can be used to</span>
 165 |     | <span class='neutral'>     * e.g. implement automatic token fees, slashing mechanisms, etc.</span>
 166 |     | <span class='neutral'>     *</span>
 167 |     | <span class='neutral'>     * Emits a {Transfer} event.</span>
 168 |     | <span class='neutral'>     *</span>
 169 |     | <span class='neutral'>     * NOTE: This function is not virtual, {_update} should be overridden instead.</span>
 170 |     | <span class='neutral'>     */</span>
 171 |     | <span class='unexecuted'>    function _transfer(address from, address to, uint256 value) internal {</span>
 172 |     | <span class='unexecuted'>        if (from == address(0)) {</span>
 173 |     | <span class='unexecuted'>            revert ERC20InvalidSender(address(0));</span>
 174 |     | <span class='neutral'>        }</span>
 175 |     | <span class='unexecuted'>        if (to == address(0)) {</span>
 176 |     | <span class='unexecuted'>            revert ERC20InvalidReceiver(address(0));</span>
 177 |     | <span class='neutral'>        }</span>
 178 |     | <span class='neutral'>        _update(from, to, value);</span>
 179 |     | <span class='neutral'>    }</span>
 180 |     | <span class='neutral'></span>
 181 |     | <span class='neutral'>    /**</span>
 182 |     | <span class='neutral'>     * @dev Transfers a `value` amount of tokens from `from` to `to`, or alternatively mints (or burns) if `from`</span>
 183 |     | <span class='neutral'>     * (or `to`) is the zero address. All customizations to transfers, mints, and burns should be done by overriding</span>
 184 |     | <span class='neutral'>     * this function.</span>
 185 |     | <span class='neutral'>     *</span>
 186 |     | <span class='neutral'>     * Emits a {Transfer} event.</span>
 187 |     | <span class='neutral'>     */</span>
 188 |     | <span class='neutral'>    function _update(address from, address to, uint256 value) internal virtual {</span>
 189 |     | <span class='unexecuted'>        if (from == address(0)) {</span>
 190 |     | <span class='neutral'>            // Overflow check required: The rest of the code assumes that totalSupply never overflows</span>
 191 | *   | <span class='executed'>            _totalSupply += value;</span>
 192 |     | <span class='neutral'>        } else {</span>
 193 |     | <span class='neutral'>            uint256 fromBalance = _balances[from];</span>
 194 | *   | <span class='executed'>            if (fromBalance &lt; value) {</span>
 195 | *   | <span class='executed'>                revert ERC20InsufficientBalance(from, fromBalance, value);</span>
 196 |     | <span class='neutral'>            }</span>
 197 |     | <span class='neutral'>            unchecked {</span>
 198 |     | <span class='neutral'>                // Overflow not possible: value &lt;= fromBalance &lt;= totalSupply.</span>
 199 |     | <span class='neutral'>                _balances[from] = fromBalance - value;</span>
 200 |     | <span class='neutral'>            }</span>
 201 |     | <span class='neutral'>        }</span>
 202 |     | <span class='neutral'></span>
 203 |     | <span class='neutral'>        if (to == address(0)) {</span>
 204 |     | <span class='neutral'>            unchecked {</span>
 205 |     | <span class='neutral'>                // Overflow not possible: value &lt;= totalSupply or value &lt;= fromBalance &lt;= totalSupply.</span>
 206 | *   | <span class='executed'>                _totalSupply -= value;</span>
 207 |     | <span class='neutral'>            }</span>
 208 |     | <span class='neutral'>        } else {</span>
 209 |     | <span class='neutral'>            unchecked {</span>
 210 |     | <span class='neutral'>                // Overflow not possible: balance + value is at most totalSupply, which we know fits into a uint256.</span>
 211 |     | <span class='neutral'>                _balances[to] += value;</span>
 212 |     | <span class='neutral'>            }</span>
 213 |     | <span class='neutral'>        }</span>
 214 |     | <span class='neutral'></span>
 215 | *   | <span class='executed'>        emit Transfer(from, to, value);</span>
 216 |     | <span class='neutral'>    }</span>
 217 |     | <span class='neutral'></span>
 218 |     | <span class='neutral'>    /**</span>
 219 |     | <span class='neutral'>     * @dev Creates a `value` amount of tokens and assigns them to `account`, by transferring it from address(0).</span>
 220 |     | <span class='neutral'>     * Relies on the `_update` mechanism</span>
 221 |     | <span class='neutral'>     *</span>
 222 |     | <span class='neutral'>     * Emits a {Transfer} event with `from` set to the zero address.</span>
 223 |     | <span class='neutral'>     *</span>
 224 |     | <span class='neutral'>     * NOTE: This function is not virtual, {_update} should be overridden instead.</span>
 225 |     | <span class='neutral'>     */</span>
 226 |     | <span class='neutral'>    function _mint(address account, uint256 value) internal {</span>
 227 | *   | <span class='executed'>        if (account == address(0)) {</span>
 228 |     | <span class='unexecuted'>            revert ERC20InvalidReceiver(address(0));</span>
 229 |     | <span class='neutral'>        }</span>
 230 |     | <span class='neutral'>        _update(address(0), account, value);</span>
 231 |     | <span class='neutral'>    }</span>
 232 |     | <span class='neutral'></span>
 233 |     | <span class='neutral'>    /**</span>
 234 |     | <span class='neutral'>     * @dev Destroys a `value` amount of tokens from `account`, lowering the total supply.</span>
 235 |     | <span class='neutral'>     * Relies on the `_update` mechanism.</span>
 236 |     | <span class='neutral'>     *</span>
 237 |     | <span class='neutral'>     * Emits a {Transfer} event with `to` set to the zero address.</span>
 238 |     | <span class='neutral'>     *</span>
 239 |     | <span class='neutral'>     * NOTE: This function is not virtual, {_update} should be overridden instead</span>
 240 |     | <span class='neutral'>     */</span>
 241 |     | <span class='neutral'>    function _burn(address account, uint256 value) internal {</span>
 242 | *   | <span class='executed'>        if (account == address(0)) {</span>
 243 |     | <span class='unexecuted'>            revert ERC20InvalidSender(address(0));</span>
 244 |     | <span class='neutral'>        }</span>
 245 |     | <span class='neutral'>        _update(account, address(0), value);</span>
 246 |     | <span class='neutral'>    }</span>
 247 |     | <span class='neutral'></span>
 248 |     | <span class='neutral'>    /**</span>
 249 |     | <span class='neutral'>     * @dev Sets `value` as the allowance of `spender` over the `owner` s tokens.</span>
 250 |     | <span class='neutral'>     *</span>
 251 |     | <span class='neutral'>     * This internal function is equivalent to `approve`, and can be used to</span>
 252 |     | <span class='neutral'>     * e.g. set automatic allowances for certain subsystems, etc.</span>
 253 |     | <span class='neutral'>     *</span>
 254 |     | <span class='neutral'>     * Emits an {Approval} event.</span>
 255 |     | <span class='neutral'>     *</span>
 256 |     | <span class='neutral'>     * Requirements:</span>
 257 |     | <span class='neutral'>     *</span>
 258 |     | <span class='neutral'>     * - `owner` cannot be the zero address.</span>
 259 |     | <span class='neutral'>     * - `spender` cannot be the zero address.</span>
 260 |     | <span class='neutral'>     *</span>
 261 |     | <span class='neutral'>     * Overrides to this logic should be done to the variant with an additional `bool emitEvent` argument.</span>
 262 |     | <span class='neutral'>     */</span>
 263 |     | <span class='neutral'>    function _approve(address owner, address spender, uint256 value) internal {</span>
 264 |     | <span class='unexecuted'>        _approve(owner, spender, value, true);</span>
 265 |     | <span class='neutral'>    }</span>
 266 |     | <span class='neutral'></span>
 267 |     | <span class='neutral'>    /**</span>
 268 |     | <span class='neutral'>     * @dev Variant of {_approve} with an optional flag to enable or disable the {Approval} event.</span>
 269 |     | <span class='neutral'>     *</span>
 270 |     | <span class='neutral'>     * By default (when calling {_approve}) the flag is set to true. On the other hand, approval changes made by</span>
 271 |     | <span class='neutral'>     * `_spendAllowance` during the `transferFrom` operation set the flag to false. This saves gas by not emitting any</span>
 272 |     | <span class='neutral'>     * `Approval` event during `transferFrom` operations.</span>
 273 |     | <span class='neutral'>     *</span>
 274 |     | <span class='neutral'>     * Anyone who wishes to continue emitting `Approval` events on the`transferFrom` operation can force the flag to</span>
 275 |     | <span class='neutral'>     * true using the following override:</span>
 276 |     | <span class='neutral'>     * ```</span>
 277 |     | <span class='neutral'>     * function _approve(address owner, address spender, uint256 value, bool) internal virtual override {</span>
 278 |     | <span class='neutral'>     *     super._approve(owner, spender, value, true);</span>
 279 |     | <span class='neutral'>     * }</span>
 280 |     | <span class='neutral'>     * ```</span>
 281 |     | <span class='neutral'>     *</span>
 282 |     | <span class='neutral'>     * Requirements are the same as {_approve}.</span>
 283 |     | <span class='neutral'>     */</span>
 284 |     | <span class='unexecuted'>    function _approve(address owner, address spender, uint256 value, bool emitEvent) internal virtual {</span>
 285 |     | <span class='unexecuted'>        if (owner == address(0)) {</span>
 286 |     | <span class='unexecuted'>            revert ERC20InvalidApprover(address(0));</span>
 287 |     | <span class='neutral'>        }</span>
 288 |     | <span class='unexecuted'>        if (spender == address(0)) {</span>
 289 |     | <span class='unexecuted'>            revert ERC20InvalidSpender(address(0));</span>
 290 |     | <span class='neutral'>        }</span>
 291 |     | <span class='neutral'>        _allowances[owner][spender] = value;</span>
 292 |     | <span class='neutral'>        if (emitEvent) {</span>
 293 |     | <span class='unexecuted'>            emit Approval(owner, spender, value);</span>
 294 |     | <span class='neutral'>        }</span>
 295 |     | <span class='neutral'>    }</span>
 296 |     | <span class='neutral'></span>
 297 |     | <span class='neutral'>    /**</span>
 298 |     | <span class='neutral'>     * @dev Updates `owner` s allowance for `spender` based on spent `value`.</span>
 299 |     | <span class='neutral'>     *</span>
 300 |     | <span class='neutral'>     * Does not update the allowance value in case of infinite allowance.</span>
 301 |     | <span class='neutral'>     * Revert if not enough allowance is available.</span>
 302 |     | <span class='neutral'>     *</span>
 303 |     | <span class='neutral'>     * Does not emit an {Approval} event.</span>
 304 |     | <span class='neutral'>     */</span>
 305 |     | <span class='neutral'>    function _spendAllowance(address owner, address spender, uint256 value) internal virtual {</span>
 306 |     | <span class='neutral'>        uint256 currentAllowance = allowance(owner, spender);</span>
 307 |     | <span class='unexecuted'>        if (currentAllowance != type(uint256).max) {</span>
 308 |     | <span class='unexecuted'>            if (currentAllowance &lt; value) {</span>
 309 |     | <span class='unexecuted'>                revert ERC20InsufficientAllowance(spender, currentAllowance, value);</span>
 310 |     | <span class='neutral'>            }</span>
 311 |     | <span class='neutral'>            unchecked {</span>
 312 |     | <span class='neutral'>                _approve(owner, spender, currentAllowance - value, false);</span>
 313 |     | <span class='neutral'>            }</span>
 314 |     | <span class='neutral'>        }</span>
 315 |     | <span class='neutral'>    }</span>
 316 |     | <span class='neutral'>}</span>
 317 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/IERC20.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev Interface of the ERC20 standard as defined in the EIP.</span>
  8 |     | <span class='neutral'> */</span>
  9 |     | <span class='neutral'>interface IERC20 {</span>
 10 |     | <span class='neutral'>    /**</span>
 11 |     | <span class='neutral'>     * @dev Emitted when `value` tokens are moved from one account (`from`) to</span>
 12 |     | <span class='neutral'>     * another (`to`).</span>
 13 |     | <span class='neutral'>     *</span>
 14 |     | <span class='neutral'>     * Note that `value` may be zero.</span>
 15 |     | <span class='neutral'>     */</span>
 16 |     | <span class='neutral'>    event Transfer(address indexed from, address indexed to, uint256 value);</span>
 17 |     | <span class='neutral'></span>
 18 |     | <span class='neutral'>    /**</span>
 19 |     | <span class='neutral'>     * @dev Emitted when the allowance of a `spender` for an `owner` is set by</span>
 20 |     | <span class='neutral'>     * a call to {approve}. `value` is the new allowance.</span>
 21 |     | <span class='neutral'>     */</span>
 22 |     | <span class='neutral'>    event Approval(address indexed owner, address indexed spender, uint256 value);</span>
 23 |     | <span class='neutral'></span>
 24 |     | <span class='neutral'>    /**</span>
 25 |     | <span class='neutral'>     * @dev Returns the value of tokens in existence.</span>
 26 |     | <span class='neutral'>     */</span>
 27 |     | <span class='neutral'>    function totalSupply() external view returns (uint256);</span>
 28 |     | <span class='neutral'></span>
 29 |     | <span class='neutral'>    /**</span>
 30 |     | <span class='neutral'>     * @dev Returns the value of tokens owned by `account`.</span>
 31 |     | <span class='neutral'>     */</span>
 32 |     | <span class='neutral'>    function balanceOf(address account) external view returns (uint256);</span>
 33 |     | <span class='neutral'></span>
 34 |     | <span class='neutral'>    /**</span>
 35 |     | <span class='neutral'>     * @dev Moves a `value` amount of tokens from the caller&#39;s account to `to`.</span>
 36 |     | <span class='neutral'>     *</span>
 37 |     | <span class='neutral'>     * Returns a boolean value indicating whether the operation succeeded.</span>
 38 |     | <span class='neutral'>     *</span>
 39 |     | <span class='neutral'>     * Emits a {Transfer} event.</span>
 40 |     | <span class='neutral'>     */</span>
 41 |     | <span class='neutral'>    function transfer(address to, uint256 value) external returns (bool);</span>
 42 |     | <span class='neutral'></span>
 43 |     | <span class='neutral'>    /**</span>
 44 |     | <span class='neutral'>     * @dev Returns the remaining number of tokens that `spender` will be</span>
 45 |     | <span class='neutral'>     * allowed to spend on behalf of `owner` through {transferFrom}. This is</span>
 46 |     | <span class='neutral'>     * zero by default.</span>
 47 |     | <span class='neutral'>     *</span>
 48 |     | <span class='neutral'>     * This value changes when {approve} or {transferFrom} are called.</span>
 49 |     | <span class='neutral'>     */</span>
 50 |     | <span class='neutral'>    function allowance(address owner, address spender) external view returns (uint256);</span>
 51 |     | <span class='neutral'></span>
 52 |     | <span class='neutral'>    /**</span>
 53 |     | <span class='neutral'>     * @dev Sets a `value` amount of tokens as the allowance of `spender` over the</span>
 54 |     | <span class='neutral'>     * caller&#39;s tokens.</span>
 55 |     | <span class='neutral'>     *</span>
 56 |     | <span class='neutral'>     * Returns a boolean value indicating whether the operation succeeded.</span>
 57 |     | <span class='neutral'>     *</span>
 58 |     | <span class='neutral'>     * IMPORTANT: Beware that changing an allowance with this method brings the risk</span>
 59 |     | <span class='neutral'>     * that someone may use both the old and the new allowance by unfortunate</span>
 60 |     | <span class='neutral'>     * transaction ordering. One possible solution to mitigate this race</span>
 61 |     | <span class='neutral'>     * condition is to first reduce the spender&#39;s allowance to 0 and set the</span>
 62 |     | <span class='neutral'>     * desired value afterwards:</span>
 63 |     | <span class='neutral'>     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729</span>
 64 |     | <span class='neutral'>     *</span>
 65 |     | <span class='neutral'>     * Emits an {Approval} event.</span>
 66 |     | <span class='neutral'>     */</span>
 67 |     | <span class='neutral'>    function approve(address spender, uint256 value) external returns (bool);</span>
 68 |     | <span class='neutral'></span>
 69 |     | <span class='neutral'>    /**</span>
 70 |     | <span class='neutral'>     * @dev Moves a `value` amount of tokens from `from` to `to` using the</span>
 71 |     | <span class='neutral'>     * allowance mechanism. `value` is then deducted from the caller&#39;s</span>
 72 |     | <span class='neutral'>     * allowance.</span>
 73 |     | <span class='neutral'>     *</span>
 74 |     | <span class='neutral'>     * Returns a boolean value indicating whether the operation succeeded.</span>
 75 |     | <span class='neutral'>     *</span>
 76 |     | <span class='neutral'>     * Emits a {Transfer} event.</span>
 77 |     | <span class='neutral'>     */</span>
 78 |     | <span class='neutral'>    function transferFrom(address from, address to, uint256 value) external returns (bool);</span>
 79 |     | <span class='neutral'>}</span>
 80 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/token/ERC20/extensions/ERC20Permit.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/extensions/ERC20Permit.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>import {IERC20Permit} from &quot;./IERC20Permit.sol&quot;;</span>
  7 |     | <span class='neutral'>import {ERC20} from &quot;../ERC20.sol&quot;;</span>
  8 |     | <span class='neutral'>import {ECDSA} from &quot;../../../utils/cryptography/ECDSA.sol&quot;;</span>
  9 |     | <span class='neutral'>import {EIP712} from &quot;../../../utils/cryptography/EIP712.sol&quot;;</span>
 10 |     | <span class='neutral'>import {Nonces} from &quot;../../../utils/Nonces.sol&quot;;</span>
 11 |     | <span class='neutral'></span>
 12 |     | <span class='neutral'>/**</span>
 13 |     | <span class='neutral'> * @dev Implementation of the ERC20 Permit extension allowing approvals to be made via signatures, as defined in</span>
 14 |     | <span class='neutral'> * https://eips.ethereum.org/EIPS/eip-2612[EIP-2612].</span>
 15 |     | <span class='neutral'> *</span>
 16 |     | <span class='neutral'> * Adds the {permit} method, which can be used to change an account&#39;s ERC20 allowance (see {IERC20-allowance}) by</span>
 17 |     | <span class='neutral'> * presenting a message signed by the account. By not relying on `{IERC20-approve}`, the token holder account doesn&#39;t</span>
 18 |     | <span class='neutral'> * need to send a transaction, and thus is not required to hold Ether at all.</span>
 19 |     | <span class='neutral'> */</span>
 20 |     | <span class='neutral'>abstract contract ERC20Permit is ERC20, IERC20Permit, EIP712, Nonces {</span>
 21 |     | <span class='neutral'>    bytes32 private constant PERMIT_TYPEHASH =</span>
 22 |     | <span class='unexecuted'>        keccak256(&quot;Permit(address owner,address spender,uint256 value,uint256 nonce,uint256 deadline)&quot;);</span>
 23 |     | <span class='neutral'></span>
 24 |     | <span class='neutral'>    /**</span>
 25 |     | <span class='neutral'>     * @dev Permit deadline has expired.</span>
 26 |     | <span class='neutral'>     */</span>
 27 |     | <span class='neutral'>    error ERC2612ExpiredSignature(uint256 deadline);</span>
 28 |     | <span class='neutral'></span>
 29 |     | <span class='neutral'>    /**</span>
 30 |     | <span class='neutral'>     * @dev Mismatched signature.</span>
 31 |     | <span class='neutral'>     */</span>
 32 |     | <span class='neutral'>    error ERC2612InvalidSigner(address signer, address owner);</span>
 33 |     | <span class='neutral'></span>
 34 |     | <span class='neutral'>    /**</span>
 35 |     | <span class='neutral'>     * @dev Initializes the {EIP712} domain separator using the `name` parameter, and setting `version` to `&quot;1&quot;`.</span>
 36 |     | <span class='neutral'>     *</span>
 37 |     | <span class='neutral'>     * It&#39;s a good idea to use the same `name` that is defined as the ERC20 token name.</span>
 38 |     | <span class='neutral'>     */</span>
 39 |     | <span class='neutral'>    constructor(string memory name) EIP712(name, &quot;1&quot;) {}</span>
 40 |     | <span class='neutral'></span>
 41 |     | <span class='neutral'>    /**</span>
 42 |     | <span class='neutral'>     * @inheritdoc IERC20Permit</span>
 43 |     | <span class='neutral'>     */</span>
 44 |     | <span class='neutral'>    function permit(</span>
 45 |     | <span class='neutral'>        address owner,</span>
 46 |     | <span class='neutral'>        address spender,</span>
 47 |     | <span class='neutral'>        uint256 value,</span>
 48 |     | <span class='neutral'>        uint256 deadline,</span>
 49 |     | <span class='neutral'>        uint8 v,</span>
 50 |     | <span class='neutral'>        bytes32 r,</span>
 51 |     | <span class='neutral'>        bytes32 s</span>
 52 |     | <span class='neutral'>    ) public virtual {</span>
 53 |     | <span class='unexecuted'>        if (block.timestamp &gt; deadline) {</span>
 54 |     | <span class='unexecuted'>            revert ERC2612ExpiredSignature(deadline);</span>
 55 |     | <span class='neutral'>        }</span>
 56 |     | <span class='neutral'></span>
 57 |     | <span class='unexecuted'>        bytes32 structHash = keccak256(abi.encode(PERMIT_TYPEHASH, owner, spender, value, _useNonce(owner), deadline));</span>
 58 |     | <span class='neutral'></span>
 59 |     | <span class='neutral'>        bytes32 hash = _hashTypedDataV4(structHash);</span>
 60 |     | <span class='neutral'></span>
 61 |     | <span class='neutral'>        address signer = ECDSA.recover(hash, v, r, s);</span>
 62 |     | <span class='unexecuted'>        if (signer != owner) {</span>
 63 |     | <span class='unexecuted'>            revert ERC2612InvalidSigner(signer, owner);</span>
 64 |     | <span class='neutral'>        }</span>
 65 |     | <span class='neutral'></span>
 66 |     | <span class='neutral'>        _approve(owner, spender, value);</span>
 67 |     | <span class='neutral'>    }</span>
 68 |     | <span class='neutral'></span>
 69 |     | <span class='neutral'>    /**</span>
 70 |     | <span class='neutral'>     * @inheritdoc IERC20Permit</span>
 71 |     | <span class='neutral'>     */</span>
 72 |     | <span class='neutral'>    function nonces(address owner) public view virtual override(IERC20Permit, Nonces) returns (uint256) {</span>
 73 |     | <span class='neutral'>        return super.nonces(owner);</span>
 74 |     | <span class='neutral'>    }</span>
 75 |     | <span class='neutral'></span>
 76 |     | <span class='neutral'>    /**</span>
 77 |     | <span class='neutral'>     * @inheritdoc IERC20Permit</span>
 78 |     | <span class='neutral'>     */</span>
 79 |     | <span class='neutral'>    // solhint-disable-next-line func-name-mixedcase</span>
 80 |     | <span class='neutral'>    function DOMAIN_SEPARATOR() external view virtual returns (bytes32) {</span>
 81 |     | <span class='unexecuted'>        return _domainSeparatorV4();</span>
 82 |     | <span class='neutral'>    }</span>
 83 |     | <span class='neutral'>}</span>
 84 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/token/ERC20/extensions/IERC20Metadata.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/extensions/IERC20Metadata.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>import {IERC20} from &quot;../IERC20.sol&quot;;</span>
  7 |     | <span class='neutral'></span>
  8 |     | <span class='neutral'>/**</span>
  9 |     | <span class='neutral'> * @dev Interface for the optional metadata functions from the ERC20 standard.</span>
 10 |     | <span class='neutral'> */</span>
 11 |     | <span class='neutral'>interface IERC20Metadata is IERC20 {</span>
 12 |     | <span class='neutral'>    /**</span>
 13 |     | <span class='neutral'>     * @dev Returns the name of the token.</span>
 14 |     | <span class='neutral'>     */</span>
 15 |     | <span class='neutral'>    function name() external view returns (string memory);</span>
 16 |     | <span class='neutral'></span>
 17 |     | <span class='neutral'>    /**</span>
 18 |     | <span class='neutral'>     * @dev Returns the symbol of the token.</span>
 19 |     | <span class='neutral'>     */</span>
 20 |     | <span class='neutral'>    function symbol() external view returns (string memory);</span>
 21 |     | <span class='neutral'></span>
 22 |     | <span class='neutral'>    /**</span>
 23 |     | <span class='neutral'>     * @dev Returns the decimals places of the token.</span>
 24 |     | <span class='neutral'>     */</span>
 25 |     | <span class='neutral'>    function decimals() external view returns (uint8);</span>
 26 |     | <span class='neutral'>}</span>
 27 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/token/ERC20/extensions/IERC20Permit.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/extensions/IERC20Permit.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev Interface of the ERC20 Permit extension allowing approvals to be made via signatures, as defined in</span>
  8 |     | <span class='neutral'> * https://eips.ethereum.org/EIPS/eip-2612[EIP-2612].</span>
  9 |     | <span class='neutral'> *</span>
 10 |     | <span class='neutral'> * Adds the {permit} method, which can be used to change an account&#39;s ERC20 allowance (see {IERC20-allowance}) by</span>
 11 |     | <span class='neutral'> * presenting a message signed by the account. By not relying on {IERC20-approve}, the token holder account doesn&#39;t</span>
 12 |     | <span class='neutral'> * need to send a transaction, and thus is not required to hold Ether at all.</span>
 13 |     | <span class='neutral'> *</span>
 14 |     | <span class='neutral'> * ==== Security Considerations</span>
 15 |     | <span class='neutral'> *</span>
 16 |     | <span class='neutral'> * There are two important considerations concerning the use of `permit`. The first is that a valid permit signature</span>
 17 |     | <span class='neutral'> * expresses an allowance, and it should not be assumed to convey additional meaning. In particular, it should not be</span>
 18 |     | <span class='neutral'> * considered as an intention to spend the allowance in any specific way. The second is that because permits have</span>
 19 |     | <span class='neutral'> * built-in replay protection and can be submitted by anyone, they can be frontrun. A protocol that uses permits should</span>
 20 |     | <span class='neutral'> * take this into consideration and allow a `permit` call to fail. Combining these two aspects, a pattern that may be</span>
 21 |     | <span class='neutral'> * generally recommended is:</span>
 22 |     | <span class='neutral'> *</span>
 23 |     | <span class='neutral'> * ```solidity</span>
 24 |     | <span class='neutral'> * function doThingWithPermit(..., uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s) public {</span>
 25 |     | <span class='neutral'> *     try token.permit(msg.sender, address(this), value, deadline, v, r, s) {} catch {}</span>
 26 |     | <span class='neutral'> *     doThing(..., value);</span>
 27 |     | <span class='neutral'> * }</span>
 28 |     | <span class='neutral'> *</span>
 29 |     | <span class='neutral'> * function doThing(..., uint256 value) public {</span>
 30 |     | <span class='neutral'> *     token.safeTransferFrom(msg.sender, address(this), value);</span>
 31 |     | <span class='neutral'> *     ...</span>
 32 |     | <span class='neutral'> * }</span>
 33 |     | <span class='neutral'> * ```</span>
 34 |     | <span class='neutral'> *</span>
 35 |     | <span class='neutral'> * Observe that: 1) `msg.sender` is used as the owner, leaving no ambiguity as to the signer intent, and 2) the use of</span>
 36 |     | <span class='neutral'> * `try/catch` allows the permit to fail and makes the code tolerant to frontrunning. (See also</span>
 37 |     | <span class='neutral'> * {SafeERC20-safeTransferFrom}).</span>
 38 |     | <span class='neutral'> *</span>
 39 |     | <span class='neutral'> * Additionally, note that smart contract wallets (such as Argent or Safe) are not able to produce permit signatures, so</span>
 40 |     | <span class='neutral'> * contracts should have entry points that don&#39;t rely on permit.</span>
 41 |     | <span class='neutral'> */</span>
 42 |     | <span class='neutral'>interface IERC20Permit {</span>
 43 |     | <span class='neutral'>    /**</span>
 44 |     | <span class='neutral'>     * @dev Sets `value` as the allowance of `spender` over ``owner``&#39;s tokens,</span>
 45 |     | <span class='neutral'>     * given ``owner``&#39;s signed approval.</span>
 46 |     | <span class='neutral'>     *</span>
 47 |     | <span class='neutral'>     * IMPORTANT: The same issues {IERC20-approve} has related to transaction</span>
 48 |     | <span class='neutral'>     * ordering also apply here.</span>
 49 |     | <span class='neutral'>     *</span>
 50 |     | <span class='neutral'>     * Emits an {Approval} event.</span>
 51 |     | <span class='neutral'>     *</span>
 52 |     | <span class='neutral'>     * Requirements:</span>
 53 |     | <span class='neutral'>     *</span>
 54 |     | <span class='neutral'>     * - `spender` cannot be the zero address.</span>
 55 |     | <span class='neutral'>     * - `deadline` must be a timestamp in the future.</span>
 56 |     | <span class='neutral'>     * - `v`, `r` and `s` must be a valid `secp256k1` signature from `owner`</span>
 57 |     | <span class='neutral'>     * over the EIP712-formatted function arguments.</span>
 58 |     | <span class='neutral'>     * - the signature must use ``owner``&#39;s current nonce (see {nonces}).</span>
 59 |     | <span class='neutral'>     *</span>
 60 |     | <span class='neutral'>     * For more information on the signature format, see the</span>
 61 |     | <span class='neutral'>     * https://eips.ethereum.org/EIPS/eip-2612#specification[relevant EIP</span>
 62 |     | <span class='neutral'>     * section].</span>
 63 |     | <span class='neutral'>     *</span>
 64 |     | <span class='neutral'>     * CAUTION: See Security Considerations above.</span>
 65 |     | <span class='neutral'>     */</span>
 66 |     | <span class='neutral'>    function permit(</span>
 67 |     | <span class='neutral'>        address owner,</span>
 68 |     | <span class='neutral'>        address spender,</span>
 69 |     | <span class='neutral'>        uint256 value,</span>
 70 |     | <span class='neutral'>        uint256 deadline,</span>
 71 |     | <span class='neutral'>        uint8 v,</span>
 72 |     | <span class='neutral'>        bytes32 r,</span>
 73 |     | <span class='neutral'>        bytes32 s</span>
 74 |     | <span class='neutral'>    ) external;</span>
 75 |     | <span class='neutral'></span>
 76 |     | <span class='neutral'>    /**</span>
 77 |     | <span class='neutral'>     * @dev Returns the current nonce for `owner`. This value must be</span>
 78 |     | <span class='neutral'>     * included whenever a signature is generated for {permit}.</span>
 79 |     | <span class='neutral'>     *</span>
 80 |     | <span class='neutral'>     * Every successful call to {permit} increases ``owner``&#39;s nonce by one. This</span>
 81 |     | <span class='neutral'>     * prevents a signature from being used multiple times.</span>
 82 |     | <span class='neutral'>     */</span>
 83 |     | <span class='neutral'>    function nonces(address owner) external view returns (uint256);</span>
 84 |     | <span class='neutral'></span>
 85 |     | <span class='neutral'>    /**</span>
 86 |     | <span class='neutral'>     * @dev Returns the domain separator used in the encoding of the signature for {permit}, as defined by {EIP712}.</span>
 87 |     | <span class='neutral'>     */</span>
 88 |     | <span class='neutral'>    // solhint-disable-next-line func-name-mixedcase</span>
 89 |     | <span class='neutral'>    function DOMAIN_SEPARATOR() external view returns (bytes32);</span>
 90 |     | <span class='neutral'>}</span>
 91 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/token/ERC20/utils/SafeERC20.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/utils/SafeERC20.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {IERC20} from &quot;../IERC20.sol&quot;;</span>
   7 |     | <span class='neutral'>import {IERC20Permit} from &quot;../extensions/IERC20Permit.sol&quot;;</span>
   8 |     | <span class='neutral'>import {Address} from &quot;../../../utils/Address.sol&quot;;</span>
   9 |     | <span class='neutral'></span>
  10 |     | <span class='neutral'>/**</span>
  11 |     | <span class='neutral'> * @title SafeERC20</span>
  12 |     | <span class='neutral'> * @dev Wrappers around ERC20 operations that throw on failure (when the token</span>
  13 |     | <span class='neutral'> * contract returns false). Tokens that return no value (and instead revert or</span>
  14 |     | <span class='neutral'> * throw on failure) are also supported, non-reverting calls are assumed to be</span>
  15 |     | <span class='neutral'> * successful.</span>
  16 |     | <span class='neutral'> * To use this library you can add a `using SafeERC20 for IERC20;` statement to your contract,</span>
  17 |     | <span class='neutral'> * which allows you to call the safe operations as `token.safeTransfer(...)`, etc.</span>
  18 |     | <span class='neutral'> */</span>
  19 |     | <span class='unexecuted'>library SafeERC20 {</span>
  20 |     | <span class='neutral'>    using Address for address;</span>
  21 |     | <span class='neutral'></span>
  22 |     | <span class='neutral'>    /**</span>
  23 |     | <span class='neutral'>     * @dev An operation with an ERC20 token failed.</span>
  24 |     | <span class='neutral'>     */</span>
  25 |     | <span class='neutral'>    error SafeERC20FailedOperation(address token);</span>
  26 |     | <span class='neutral'></span>
  27 |     | <span class='neutral'>    /**</span>
  28 |     | <span class='neutral'>     * @dev Indicates a failed `decreaseAllowance` request.</span>
  29 |     | <span class='neutral'>     */</span>
  30 |     | <span class='neutral'>    error SafeERC20FailedDecreaseAllowance(address spender, uint256 currentAllowance, uint256 requestedDecrease);</span>
  31 |     | <span class='neutral'></span>
  32 |     | <span class='neutral'>    /**</span>
  33 |     | <span class='neutral'>     * @dev Transfer `value` amount of `token` from the calling contract to `to`. If `token` returns no value,</span>
  34 |     | <span class='neutral'>     * non-reverting calls are assumed to be successful.</span>
  35 |     | <span class='neutral'>     */</span>
  36 | *   | <span class='executed'>    function safeTransfer(IERC20 token, address to, uint256 value) internal {</span>
  37 | *   | <span class='executed'>        _callOptionalReturn(token, abi.encodeCall(token.transfer, (to, value)));</span>
  38 |     | <span class='neutral'>    }</span>
  39 |     | <span class='neutral'></span>
  40 |     | <span class='neutral'>    /**</span>
  41 |     | <span class='neutral'>     * @dev Transfer `value` amount of `token` from `from` to `to`, spending the approval given by `from` to the</span>
  42 |     | <span class='neutral'>     * calling contract. If `token` returns no value, non-reverting calls are assumed to be successful.</span>
  43 |     | <span class='neutral'>     */</span>
  44 |     | <span class='neutral'>    function safeTransferFrom(IERC20 token, address from, address to, uint256 value) internal {</span>
  45 | *   | <span class='executed'>        _callOptionalReturn(token, abi.encodeCall(token.transferFrom, (from, to, value)));</span>
  46 |     | <span class='neutral'>    }</span>
  47 |     | <span class='neutral'></span>
  48 |     | <span class='neutral'>    /**</span>
  49 |     | <span class='neutral'>     * @dev Increase the calling contract&#39;s allowance toward `spender` by `value`. If `token` returns no value,</span>
  50 |     | <span class='neutral'>     * non-reverting calls are assumed to be successful.</span>
  51 |     | <span class='neutral'>     */</span>
  52 |     | <span class='neutral'>    function safeIncreaseAllowance(IERC20 token, address spender, uint256 value) internal {</span>
  53 |     | <span class='neutral'>        uint256 oldAllowance = token.allowance(address(this), spender);</span>
  54 |     | <span class='neutral'>        forceApprove(token, spender, oldAllowance + value);</span>
  55 |     | <span class='neutral'>    }</span>
  56 |     | <span class='neutral'></span>
  57 |     | <span class='neutral'>    /**</span>
  58 |     | <span class='neutral'>     * @dev Decrease the calling contract&#39;s allowance toward `spender` by `requestedDecrease`. If `token` returns no</span>
  59 |     | <span class='neutral'>     * value, non-reverting calls are assumed to be successful.</span>
  60 |     | <span class='neutral'>     */</span>
  61 |     | <span class='neutral'>    function safeDecreaseAllowance(IERC20 token, address spender, uint256 requestedDecrease) internal {</span>
  62 |     | <span class='neutral'>        unchecked {</span>
  63 |     | <span class='neutral'>            uint256 currentAllowance = token.allowance(address(this), spender);</span>
  64 |     | <span class='neutral'>            if (currentAllowance &lt; requestedDecrease) {</span>
  65 |     | <span class='neutral'>                revert SafeERC20FailedDecreaseAllowance(spender, currentAllowance, requestedDecrease);</span>
  66 |     | <span class='neutral'>            }</span>
  67 |     | <span class='neutral'>            forceApprove(token, spender, currentAllowance - requestedDecrease);</span>
  68 |     | <span class='neutral'>        }</span>
  69 |     | <span class='neutral'>    }</span>
  70 |     | <span class='neutral'></span>
  71 |     | <span class='neutral'>    /**</span>
  72 |     | <span class='neutral'>     * @dev Set the calling contract&#39;s allowance toward `spender` to `value`. If `token` returns no value,</span>
  73 |     | <span class='neutral'>     * non-reverting calls are assumed to be successful. Meant to be used with tokens that require the approval</span>
  74 |     | <span class='neutral'>     * to be set to zero before setting it to a non-zero value, such as USDT.</span>
  75 |     | <span class='neutral'>     */</span>
  76 |     | <span class='neutral'>    function forceApprove(IERC20 token, address spender, uint256 value) internal {</span>
  77 |     | <span class='neutral'>        bytes memory approvalCall = abi.encodeCall(token.approve, (spender, value));</span>
  78 |     | <span class='neutral'></span>
  79 |     | <span class='neutral'>        if (!_callOptionalReturnBool(token, approvalCall)) {</span>
  80 |     | <span class='neutral'>            _callOptionalReturn(token, abi.encodeCall(token.approve, (spender, 0)));</span>
  81 |     | <span class='neutral'>            _callOptionalReturn(token, approvalCall);</span>
  82 |     | <span class='neutral'>        }</span>
  83 |     | <span class='neutral'>    }</span>
  84 |     | <span class='neutral'></span>
  85 |     | <span class='neutral'>    /**</span>
  86 |     | <span class='neutral'>     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement</span>
  87 |     | <span class='neutral'>     * on the return value: the return value is optional (but if data is returned, it must not be false).</span>
  88 |     | <span class='neutral'>     * @param token The token targeted by the call.</span>
  89 |     | <span class='neutral'>     * @param data The call data (encoded using abi.encode or one of its variants).</span>
  90 |     | <span class='neutral'>     */</span>
  91 | *   | <span class='executed'>    function _callOptionalReturn(IERC20 token, bytes memory data) private {</span>
  92 |     | <span class='neutral'>        // We need to perform a low level call here, to bypass Solidity&#39;s return data size checking mechanism, since</span>
  93 |     | <span class='neutral'>        // we&#39;re implementing it ourselves. We use {Address-functionCall} to perform this call, which verifies that</span>
  94 |     | <span class='neutral'>        // the target address contains contract code and also asserts for success in the low-level call.</span>
  95 |     | <span class='neutral'></span>
  96 |     | <span class='neutral'>        bytes memory returndata = address(token).functionCall(data);</span>
  97 | *   | <span class='executed'>        if (returndata.length != 0 &amp;&amp; !abi.decode(returndata, (bool))) {</span>
  98 |     | <span class='unexecuted'>            revert SafeERC20FailedOperation(address(token));</span>
  99 |     | <span class='neutral'>        }</span>
 100 |     | <span class='neutral'>    }</span>
 101 |     | <span class='neutral'></span>
 102 |     | <span class='neutral'>    /**</span>
 103 |     | <span class='neutral'>     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement</span>
 104 |     | <span class='neutral'>     * on the return value: the return value is optional (but if data is returned, it must not be false).</span>
 105 |     | <span class='neutral'>     * @param token The token targeted by the call.</span>
 106 |     | <span class='neutral'>     * @param data The call data (encoded using abi.encode or one of its variants).</span>
 107 |     | <span class='neutral'>     *</span>
 108 |     | <span class='neutral'>     * This is a variant of {_callOptionalReturn} that silents catches all reverts and returns a bool instead.</span>
 109 |     | <span class='neutral'>     */</span>
 110 |     | <span class='neutral'>    function _callOptionalReturnBool(IERC20 token, bytes memory data) private returns (bool) {</span>
 111 |     | <span class='neutral'>        // We need to perform a low level call here, to bypass Solidity&#39;s return data size checking mechanism, since</span>
 112 |     | <span class='neutral'>        // we&#39;re implementing it ourselves. We cannot use {Address-functionCall} here since this should return false</span>
 113 |     | <span class='neutral'>        // and not revert is the subcall reverts.</span>
 114 |     | <span class='neutral'></span>
 115 |     | <span class='neutral'>        (bool success, bytes memory returndata) = address(token).call(data);</span>
 116 |     | <span class='neutral'>        return success &amp;&amp; (returndata.length == 0 || abi.decode(returndata, (bool))) &amp;&amp; address(token).code.length &gt; 0;</span>
 117 |     | <span class='neutral'>    }</span>
 118 |     | <span class='neutral'>}</span>
 119 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/Address.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/Address.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>/**</span>
   7 |     | <span class='neutral'> * @dev Collection of functions related to the address type</span>
   8 |     | <span class='neutral'> */</span>
   9 |     | <span class='unexecuted'>library Address {</span>
  10 |     | <span class='neutral'>    /**</span>
  11 |     | <span class='neutral'>     * @dev The ETH balance of the account is not enough to perform the operation.</span>
  12 |     | <span class='neutral'>     */</span>
  13 |     | <span class='neutral'>    error AddressInsufficientBalance(address account);</span>
  14 |     | <span class='neutral'></span>
  15 |     | <span class='neutral'>    /**</span>
  16 |     | <span class='neutral'>     * @dev There&#39;s no code at `target` (it is not a contract).</span>
  17 |     | <span class='neutral'>     */</span>
  18 |     | <span class='neutral'>    error AddressEmptyCode(address target);</span>
  19 |     | <span class='neutral'></span>
  20 |     | <span class='neutral'>    /**</span>
  21 |     | <span class='neutral'>     * @dev A call to an address target failed. The target may have reverted.</span>
  22 |     | <span class='neutral'>     */</span>
  23 |     | <span class='neutral'>    error FailedInnerCall();</span>
  24 |     | <span class='neutral'></span>
  25 |     | <span class='neutral'>    /**</span>
  26 |     | <span class='neutral'>     * @dev Replacement for Solidity&#39;s `transfer`: sends `amount` wei to</span>
  27 |     | <span class='neutral'>     * `recipient`, forwarding all available gas and reverting on errors.</span>
  28 |     | <span class='neutral'>     *</span>
  29 |     | <span class='neutral'>     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost</span>
  30 |     | <span class='neutral'>     * of certain opcodes, possibly making contracts go over the 2300 gas limit</span>
  31 |     | <span class='neutral'>     * imposed by `transfer`, making them unable to receive funds via</span>
  32 |     | <span class='neutral'>     * `transfer`. {sendValue} removes this limitation.</span>
  33 |     | <span class='neutral'>     *</span>
  34 |     | <span class='neutral'>     * https://consensys.net/diligence/blog/2019/09/stop-using-soliditys-transfer-now/[Learn more].</span>
  35 |     | <span class='neutral'>     *</span>
  36 |     | <span class='neutral'>     * IMPORTANT: because control is transferred to `recipient`, care must be</span>
  37 |     | <span class='neutral'>     * taken to not create reentrancy vulnerabilities. Consider using</span>
  38 |     | <span class='neutral'>     * {ReentrancyGuard} or the</span>
  39 |     | <span class='neutral'>     * https://solidity.readthedocs.io/en/v0.8.20/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].</span>
  40 |     | <span class='neutral'>     */</span>
  41 |     | <span class='neutral'>    function sendValue(address payable recipient, uint256 amount) internal {</span>
  42 |     | <span class='neutral'>        if (address(this).balance &lt; amount) {</span>
  43 |     | <span class='neutral'>            revert AddressInsufficientBalance(address(this));</span>
  44 |     | <span class='neutral'>        }</span>
  45 |     | <span class='neutral'></span>
  46 |     | <span class='neutral'>        (bool success, ) = recipient.call{value: amount}(&quot;&quot;);</span>
  47 |     | <span class='neutral'>        if (!success) {</span>
  48 |     | <span class='neutral'>            revert FailedInnerCall();</span>
  49 |     | <span class='neutral'>        }</span>
  50 |     | <span class='neutral'>    }</span>
  51 |     | <span class='neutral'></span>
  52 |     | <span class='neutral'>    /**</span>
  53 |     | <span class='neutral'>     * @dev Performs a Solidity function call using a low level `call`. A</span>
  54 |     | <span class='neutral'>     * plain `call` is an unsafe replacement for a function call: use this</span>
  55 |     | <span class='neutral'>     * function instead.</span>
  56 |     | <span class='neutral'>     *</span>
  57 |     | <span class='neutral'>     * If `target` reverts with a revert reason or custom error, it is bubbled</span>
  58 |     | <span class='neutral'>     * up by this function (like regular Solidity function calls). However, if</span>
  59 |     | <span class='neutral'>     * the call reverted with no returned reason, this function reverts with a</span>
  60 |     | <span class='neutral'>     * {FailedInnerCall} error.</span>
  61 |     | <span class='neutral'>     *</span>
  62 |     | <span class='neutral'>     * Returns the raw returned data. To convert to the expected return value,</span>
  63 |     | <span class='neutral'>     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].</span>
  64 |     | <span class='neutral'>     *</span>
  65 |     | <span class='neutral'>     * Requirements:</span>
  66 |     | <span class='neutral'>     *</span>
  67 |     | <span class='neutral'>     * - `target` must be a contract.</span>
  68 |     | <span class='neutral'>     * - calling `target` with `data` must not revert.</span>
  69 |     | <span class='neutral'>     */</span>
  70 |     | <span class='neutral'>    function functionCall(address target, bytes memory data) internal returns (bytes memory) {</span>
  71 | *   | <span class='executed'>        return functionCallWithValue(target, data, 0);</span>
  72 |     | <span class='neutral'>    }</span>
  73 |     | <span class='neutral'></span>
  74 |     | <span class='neutral'>    /**</span>
  75 |     | <span class='neutral'>     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],</span>
  76 |     | <span class='neutral'>     * but also transferring `value` wei to `target`.</span>
  77 |     | <span class='neutral'>     *</span>
  78 |     | <span class='neutral'>     * Requirements:</span>
  79 |     | <span class='neutral'>     *</span>
  80 |     | <span class='neutral'>     * - the calling contract must have an ETH balance of at least `value`.</span>
  81 |     | <span class='neutral'>     * - the called Solidity function must be `payable`.</span>
  82 |     | <span class='neutral'>     */</span>
  83 |     | <span class='neutral'>    function functionCallWithValue(address target, bytes memory data, uint256 value) internal returns (bytes memory) {</span>
  84 |     | <span class='neutral'>        if (address(this).balance &lt; value) {</span>
  85 |     | <span class='neutral'>            revert AddressInsufficientBalance(address(this));</span>
  86 |     | <span class='neutral'>        }</span>
  87 | *   | <span class='executed'>        (bool success, bytes memory returndata) = target.call{value: value}(data);</span>
  88 | *   | <span class='executed'>        return verifyCallResultFromTarget(target, success, returndata);</span>
  89 |     | <span class='neutral'>    }</span>
  90 |     | <span class='neutral'></span>
  91 |     | <span class='neutral'>    /**</span>
  92 |     | <span class='neutral'>     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],</span>
  93 |     | <span class='neutral'>     * but performing a static call.</span>
  94 |     | <span class='neutral'>     */</span>
  95 |     | <span class='neutral'>    function functionStaticCall(address target, bytes memory data) internal view returns (bytes memory) {</span>
  96 |     | <span class='neutral'>        (bool success, bytes memory returndata) = target.staticcall(data);</span>
  97 |     | <span class='neutral'>        return verifyCallResultFromTarget(target, success, returndata);</span>
  98 |     | <span class='neutral'>    }</span>
  99 |     | <span class='neutral'></span>
 100 |     | <span class='neutral'>    /**</span>
 101 |     | <span class='neutral'>     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],</span>
 102 |     | <span class='neutral'>     * but performing a delegate call.</span>
 103 |     | <span class='neutral'>     */</span>
 104 |     | <span class='neutral'>    function functionDelegateCall(address target, bytes memory data) internal returns (bytes memory) {</span>
 105 |     | <span class='unexecuted'>        (bool success, bytes memory returndata) = target.delegatecall(data);</span>
 106 |     | <span class='unexecuted'>        return verifyCallResultFromTarget(target, success, returndata);</span>
 107 |     | <span class='neutral'>    }</span>
 108 |     | <span class='neutral'></span>
 109 |     | <span class='neutral'>    /**</span>
 110 |     | <span class='neutral'>     * @dev Tool to verify that a low level call to smart-contract was successful, and reverts if the target</span>
 111 |     | <span class='neutral'>     * was not a contract or bubbling up the revert reason (falling back to {FailedInnerCall}) in case of an</span>
 112 |     | <span class='neutral'>     * unsuccessful call.</span>
 113 |     | <span class='neutral'>     */</span>
 114 | *   | <span class='executed'>    function verifyCallResultFromTarget(</span>
 115 |     | <span class='neutral'>        address target,</span>
 116 |     | <span class='neutral'>        bool success,</span>
 117 |     | <span class='neutral'>        bytes memory returndata</span>
 118 |     | <span class='neutral'>    ) internal view returns (bytes memory) {</span>
 119 | *   | <span class='executed'>        if (!success) {</span>
 120 |     | <span class='neutral'>            _revert(returndata);</span>
 121 |     | <span class='neutral'>        } else {</span>
 122 |     | <span class='neutral'>            // only check if target is a contract if the call was successful and the return data is empty</span>
 123 |     | <span class='neutral'>            // otherwise we already know that it was a contract</span>
 124 | *   | <span class='executed'>            if (returndata.length == 0 &amp;&amp; target.code.length == 0) {</span>
 125 |     | <span class='unexecuted'>                revert AddressEmptyCode(target);</span>
 126 |     | <span class='neutral'>            }</span>
 127 | *   | <span class='executed'>            return returndata;</span>
 128 |     | <span class='neutral'>        }</span>
 129 |     | <span class='neutral'>    }</span>
 130 |     | <span class='neutral'></span>
 131 |     | <span class='neutral'>    /**</span>
 132 |     | <span class='neutral'>     * @dev Tool to verify that a low level call was successful, and reverts if it wasn&#39;t, either by bubbling the</span>
 133 |     | <span class='neutral'>     * revert reason or with a default {FailedInnerCall} error.</span>
 134 |     | <span class='neutral'>     */</span>
 135 |     | <span class='neutral'>    function verifyCallResult(bool success, bytes memory returndata) internal pure returns (bytes memory) {</span>
 136 |     | <span class='neutral'>        if (!success) {</span>
 137 |     | <span class='neutral'>            _revert(returndata);</span>
 138 |     | <span class='neutral'>        } else {</span>
 139 |     | <span class='neutral'>            return returndata;</span>
 140 |     | <span class='neutral'>        }</span>
 141 |     | <span class='neutral'>    }</span>
 142 |     | <span class='neutral'></span>
 143 |     | <span class='neutral'>    /**</span>
 144 |     | <span class='neutral'>     * @dev Reverts with returndata if present. Otherwise reverts with {FailedInnerCall}.</span>
 145 |     | <span class='neutral'>     */</span>
 146 |     | <span class='neutral'>    function _revert(bytes memory returndata) private pure {</span>
 147 |     | <span class='neutral'>        // Look for revert reason and bubble it up if present</span>
 148 | *   | <span class='executed'>        if (returndata.length &gt; 0) {</span>
 149 |     | <span class='neutral'>            // The easiest way to bubble the revert reason is using memory via assembly</span>
 150 |     | <span class='neutral'>            /// @solidity memory-safe-assembly</span>
 151 | *   | <span class='executed'>            assembly {</span>
 152 |     | <span class='neutral'>                let returndata_size := mload(returndata)</span>
 153 |     | <span class='neutral'>                revert(add(32, returndata), returndata_size)</span>
 154 |     | <span class='neutral'>            }</span>
 155 |     | <span class='neutral'>        } else {</span>
 156 |     | <span class='unexecuted'>            revert FailedInnerCall();</span>
 157 |     | <span class='neutral'>        }</span>
 158 |     | <span class='neutral'>    }</span>
 159 |     | <span class='neutral'>}</span>
 160 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/Context.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.1) (utils/Context.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev Provides information about the current execution context, including the</span>
  8 |     | <span class='neutral'> * sender of the transaction and its data. While these are generally available</span>
  9 |     | <span class='neutral'> * via msg.sender and msg.data, they should not be accessed in such a direct</span>
 10 |     | <span class='neutral'> * manner, since when dealing with meta-transactions the account sending and</span>
 11 |     | <span class='neutral'> * paying for execution may not be the actual sender (as far as an application</span>
 12 |     | <span class='neutral'> * is concerned).</span>
 13 |     | <span class='neutral'> *</span>
 14 |     | <span class='neutral'> * This contract is only required for intermediate, library-like contracts.</span>
 15 |     | <span class='neutral'> */</span>
 16 |     | <span class='neutral'>abstract contract Context {</span>
 17 |     | <span class='neutral'>    function _msgSender() internal view virtual returns (address) {</span>
 18 | *   | <span class='executed'>        return msg.sender;</span>
 19 |     | <span class='neutral'>    }</span>
 20 |     | <span class='neutral'></span>
 21 |     | <span class='neutral'>    function _msgData() internal view virtual returns (bytes calldata) {</span>
 22 |     | <span class='neutral'>        return msg.data;</span>
 23 |     | <span class='neutral'>    }</span>
 24 |     | <span class='neutral'></span>
 25 |     | <span class='neutral'>    function _contextSuffixLength() internal view virtual returns (uint256) {</span>
 26 |     | <span class='neutral'>        return 0;</span>
 27 |     | <span class='neutral'>    }</span>
 28 |     | <span class='neutral'>}</span>
 29 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/Nonces.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/Nonces.sol)</span>
  3 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  4 |     | <span class='neutral'></span>
  5 |     | <span class='neutral'>/**</span>
  6 |     | <span class='neutral'> * @dev Provides tracking nonces for addresses. Nonces will only increment.</span>
  7 |     | <span class='neutral'> */</span>
  8 |     | <span class='neutral'>abstract contract Nonces {</span>
  9 |     | <span class='neutral'>    /**</span>
 10 |     | <span class='neutral'>     * @dev The nonce used for an `account` is not the expected current nonce.</span>
 11 |     | <span class='neutral'>     */</span>
 12 |     | <span class='neutral'>    error InvalidAccountNonce(address account, uint256 currentNonce);</span>
 13 |     | <span class='neutral'></span>
 14 |     | <span class='neutral'>    mapping(address account =&gt; uint256) private _nonces;</span>
 15 |     | <span class='neutral'></span>
 16 |     | <span class='neutral'>    /**</span>
 17 |     | <span class='neutral'>     * @dev Returns the next unused nonce for an address.</span>
 18 |     | <span class='neutral'>     */</span>
 19 |     | <span class='neutral'>    function nonces(address owner) public view virtual returns (uint256) {</span>
 20 |     | <span class='unexecuted'>        return _nonces[owner];</span>
 21 |     | <span class='neutral'>    }</span>
 22 |     | <span class='neutral'></span>
 23 |     | <span class='neutral'>    /**</span>
 24 |     | <span class='neutral'>     * @dev Consumes a nonce.</span>
 25 |     | <span class='neutral'>     *</span>
 26 |     | <span class='neutral'>     * Returns the current value and increments nonce.</span>
 27 |     | <span class='neutral'>     */</span>
 28 |     | <span class='neutral'>    function _useNonce(address owner) internal virtual returns (uint256) {</span>
 29 |     | <span class='neutral'>        // For each account, the nonce has an initial value of 0, can only be incremented by one, and cannot be</span>
 30 |     | <span class='neutral'>        // decremented or reset. This guarantees that the nonce never overflows.</span>
 31 |     | <span class='neutral'>        unchecked {</span>
 32 |     | <span class='neutral'>            // It is important to do x++ and not ++x here.</span>
 33 |     | <span class='unexecuted'>            return _nonces[owner]++;</span>
 34 |     | <span class='neutral'>        }</span>
 35 |     | <span class='neutral'>    }</span>
 36 |     | <span class='neutral'></span>
 37 |     | <span class='neutral'>    /**</span>
 38 |     | <span class='neutral'>     * @dev Same as {_useNonce} but checking that `nonce` is the next valid for `owner`.</span>
 39 |     | <span class='neutral'>     */</span>
 40 |     | <span class='neutral'>    function _useCheckedNonce(address owner, uint256 nonce) internal virtual {</span>
 41 |     | <span class='neutral'>        uint256 current = _useNonce(owner);</span>
 42 |     | <span class='neutral'>        if (nonce != current) {</span>
 43 |     | <span class='neutral'>            revert InvalidAccountNonce(owner, current);</span>
 44 |     | <span class='neutral'>        }</span>
 45 |     | <span class='neutral'>    }</span>
 46 |     | <span class='neutral'>}</span>
 47 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/ShortStrings.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {StorageSlot} from &quot;./StorageSlot.sol&quot;;</span>
   7 |     | <span class='neutral'></span>
   8 |     | <span class='neutral'>// | string  | 0xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA   |</span>
   9 |     | <span class='neutral'>// | length  | 0x                                                              BB |</span>
  10 |     | <span class='neutral'>type ShortString is bytes32;</span>
  11 |     | <span class='neutral'></span>
  12 |     | <span class='neutral'>/**</span>
  13 |     | <span class='neutral'> * @dev This library provides functions to convert short memory strings</span>
  14 |     | <span class='neutral'> * into a `ShortString` type that can be used as an immutable variable.</span>
  15 |     | <span class='neutral'> *</span>
  16 |     | <span class='neutral'> * Strings of arbitrary length can be optimized using this library if</span>
  17 |     | <span class='neutral'> * they are short enough (up to 31 bytes) by packing them with their</span>
  18 |     | <span class='neutral'> * length (1 byte) in a single EVM word (32 bytes). Additionally, a</span>
  19 |     | <span class='neutral'> * fallback mechanism can be used for every other case.</span>
  20 |     | <span class='neutral'> *</span>
  21 |     | <span class='neutral'> * Usage example:</span>
  22 |     | <span class='neutral'> *</span>
  23 |     | <span class='neutral'> * ```solidity</span>
  24 |     | <span class='neutral'> * contract Named {</span>
  25 |     | <span class='neutral'> *     using ShortStrings for *;</span>
  26 |     | <span class='neutral'> *</span>
  27 |     | <span class='neutral'> *     ShortString private immutable _name;</span>
  28 |     | <span class='neutral'> *     string private _nameFallback;</span>
  29 |     | <span class='neutral'> *</span>
  30 |     | <span class='neutral'> *     constructor(string memory contractName) {</span>
  31 |     | <span class='neutral'> *         _name = contractName.toShortStringWithFallback(_nameFallback);</span>
  32 |     | <span class='neutral'> *     }</span>
  33 |     | <span class='neutral'> *</span>
  34 |     | <span class='neutral'> *     function name() external view returns (string memory) {</span>
  35 |     | <span class='neutral'> *         return _name.toStringWithFallback(_nameFallback);</span>
  36 |     | <span class='neutral'> *     }</span>
  37 |     | <span class='neutral'> * }</span>
  38 |     | <span class='neutral'> * ```</span>
  39 |     | <span class='neutral'> */</span>
  40 |     | <span class='unexecuted'>library ShortStrings {</span>
  41 |     | <span class='neutral'>    // Used as an identifier for strings longer than 31 bytes.</span>
  42 |     | <span class='unexecuted'>    bytes32 private constant FALLBACK_SENTINEL = 0x00000000000000000000000000000000000000000000000000000000000000FF;</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>    error StringTooLong(string str);</span>
  45 |     | <span class='neutral'>    error InvalidShortString();</span>
  46 |     | <span class='neutral'></span>
  47 |     | <span class='neutral'>    /**</span>
  48 |     | <span class='neutral'>     * @dev Encode a string of at most 31 chars into a `ShortString`.</span>
  49 |     | <span class='neutral'>     *</span>
  50 |     | <span class='neutral'>     * This will trigger a `StringTooLong` error is the input string is too long.</span>
  51 |     | <span class='neutral'>     */</span>
  52 |     | <span class='neutral'>    function toShortString(string memory str) internal pure returns (ShortString) {</span>
  53 |     | <span class='neutral'>        bytes memory bstr = bytes(str);</span>
  54 | *   | <span class='executed'>        if (bstr.length &gt; 31) {</span>
  55 |     | <span class='unexecuted'>            revert StringTooLong(str);</span>
  56 |     | <span class='neutral'>        }</span>
  57 | *   | <span class='executed'>        return ShortString.wrap(bytes32(uint256(bytes32(bstr)) | bstr.length));</span>
  58 |     | <span class='neutral'>    }</span>
  59 |     | <span class='neutral'></span>
  60 |     | <span class='neutral'>    /**</span>
  61 |     | <span class='neutral'>     * @dev Decode a `ShortString` back to a &quot;normal&quot; string.</span>
  62 |     | <span class='neutral'>     */</span>
  63 |     | <span class='neutral'>    function toString(ShortString sstr) internal pure returns (string memory) {</span>
  64 |     | <span class='neutral'>        uint256 len = byteLength(sstr);</span>
  65 |     | <span class='neutral'>        // using `new string(len)` would work locally but is not memory safe.</span>
  66 |     | <span class='unexecuted'>        string memory str = new string(32);</span>
  67 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
  68 |     | <span class='unexecuted'>        assembly {</span>
  69 |     | <span class='neutral'>            mstore(str, len)</span>
  70 |     | <span class='neutral'>            mstore(add(str, 0x20), sstr)</span>
  71 |     | <span class='neutral'>        }</span>
  72 |     | <span class='neutral'>        return str;</span>
  73 |     | <span class='neutral'>    }</span>
  74 |     | <span class='neutral'></span>
  75 |     | <span class='neutral'>    /**</span>
  76 |     | <span class='neutral'>     * @dev Return the length of a `ShortString`.</span>
  77 |     | <span class='neutral'>     */</span>
  78 |     | <span class='neutral'>    function byteLength(ShortString sstr) internal pure returns (uint256) {</span>
  79 |     | <span class='unexecuted'>        uint256 result = uint256(ShortString.unwrap(sstr)) &amp; 0xFF;</span>
  80 |     | <span class='unexecuted'>        if (result &gt; 31) {</span>
  81 |     | <span class='unexecuted'>            revert InvalidShortString();</span>
  82 |     | <span class='neutral'>        }</span>
  83 |     | <span class='neutral'>        return result;</span>
  84 |     | <span class='neutral'>    }</span>
  85 |     | <span class='neutral'></span>
  86 |     | <span class='neutral'>    /**</span>
  87 |     | <span class='neutral'>     * @dev Encode a string into a `ShortString`, or write it to storage if it is too long.</span>
  88 |     | <span class='neutral'>     */</span>
  89 | *   | <span class='executed'>    function toShortStringWithFallback(string memory value, string storage store) internal returns (ShortString) {</span>
  90 | *   | <span class='executed'>        if (bytes(value).length &lt; 32) {</span>
  91 | *   | <span class='executed'>            return toShortString(value);</span>
  92 |     | <span class='neutral'>        } else {</span>
  93 |     | <span class='neutral'>            StorageSlot.getStringSlot(store).value = value;</span>
  94 |     | <span class='unexecuted'>            return ShortString.wrap(FALLBACK_SENTINEL);</span>
  95 |     | <span class='neutral'>        }</span>
  96 |     | <span class='neutral'>    }</span>
  97 |     | <span class='neutral'></span>
  98 |     | <span class='neutral'>    /**</span>
  99 |     | <span class='neutral'>     * @dev Decode a string that was encoded to `ShortString` or written to storage using {setWithFallback}.</span>
 100 |     | <span class='neutral'>     */</span>
 101 |     | <span class='unexecuted'>    function toStringWithFallback(ShortString value, string storage store) internal pure returns (string memory) {</span>
 102 |     | <span class='unexecuted'>        if (ShortString.unwrap(value) != FALLBACK_SENTINEL) {</span>
 103 |     | <span class='unexecuted'>            return toString(value);</span>
 104 |     | <span class='neutral'>        } else {</span>
 105 |     | <span class='unexecuted'>            return store;</span>
 106 |     | <span class='neutral'>        }</span>
 107 |     | <span class='neutral'>    }</span>
 108 |     | <span class='neutral'></span>
 109 |     | <span class='neutral'>    /**</span>
 110 |     | <span class='neutral'>     * @dev Return the length of a string that was encoded to `ShortString` or written to storage using</span>
 111 |     | <span class='neutral'>     * {setWithFallback}.</span>
 112 |     | <span class='neutral'>     *</span>
 113 |     | <span class='neutral'>     * WARNING: This will return the &quot;byte length&quot; of the string. This may not reflect the actual length in terms of</span>
 114 |     | <span class='neutral'>     * actual characters as the UTF-8 encoding of a single character can span over multiple bytes.</span>
 115 |     | <span class='neutral'>     */</span>
 116 |     | <span class='neutral'>    function byteLengthWithFallback(ShortString value, string storage store) internal view returns (uint256) {</span>
 117 |     | <span class='neutral'>        if (ShortString.unwrap(value) != FALLBACK_SENTINEL) {</span>
 118 |     | <span class='neutral'>            return byteLength(value);</span>
 119 |     | <span class='neutral'>        } else {</span>
 120 |     | <span class='neutral'>            return bytes(store).length;</span>
 121 |     | <span class='neutral'>        }</span>
 122 |     | <span class='neutral'>    }</span>
 123 |     | <span class='neutral'>}</span>
 124 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/StorageSlot.sol)</span>
   3 |     | <span class='neutral'>// This file was procedurally generated from scripts/generate/templates/StorageSlot.js.</span>
   4 |     | <span class='neutral'></span>
   5 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   6 |     | <span class='neutral'></span>
   7 |     | <span class='neutral'>/**</span>
   8 |     | <span class='neutral'> * @dev Library for reading and writing primitive types to specific storage slots.</span>
   9 |     | <span class='neutral'> *</span>
  10 |     | <span class='neutral'> * Storage slots are often used to avoid storage conflict when dealing with upgradeable contracts.</span>
  11 |     | <span class='neutral'> * This library helps with reading and writing to such slots without the need for inline assembly.</span>
  12 |     | <span class='neutral'> *</span>
  13 |     | <span class='neutral'> * The functions in this library return Slot structs that contain a `value` member that can be used to read or write.</span>
  14 |     | <span class='neutral'> *</span>
  15 |     | <span class='neutral'> * Example usage to set ERC1967 implementation slot:</span>
  16 |     | <span class='neutral'> * ```solidity</span>
  17 |     | <span class='neutral'> * contract ERC1967 {</span>
  18 |     | <span class='neutral'> *     bytes32 internal constant _IMPLEMENTATION_SLOT = 0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc;</span>
  19 |     | <span class='neutral'> *</span>
  20 |     | <span class='neutral'> *     function _getImplementation() internal view returns (address) {</span>
  21 |     | <span class='neutral'> *         return StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value;</span>
  22 |     | <span class='neutral'> *     }</span>
  23 |     | <span class='neutral'> *</span>
  24 |     | <span class='neutral'> *     function _setImplementation(address newImplementation) internal {</span>
  25 |     | <span class='neutral'> *         require(newImplementation.code.length &gt; 0);</span>
  26 |     | <span class='neutral'> *         StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value = newImplementation;</span>
  27 |     | <span class='neutral'> *     }</span>
  28 |     | <span class='neutral'> * }</span>
  29 |     | <span class='neutral'> * ```</span>
  30 |     | <span class='neutral'> */</span>
  31 |     | <span class='unexecuted'>library StorageSlot {</span>
  32 |     | <span class='neutral'>    struct AddressSlot {</span>
  33 |     | <span class='neutral'>        address value;</span>
  34 |     | <span class='neutral'>    }</span>
  35 |     | <span class='neutral'></span>
  36 |     | <span class='neutral'>    struct BooleanSlot {</span>
  37 |     | <span class='neutral'>        bool value;</span>
  38 |     | <span class='neutral'>    }</span>
  39 |     | <span class='neutral'></span>
  40 |     | <span class='neutral'>    struct Bytes32Slot {</span>
  41 |     | <span class='neutral'>        bytes32 value;</span>
  42 |     | <span class='neutral'>    }</span>
  43 |     | <span class='neutral'></span>
  44 |     | <span class='neutral'>    struct Uint256Slot {</span>
  45 |     | <span class='neutral'>        uint256 value;</span>
  46 |     | <span class='neutral'>    }</span>
  47 |     | <span class='neutral'></span>
  48 |     | <span class='neutral'>    struct StringSlot {</span>
  49 |     | <span class='neutral'>        string value;</span>
  50 |     | <span class='neutral'>    }</span>
  51 |     | <span class='neutral'></span>
  52 |     | <span class='neutral'>    struct BytesSlot {</span>
  53 |     | <span class='neutral'>        bytes value;</span>
  54 |     | <span class='neutral'>    }</span>
  55 |     | <span class='neutral'></span>
  56 |     | <span class='neutral'>    /**</span>
  57 |     | <span class='neutral'>     * @dev Returns an `AddressSlot` with member `value` located at `slot`.</span>
  58 |     | <span class='neutral'>     */</span>
  59 |     | <span class='neutral'>    function getAddressSlot(bytes32 slot) internal pure returns (AddressSlot storage r) {</span>
  60 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
  61 |     | <span class='neutral'>        assembly {</span>
  62 |     | <span class='neutral'>            r.slot := slot</span>
  63 |     | <span class='neutral'>        }</span>
  64 |     | <span class='neutral'>    }</span>
  65 |     | <span class='neutral'></span>
  66 |     | <span class='neutral'>    /**</span>
  67 |     | <span class='neutral'>     * @dev Returns an `BooleanSlot` with member `value` located at `slot`.</span>
  68 |     | <span class='neutral'>     */</span>
  69 |     | <span class='neutral'>    function getBooleanSlot(bytes32 slot) internal pure returns (BooleanSlot storage r) {</span>
  70 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
  71 |     | <span class='neutral'>        assembly {</span>
  72 |     | <span class='neutral'>            r.slot := slot</span>
  73 |     | <span class='neutral'>        }</span>
  74 |     | <span class='neutral'>    }</span>
  75 |     | <span class='neutral'></span>
  76 |     | <span class='neutral'>    /**</span>
  77 |     | <span class='neutral'>     * @dev Returns an `Bytes32Slot` with member `value` located at `slot`.</span>
  78 |     | <span class='neutral'>     */</span>
  79 |     | <span class='neutral'>    function getBytes32Slot(bytes32 slot) internal pure returns (Bytes32Slot storage r) {</span>
  80 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
  81 |     | <span class='neutral'>        assembly {</span>
  82 |     | <span class='neutral'>            r.slot := slot</span>
  83 |     | <span class='neutral'>        }</span>
  84 |     | <span class='neutral'>    }</span>
  85 |     | <span class='neutral'></span>
  86 |     | <span class='neutral'>    /**</span>
  87 |     | <span class='neutral'>     * @dev Returns an `Uint256Slot` with member `value` located at `slot`.</span>
  88 |     | <span class='neutral'>     */</span>
  89 |     | <span class='neutral'>    function getUint256Slot(bytes32 slot) internal pure returns (Uint256Slot storage r) {</span>
  90 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
  91 |     | <span class='neutral'>        assembly {</span>
  92 |     | <span class='neutral'>            r.slot := slot</span>
  93 |     | <span class='neutral'>        }</span>
  94 |     | <span class='neutral'>    }</span>
  95 |     | <span class='neutral'></span>
  96 |     | <span class='neutral'>    /**</span>
  97 |     | <span class='neutral'>     * @dev Returns an `StringSlot` with member `value` located at `slot`.</span>
  98 |     | <span class='neutral'>     */</span>
  99 |     | <span class='neutral'>    function getStringSlot(bytes32 slot) internal pure returns (StringSlot storage r) {</span>
 100 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
 101 |     | <span class='neutral'>        assembly {</span>
 102 |     | <span class='neutral'>            r.slot := slot</span>
 103 |     | <span class='neutral'>        }</span>
 104 |     | <span class='neutral'>    }</span>
 105 |     | <span class='neutral'></span>
 106 |     | <span class='neutral'>    /**</span>
 107 |     | <span class='neutral'>     * @dev Returns an `StringSlot` representation of the string storage pointer `store`.</span>
 108 |     | <span class='neutral'>     */</span>
 109 |     | <span class='neutral'>    function getStringSlot(string storage store) internal pure returns (StringSlot storage r) {</span>
 110 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
 111 |     | <span class='neutral'>        assembly {</span>
 112 |     | <span class='neutral'>            r.slot := store.slot</span>
 113 |     | <span class='neutral'>        }</span>
 114 |     | <span class='neutral'>    }</span>
 115 |     | <span class='neutral'></span>
 116 |     | <span class='neutral'>    /**</span>
 117 |     | <span class='neutral'>     * @dev Returns an `BytesSlot` with member `value` located at `slot`.</span>
 118 |     | <span class='neutral'>     */</span>
 119 |     | <span class='neutral'>    function getBytesSlot(bytes32 slot) internal pure returns (BytesSlot storage r) {</span>
 120 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
 121 |     | <span class='neutral'>        assembly {</span>
 122 |     | <span class='neutral'>            r.slot := slot</span>
 123 |     | <span class='neutral'>        }</span>
 124 |     | <span class='neutral'>    }</span>
 125 |     | <span class='neutral'></span>
 126 |     | <span class='neutral'>    /**</span>
 127 |     | <span class='neutral'>     * @dev Returns an `BytesSlot` representation of the bytes storage pointer `store`.</span>
 128 |     | <span class='neutral'>     */</span>
 129 |     | <span class='neutral'>    function getBytesSlot(bytes storage store) internal pure returns (BytesSlot storage r) {</span>
 130 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
 131 |     | <span class='neutral'>        assembly {</span>
 132 |     | <span class='neutral'>            r.slot := store.slot</span>
 133 |     | <span class='neutral'>        }</span>
 134 |     | <span class='neutral'>    }</span>
 135 |     | <span class='neutral'>}</span>
 136 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/Strings.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/Strings.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>import {Math} from &quot;./math/Math.sol&quot;;</span>
  7 |     | <span class='neutral'>import {SignedMath} from &quot;./math/SignedMath.sol&quot;;</span>
  8 |     | <span class='neutral'></span>
  9 |     | <span class='neutral'>/**</span>
 10 |     | <span class='neutral'> * @dev String operations.</span>
 11 |     | <span class='neutral'> */</span>
 12 |     | <span class='unexecuted'>library Strings {</span>
 13 |     | <span class='neutral'>    bytes16 private constant HEX_DIGITS = &quot;0123456789abcdef&quot;;</span>
 14 |     | <span class='neutral'>    uint8 private constant ADDRESS_LENGTH = 20;</span>
 15 |     | <span class='neutral'></span>
 16 |     | <span class='neutral'>    /**</span>
 17 |     | <span class='neutral'>     * @dev The `value` string doesn&#39;t fit in the specified `length`.</span>
 18 |     | <span class='neutral'>     */</span>
 19 |     | <span class='neutral'>    error StringsInsufficientHexLength(uint256 value, uint256 length);</span>
 20 |     | <span class='neutral'></span>
 21 |     | <span class='neutral'>    /**</span>
 22 |     | <span class='neutral'>     * @dev Converts a `uint256` to its ASCII `string` decimal representation.</span>
 23 |     | <span class='neutral'>     */</span>
 24 |     | <span class='neutral'>    function toString(uint256 value) internal pure returns (string memory) {</span>
 25 |     | <span class='neutral'>        unchecked {</span>
 26 |     | <span class='neutral'>            uint256 length = Math.log10(value) + 1;</span>
 27 |     | <span class='neutral'>            string memory buffer = new string(length);</span>
 28 |     | <span class='neutral'>            uint256 ptr;</span>
 29 |     | <span class='neutral'>            /// @solidity memory-safe-assembly</span>
 30 |     | <span class='neutral'>            assembly {</span>
 31 |     | <span class='neutral'>                ptr := add(buffer, add(32, length))</span>
 32 |     | <span class='neutral'>            }</span>
 33 |     | <span class='neutral'>            while (true) {</span>
 34 |     | <span class='neutral'>                ptr--;</span>
 35 |     | <span class='neutral'>                /// @solidity memory-safe-assembly</span>
 36 |     | <span class='neutral'>                assembly {</span>
 37 |     | <span class='neutral'>                    mstore8(ptr, byte(mod(value, 10), HEX_DIGITS))</span>
 38 |     | <span class='neutral'>                }</span>
 39 |     | <span class='neutral'>                value /= 10;</span>
 40 |     | <span class='neutral'>                if (value == 0) break;</span>
 41 |     | <span class='neutral'>            }</span>
 42 |     | <span class='neutral'>            return buffer;</span>
 43 |     | <span class='neutral'>        }</span>
 44 |     | <span class='neutral'>    }</span>
 45 |     | <span class='neutral'></span>
 46 |     | <span class='neutral'>    /**</span>
 47 |     | <span class='neutral'>     * @dev Converts a `int256` to its ASCII `string` decimal representation.</span>
 48 |     | <span class='neutral'>     */</span>
 49 |     | <span class='neutral'>    function toStringSigned(int256 value) internal pure returns (string memory) {</span>
 50 |     | <span class='neutral'>        return string.concat(value &lt; 0 ? &quot;-&quot; : &quot;&quot;, toString(SignedMath.abs(value)));</span>
 51 |     | <span class='neutral'>    }</span>
 52 |     | <span class='neutral'></span>
 53 |     | <span class='neutral'>    /**</span>
 54 |     | <span class='neutral'>     * @dev Converts a `uint256` to its ASCII `string` hexadecimal representation.</span>
 55 |     | <span class='neutral'>     */</span>
 56 |     | <span class='neutral'>    function toHexString(uint256 value) internal pure returns (string memory) {</span>
 57 |     | <span class='neutral'>        unchecked {</span>
 58 |     | <span class='neutral'>            return toHexString(value, Math.log256(value) + 1);</span>
 59 |     | <span class='neutral'>        }</span>
 60 |     | <span class='neutral'>    }</span>
 61 |     | <span class='neutral'></span>
 62 |     | <span class='neutral'>    /**</span>
 63 |     | <span class='neutral'>     * @dev Converts a `uint256` to its ASCII `string` hexadecimal representation with fixed length.</span>
 64 |     | <span class='neutral'>     */</span>
 65 |     | <span class='neutral'>    function toHexString(uint256 value, uint256 length) internal pure returns (string memory) {</span>
 66 |     | <span class='neutral'>        uint256 localValue = value;</span>
 67 |     | <span class='neutral'>        bytes memory buffer = new bytes(2 * length + 2);</span>
 68 |     | <span class='neutral'>        buffer[0] = &quot;0&quot;;</span>
 69 |     | <span class='neutral'>        buffer[1] = &quot;x&quot;;</span>
 70 |     | <span class='neutral'>        for (uint256 i = 2 * length + 1; i &gt; 1; --i) {</span>
 71 |     | <span class='neutral'>            buffer[i] = HEX_DIGITS[localValue &amp; 0xf];</span>
 72 |     | <span class='neutral'>            localValue &gt;&gt;= 4;</span>
 73 |     | <span class='neutral'>        }</span>
 74 |     | <span class='neutral'>        if (localValue != 0) {</span>
 75 |     | <span class='neutral'>            revert StringsInsufficientHexLength(value, length);</span>
 76 |     | <span class='neutral'>        }</span>
 77 |     | <span class='neutral'>        return string(buffer);</span>
 78 |     | <span class='neutral'>    }</span>
 79 |     | <span class='neutral'></span>
 80 |     | <span class='neutral'>    /**</span>
 81 |     | <span class='neutral'>     * @dev Converts an `address` with fixed length of 20 bytes to its not checksummed ASCII `string` hexadecimal</span>
 82 |     | <span class='neutral'>     * representation.</span>
 83 |     | <span class='neutral'>     */</span>
 84 |     | <span class='neutral'>    function toHexString(address addr) internal pure returns (string memory) {</span>
 85 |     | <span class='neutral'>        return toHexString(uint256(uint160(addr)), ADDRESS_LENGTH);</span>
 86 |     | <span class='neutral'>    }</span>
 87 |     | <span class='neutral'></span>
 88 |     | <span class='neutral'>    /**</span>
 89 |     | <span class='neutral'>     * @dev Returns true if the two strings are equal.</span>
 90 |     | <span class='neutral'>     */</span>
 91 |     | <span class='neutral'>    function equal(string memory a, string memory b) internal pure returns (bool) {</span>
 92 |     | <span class='neutral'>        return bytes(a).length == bytes(b).length &amp;&amp; keccak256(bytes(a)) == keccak256(bytes(b));</span>
 93 |     | <span class='neutral'>    }</span>
 94 |     | <span class='neutral'>}</span>
 95 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/cryptography/ECDSA.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/cryptography/ECDSA.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>/**</span>
   7 |     | <span class='neutral'> * @dev Elliptic Curve Digital Signature Algorithm (ECDSA) operations.</span>
   8 |     | <span class='neutral'> *</span>
   9 |     | <span class='neutral'> * These functions can be used to verify that a message was signed by the holder</span>
  10 |     | <span class='neutral'> * of the private keys of a given address.</span>
  11 |     | <span class='neutral'> */</span>
  12 |     | <span class='unexecuted'>library ECDSA {</span>
  13 |     | <span class='neutral'>    enum RecoverError {</span>
  14 |     | <span class='neutral'>        NoError,</span>
  15 |     | <span class='neutral'>        InvalidSignature,</span>
  16 |     | <span class='neutral'>        InvalidSignatureLength,</span>
  17 |     | <span class='neutral'>        InvalidSignatureS</span>
  18 |     | <span class='neutral'>    }</span>
  19 |     | <span class='neutral'></span>
  20 |     | <span class='neutral'>    /**</span>
  21 |     | <span class='neutral'>     * @dev The signature derives the `address(0)`.</span>
  22 |     | <span class='neutral'>     */</span>
  23 |     | <span class='neutral'>    error ECDSAInvalidSignature();</span>
  24 |     | <span class='neutral'></span>
  25 |     | <span class='neutral'>    /**</span>
  26 |     | <span class='neutral'>     * @dev The signature has an invalid length.</span>
  27 |     | <span class='neutral'>     */</span>
  28 |     | <span class='neutral'>    error ECDSAInvalidSignatureLength(uint256 length);</span>
  29 |     | <span class='neutral'></span>
  30 |     | <span class='neutral'>    /**</span>
  31 |     | <span class='neutral'>     * @dev The signature has an S value that is in the upper half order.</span>
  32 |     | <span class='neutral'>     */</span>
  33 |     | <span class='neutral'>    error ECDSAInvalidSignatureS(bytes32 s);</span>
  34 |     | <span class='neutral'></span>
  35 |     | <span class='neutral'>    /**</span>
  36 |     | <span class='neutral'>     * @dev Returns the address that signed a hashed message (`hash`) with `signature` or an error. This will not</span>
  37 |     | <span class='neutral'>     * return address(0) without also returning an error description. Errors are documented using an enum (error type)</span>
  38 |     | <span class='neutral'>     * and a bytes32 providing additional information about the error.</span>
  39 |     | <span class='neutral'>     *</span>
  40 |     | <span class='neutral'>     * If no error is returned, then the address can be used for verification purposes.</span>
  41 |     | <span class='neutral'>     *</span>
  42 |     | <span class='neutral'>     * The `ecrecover` EVM precompile allows for malleable (non-unique) signatures:</span>
  43 |     | <span class='neutral'>     * this function rejects them by requiring the `s` value to be in the lower</span>
  44 |     | <span class='neutral'>     * half order, and the `v` value to be either 27 or 28.</span>
  45 |     | <span class='neutral'>     *</span>
  46 |     | <span class='neutral'>     * IMPORTANT: `hash` _must_ be the result of a hash operation for the</span>
  47 |     | <span class='neutral'>     * verification to be secure: it is possible to craft signatures that</span>
  48 |     | <span class='neutral'>     * recover to arbitrary addresses for non-hashed data. A safe way to ensure</span>
  49 |     | <span class='neutral'>     * this is by receiving a hash of the original message (which may otherwise</span>
  50 |     | <span class='neutral'>     * be too long), and then calling {MessageHashUtils-toEthSignedMessageHash} on it.</span>
  51 |     | <span class='neutral'>     *</span>
  52 |     | <span class='neutral'>     * Documentation for signature generation:</span>
  53 |     | <span class='neutral'>     * - with https://web3js.readthedocs.io/en/v1.3.4/web3-eth-accounts.html#sign[Web3.js]</span>
  54 |     | <span class='neutral'>     * - with https://docs.ethers.io/v5/api/signer/#Signer-signMessage[ethers]</span>
  55 |     | <span class='neutral'>     */</span>
  56 |     | <span class='neutral'>    function tryRecover(bytes32 hash, bytes memory signature) internal pure returns (address, RecoverError, bytes32) {</span>
  57 |     | <span class='neutral'>        if (signature.length == 65) {</span>
  58 |     | <span class='neutral'>            bytes32 r;</span>
  59 |     | <span class='neutral'>            bytes32 s;</span>
  60 |     | <span class='neutral'>            uint8 v;</span>
  61 |     | <span class='neutral'>            // ecrecover takes the signature parameters, and the only way to get them</span>
  62 |     | <span class='neutral'>            // currently is to use assembly.</span>
  63 |     | <span class='neutral'>            /// @solidity memory-safe-assembly</span>
  64 |     | <span class='neutral'>            assembly {</span>
  65 |     | <span class='neutral'>                r := mload(add(signature, 0x20))</span>
  66 |     | <span class='neutral'>                s := mload(add(signature, 0x40))</span>
  67 |     | <span class='neutral'>                v := byte(0, mload(add(signature, 0x60)))</span>
  68 |     | <span class='neutral'>            }</span>
  69 |     | <span class='neutral'>            return tryRecover(hash, v, r, s);</span>
  70 |     | <span class='neutral'>        } else {</span>
  71 |     | <span class='neutral'>            return (address(0), RecoverError.InvalidSignatureLength, bytes32(signature.length));</span>
  72 |     | <span class='neutral'>        }</span>
  73 |     | <span class='neutral'>    }</span>
  74 |     | <span class='neutral'></span>
  75 |     | <span class='neutral'>    /**</span>
  76 |     | <span class='neutral'>     * @dev Returns the address that signed a hashed message (`hash`) with</span>
  77 |     | <span class='neutral'>     * `signature`. This address can then be used for verification purposes.</span>
  78 |     | <span class='neutral'>     *</span>
  79 |     | <span class='neutral'>     * The `ecrecover` EVM precompile allows for malleable (non-unique) signatures:</span>
  80 |     | <span class='neutral'>     * this function rejects them by requiring the `s` value to be in the lower</span>
  81 |     | <span class='neutral'>     * half order, and the `v` value to be either 27 or 28.</span>
  82 |     | <span class='neutral'>     *</span>
  83 |     | <span class='neutral'>     * IMPORTANT: `hash` _must_ be the result of a hash operation for the</span>
  84 |     | <span class='neutral'>     * verification to be secure: it is possible to craft signatures that</span>
  85 |     | <span class='neutral'>     * recover to arbitrary addresses for non-hashed data. A safe way to ensure</span>
  86 |     | <span class='neutral'>     * this is by receiving a hash of the original message (which may otherwise</span>
  87 |     | <span class='neutral'>     * be too long), and then calling {MessageHashUtils-toEthSignedMessageHash} on it.</span>
  88 |     | <span class='neutral'>     */</span>
  89 |     | <span class='neutral'>    function recover(bytes32 hash, bytes memory signature) internal pure returns (address) {</span>
  90 |     | <span class='neutral'>        (address recovered, RecoverError error, bytes32 errorArg) = tryRecover(hash, signature);</span>
  91 |     | <span class='neutral'>        _throwError(error, errorArg);</span>
  92 |     | <span class='neutral'>        return recovered;</span>
  93 |     | <span class='neutral'>    }</span>
  94 |     | <span class='neutral'></span>
  95 |     | <span class='neutral'>    /**</span>
  96 |     | <span class='neutral'>     * @dev Overload of {ECDSA-tryRecover} that receives the `r` and `vs` short-signature fields separately.</span>
  97 |     | <span class='neutral'>     *</span>
  98 |     | <span class='neutral'>     * See https://eips.ethereum.org/EIPS/eip-2098[EIP-2098 short signatures]</span>
  99 |     | <span class='neutral'>     */</span>
 100 |     | <span class='neutral'>    function tryRecover(bytes32 hash, bytes32 r, bytes32 vs) internal pure returns (address, RecoverError, bytes32) {</span>
 101 |     | <span class='neutral'>        unchecked {</span>
 102 |     | <span class='neutral'>            bytes32 s = vs &amp; bytes32(0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff);</span>
 103 |     | <span class='neutral'>            // We do not check for an overflow here since the shift operation results in 0 or 1.</span>
 104 |     | <span class='neutral'>            uint8 v = uint8((uint256(vs) &gt;&gt; 255) + 27);</span>
 105 |     | <span class='neutral'>            return tryRecover(hash, v, r, s);</span>
 106 |     | <span class='neutral'>        }</span>
 107 |     | <span class='neutral'>    }</span>
 108 |     | <span class='neutral'></span>
 109 |     | <span class='neutral'>    /**</span>
 110 |     | <span class='neutral'>     * @dev Overload of {ECDSA-recover} that receives the `r and `vs` short-signature fields separately.</span>
 111 |     | <span class='neutral'>     */</span>
 112 |     | <span class='neutral'>    function recover(bytes32 hash, bytes32 r, bytes32 vs) internal pure returns (address) {</span>
 113 |     | <span class='neutral'>        (address recovered, RecoverError error, bytes32 errorArg) = tryRecover(hash, r, vs);</span>
 114 |     | <span class='neutral'>        _throwError(error, errorArg);</span>
 115 |     | <span class='neutral'>        return recovered;</span>
 116 |     | <span class='neutral'>    }</span>
 117 |     | <span class='neutral'></span>
 118 |     | <span class='neutral'>    /**</span>
 119 |     | <span class='neutral'>     * @dev Overload of {ECDSA-tryRecover} that receives the `v`,</span>
 120 |     | <span class='neutral'>     * `r` and `s` signature fields separately.</span>
 121 |     | <span class='neutral'>     */</span>
 122 |     | <span class='unexecuted'>    function tryRecover(</span>
 123 |     | <span class='neutral'>        bytes32 hash,</span>
 124 |     | <span class='neutral'>        uint8 v,</span>
 125 |     | <span class='neutral'>        bytes32 r,</span>
 126 |     | <span class='neutral'>        bytes32 s</span>
 127 |     | <span class='neutral'>    ) internal pure returns (address, RecoverError, bytes32) {</span>
 128 |     | <span class='neutral'>        // EIP-2 still allows signature malleability for ecrecover(). Remove this possibility and make the signature</span>
 129 |     | <span class='neutral'>        // unique. Appendix F in the Ethereum Yellow paper (https://ethereum.github.io/yellowpaper/paper.pdf), defines</span>
 130 |     | <span class='neutral'>        // the valid range for s in (301): 0 &lt; s &lt; secp256k1n ÷ 2 + 1, and for v in (302): v ∈ {27, 28}. Most</span>
 131 |     | <span class='neutral'>        // signatures from current libraries generate a unique signature with an s-value in the lower half order.</span>
 132 |     | <span class='neutral'>        //</span>
 133 |     | <span class='neutral'>        // If your library generates malleable signatures, such as s-values in the upper range, calculate a new s-value</span>
 134 |     | <span class='neutral'>        // with 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141 - s1 and flip v from 27 to 28 or</span>
 135 |     | <span class='neutral'>        // vice versa. If your library also generates signatures with 0/1 for v instead 27/28, add 27 to v to accept</span>
 136 |     | <span class='neutral'>        // these malleable signatures as well.</span>
 137 |     | <span class='unexecuted'>        if (uint256(s) &gt; 0x7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0) {</span>
 138 |     | <span class='unexecuted'>            return (address(0), RecoverError.InvalidSignatureS, s);</span>
 139 |     | <span class='neutral'>        }</span>
 140 |     | <span class='neutral'></span>
 141 |     | <span class='neutral'>        // If the signature is valid (and not malleable), return the signer address</span>
 142 |     | <span class='unexecuted'>        address signer = ecrecover(hash, v, r, s);</span>
 143 |     | <span class='unexecuted'>        if (signer == address(0)) {</span>
 144 |     | <span class='unexecuted'>            return (address(0), RecoverError.InvalidSignature, bytes32(0));</span>
 145 |     | <span class='neutral'>        }</span>
 146 |     | <span class='neutral'></span>
 147 |     | <span class='unexecuted'>        return (signer, RecoverError.NoError, bytes32(0));</span>
 148 |     | <span class='neutral'>    }</span>
 149 |     | <span class='neutral'></span>
 150 |     | <span class='neutral'>    /**</span>
 151 |     | <span class='neutral'>     * @dev Overload of {ECDSA-recover} that receives the `v`,</span>
 152 |     | <span class='neutral'>     * `r` and `s` signature fields separately.</span>
 153 |     | <span class='neutral'>     */</span>
 154 |     | <span class='neutral'>    function recover(bytes32 hash, uint8 v, bytes32 r, bytes32 s) internal pure returns (address) {</span>
 155 |     | <span class='unexecuted'>        (address recovered, RecoverError error, bytes32 errorArg) = tryRecover(hash, v, r, s);</span>
 156 |     | <span class='unexecuted'>        _throwError(error, errorArg);</span>
 157 |     | <span class='neutral'>        return recovered;</span>
 158 |     | <span class='neutral'>    }</span>
 159 |     | <span class='neutral'></span>
 160 |     | <span class='neutral'>    /**</span>
 161 |     | <span class='neutral'>     * @dev Optionally reverts with the corresponding custom error according to the `error` argument provided.</span>
 162 |     | <span class='neutral'>     */</span>
 163 |     | <span class='unexecuted'>    function _throwError(RecoverError error, bytes32 errorArg) private pure {</span>
 164 |     | <span class='unexecuted'>        if (error == RecoverError.NoError) {</span>
 165 |     | <span class='unexecuted'>            return; // no error: do nothing</span>
 166 |     | <span class='unexecuted'>        } else if (error == RecoverError.InvalidSignature) {</span>
 167 |     | <span class='unexecuted'>            revert ECDSAInvalidSignature();</span>
 168 |     | <span class='unexecuted'>        } else if (error == RecoverError.InvalidSignatureLength) {</span>
 169 |     | <span class='unexecuted'>            revert ECDSAInvalidSignatureLength(uint256(errorArg));</span>
 170 |     | <span class='unexecuted'>        } else if (error == RecoverError.InvalidSignatureS) {</span>
 171 |     | <span class='unexecuted'>            revert ECDSAInvalidSignatureS(errorArg);</span>
 172 |     | <span class='neutral'>        }</span>
 173 |     | <span class='neutral'>    }</span>
 174 |     | <span class='neutral'>}</span>
 175 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/cryptography/EIP712.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/cryptography/EIP712.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>import {MessageHashUtils} from &quot;./MessageHashUtils.sol&quot;;</span>
   7 |     | <span class='neutral'>import {ShortStrings, ShortString} from &quot;../ShortStrings.sol&quot;;</span>
   8 |     | <span class='neutral'>import {IERC5267} from &quot;../../interfaces/IERC5267.sol&quot;;</span>
   9 |     | <span class='neutral'></span>
  10 |     | <span class='neutral'>/**</span>
  11 |     | <span class='neutral'> * @dev https://eips.ethereum.org/EIPS/eip-712[EIP 712] is a standard for hashing and signing of typed structured data.</span>
  12 |     | <span class='neutral'> *</span>
  13 |     | <span class='neutral'> * The encoding scheme specified in the EIP requires a domain separator and a hash of the typed structured data, whose</span>
  14 |     | <span class='neutral'> * encoding is very generic and therefore its implementation in Solidity is not feasible, thus this contract</span>
  15 |     | <span class='neutral'> * does not implement the encoding itself. Protocols need to implement the type-specific encoding they need in order to</span>
  16 |     | <span class='neutral'> * produce the hash of their typed data using a combination of `abi.encode` and `keccak256`.</span>
  17 |     | <span class='neutral'> *</span>
  18 |     | <span class='neutral'> * This contract implements the EIP 712 domain separator ({_domainSeparatorV4}) that is used as part of the encoding</span>
  19 |     | <span class='neutral'> * scheme, and the final step of the encoding to obtain the message digest that is then signed via ECDSA</span>
  20 |     | <span class='neutral'> * ({_hashTypedDataV4}).</span>
  21 |     | <span class='neutral'> *</span>
  22 |     | <span class='neutral'> * The implementation of the domain separator was designed to be as efficient as possible while still properly updating</span>
  23 |     | <span class='neutral'> * the chain id to protect against replay attacks on an eventual fork of the chain.</span>
  24 |     | <span class='neutral'> *</span>
  25 |     | <span class='neutral'> * NOTE: This contract implements the version of the encoding known as &quot;v4&quot;, as implemented by the JSON RPC method</span>
  26 |     | <span class='neutral'> * https://docs.metamask.io/guide/signing-data.html[`eth_signTypedDataV4` in MetaMask].</span>
  27 |     | <span class='neutral'> *</span>
  28 |     | <span class='neutral'> * NOTE: In the upgradeable version of this contract, the cached values will correspond to the address, and the domain</span>
  29 |     | <span class='neutral'> * separator of the implementation contract. This will cause the {_domainSeparatorV4} function to always rebuild the</span>
  30 |     | <span class='neutral'> * separator from the immutable values, which is cheaper than accessing a cached version in cold storage.</span>
  31 |     | <span class='neutral'> *</span>
  32 |     | <span class='neutral'> * @custom:oz-upgrades-unsafe-allow state-variable-immutable</span>
  33 |     | <span class='neutral'> */</span>
  34 |     | <span class='neutral'>abstract contract EIP712 is IERC5267 {</span>
  35 |     | <span class='neutral'>    using ShortStrings for *;</span>
  36 |     | <span class='neutral'></span>
  37 |     | <span class='neutral'>    bytes32 private constant TYPE_HASH =</span>
  38 | *   | <span class='executed'>        keccak256(&quot;EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)&quot;);</span>
  39 |     | <span class='neutral'></span>
  40 |     | <span class='neutral'>    // Cache the domain separator as an immutable value, but also store the chain id that it corresponds to, in order to</span>
  41 |     | <span class='neutral'>    // invalidate the cached domain separator if the chain id changes.</span>
  42 |     | <span class='neutral'>    bytes32 private immutable _cachedDomainSeparator;</span>
  43 |     | <span class='neutral'>    uint256 private immutable _cachedChainId;</span>
  44 |     | <span class='neutral'>    address private immutable _cachedThis;</span>
  45 |     | <span class='neutral'></span>
  46 |     | <span class='neutral'>    bytes32 private immutable _hashedName;</span>
  47 |     | <span class='neutral'>    bytes32 private immutable _hashedVersion;</span>
  48 |     | <span class='neutral'></span>
  49 |     | <span class='neutral'>    ShortString private immutable _name;</span>
  50 |     | <span class='neutral'>    ShortString private immutable _version;</span>
  51 |     | <span class='neutral'>    string private _nameFallback;</span>
  52 |     | <span class='neutral'>    string private _versionFallback;</span>
  53 |     | <span class='neutral'></span>
  54 |     | <span class='neutral'>    /**</span>
  55 |     | <span class='neutral'>     * @dev Initializes the domain separator and parameter caches.</span>
  56 |     | <span class='neutral'>     *</span>
  57 |     | <span class='neutral'>     * The meaning of `name` and `version` is specified in</span>
  58 |     | <span class='neutral'>     * https://eips.ethereum.org/EIPS/eip-712#definition-of-domainseparator[EIP 712]:</span>
  59 |     | <span class='neutral'>     *</span>
  60 |     | <span class='neutral'>     * - `name`: the user readable name of the signing domain, i.e. the name of the DApp or the protocol.</span>
  61 |     | <span class='neutral'>     * - `version`: the current major version of the signing domain.</span>
  62 |     | <span class='neutral'>     *</span>
  63 |     | <span class='neutral'>     * NOTE: These parameters cannot be changed except through a xref:learn::upgrading-smart-contracts.adoc[smart</span>
  64 |     | <span class='neutral'>     * contract upgrade].</span>
  65 |     | <span class='neutral'>     */</span>
  66 |     | <span class='neutral'>    constructor(string memory name, string memory version) {</span>
  67 | *   | <span class='executed'>        _name = name.toShortStringWithFallback(_nameFallback);</span>
  68 | *   | <span class='executed'>        _version = version.toShortStringWithFallback(_versionFallback);</span>
  69 | *   | <span class='executed'>        _hashedName = keccak256(bytes(name));</span>
  70 | *   | <span class='executed'>        _hashedVersion = keccak256(bytes(version));</span>
  71 |     | <span class='neutral'></span>
  72 | *   | <span class='executed'>        _cachedChainId = block.chainid;</span>
  73 | *   | <span class='executed'>        _cachedDomainSeparator = _buildDomainSeparator();</span>
  74 | *   | <span class='executed'>        _cachedThis = address(this);</span>
  75 |     | <span class='neutral'>    }</span>
  76 |     | <span class='neutral'></span>
  77 |     | <span class='neutral'>    /**</span>
  78 |     | <span class='neutral'>     * @dev Returns the domain separator for the current chain.</span>
  79 |     | <span class='neutral'>     */</span>
  80 |     | <span class='unexecuted'>    function _domainSeparatorV4() internal view returns (bytes32) {</span>
  81 |     | <span class='unexecuted'>        if (address(this) == _cachedThis &amp;&amp; block.chainid == _cachedChainId) {</span>
  82 |     | <span class='unexecuted'>            return _cachedDomainSeparator;</span>
  83 |     | <span class='neutral'>        } else {</span>
  84 |     | <span class='unexecuted'>            return _buildDomainSeparator();</span>
  85 |     | <span class='neutral'>        }</span>
  86 |     | <span class='neutral'>    }</span>
  87 |     | <span class='neutral'></span>
  88 |     | <span class='neutral'>    function _buildDomainSeparator() private view returns (bytes32) {</span>
  89 | *   | <span class='executed'>        return keccak256(abi.encode(TYPE_HASH, _hashedName, _hashedVersion, block.chainid, address(this)));</span>
  90 |     | <span class='neutral'>    }</span>
  91 |     | <span class='neutral'></span>
  92 |     | <span class='neutral'>    /**</span>
  93 |     | <span class='neutral'>     * @dev Given an already https://eips.ethereum.org/EIPS/eip-712#definition-of-hashstruct[hashed struct], this</span>
  94 |     | <span class='neutral'>     * function returns the hash of the fully encoded EIP712 message for this domain.</span>
  95 |     | <span class='neutral'>     *</span>
  96 |     | <span class='neutral'>     * This hash can be used together with {ECDSA-recover} to obtain the signer of a message. For example:</span>
  97 |     | <span class='neutral'>     *</span>
  98 |     | <span class='neutral'>     * ```solidity</span>
  99 |     | <span class='neutral'>     * bytes32 digest = _hashTypedDataV4(keccak256(abi.encode(</span>
 100 |     | <span class='neutral'>     *     keccak256(&quot;Mail(address to,string contents)&quot;),</span>
 101 |     | <span class='neutral'>     *     mailTo,</span>
 102 |     | <span class='neutral'>     *     keccak256(bytes(mailContents))</span>
 103 |     | <span class='neutral'>     * )));</span>
 104 |     | <span class='neutral'>     * address signer = ECDSA.recover(digest, signature);</span>
 105 |     | <span class='neutral'>     * ```</span>
 106 |     | <span class='neutral'>     */</span>
 107 |     | <span class='neutral'>    function _hashTypedDataV4(bytes32 structHash) internal view virtual returns (bytes32) {</span>
 108 |     | <span class='unexecuted'>        return MessageHashUtils.toTypedDataHash(_domainSeparatorV4(), structHash);</span>
 109 |     | <span class='neutral'>    }</span>
 110 |     | <span class='neutral'></span>
 111 |     | <span class='neutral'>    /**</span>
 112 |     | <span class='neutral'>     * @dev See {IERC-5267}.</span>
 113 |     | <span class='neutral'>     */</span>
 114 |     | <span class='neutral'>    function eip712Domain()</span>
 115 |     | <span class='neutral'>        public</span>
 116 |     | <span class='neutral'>        view</span>
 117 |     | <span class='neutral'>        virtual</span>
 118 |     | <span class='neutral'>        returns (</span>
 119 |     | <span class='neutral'>            bytes1 fields,</span>
 120 |     | <span class='neutral'>            string memory name,</span>
 121 |     | <span class='neutral'>            string memory version,</span>
 122 |     | <span class='neutral'>            uint256 chainId,</span>
 123 |     | <span class='neutral'>            address verifyingContract,</span>
 124 |     | <span class='neutral'>            bytes32 salt,</span>
 125 |     | <span class='neutral'>            uint256[] memory extensions</span>
 126 |     | <span class='neutral'>        )</span>
 127 |     | <span class='neutral'>    {</span>
 128 |     | <span class='neutral'>        return (</span>
 129 |     | <span class='neutral'>            hex&quot;0f&quot;, // 01111</span>
 130 |     | <span class='neutral'>            _EIP712Name(),</span>
 131 |     | <span class='neutral'>            _EIP712Version(),</span>
 132 |     | <span class='unexecuted'>            block.chainid,</span>
 133 |     | <span class='unexecuted'>            address(this),</span>
 134 |     | <span class='neutral'>            bytes32(0),</span>
 135 |     | <span class='neutral'>            new uint256[](0)</span>
 136 |     | <span class='neutral'>        );</span>
 137 |     | <span class='neutral'>    }</span>
 138 |     | <span class='neutral'></span>
 139 |     | <span class='neutral'>    /**</span>
 140 |     | <span class='neutral'>     * @dev The name parameter for the EIP712 domain.</span>
 141 |     | <span class='neutral'>     *</span>
 142 |     | <span class='neutral'>     * NOTE: By default this function reads _name which is an immutable value.</span>
 143 |     | <span class='neutral'>     * It only reads from storage if necessary (in case the value is too large to fit in a ShortString).</span>
 144 |     | <span class='neutral'>     */</span>
 145 |     | <span class='neutral'>    // solhint-disable-next-line func-name-mixedcase</span>
 146 |     | <span class='neutral'>    function _EIP712Name() internal view returns (string memory) {</span>
 147 |     | <span class='unexecuted'>        return _name.toStringWithFallback(_nameFallback);</span>
 148 |     | <span class='neutral'>    }</span>
 149 |     | <span class='neutral'></span>
 150 |     | <span class='neutral'>    /**</span>
 151 |     | <span class='neutral'>     * @dev The version parameter for the EIP712 domain.</span>
 152 |     | <span class='neutral'>     *</span>
 153 |     | <span class='neutral'>     * NOTE: By default this function reads _version which is an immutable value.</span>
 154 |     | <span class='neutral'>     * It only reads from storage if necessary (in case the value is too large to fit in a ShortString).</span>
 155 |     | <span class='neutral'>     */</span>
 156 |     | <span class='neutral'>    // solhint-disable-next-line func-name-mixedcase</span>
 157 |     | <span class='neutral'>    function _EIP712Version() internal view returns (string memory) {</span>
 158 |     | <span class='unexecuted'>        return _version.toStringWithFallback(_versionFallback);</span>
 159 |     | <span class='neutral'>    }</span>
 160 |     | <span class='neutral'>}</span>
 161 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/cryptography/MessageHashUtils.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/cryptography/MessageHashUtils.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>import {Strings} from &quot;../Strings.sol&quot;;</span>
  7 |     | <span class='neutral'></span>
  8 |     | <span class='neutral'>/**</span>
  9 |     | <span class='neutral'> * @dev Signature message hash utilities for producing digests to be consumed by {ECDSA} recovery or signing.</span>
 10 |     | <span class='neutral'> *</span>
 11 |     | <span class='neutral'> * The library provides methods for generating a hash of a message that conforms to the</span>
 12 |     | <span class='neutral'> * https://eips.ethereum.org/EIPS/eip-191[EIP 191] and https://eips.ethereum.org/EIPS/eip-712[EIP 712]</span>
 13 |     | <span class='neutral'> * specifications.</span>
 14 |     | <span class='neutral'> */</span>
 15 |     | <span class='unexecuted'>library MessageHashUtils {</span>
 16 |     | <span class='neutral'>    /**</span>
 17 |     | <span class='neutral'>     * @dev Returns the keccak256 digest of an EIP-191 signed data with version</span>
 18 |     | <span class='neutral'>     * `0x45` (`personal_sign` messages).</span>
 19 |     | <span class='neutral'>     *</span>
 20 |     | <span class='neutral'>     * The digest is calculated by prefixing a bytes32 `messageHash` with</span>
 21 |     | <span class='neutral'>     * `&quot;\x19Ethereum Signed Message:\n32&quot;` and hashing the result. It corresponds with the</span>
 22 |     | <span class='neutral'>     * hash signed when using the https://eth.wiki/json-rpc/API#eth_sign[`eth_sign`] JSON-RPC method.</span>
 23 |     | <span class='neutral'>     *</span>
 24 |     | <span class='neutral'>     * NOTE: The `messageHash` parameter is intended to be the result of hashing a raw message with</span>
 25 |     | <span class='neutral'>     * keccak256, although any bytes32 value can be safely used because the final digest will</span>
 26 |     | <span class='neutral'>     * be re-hashed.</span>
 27 |     | <span class='neutral'>     *</span>
 28 |     | <span class='neutral'>     * See {ECDSA-recover}.</span>
 29 |     | <span class='neutral'>     */</span>
 30 |     | <span class='neutral'>    function toEthSignedMessageHash(bytes32 messageHash) internal pure returns (bytes32 digest) {</span>
 31 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
 32 |     | <span class='neutral'>        assembly {</span>
 33 |     | <span class='neutral'>            mstore(0x00, &quot;\x19Ethereum Signed Message:\n32&quot;) // 32 is the bytes-length of messageHash</span>
 34 |     | <span class='neutral'>            mstore(0x1c, messageHash) // 0x1c (28) is the length of the prefix</span>
 35 |     | <span class='neutral'>            digest := keccak256(0x00, 0x3c) // 0x3c is the length of the prefix (0x1c) + messageHash (0x20)</span>
 36 |     | <span class='neutral'>        }</span>
 37 |     | <span class='neutral'>    }</span>
 38 |     | <span class='neutral'></span>
 39 |     | <span class='neutral'>    /**</span>
 40 |     | <span class='neutral'>     * @dev Returns the keccak256 digest of an EIP-191 signed data with version</span>
 41 |     | <span class='neutral'>     * `0x45` (`personal_sign` messages).</span>
 42 |     | <span class='neutral'>     *</span>
 43 |     | <span class='neutral'>     * The digest is calculated by prefixing an arbitrary `message` with</span>
 44 |     | <span class='neutral'>     * `&quot;\x19Ethereum Signed Message:\n&quot; + len(message)` and hashing the result. It corresponds with the</span>
 45 |     | <span class='neutral'>     * hash signed when using the https://eth.wiki/json-rpc/API#eth_sign[`eth_sign`] JSON-RPC method.</span>
 46 |     | <span class='neutral'>     *</span>
 47 |     | <span class='neutral'>     * See {ECDSA-recover}.</span>
 48 |     | <span class='neutral'>     */</span>
 49 |     | <span class='neutral'>    function toEthSignedMessageHash(bytes memory message) internal pure returns (bytes32) {</span>
 50 |     | <span class='neutral'>        return</span>
 51 |     | <span class='neutral'>            keccak256(bytes.concat(&quot;\x19Ethereum Signed Message:\n&quot;, bytes(Strings.toString(message.length)), message));</span>
 52 |     | <span class='neutral'>    }</span>
 53 |     | <span class='neutral'></span>
 54 |     | <span class='neutral'>    /**</span>
 55 |     | <span class='neutral'>     * @dev Returns the keccak256 digest of an EIP-191 signed data with version</span>
 56 |     | <span class='neutral'>     * `0x00` (data with intended validator).</span>
 57 |     | <span class='neutral'>     *</span>
 58 |     | <span class='neutral'>     * The digest is calculated by prefixing an arbitrary `data` with `&quot;\x19\x00&quot;` and the intended</span>
 59 |     | <span class='neutral'>     * `validator` address. Then hashing the result.</span>
 60 |     | <span class='neutral'>     *</span>
 61 |     | <span class='neutral'>     * See {ECDSA-recover}.</span>
 62 |     | <span class='neutral'>     */</span>
 63 |     | <span class='neutral'>    function toDataWithIntendedValidatorHash(address validator, bytes memory data) internal pure returns (bytes32) {</span>
 64 |     | <span class='neutral'>        return keccak256(abi.encodePacked(hex&quot;19_00&quot;, validator, data));</span>
 65 |     | <span class='neutral'>    }</span>
 66 |     | <span class='neutral'></span>
 67 |     | <span class='neutral'>    /**</span>
 68 |     | <span class='neutral'>     * @dev Returns the keccak256 digest of an EIP-712 typed data (EIP-191 version `0x01`).</span>
 69 |     | <span class='neutral'>     *</span>
 70 |     | <span class='neutral'>     * The digest is calculated from a `domainSeparator` and a `structHash`, by prefixing them with</span>
 71 |     | <span class='neutral'>     * `\x19\x01` and hashing the result. It corresponds to the hash signed by the</span>
 72 |     | <span class='neutral'>     * https://eips.ethereum.org/EIPS/eip-712[`eth_signTypedData`] JSON-RPC method as part of EIP-712.</span>
 73 |     | <span class='neutral'>     *</span>
 74 |     | <span class='neutral'>     * See {ECDSA-recover}.</span>
 75 |     | <span class='neutral'>     */</span>
 76 |     | <span class='neutral'>    function toTypedDataHash(bytes32 domainSeparator, bytes32 structHash) internal pure returns (bytes32 digest) {</span>
 77 |     | <span class='neutral'>        /// @solidity memory-safe-assembly</span>
 78 |     | <span class='unexecuted'>        assembly {</span>
 79 |     | <span class='neutral'>            let ptr := mload(0x40)</span>
 80 |     | <span class='neutral'>            mstore(ptr, hex&quot;19_01&quot;)</span>
 81 |     | <span class='neutral'>            mstore(add(ptr, 0x02), domainSeparator)</span>
 82 |     | <span class='neutral'>            mstore(add(ptr, 0x22), structHash)</span>
 83 |     | <span class='neutral'>            digest := keccak256(ptr, 0x42)</span>
 84 |     | <span class='neutral'>        }</span>
 85 |     | <span class='neutral'>    }</span>
 86 |     | <span class='neutral'>}</span>
 87 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/introspection/ERC165.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/introspection/ERC165.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>import {IERC165} from &quot;./IERC165.sol&quot;;</span>
  7 |     | <span class='neutral'></span>
  8 |     | <span class='neutral'>/**</span>
  9 |     | <span class='neutral'> * @dev Implementation of the {IERC165} interface.</span>
 10 |     | <span class='neutral'> *</span>
 11 |     | <span class='neutral'> * Contracts that want to implement ERC165 should inherit from this contract and override {supportsInterface} to check</span>
 12 |     | <span class='neutral'> * for the additional interface id that will be supported. For example:</span>
 13 |     | <span class='neutral'> *</span>
 14 |     | <span class='neutral'> * ```solidity</span>
 15 |     | <span class='neutral'> * function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {</span>
 16 |     | <span class='neutral'> *     return interfaceId == type(MyInterface).interfaceId || super.supportsInterface(interfaceId);</span>
 17 |     | <span class='neutral'> * }</span>
 18 |     | <span class='neutral'> * ```</span>
 19 |     | <span class='neutral'> */</span>
 20 |     | <span class='neutral'>abstract contract ERC165 is IERC165 {</span>
 21 |     | <span class='neutral'>    /**</span>
 22 |     | <span class='neutral'>     * @dev See {IERC165-supportsInterface}.</span>
 23 |     | <span class='neutral'>     */</span>
 24 |     | <span class='neutral'>    function supportsInterface(bytes4 interfaceId) public view virtual returns (bool) {</span>
 25 |     | <span class='unexecuted'>        return interfaceId == type(IERC165).interfaceId;</span>
 26 |     | <span class='neutral'>    }</span>
 27 |     | <span class='neutral'>}</span>
 28 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/introspection/IERC165.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev Interface of the ERC165 standard, as defined in the</span>
  8 |     | <span class='neutral'> * https://eips.ethereum.org/EIPS/eip-165[EIP].</span>
  9 |     | <span class='neutral'> *</span>
 10 |     | <span class='neutral'> * Implementers can declare support of contract interfaces, which can then be</span>
 11 |     | <span class='neutral'> * queried by others ({ERC165Checker}).</span>
 12 |     | <span class='neutral'> *</span>
 13 |     | <span class='neutral'> * For an implementation, see {ERC165}.</span>
 14 |     | <span class='neutral'> */</span>
 15 |     | <span class='neutral'>interface IERC165 {</span>
 16 |     | <span class='neutral'>    /**</span>
 17 |     | <span class='neutral'>     * @dev Returns true if this contract implements the interface defined by</span>
 18 |     | <span class='neutral'>     * `interfaceId`. See the corresponding</span>
 19 |     | <span class='neutral'>     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]</span>
 20 |     | <span class='neutral'>     * to learn more about how these ids are created.</span>
 21 |     | <span class='neutral'>     *</span>
 22 |     | <span class='neutral'>     * This function call must use less than 30 000 gas.</span>
 23 |     | <span class='neutral'>     */</span>
 24 |     | <span class='neutral'>    function supportsInterface(bytes4 interfaceId) external view returns (bool);</span>
 25 |     | <span class='neutral'>}</span>
 26 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/math/Math.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/math/Math.sol)</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
   5 |     | <span class='neutral'></span>
   6 |     | <span class='neutral'>/**</span>
   7 |     | <span class='neutral'> * @dev Standard math utilities missing in the Solidity language.</span>
   8 |     | <span class='neutral'> */</span>
   9 |     | <span class='unexecuted'>library Math {</span>
  10 |     | <span class='neutral'>    /**</span>
  11 |     | <span class='neutral'>     * @dev Muldiv operation overflow.</span>
  12 |     | <span class='neutral'>     */</span>
  13 |     | <span class='neutral'>    error MathOverflowedMulDiv();</span>
  14 |     | <span class='neutral'></span>
  15 |     | <span class='neutral'>    enum Rounding {</span>
  16 |     | <span class='neutral'>        Floor, // Toward negative infinity</span>
  17 |     | <span class='neutral'>        Ceil, // Toward positive infinity</span>
  18 |     | <span class='neutral'>        Trunc, // Toward zero</span>
  19 |     | <span class='neutral'>        Expand // Away from zero</span>
  20 |     | <span class='neutral'>    }</span>
  21 |     | <span class='neutral'></span>
  22 |     | <span class='neutral'>    /**</span>
  23 |     | <span class='neutral'>     * @dev Returns the addition of two unsigned integers, with an overflow flag.</span>
  24 |     | <span class='neutral'>     */</span>
  25 |     | <span class='neutral'>    function tryAdd(uint256 a, uint256 b) internal pure returns (bool, uint256) {</span>
  26 |     | <span class='neutral'>        unchecked {</span>
  27 |     | <span class='neutral'>            uint256 c = a + b;</span>
  28 |     | <span class='neutral'>            if (c &lt; a) return (false, 0);</span>
  29 |     | <span class='neutral'>            return (true, c);</span>
  30 |     | <span class='neutral'>        }</span>
  31 |     | <span class='neutral'>    }</span>
  32 |     | <span class='neutral'></span>
  33 |     | <span class='neutral'>    /**</span>
  34 |     | <span class='neutral'>     * @dev Returns the subtraction of two unsigned integers, with an overflow flag.</span>
  35 |     | <span class='neutral'>     */</span>
  36 |     | <span class='neutral'>    function trySub(uint256 a, uint256 b) internal pure returns (bool, uint256) {</span>
  37 |     | <span class='neutral'>        unchecked {</span>
  38 |     | <span class='neutral'>            if (b &gt; a) return (false, 0);</span>
  39 |     | <span class='neutral'>            return (true, a - b);</span>
  40 |     | <span class='neutral'>        }</span>
  41 |     | <span class='neutral'>    }</span>
  42 |     | <span class='neutral'></span>
  43 |     | <span class='neutral'>    /**</span>
  44 |     | <span class='neutral'>     * @dev Returns the multiplication of two unsigned integers, with an overflow flag.</span>
  45 |     | <span class='neutral'>     */</span>
  46 |     | <span class='neutral'>    function tryMul(uint256 a, uint256 b) internal pure returns (bool, uint256) {</span>
  47 |     | <span class='neutral'>        unchecked {</span>
  48 |     | <span class='neutral'>            // Gas optimization: this is cheaper than requiring &#39;a&#39; not being zero, but the</span>
  49 |     | <span class='neutral'>            // benefit is lost if &#39;b&#39; is also tested.</span>
  50 |     | <span class='neutral'>            // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522</span>
  51 |     | <span class='neutral'>            if (a == 0) return (true, 0);</span>
  52 |     | <span class='neutral'>            uint256 c = a * b;</span>
  53 |     | <span class='neutral'>            if (c / a != b) return (false, 0);</span>
  54 |     | <span class='neutral'>            return (true, c);</span>
  55 |     | <span class='neutral'>        }</span>
  56 |     | <span class='neutral'>    }</span>
  57 |     | <span class='neutral'></span>
  58 |     | <span class='neutral'>    /**</span>
  59 |     | <span class='neutral'>     * @dev Returns the division of two unsigned integers, with a division by zero flag.</span>
  60 |     | <span class='neutral'>     */</span>
  61 |     | <span class='neutral'>    function tryDiv(uint256 a, uint256 b) internal pure returns (bool, uint256) {</span>
  62 |     | <span class='neutral'>        unchecked {</span>
  63 |     | <span class='neutral'>            if (b == 0) return (false, 0);</span>
  64 |     | <span class='neutral'>            return (true, a / b);</span>
  65 |     | <span class='neutral'>        }</span>
  66 |     | <span class='neutral'>    }</span>
  67 |     | <span class='neutral'></span>
  68 |     | <span class='neutral'>    /**</span>
  69 |     | <span class='neutral'>     * @dev Returns the remainder of dividing two unsigned integers, with a division by zero flag.</span>
  70 |     | <span class='neutral'>     */</span>
  71 |     | <span class='neutral'>    function tryMod(uint256 a, uint256 b) internal pure returns (bool, uint256) {</span>
  72 |     | <span class='neutral'>        unchecked {</span>
  73 |     | <span class='neutral'>            if (b == 0) return (false, 0);</span>
  74 |     | <span class='neutral'>            return (true, a % b);</span>
  75 |     | <span class='neutral'>        }</span>
  76 |     | <span class='neutral'>    }</span>
  77 |     | <span class='neutral'></span>
  78 |     | <span class='neutral'>    /**</span>
  79 |     | <span class='neutral'>     * @dev Returns the largest of two numbers.</span>
  80 |     | <span class='neutral'>     */</span>
  81 |     | <span class='neutral'>    function max(uint256 a, uint256 b) internal pure returns (uint256) {</span>
  82 |     | <span class='neutral'>        return a &gt; b ? a : b;</span>
  83 |     | <span class='neutral'>    }</span>
  84 |     | <span class='neutral'></span>
  85 |     | <span class='neutral'>    /**</span>
  86 |     | <span class='neutral'>     * @dev Returns the smallest of two numbers.</span>
  87 |     | <span class='neutral'>     */</span>
  88 |     | <span class='neutral'>    function min(uint256 a, uint256 b) internal pure returns (uint256) {</span>
  89 |     | <span class='neutral'>        return a &lt; b ? a : b;</span>
  90 |     | <span class='neutral'>    }</span>
  91 |     | <span class='neutral'></span>
  92 |     | <span class='neutral'>    /**</span>
  93 |     | <span class='neutral'>     * @dev Returns the average of two numbers. The result is rounded towards</span>
  94 |     | <span class='neutral'>     * zero.</span>
  95 |     | <span class='neutral'>     */</span>
  96 |     | <span class='neutral'>    function average(uint256 a, uint256 b) internal pure returns (uint256) {</span>
  97 |     | <span class='neutral'>        // (a + b) / 2 can overflow.</span>
  98 |     | <span class='neutral'>        return (a &amp; b) + (a ^ b) / 2;</span>
  99 |     | <span class='neutral'>    }</span>
 100 |     | <span class='neutral'></span>
 101 |     | <span class='neutral'>    /**</span>
 102 |     | <span class='neutral'>     * @dev Returns the ceiling of the division of two numbers.</span>
 103 |     | <span class='neutral'>     *</span>
 104 |     | <span class='neutral'>     * This differs from standard division with `/` in that it rounds towards infinity instead</span>
 105 |     | <span class='neutral'>     * of rounding towards zero.</span>
 106 |     | <span class='neutral'>     */</span>
 107 |     | <span class='neutral'>    function ceilDiv(uint256 a, uint256 b) internal pure returns (uint256) {</span>
 108 |     | <span class='neutral'>        if (b == 0) {</span>
 109 |     | <span class='neutral'>            // Guarantee the same behavior as in a regular Solidity division.</span>
 110 |     | <span class='neutral'>            return a / b;</span>
 111 |     | <span class='neutral'>        }</span>
 112 |     | <span class='neutral'></span>
 113 |     | <span class='neutral'>        // (a + b - 1) / b can overflow on addition, so we distribute.</span>
 114 |     | <span class='neutral'>        return a == 0 ? 0 : (a - 1) / b + 1;</span>
 115 |     | <span class='neutral'>    }</span>
 116 |     | <span class='neutral'></span>
 117 |     | <span class='neutral'>    /**</span>
 118 |     | <span class='neutral'>     * @notice Calculates floor(x * y / denominator) with full precision. Throws if result overflows a uint256 or</span>
 119 |     | <span class='neutral'>     * denominator == 0.</span>
 120 |     | <span class='neutral'>     * @dev Original credit to Remco Bloemen under MIT license (https://xn--2-umb.com/21/muldiv) with further edits by</span>
 121 |     | <span class='neutral'>     * Uniswap Labs also under MIT license.</span>
 122 |     | <span class='neutral'>     */</span>
 123 | *   | <span class='executed'>    function mulDiv(uint256 x, uint256 y, uint256 denominator) internal pure returns (uint256 result) {</span>
 124 |     | <span class='neutral'>        unchecked {</span>
 125 |     | <span class='neutral'>            // 512-bit multiply [prod1 prod0] = x * y. Compute the product mod 2^256 and mod 2^256 - 1, then use</span>
 126 |     | <span class='neutral'>            // use the Chinese Remainder Theorem to reconstruct the 512 bit result. The result is stored in two 256</span>
 127 |     | <span class='neutral'>            // variables such that product = prod1 * 2^256 + prod0.</span>
 128 |     | <span class='neutral'>            uint256 prod0 = x * y; // Least significant 256 bits of the product</span>
 129 |     | <span class='neutral'>            uint256 prod1; // Most significant 256 bits of the product</span>
 130 | *   | <span class='executed'>            assembly {</span>
 131 |     | <span class='neutral'>                let mm := mulmod(x, y, not(0))</span>
 132 |     | <span class='neutral'>                prod1 := sub(sub(mm, prod0), lt(mm, prod0))</span>
 133 |     | <span class='neutral'>            }</span>
 134 |     | <span class='neutral'></span>
 135 |     | <span class='neutral'>            // Handle non-overflow cases, 256 by 256 division.</span>
 136 | *   | <span class='executed'>            if (prod1 == 0) {</span>
 137 |     | <span class='neutral'>                // Solidity will revert if denominator == 0, unlike the div opcode on its own.</span>
 138 |     | <span class='neutral'>                // The surrounding unchecked block does not change this fact.</span>
 139 |     | <span class='neutral'>                // See https://docs.soliditylang.org/en/latest/control-structures.html#checked-or-unchecked-arithmetic.</span>
 140 | *   | <span class='executed'>                return prod0 / denominator;</span>
 141 |     | <span class='neutral'>            }</span>
 142 |     | <span class='neutral'></span>
 143 |     | <span class='neutral'>            // Make sure the result is less than 2^256. Also prevents denominator == 0.</span>
 144 |     | <span class='unexecuted'>            if (denominator &lt;= prod1) {</span>
 145 |     | <span class='unexecuted'>                revert MathOverflowedMulDiv();</span>
 146 |     | <span class='neutral'>            }</span>
 147 |     | <span class='neutral'></span>
 148 |     | <span class='neutral'>            ///////////////////////////////////////////////</span>
 149 |     | <span class='neutral'>            // 512 by 256 division.</span>
 150 |     | <span class='neutral'>            ///////////////////////////////////////////////</span>
 151 |     | <span class='neutral'></span>
 152 |     | <span class='neutral'>            // Make division exact by subtracting the remainder from [prod1 prod0].</span>
 153 |     | <span class='neutral'>            uint256 remainder;</span>
 154 |     | <span class='unexecuted'>            assembly {</span>
 155 |     | <span class='neutral'>                // Compute remainder using mulmod.</span>
 156 |     | <span class='neutral'>                remainder := mulmod(x, y, denominator)</span>
 157 |     | <span class='neutral'></span>
 158 |     | <span class='neutral'>                // Subtract 256 bit number from 512 bit number.</span>
 159 |     | <span class='neutral'>                prod1 := sub(prod1, gt(remainder, prod0))</span>
 160 |     | <span class='neutral'>                prod0 := sub(prod0, remainder)</span>
 161 |     | <span class='neutral'>            }</span>
 162 |     | <span class='neutral'></span>
 163 |     | <span class='neutral'>            // Factor powers of two out of denominator and compute largest power of two divisor of denominator.</span>
 164 |     | <span class='neutral'>            // Always &gt;= 1. See https://cs.stackexchange.com/q/138556/92363.</span>
 165 |     | <span class='neutral'></span>
 166 |     | <span class='unexecuted'>            uint256 twos = denominator &amp; (0 - denominator);</span>
 167 |     | <span class='unexecuted'>            assembly {</span>
 168 |     | <span class='neutral'>                // Divide denominator by twos.</span>
 169 |     | <span class='neutral'>                denominator := div(denominator, twos)</span>
 170 |     | <span class='neutral'></span>
 171 |     | <span class='neutral'>                // Divide [prod1 prod0] by twos.</span>
 172 |     | <span class='neutral'>                prod0 := div(prod0, twos)</span>
 173 |     | <span class='neutral'></span>
 174 |     | <span class='neutral'>                // Flip twos such that it is 2^256 / twos. If twos is zero, then it becomes one.</span>
 175 |     | <span class='neutral'>                twos := add(div(sub(0, twos), twos), 1)</span>
 176 |     | <span class='neutral'>            }</span>
 177 |     | <span class='neutral'></span>
 178 |     | <span class='neutral'>            // Shift in bits from prod1 into prod0.</span>
 179 |     | <span class='unexecuted'>            prod0 |= prod1 * twos;</span>
 180 |     | <span class='neutral'></span>
 181 |     | <span class='neutral'>            // Invert denominator mod 2^256. Now that denominator is an odd number, it has an inverse modulo 2^256 such</span>
 182 |     | <span class='neutral'>            // that denominator * inv = 1 mod 2^256. Compute the inverse by starting with a seed that is correct for</span>
 183 |     | <span class='neutral'>            // four bits. That is, denominator * inv = 1 mod 2^4.</span>
 184 |     | <span class='unexecuted'>            uint256 inverse = (3 * denominator) ^ 2;</span>
 185 |     | <span class='neutral'></span>
 186 |     | <span class='neutral'>            // Use the Newton-Raphson iteration to improve the precision. Thanks to Hensel&#39;s lifting lemma, this also</span>
 187 |     | <span class='neutral'>            // works in modular arithmetic, doubling the correct bits in each step.</span>
 188 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^8</span>
 189 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^16</span>
 190 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^32</span>
 191 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^64</span>
 192 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^128</span>
 193 |     | <span class='neutral'>            inverse *= 2 - denominator * inverse; // inverse mod 2^256</span>
 194 |     | <span class='neutral'></span>
 195 |     | <span class='neutral'>            // Because the division is now exact we can divide by multiplying with the modular inverse of denominator.</span>
 196 |     | <span class='neutral'>            // This will give us the correct result modulo 2^256. Since the preconditions guarantee that the outcome is</span>
 197 |     | <span class='neutral'>            // less than 2^256, this is the final result. We don&#39;t need to compute the high bits of the result and prod1</span>
 198 |     | <span class='neutral'>            // is no longer required.</span>
 199 |     | <span class='neutral'>            result = prod0 * inverse;</span>
 200 |     | <span class='neutral'>            return result;</span>
 201 |     | <span class='neutral'>        }</span>
 202 |     | <span class='neutral'>    }</span>
 203 |     | <span class='neutral'></span>
 204 |     | <span class='neutral'>    /**</span>
 205 |     | <span class='neutral'>     * @notice Calculates x * y / denominator with full precision, following the selected rounding direction.</span>
 206 |     | <span class='neutral'>     */</span>
 207 |     | <span class='unexecuted'>    function mulDiv(uint256 x, uint256 y, uint256 denominator, Rounding rounding) internal pure returns (uint256) {</span>
 208 | *   | <span class='executed'>        uint256 result = mulDiv(x, y, denominator);</span>
 209 |     | <span class='unexecuted'>        if (unsignedRoundsUp(rounding) &amp;&amp; mulmod(x, y, denominator) &gt; 0) {</span>
 210 |     | <span class='neutral'>            result += 1;</span>
 211 |     | <span class='neutral'>        }</span>
 212 |     | <span class='neutral'>        return result;</span>
 213 |     | <span class='neutral'>    }</span>
 214 |     | <span class='neutral'></span>
 215 |     | <span class='neutral'>    /**</span>
 216 |     | <span class='neutral'>     * @dev Returns the square root of a number. If the number is not a perfect square, the value is rounded</span>
 217 |     | <span class='neutral'>     * towards zero.</span>
 218 |     | <span class='neutral'>     *</span>
 219 |     | <span class='neutral'>     * Inspired by Henry S. Warren, Jr.&#39;s &quot;Hacker&#39;s Delight&quot; (Chapter 11).</span>
 220 |     | <span class='neutral'>     */</span>
 221 |     | <span class='neutral'>    function sqrt(uint256 a) internal pure returns (uint256) {</span>
 222 |     | <span class='neutral'>        if (a == 0) {</span>
 223 |     | <span class='neutral'>            return 0;</span>
 224 |     | <span class='neutral'>        }</span>
 225 |     | <span class='neutral'></span>
 226 |     | <span class='neutral'>        // For our first guess, we get the biggest power of 2 which is smaller than the square root of the target.</span>
 227 |     | <span class='neutral'>        //</span>
 228 |     | <span class='neutral'>        // We know that the &quot;msb&quot; (most significant bit) of our target number `a` is a power of 2 such that we have</span>
 229 |     | <span class='neutral'>        // `msb(a) &lt;= a &lt; 2*msb(a)`. This value can be written `msb(a)=2**k` with `k=log2(a)`.</span>
 230 |     | <span class='neutral'>        //</span>
 231 |     | <span class='neutral'>        // This can be rewritten `2**log2(a) &lt;= a &lt; 2**(log2(a) + 1)`</span>
 232 |     | <span class='neutral'>        // → `sqrt(2**k) &lt;= sqrt(a) &lt; sqrt(2**(k+1))`</span>
 233 |     | <span class='neutral'>        // → `2**(k/2) &lt;= sqrt(a) &lt; 2**((k+1)/2) &lt;= 2**(k/2 + 1)`</span>
 234 |     | <span class='neutral'>        //</span>
 235 |     | <span class='neutral'>        // Consequently, `2**(log2(a) / 2)` is a good first approximation of `sqrt(a)` with at least 1 correct bit.</span>
 236 |     | <span class='neutral'>        uint256 result = 1 &lt;&lt; (log2(a) &gt;&gt; 1);</span>
 237 |     | <span class='neutral'></span>
 238 |     | <span class='neutral'>        // At this point `result` is an estimation with one bit of precision. We know the true value is a uint128,</span>
 239 |     | <span class='neutral'>        // since it is the square root of a uint256. Newton&#39;s method converges quadratically (precision doubles at</span>
 240 |     | <span class='neutral'>        // every iteration). We thus need at most 7 iteration to turn our partial result with one bit of precision</span>
 241 |     | <span class='neutral'>        // into the expected uint128 result.</span>
 242 |     | <span class='neutral'>        unchecked {</span>
 243 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 244 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 245 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 246 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 247 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 248 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 249 |     | <span class='neutral'>            result = (result + a / result) &gt;&gt; 1;</span>
 250 |     | <span class='neutral'>            return min(result, a / result);</span>
 251 |     | <span class='neutral'>        }</span>
 252 |     | <span class='neutral'>    }</span>
 253 |     | <span class='neutral'></span>
 254 |     | <span class='neutral'>    /**</span>
 255 |     | <span class='neutral'>     * @notice Calculates sqrt(a), following the selected rounding direction.</span>
 256 |     | <span class='neutral'>     */</span>
 257 |     | <span class='neutral'>    function sqrt(uint256 a, Rounding rounding) internal pure returns (uint256) {</span>
 258 |     | <span class='neutral'>        unchecked {</span>
 259 |     | <span class='neutral'>            uint256 result = sqrt(a);</span>
 260 |     | <span class='neutral'>            return result + (unsignedRoundsUp(rounding) &amp;&amp; result * result &lt; a ? 1 : 0);</span>
 261 |     | <span class='neutral'>        }</span>
 262 |     | <span class='neutral'>    }</span>
 263 |     | <span class='neutral'></span>
 264 |     | <span class='neutral'>    /**</span>
 265 |     | <span class='neutral'>     * @dev Return the log in base 2 of a positive value rounded towards zero.</span>
 266 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 267 |     | <span class='neutral'>     */</span>
 268 |     | <span class='neutral'>    function log2(uint256 value) internal pure returns (uint256) {</span>
 269 |     | <span class='neutral'>        uint256 result = 0;</span>
 270 |     | <span class='neutral'>        unchecked {</span>
 271 |     | <span class='neutral'>            if (value &gt;&gt; 128 &gt; 0) {</span>
 272 |     | <span class='neutral'>                value &gt;&gt;= 128;</span>
 273 |     | <span class='neutral'>                result += 128;</span>
 274 |     | <span class='neutral'>            }</span>
 275 |     | <span class='neutral'>            if (value &gt;&gt; 64 &gt; 0) {</span>
 276 |     | <span class='neutral'>                value &gt;&gt;= 64;</span>
 277 |     | <span class='neutral'>                result += 64;</span>
 278 |     | <span class='neutral'>            }</span>
 279 |     | <span class='neutral'>            if (value &gt;&gt; 32 &gt; 0) {</span>
 280 |     | <span class='neutral'>                value &gt;&gt;= 32;</span>
 281 |     | <span class='neutral'>                result += 32;</span>
 282 |     | <span class='neutral'>            }</span>
 283 |     | <span class='neutral'>            if (value &gt;&gt; 16 &gt; 0) {</span>
 284 |     | <span class='neutral'>                value &gt;&gt;= 16;</span>
 285 |     | <span class='neutral'>                result += 16;</span>
 286 |     | <span class='neutral'>            }</span>
 287 |     | <span class='neutral'>            if (value &gt;&gt; 8 &gt; 0) {</span>
 288 |     | <span class='neutral'>                value &gt;&gt;= 8;</span>
 289 |     | <span class='neutral'>                result += 8;</span>
 290 |     | <span class='neutral'>            }</span>
 291 |     | <span class='neutral'>            if (value &gt;&gt; 4 &gt; 0) {</span>
 292 |     | <span class='neutral'>                value &gt;&gt;= 4;</span>
 293 |     | <span class='neutral'>                result += 4;</span>
 294 |     | <span class='neutral'>            }</span>
 295 |     | <span class='neutral'>            if (value &gt;&gt; 2 &gt; 0) {</span>
 296 |     | <span class='neutral'>                value &gt;&gt;= 2;</span>
 297 |     | <span class='neutral'>                result += 2;</span>
 298 |     | <span class='neutral'>            }</span>
 299 |     | <span class='neutral'>            if (value &gt;&gt; 1 &gt; 0) {</span>
 300 |     | <span class='neutral'>                result += 1;</span>
 301 |     | <span class='neutral'>            }</span>
 302 |     | <span class='neutral'>        }</span>
 303 |     | <span class='neutral'>        return result;</span>
 304 |     | <span class='neutral'>    }</span>
 305 |     | <span class='neutral'></span>
 306 |     | <span class='neutral'>    /**</span>
 307 |     | <span class='neutral'>     * @dev Return the log in base 2, following the selected rounding direction, of a positive value.</span>
 308 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 309 |     | <span class='neutral'>     */</span>
 310 |     | <span class='neutral'>    function log2(uint256 value, Rounding rounding) internal pure returns (uint256) {</span>
 311 |     | <span class='neutral'>        unchecked {</span>
 312 |     | <span class='neutral'>            uint256 result = log2(value);</span>
 313 |     | <span class='neutral'>            return result + (unsignedRoundsUp(rounding) &amp;&amp; 1 &lt;&lt; result &lt; value ? 1 : 0);</span>
 314 |     | <span class='neutral'>        }</span>
 315 |     | <span class='neutral'>    }</span>
 316 |     | <span class='neutral'></span>
 317 |     | <span class='neutral'>    /**</span>
 318 |     | <span class='neutral'>     * @dev Return the log in base 10 of a positive value rounded towards zero.</span>
 319 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 320 |     | <span class='neutral'>     */</span>
 321 |     | <span class='neutral'>    function log10(uint256 value) internal pure returns (uint256) {</span>
 322 |     | <span class='neutral'>        uint256 result = 0;</span>
 323 |     | <span class='neutral'>        unchecked {</span>
 324 |     | <span class='neutral'>            if (value &gt;= 10 ** 64) {</span>
 325 |     | <span class='neutral'>                value /= 10 ** 64;</span>
 326 |     | <span class='neutral'>                result += 64;</span>
 327 |     | <span class='neutral'>            }</span>
 328 |     | <span class='neutral'>            if (value &gt;= 10 ** 32) {</span>
 329 |     | <span class='neutral'>                value /= 10 ** 32;</span>
 330 |     | <span class='neutral'>                result += 32;</span>
 331 |     | <span class='neutral'>            }</span>
 332 |     | <span class='neutral'>            if (value &gt;= 10 ** 16) {</span>
 333 |     | <span class='neutral'>                value /= 10 ** 16;</span>
 334 |     | <span class='neutral'>                result += 16;</span>
 335 |     | <span class='neutral'>            }</span>
 336 |     | <span class='neutral'>            if (value &gt;= 10 ** 8) {</span>
 337 |     | <span class='neutral'>                value /= 10 ** 8;</span>
 338 |     | <span class='neutral'>                result += 8;</span>
 339 |     | <span class='neutral'>            }</span>
 340 |     | <span class='neutral'>            if (value &gt;= 10 ** 4) {</span>
 341 |     | <span class='neutral'>                value /= 10 ** 4;</span>
 342 |     | <span class='neutral'>                result += 4;</span>
 343 |     | <span class='neutral'>            }</span>
 344 |     | <span class='neutral'>            if (value &gt;= 10 ** 2) {</span>
 345 |     | <span class='neutral'>                value /= 10 ** 2;</span>
 346 |     | <span class='neutral'>                result += 2;</span>
 347 |     | <span class='neutral'>            }</span>
 348 |     | <span class='neutral'>            if (value &gt;= 10 ** 1) {</span>
 349 |     | <span class='neutral'>                result += 1;</span>
 350 |     | <span class='neutral'>            }</span>
 351 |     | <span class='neutral'>        }</span>
 352 |     | <span class='neutral'>        return result;</span>
 353 |     | <span class='neutral'>    }</span>
 354 |     | <span class='neutral'></span>
 355 |     | <span class='neutral'>    /**</span>
 356 |     | <span class='neutral'>     * @dev Return the log in base 10, following the selected rounding direction, of a positive value.</span>
 357 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 358 |     | <span class='neutral'>     */</span>
 359 |     | <span class='neutral'>    function log10(uint256 value, Rounding rounding) internal pure returns (uint256) {</span>
 360 |     | <span class='neutral'>        unchecked {</span>
 361 |     | <span class='neutral'>            uint256 result = log10(value);</span>
 362 |     | <span class='neutral'>            return result + (unsignedRoundsUp(rounding) &amp;&amp; 10 ** result &lt; value ? 1 : 0);</span>
 363 |     | <span class='neutral'>        }</span>
 364 |     | <span class='neutral'>    }</span>
 365 |     | <span class='neutral'></span>
 366 |     | <span class='neutral'>    /**</span>
 367 |     | <span class='neutral'>     * @dev Return the log in base 256 of a positive value rounded towards zero.</span>
 368 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 369 |     | <span class='neutral'>     *</span>
 370 |     | <span class='neutral'>     * Adding one to the result gives the number of pairs of hex symbols needed to represent `value` as a hex string.</span>
 371 |     | <span class='neutral'>     */</span>
 372 |     | <span class='neutral'>    function log256(uint256 value) internal pure returns (uint256) {</span>
 373 |     | <span class='neutral'>        uint256 result = 0;</span>
 374 |     | <span class='neutral'>        unchecked {</span>
 375 |     | <span class='neutral'>            if (value &gt;&gt; 128 &gt; 0) {</span>
 376 |     | <span class='neutral'>                value &gt;&gt;= 128;</span>
 377 |     | <span class='neutral'>                result += 16;</span>
 378 |     | <span class='neutral'>            }</span>
 379 |     | <span class='neutral'>            if (value &gt;&gt; 64 &gt; 0) {</span>
 380 |     | <span class='neutral'>                value &gt;&gt;= 64;</span>
 381 |     | <span class='neutral'>                result += 8;</span>
 382 |     | <span class='neutral'>            }</span>
 383 |     | <span class='neutral'>            if (value &gt;&gt; 32 &gt; 0) {</span>
 384 |     | <span class='neutral'>                value &gt;&gt;= 32;</span>
 385 |     | <span class='neutral'>                result += 4;</span>
 386 |     | <span class='neutral'>            }</span>
 387 |     | <span class='neutral'>            if (value &gt;&gt; 16 &gt; 0) {</span>
 388 |     | <span class='neutral'>                value &gt;&gt;= 16;</span>
 389 |     | <span class='neutral'>                result += 2;</span>
 390 |     | <span class='neutral'>            }</span>
 391 |     | <span class='neutral'>            if (value &gt;&gt; 8 &gt; 0) {</span>
 392 |     | <span class='neutral'>                result += 1;</span>
 393 |     | <span class='neutral'>            }</span>
 394 |     | <span class='neutral'>        }</span>
 395 |     | <span class='neutral'>        return result;</span>
 396 |     | <span class='neutral'>    }</span>
 397 |     | <span class='neutral'></span>
 398 |     | <span class='neutral'>    /**</span>
 399 |     | <span class='neutral'>     * @dev Return the log in base 256, following the selected rounding direction, of a positive value.</span>
 400 |     | <span class='neutral'>     * Returns 0 if given 0.</span>
 401 |     | <span class='neutral'>     */</span>
 402 |     | <span class='neutral'>    function log256(uint256 value, Rounding rounding) internal pure returns (uint256) {</span>
 403 |     | <span class='neutral'>        unchecked {</span>
 404 |     | <span class='neutral'>            uint256 result = log256(value);</span>
 405 |     | <span class='neutral'>            return result + (unsignedRoundsUp(rounding) &amp;&amp; 1 &lt;&lt; (result &lt;&lt; 3) &lt; value ? 1 : 0);</span>
 406 |     | <span class='neutral'>        }</span>
 407 |     | <span class='neutral'>    }</span>
 408 |     | <span class='neutral'></span>
 409 |     | <span class='neutral'>    /**</span>
 410 |     | <span class='neutral'>     * @dev Returns whether a provided rounding mode is considered rounding up for unsigned integers.</span>
 411 |     | <span class='neutral'>     */</span>
 412 |     | <span class='neutral'>    function unsignedRoundsUp(Rounding rounding) internal pure returns (bool) {</span>
 413 |     | <span class='neutral'>        return uint8(rounding) % 2 == 1;</span>
 414 |     | <span class='neutral'>    }</span>
 415 |     | <span class='neutral'>}</span>
 416 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/lib/openzeppelin-contracts/contracts/utils/math/SignedMath.sol</b>
<code>
  1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
  2 |     | <span class='neutral'>// OpenZeppelin Contracts (last updated v5.0.0) (utils/math/SignedMath.sol)</span>
  3 |     | <span class='neutral'></span>
  4 |     | <span class='neutral'>pragma solidity ^0.8.20;</span>
  5 |     | <span class='neutral'></span>
  6 |     | <span class='neutral'>/**</span>
  7 |     | <span class='neutral'> * @dev Standard signed math utilities missing in the Solidity language.</span>
  8 |     | <span class='neutral'> */</span>
  9 |     | <span class='unexecuted'>library SignedMath {</span>
 10 |     | <span class='neutral'>    /**</span>
 11 |     | <span class='neutral'>     * @dev Returns the largest of two signed numbers.</span>
 12 |     | <span class='neutral'>     */</span>
 13 |     | <span class='neutral'>    function max(int256 a, int256 b) internal pure returns (int256) {</span>
 14 |     | <span class='neutral'>        return a &gt; b ? a : b;</span>
 15 |     | <span class='neutral'>    }</span>
 16 |     | <span class='neutral'></span>
 17 |     | <span class='neutral'>    /**</span>
 18 |     | <span class='neutral'>     * @dev Returns the smallest of two signed numbers.</span>
 19 |     | <span class='neutral'>     */</span>
 20 |     | <span class='neutral'>    function min(int256 a, int256 b) internal pure returns (int256) {</span>
 21 |     | <span class='neutral'>        return a &lt; b ? a : b;</span>
 22 |     | <span class='neutral'>    }</span>
 23 |     | <span class='neutral'></span>
 24 |     | <span class='neutral'>    /**</span>
 25 |     | <span class='neutral'>     * @dev Returns the average of two signed numbers without overflow.</span>
 26 |     | <span class='neutral'>     * The result is rounded towards zero.</span>
 27 |     | <span class='neutral'>     */</span>
 28 |     | <span class='neutral'>    function average(int256 a, int256 b) internal pure returns (int256) {</span>
 29 |     | <span class='neutral'>        // Formula from the book &quot;Hacker&#39;s Delight&quot;</span>
 30 |     | <span class='neutral'>        int256 x = (a &amp; b) + ((a ^ b) &gt;&gt; 1);</span>
 31 |     | <span class='neutral'>        return x + (int256(uint256(x) &gt;&gt; 255) &amp; (a ^ b));</span>
 32 |     | <span class='neutral'>    }</span>
 33 |     | <span class='neutral'></span>
 34 |     | <span class='neutral'>    /**</span>
 35 |     | <span class='neutral'>     * @dev Returns the absolute unsigned value of a signed value.</span>
 36 |     | <span class='neutral'>     */</span>
 37 |     | <span class='neutral'>    function abs(int256 n) internal pure returns (uint256) {</span>
 38 |     | <span class='neutral'>        unchecked {</span>
 39 |     | <span class='neutral'>            // must be unchecked in order to support `n = type(int256).min`</span>
 40 |     | <span class='neutral'>            return uint256(n &gt;= 0 ? n : -n);</span>
 41 |     | <span class='neutral'>        }</span>
 42 |     | <span class='neutral'>    }</span>
 43 |     | <span class='neutral'>}</span>
 44 |     | <span class='neutral'></span>

</code>
<br />

<b>/code/test/echidna/Echidna_SpokeYieldVaultProps.sol</b>
<code>
   1 |     | <span class='neutral'>// SPDX-License-Identifier: MIT</span>
   2 |     | <span class='neutral'>pragma solidity ^0.8.24;</span>
   3 |     | <span class='neutral'></span>
   4 |     | <span class='neutral'>import {SpokeYieldVault} from &quot;contracts/spoke/SpokeYieldVault.sol&quot;;</span>
   5 |     | <span class='neutral'>import {IERC20} from &quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;;</span>
   6 |     | <span class='neutral'>import {SuperchainERC20} from &quot;contracts/tokens/SuperchainERC20.sol&quot;;</span>
   7 |     | <span class='neutral'>import {AdapterRegistry} from &quot;contracts/strategy/AdapterRegistry.sol&quot;;</span>
   8 |     | <span class='neutral'></span>
   9 |     | <span class='neutral'>// Minimal ERC20 implementation for underlying asset compatible with ERC4626</span>
  10 | *   | <span class='executed'>contract ERC20MiniFull {</span>
  11 | *   | <span class='executed'>    string public name = &quot;Asset&quot;;</span>
  12 | *   | <span class='executed'>    string public symbol = &quot;AST&quot;;</span>
  13 | *   | <span class='executed'>    uint8 public immutable decimals = 18;</span>
  14 |     | <span class='unexecuted'>    uint256 public totalSupply;</span>
  15 | *   | <span class='executed'>    mapping(address =&gt; uint256) public balanceOf;</span>
  16 |     | <span class='neutral'>    mapping(address =&gt; mapping(address =&gt; uint256)) public allowance;</span>
  17 |     | <span class='neutral'></span>
  18 |     | <span class='neutral'>    event Transfer(address indexed from, address indexed to, uint256 value);</span>
  19 |     | <span class='neutral'>    event Approval(address indexed owner, address indexed spender, uint256 value);</span>
  20 |     | <span class='neutral'></span>
  21 |     | <span class='neutral'>    function approve(address spender, uint256 value) external returns (bool) {</span>
  22 | *   | <span class='executed'>        allowance[msg.sender][spender] = value;</span>
  23 | *   | <span class='executed'>        emit Approval(msg.sender, spender, value);</span>
  24 |     | <span class='neutral'>        return true;</span>
  25 |     | <span class='neutral'>    }</span>
  26 |     | <span class='neutral'></span>
  27 |     | <span class='neutral'>    function transfer(address to, uint256 value) external returns (bool) {</span>
  28 | *   | <span class='executed'>        _transfer(msg.sender, to, value);</span>
  29 |     | <span class='neutral'>        return true;</span>
  30 |     | <span class='neutral'>    }</span>
  31 |     | <span class='neutral'></span>
  32 |     | <span class='neutral'>    function transferFrom(address from, address to, uint256 value) external returns (bool) {</span>
  33 | *   | <span class='executed'>        uint256 a = allowance[from][msg.sender];</span>
  34 | *   | <span class='executed'>        require(a &gt;= value, &quot;ALLOW&quot;);</span>
  35 |     | <span class='neutral'>        unchecked { allowance[from][msg.sender] = a - value; }</span>
  36 | *   | <span class='executed'>        _transfer(from, to, value);</span>
  37 |     | <span class='neutral'>        return true;</span>
  38 |     | <span class='neutral'>    }</span>
  39 |     | <span class='neutral'></span>
  40 | *   | <span class='executed'>    function _transfer(address from, address to, uint256 value) internal {</span>
  41 | *   | <span class='executed'>        require(balanceOf[from] &gt;= value, &quot;BAL&quot;);</span>
  42 |     | <span class='neutral'>        unchecked { balanceOf[from] -= value; balanceOf[to] += value; }</span>
  43 | *   | <span class='executed'>        emit Transfer(from, to, value);</span>
  44 |     | <span class='neutral'>    }</span>
  45 |     | <span class='neutral'></span>
  46 |     | <span class='neutral'>    function mint(address to, uint256 value) external {</span>
  47 | *   | <span class='executed'>        totalSupply += value;</span>
  48 | *   | <span class='executed'>        balanceOf[to] += value;</span>
  49 | *   | <span class='executed'>        emit Transfer(address(0), to, value);</span>
  50 |     | <span class='neutral'>    }</span>
  51 |     | <span class='neutral'></span>
  52 |     | <span class='neutral'>    function burn(address from, uint256 value) external {</span>
  53 |     | <span class='unexecuted'>        require(balanceOf[from] &gt;= value, &quot;BAL&quot;);</span>
  54 |     | <span class='unexecuted'>        unchecked { balanceOf[from] -= value; totalSupply -= value; }</span>
  55 |     | <span class='unexecuted'>        emit Transfer(from, address(0), value);</span>
  56 |     | <span class='neutral'>    }</span>
  57 |     | <span class='neutral'>}</span>
  58 |     | <span class='neutral'></span>
  59 |     | <span class='neutral'>// Echidna harness for SpokeYieldVault</span>
  60 | *r  | <span class='executed'>contract Echidna_SpokeYieldVaultProps {</span>
  61 |     | <span class='neutral'>    SpokeYieldVault public vault;</span>
  62 |     | <span class='neutral'>    ERC20MiniFull public asset;</span>
  63 | *   | <span class='executed'>    SuperchainERC20 public lst;</span>
  64 |     | <span class='unexecuted'>    AdapterRegistry public registry;</span>
  65 |     | <span class='neutral'></span>
  66 |     | <span class='neutral'>    constructor() {</span>
  67 | *   | <span class='executed'>        asset = new ERC20MiniFull();</span>
  68 | *   | <span class='executed'>        lst = new SuperchainERC20(&quot;LST&quot;, &quot;LST&quot;);</span>
  69 | *   | <span class='executed'>        registry = new AdapterRegistry();</span>
  70 | *   | <span class='executed'>        registry.initialize(address(this));</span>
  71 |     | <span class='neutral'></span>
  72 | *   | <span class='executed'>        vault = new SpokeYieldVault();</span>
  73 | *   | <span class='executed'>        vault.initialize(</span>
  74 |     | <span class='neutral'>            IERC20(address(asset)),</span>
  75 |     | <span class='neutral'>            &quot;Spoke Vault&quot;,</span>
  76 |     | <span class='neutral'>            &quot;SV&quot;,</span>
  77 |     | <span class='neutral'>            address(this), // hub</span>
  78 |     | <span class='neutral'>            address(this), // governor</span>
  79 |     | <span class='neutral'>            address(this), // rebalancer</span>
  80 |     | <span class='neutral'>            address(registry),</span>
  81 |     | <span class='neutral'>            address(this), // feeRecipient</span>
  82 |     | <span class='neutral'>            0, // performanceFeeBps</span>
  83 |     | <span class='neutral'>            address(lst)</span>
  84 |     | <span class='neutral'>        );</span>
  85 |     | <span class='neutral'>        // Allow vault to mint/burn LST</span>
  86 | *   | <span class='executed'>        lst.grantMinter(address(vault));</span>
  87 |     | <span class='neutral'>    }</span>
  88 |     | <span class='neutral'></span>
  89 |     | <span class='neutral'>    // Helpers for Echidna to move tokens/approve</span>
  90 |     | <span class='neutral'>    function gift(uint256 amt) public {</span>
  91 | *   | <span class='executed'>        uint256 a = amt % (1_000_000 ether);</span>
  92 | *   | <span class='executed'>        asset.mint(msg.sender, a);</span>
  93 |     | <span class='neutral'>        // approve large allowance for vault</span>
  94 |     | <span class='neutral'>        // use max to keep approvals sticky</span>
  95 | *   | <span class='executed'>        asset.approve(address(vault), type(uint256).max);</span>
  96 |     | <span class='neutral'>    }</span>
  97 |     | <span class='neutral'></span>
  98 |     | <span class='neutral'>    function deposit(uint256 amt) public {</span>
  99 | *   | <span class='executed'>        uint256 a = amt % (100_000 ether);</span>
 100 | *   | <span class='executed'>        try vault.deposit(a, msg.sender) { } catch { }</span>
 101 |     | <span class='neutral'>    }</span>
 102 |     | <span class='neutral'></span>
 103 |     | <span class='neutral'>    function redeem(uint256 shares) public {</span>
 104 | *   | <span class='executed'>        uint256 s = shares % (100_000 ether);</span>
 105 | *   | <span class='executed'>        try vault.redeem(s, msg.sender, msg.sender) { } catch { }</span>
 106 |     | <span class='neutral'>    }</span>
 107 |     | <span class='neutral'></span>
 108 |     | <span class='neutral'>    // Governor wrappers</span>
 109 |     | <span class='neutral'>    function setFlags(bool d, bool b, bool br) public {</span>
 110 |     | <span class='neutral'>        // governor-only; harness is governor</span>
 111 | *   | <span class='executed'>        try vault.setFlags(d, b, br) { } catch { }</span>
 112 |     | <span class='neutral'>    }</span>
 113 |     | <span class='neutral'></span>
 114 |     | <span class='neutral'>    function setWithdrawalBufferBps(uint16 bps) public {</span>
 115 | *   | <span class='executed'>        try vault.setWithdrawalBufferBps(bps) { } catch { }</span>
 116 |     | <span class='neutral'>    }</span>
 117 |     | <span class='neutral'></span>
 118 |     | <span class='neutral'>    function setEpochOutflowConfig(uint16 capBps, uint64 len) public {</span>
 119 | *   | <span class='executed'>        try vault.setEpochOutflowConfig(capBps, len) { } catch { }</span>
 120 |     | <span class='neutral'>    }</span>
 121 |     | <span class='neutral'></span>
 122 |     | <span class='neutral'>    // Properties</span>
 123 |     | <span class='neutral'>    function echidna_buffer_bps_valid() public view returns (bool) {</span>
 124 | *   | <span class='executed'>        return vault.withdrawalBufferBps() &lt;= 10_000;</span>
 125 |     | <span class='neutral'>    }</span>
 126 |     | <span class='neutral'></span>
 127 |     | <span class='neutral'>    function echidna_epoch_cap_bps_valid() public view returns (bool) {</span>
 128 | *   | <span class='executed'>        return vault.epochOutflowCapBps() &lt;= 10_000;</span>
 129 |     | <span class='neutral'>    }</span>
 130 |     | <span class='neutral'></span>
 131 |     | <span class='neutral'>    function echidna_deposit_respects_flag() public returns (bool) {</span>
 132 |     | <span class='neutral'>        // disable deposits; attempt to deposit; expect no successful increase</span>
 133 |     | <span class='neutral'>        // snapshot supplies</span>
 134 | *   | <span class='executed'>        uint256 beforeShares = vault.balanceOf(address(this));</span>
 135 |     | <span class='unexecuted'>        try vault.setFlags(false, false, true) { } catch { }</span>
 136 |     | <span class='neutral'>        // try to deposit from harness</span>
 137 |     | <span class='unexecuted'>        try vault.deposit(1 ether, address(this)) { } catch { }</span>
 138 |     | <span class='neutral'>        // re-enable for future sequences</span>
 139 |     | <span class='unexecuted'>        try vault.setFlags(true, false, true) { } catch { }</span>
 140 |     | <span class='neutral'>        // if shares increased while deposits disabled, fail</span>
 141 |     | <span class='unexecuted'>        return vault.balanceOf(address(this)) &lt;= beforeShares;</span>
 142 |     | <span class='neutral'>    }</span>
 143 |     | <span class='neutral'>}</span>
 144 |     | <span class='neutral'></span>

</code>
<br />

